import{bZ as Nm,c2 as Ds,b_ as Tn,c1 as ti,cI as mr,c4 as qd,cL as Rm}from"./vendor-d591a884.js";import{e as qr,N as Tu}from"./events-b1394630.js";import{s as Cu,a as Nu,d as Ru,f as Jo,g as Uu,c as Um,b as Xo,e as Bd,h as $u}from"./index-93ec8476.js";let $m=class{};class Fm extends $m{constructor(){super()}}class jm extends Fm{constructor(e){super()}}const Lm="^https?:",Mm="^wss?:";function qm(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function zd(n,e){const t=qm(n);return typeof t>"u"?!1:new RegExp(e).test(t)}function ol(n){return zd(n,Lm)}function al(n){return zd(n,Mm)}function Bm(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function Hd(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function Fu(n){return Hd(n)&&"method"in n}function Qo(n){return Hd(n)&&(_n(n)||Wr(n))}function _n(n){return"result"in n}function Wr(n){return"error"in n}var ju={},Zo={},Fe={},Kd={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(l,m){var _=l>>>16&65535,D=l&65535,A=m>>>16&65535,P=m&65535;return D*P+(_*P+D*A<<16>>>0)|0}n.mul=Math.imul||e;function t(l,m){return l+m|0}n.add=t;function s(l,m){return l-m|0}n.sub=s;function o(l,m){return l<<m|l>>>32-m}n.rotl=o;function c(l,m){return l<<32-m|l>>>m}n.rotr=c;function f(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l}n.isInteger=Number.isInteger||f,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(l){return n.isInteger(l)&&l>=-n.MAX_SAFE_INTEGER&&l<=n.MAX_SAFE_INTEGER}})(Kd);Object.defineProperty(Fe,"__esModule",{value:!0});var Vd=Kd;function zm(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])<<16>>16}Fe.readInt16BE=zm;function Hm(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])>>>0}Fe.readUint16BE=Hm;function Km(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])<<16>>16}Fe.readInt16LE=Km;function Vm(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])>>>0}Fe.readUint16LE=Vm;function kd(n,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=n>>>8,e[t+1]=n>>>0,e}Fe.writeUint16BE=kd;Fe.writeInt16BE=kd;function Wd(n,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=n>>>0,e[t+1]=n>>>8,e}Fe.writeUint16LE=Wd;Fe.writeInt16LE=Wd;function eu(n,e){return e===void 0&&(e=0),n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}Fe.readInt32BE=eu;function tu(n,e){return e===void 0&&(e=0),(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}Fe.readUint32BE=tu;function ru(n,e){return e===void 0&&(e=0),n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]}Fe.readInt32LE=ru;function nu(n,e){return e===void 0&&(e=0),(n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e])>>>0}Fe.readUint32LE=nu;function zo(n,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=n>>>24,e[t+1]=n>>>16,e[t+2]=n>>>8,e[t+3]=n>>>0,e}Fe.writeUint32BE=zo;Fe.writeInt32BE=zo;function Ho(n,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=n>>>0,e[t+1]=n>>>8,e[t+2]=n>>>16,e[t+3]=n>>>24,e}Fe.writeUint32LE=Ho;Fe.writeInt32LE=Ho;function km(n,e){e===void 0&&(e=0);var t=eu(n,e),s=eu(n,e+4);return t*4294967296+s-(s>>31)*4294967296}Fe.readInt64BE=km;function Wm(n,e){e===void 0&&(e=0);var t=tu(n,e),s=tu(n,e+4);return t*4294967296+s}Fe.readUint64BE=Wm;function Gm(n,e){e===void 0&&(e=0);var t=ru(n,e),s=ru(n,e+4);return s*4294967296+t-(t>>31)*4294967296}Fe.readInt64LE=Gm;function Ym(n,e){e===void 0&&(e=0);var t=nu(n,e),s=nu(n,e+4);return s*4294967296+t}Fe.readUint64LE=Ym;function Gd(n,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),zo(n/4294967296>>>0,e,t),zo(n>>>0,e,t+4),e}Fe.writeUint64BE=Gd;Fe.writeInt64BE=Gd;function Yd(n,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Ho(n>>>0,e,t),Ho(n/4294967296>>>0,e,t+4),e}Fe.writeUint64LE=Yd;Fe.writeInt64LE=Yd;function Jm(n,e,t){if(t===void 0&&(t=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,c=n/8+t-1;c>=t;c--)s+=e[c]*o,o*=256;return s}Fe.readUintBE=Jm;function Xm(n,e,t){if(t===void 0&&(t=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,c=t;c<t+n/8;c++)s+=e[c]*o,o*=256;return s}Fe.readUintLE=Xm;function Qm(n,e,t,s){if(t===void 0&&(t=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Vd.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,c=n/8+s-1;c>=s;c--)t[c]=e/o&255,o*=256;return t}Fe.writeUintBE=Qm;function Zm(n,e,t,s){if(t===void 0&&(t=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Vd.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,c=s;c<s+n/8;c++)t[c]=e/o&255,o*=256;return t}Fe.writeUintLE=Zm;function eb(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat32(e)}Fe.readFloat32BE=eb;function tb(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat32(e,!0)}Fe.readFloat32LE=tb;function rb(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat64(e)}Fe.readFloat64BE=rb;function nb(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat64(e,!0)}Fe.readFloat64LE=nb;function ib(n,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,n),e}Fe.writeFloat32BE=ib;function sb(n,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,n,!0),e}Fe.writeFloat32LE=sb;function ob(n,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,n),e}Fe.writeFloat64BE=ob;function ab(n,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,n,!0),e}Fe.writeFloat64LE=ab;var xr={};Object.defineProperty(xr,"__esModule",{value:!0});function cb(n){for(var e=0;e<n.length;e++)n[e]=0;return n}xr.wipe=cb;Object.defineProperty(Zo,"__esModule",{value:!0});var tr=Fe,iu=xr,ub=20;function hb(n,e,t){for(var s=1634760805,o=857760878,c=2036477234,f=1797285236,l=t[3]<<24|t[2]<<16|t[1]<<8|t[0],m=t[7]<<24|t[6]<<16|t[5]<<8|t[4],_=t[11]<<24|t[10]<<16|t[9]<<8|t[8],D=t[15]<<24|t[14]<<16|t[13]<<8|t[12],A=t[19]<<24|t[18]<<16|t[17]<<8|t[16],P=t[23]<<24|t[22]<<16|t[21]<<8|t[20],C=t[27]<<24|t[26]<<16|t[25]<<8|t[24],R=t[31]<<24|t[30]<<16|t[29]<<8|t[28],B=e[3]<<24|e[2]<<16|e[1]<<8|e[0],M=e[7]<<24|e[6]<<16|e[5]<<8|e[4],ee=e[11]<<24|e[10]<<16|e[9]<<8|e[8],p=e[15]<<24|e[14]<<16|e[13]<<8|e[12],E=s,v=o,w=c,g=f,u=l,b=m,K=_,G=D,se=A,ce=P,de=C,I=R,N=B,te=M,X=ee,k=p,W=0;W<ub;W+=2)E=E+u|0,N^=E,N=N>>>32-16|N<<16,se=se+N|0,u^=se,u=u>>>32-12|u<<12,v=v+b|0,te^=v,te=te>>>32-16|te<<16,ce=ce+te|0,b^=ce,b=b>>>32-12|b<<12,w=w+K|0,X^=w,X=X>>>32-16|X<<16,de=de+X|0,K^=de,K=K>>>32-12|K<<12,g=g+G|0,k^=g,k=k>>>32-16|k<<16,I=I+k|0,G^=I,G=G>>>32-12|G<<12,w=w+K|0,X^=w,X=X>>>32-8|X<<8,de=de+X|0,K^=de,K=K>>>32-7|K<<7,g=g+G|0,k^=g,k=k>>>32-8|k<<8,I=I+k|0,G^=I,G=G>>>32-7|G<<7,v=v+b|0,te^=v,te=te>>>32-8|te<<8,ce=ce+te|0,b^=ce,b=b>>>32-7|b<<7,E=E+u|0,N^=E,N=N>>>32-8|N<<8,se=se+N|0,u^=se,u=u>>>32-7|u<<7,E=E+b|0,k^=E,k=k>>>32-16|k<<16,de=de+k|0,b^=de,b=b>>>32-12|b<<12,v=v+K|0,N^=v,N=N>>>32-16|N<<16,I=I+N|0,K^=I,K=K>>>32-12|K<<12,w=w+G|0,te^=w,te=te>>>32-16|te<<16,se=se+te|0,G^=se,G=G>>>32-12|G<<12,g=g+u|0,X^=g,X=X>>>32-16|X<<16,ce=ce+X|0,u^=ce,u=u>>>32-12|u<<12,w=w+G|0,te^=w,te=te>>>32-8|te<<8,se=se+te|0,G^=se,G=G>>>32-7|G<<7,g=g+u|0,X^=g,X=X>>>32-8|X<<8,ce=ce+X|0,u^=ce,u=u>>>32-7|u<<7,v=v+K|0,N^=v,N=N>>>32-8|N<<8,I=I+N|0,K^=I,K=K>>>32-7|K<<7,E=E+b|0,k^=E,k=k>>>32-8|k<<8,de=de+k|0,b^=de,b=b>>>32-7|b<<7;tr.writeUint32LE(E+s|0,n,0),tr.writeUint32LE(v+o|0,n,4),tr.writeUint32LE(w+c|0,n,8),tr.writeUint32LE(g+f|0,n,12),tr.writeUint32LE(u+l|0,n,16),tr.writeUint32LE(b+m|0,n,20),tr.writeUint32LE(K+_|0,n,24),tr.writeUint32LE(G+D|0,n,28),tr.writeUint32LE(se+A|0,n,32),tr.writeUint32LE(ce+P|0,n,36),tr.writeUint32LE(de+C|0,n,40),tr.writeUint32LE(I+R|0,n,44),tr.writeUint32LE(N+B|0,n,48),tr.writeUint32LE(te+M|0,n,52),tr.writeUint32LE(X+ee|0,n,56),tr.writeUint32LE(k+p|0,n,60)}function Jd(n,e,t,s,o){if(o===void 0&&(o=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<t.length)throw new Error("ChaCha: destination is shorter than source");var c,f;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),f=c.length-e.length,c.set(e,f)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,f=o}for(var l=new Uint8Array(64),m=0;m<t.length;m+=64){hb(l,c,n);for(var _=m;_<m+64&&_<t.length;_++)s[_]=t[_]^l[_-m];lb(c,0,f)}return iu.wipe(l),o===0&&iu.wipe(c),s}Zo.streamXOR=Jd;function fb(n,e,t,s){return s===void 0&&(s=0),iu.wipe(t),Jd(n,e,t,t,s)}Zo.stream=fb;function lb(n,e,t){for(var s=1;t--;)s=s+(n[e]&255)|0,n[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var Xd={},Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});function db(n,e,t){return~(n-1)&e|n-1&t}Rn.select=db;function pb(n,e){return(n|0)-(e|0)-1>>>31&1}Rn.lessOrEqual=pb;function Qd(n,e){if(n.length!==e.length)return 0;for(var t=0,s=0;s<n.length;s++)t|=n[s]^e[s];return 1&t-1>>>8}Rn.compare=Qd;function gb(n,e){return n.length===0||e.length===0?!1:Qd(n,e)!==0}Rn.equal=gb;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Rn,t=xr;n.DIGEST_LENGTH=16;var s=function(){function f(l){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var m=l[0]|l[1]<<8;this._r[0]=m&8191;var _=l[2]|l[3]<<8;this._r[1]=(m>>>13|_<<3)&8191;var D=l[4]|l[5]<<8;this._r[2]=(_>>>10|D<<6)&7939;var A=l[6]|l[7]<<8;this._r[3]=(D>>>7|A<<9)&8191;var P=l[8]|l[9]<<8;this._r[4]=(A>>>4|P<<12)&255,this._r[5]=P>>>1&8190;var C=l[10]|l[11]<<8;this._r[6]=(P>>>14|C<<2)&8191;var R=l[12]|l[13]<<8;this._r[7]=(C>>>11|R<<5)&8065;var B=l[14]|l[15]<<8;this._r[8]=(R>>>8|B<<8)&8191,this._r[9]=B>>>5&127,this._pad[0]=l[16]|l[17]<<8,this._pad[1]=l[18]|l[19]<<8,this._pad[2]=l[20]|l[21]<<8,this._pad[3]=l[22]|l[23]<<8,this._pad[4]=l[24]|l[25]<<8,this._pad[5]=l[26]|l[27]<<8,this._pad[6]=l[28]|l[29]<<8,this._pad[7]=l[30]|l[31]<<8}return f.prototype._blocks=function(l,m,_){for(var D=this._fin?0:2048,A=this._h[0],P=this._h[1],C=this._h[2],R=this._h[3],B=this._h[4],M=this._h[5],ee=this._h[6],p=this._h[7],E=this._h[8],v=this._h[9],w=this._r[0],g=this._r[1],u=this._r[2],b=this._r[3],K=this._r[4],G=this._r[5],se=this._r[6],ce=this._r[7],de=this._r[8],I=this._r[9];_>=16;){var N=l[m+0]|l[m+1]<<8;A+=N&8191;var te=l[m+2]|l[m+3]<<8;P+=(N>>>13|te<<3)&8191;var X=l[m+4]|l[m+5]<<8;C+=(te>>>10|X<<6)&8191;var k=l[m+6]|l[m+7]<<8;R+=(X>>>7|k<<9)&8191;var W=l[m+8]|l[m+9]<<8;B+=(k>>>4|W<<12)&8191,M+=W>>>1&8191;var J=l[m+10]|l[m+11]<<8;ee+=(W>>>14|J<<2)&8191;var ne=l[m+12]|l[m+13]<<8;p+=(J>>>11|ne<<5)&8191;var be=l[m+14]|l[m+15]<<8;E+=(ne>>>8|be<<8)&8191,v+=be>>>5|D;var oe=0,we=oe;we+=A*w,we+=P*(5*I),we+=C*(5*de),we+=R*(5*ce),we+=B*(5*se),oe=we>>>13,we&=8191,we+=M*(5*G),we+=ee*(5*K),we+=p*(5*b),we+=E*(5*u),we+=v*(5*g),oe+=we>>>13,we&=8191;var fe=oe;fe+=A*g,fe+=P*w,fe+=C*(5*I),fe+=R*(5*de),fe+=B*(5*ce),oe=fe>>>13,fe&=8191,fe+=M*(5*se),fe+=ee*(5*G),fe+=p*(5*K),fe+=E*(5*b),fe+=v*(5*u),oe+=fe>>>13,fe&=8191;var ve=oe;ve+=A*u,ve+=P*g,ve+=C*w,ve+=R*(5*I),ve+=B*(5*de),oe=ve>>>13,ve&=8191,ve+=M*(5*ce),ve+=ee*(5*se),ve+=p*(5*G),ve+=E*(5*K),ve+=v*(5*b),oe+=ve>>>13,ve&=8191;var H=oe;H+=A*b,H+=P*u,H+=C*g,H+=R*w,H+=B*(5*I),oe=H>>>13,H&=8191,H+=M*(5*de),H+=ee*(5*ce),H+=p*(5*se),H+=E*(5*G),H+=v*(5*K),oe+=H>>>13,H&=8191;var z=oe;z+=A*K,z+=P*b,z+=C*u,z+=R*g,z+=B*w,oe=z>>>13,z&=8191,z+=M*(5*I),z+=ee*(5*de),z+=p*(5*ce),z+=E*(5*se),z+=v*(5*G),oe+=z>>>13,z&=8191;var F=oe;F+=A*G,F+=P*K,F+=C*b,F+=R*u,F+=B*g,oe=F>>>13,F&=8191,F+=M*w,F+=ee*(5*I),F+=p*(5*de),F+=E*(5*ce),F+=v*(5*se),oe+=F>>>13,F&=8191;var d=oe;d+=A*se,d+=P*G,d+=C*K,d+=R*b,d+=B*u,oe=d>>>13,d&=8191,d+=M*g,d+=ee*w,d+=p*(5*I),d+=E*(5*de),d+=v*(5*ce),oe+=d>>>13,d&=8191;var U=oe;U+=A*ce,U+=P*se,U+=C*G,U+=R*K,U+=B*b,oe=U>>>13,U&=8191,U+=M*u,U+=ee*g,U+=p*w,U+=E*(5*I),U+=v*(5*de),oe+=U>>>13,U&=8191;var ae=oe;ae+=A*de,ae+=P*ce,ae+=C*se,ae+=R*G,ae+=B*K,oe=ae>>>13,ae&=8191,ae+=M*b,ae+=ee*u,ae+=p*g,ae+=E*w,ae+=v*(5*I),oe+=ae>>>13,ae&=8191;var le=oe;le+=A*I,le+=P*de,le+=C*ce,le+=R*se,le+=B*G,oe=le>>>13,le&=8191,le+=M*K,le+=ee*b,le+=p*u,le+=E*g,le+=v*w,oe+=le>>>13,le&=8191,oe=(oe<<2)+oe|0,oe=oe+we|0,we=oe&8191,oe=oe>>>13,fe+=oe,A=we,P=fe,C=ve,R=H,B=z,M=F,ee=d,p=U,E=ae,v=le,m+=16,_-=16}this._h[0]=A,this._h[1]=P,this._h[2]=C,this._h[3]=R,this._h[4]=B,this._h[5]=M,this._h[6]=ee,this._h[7]=p,this._h[8]=E,this._h[9]=v},f.prototype.finish=function(l,m){m===void 0&&(m=0);var _=new Uint16Array(10),D,A,P,C;if(this._leftover){for(C=this._leftover,this._buffer[C++]=1;C<16;C++)this._buffer[C]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(D=this._h[1]>>>13,this._h[1]&=8191,C=2;C<10;C++)this._h[C]+=D,D=this._h[C]>>>13,this._h[C]&=8191;for(this._h[0]+=D*5,D=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=D,D=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=D,_[0]=this._h[0]+5,D=_[0]>>>13,_[0]&=8191,C=1;C<10;C++)_[C]=this._h[C]+D,D=_[C]>>>13,_[C]&=8191;for(_[9]-=8192,A=(D^1)-1,C=0;C<10;C++)_[C]&=A;for(A=~A,C=0;C<10;C++)this._h[C]=this._h[C]&A|_[C];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,P=this._h[0]+this._pad[0],this._h[0]=P&65535,C=1;C<8;C++)P=(this._h[C]+this._pad[C]|0)+(P>>>16)|0,this._h[C]=P&65535;return l[m+0]=this._h[0]>>>0,l[m+1]=this._h[0]>>>8,l[m+2]=this._h[1]>>>0,l[m+3]=this._h[1]>>>8,l[m+4]=this._h[2]>>>0,l[m+5]=this._h[2]>>>8,l[m+6]=this._h[3]>>>0,l[m+7]=this._h[3]>>>8,l[m+8]=this._h[4]>>>0,l[m+9]=this._h[4]>>>8,l[m+10]=this._h[5]>>>0,l[m+11]=this._h[5]>>>8,l[m+12]=this._h[6]>>>0,l[m+13]=this._h[6]>>>8,l[m+14]=this._h[7]>>>0,l[m+15]=this._h[7]>>>8,this._finished=!0,this},f.prototype.update=function(l){var m=0,_=l.length,D;if(this._leftover){D=16-this._leftover,D>_&&(D=_);for(var A=0;A<D;A++)this._buffer[this._leftover+A]=l[m+A];if(_-=D,m+=D,this._leftover+=D,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(_>=16&&(D=_-_%16,this._blocks(l,m,D),m+=D,_-=D),_){for(var A=0;A<_;A++)this._buffer[this._leftover+A]=l[m+A];this._leftover+=_}return this},f.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var l=new Uint8Array(16);return this.finish(l),l},f.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},f}();n.Poly1305=s;function o(f,l){var m=new s(f);m.update(l);var _=m.digest();return m.clean(),_}n.oneTimeAuth=o;function c(f,l){return f.length!==n.DIGEST_LENGTH||l.length!==n.DIGEST_LENGTH?!1:e.equal(f,l)}n.equal=c})(Xd);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Zo,t=Xd,s=xr,o=Fe,c=Rn;n.KEY_LENGTH=32,n.NONCE_LENGTH=12,n.TAG_LENGTH=16;var f=new Uint8Array(16),l=function(){function m(_){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,_.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(_)}return m.prototype.seal=function(_,D,A,P){if(_.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var C=new Uint8Array(16);C.set(_,C.length-_.length);var R=new Uint8Array(32);e.stream(this._key,C,R,4);var B=D.length+this.tagLength,M;if(P){if(P.length!==B)throw new Error("ChaCha20Poly1305: incorrect destination length");M=P}else M=new Uint8Array(B);return e.streamXOR(this._key,C,D,M,4),this._authenticate(M.subarray(M.length-this.tagLength,M.length),R,M.subarray(0,M.length-this.tagLength),A),s.wipe(C),M},m.prototype.open=function(_,D,A,P){if(_.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(D.length<this.tagLength)return null;var C=new Uint8Array(16);C.set(_,C.length-_.length);var R=new Uint8Array(32);e.stream(this._key,C,R,4);var B=new Uint8Array(this.tagLength);if(this._authenticate(B,R,D.subarray(0,D.length-this.tagLength),A),!c.equal(B,D.subarray(D.length-this.tagLength,D.length)))return null;var M=D.length-this.tagLength,ee;if(P){if(P.length!==M)throw new Error("ChaCha20Poly1305: incorrect destination length");ee=P}else ee=new Uint8Array(M);return e.streamXOR(this._key,C,D.subarray(0,D.length-this.tagLength),ee,4),s.wipe(C),ee},m.prototype.clean=function(){return s.wipe(this._key),this},m.prototype._authenticate=function(_,D,A,P){var C=new t.Poly1305(D);P&&(C.update(P),P.length%16>0&&C.update(f.subarray(P.length%16))),C.update(A),A.length%16>0&&C.update(f.subarray(A.length%16));var R=new Uint8Array(8);P&&o.writeUint64LE(P.length,R),C.update(R),o.writeUint64LE(A.length,R),C.update(R);for(var B=C.digest(),M=0;M<B.length;M++)_[M]=B[M];C.clean(),s.wipe(B),s.wipe(R)},m}();n.ChaCha20Poly1305=l})(ju);var Zd={},Os={},Lu={};Object.defineProperty(Lu,"__esModule",{value:!0});function yb(n){return typeof n.saveState<"u"&&typeof n.restoreState<"u"&&typeof n.cleanSavedState<"u"}Lu.isSerializableHash=yb;Object.defineProperty(Os,"__esModule",{value:!0});var tn=Lu,_b=Rn,vb=xr,ep=function(){function n(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(s).clean():s.set(t);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),tn.isSerializableHash(this._inner)&&tn.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),vb.wipe(s)}return n.prototype.reset=function(){if(!tn.isSerializableHash(this._inner)||!tn.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.clean=function(){tn.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),tn.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},n.prototype.update=function(e){return this._inner.update(e),this},n.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},n.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},n.prototype.saveState=function(){if(!tn.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},n.prototype.restoreState=function(e){if(!tn.isSerializableHash(this._inner)||!tn.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.cleanSavedState=function(e){if(!tn.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},n}();Os.HMAC=ep;function mb(n,e,t){var s=new ep(n,e);s.update(t);var o=s.digest();return s.clean(),o}Os.hmac=mb;Os.equal=_b.equal;Object.defineProperty(Zd,"__esModule",{value:!0});var cl=Os,ul=xr,bb=function(){function n(e,t,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var c=cl.hmac(this._hash,s,t);this._hmac=new cl.HMAC(e,c),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(e){for(var t=new Uint8Array(e),s=0;s<t.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[s]=this._buffer[this._bufpos++];return t},n.prototype.clean=function(){this._hmac.clean(),ul.wipe(this._buffer),ul.wipe(this._counter),this._bufpos=0},n}(),wb=Zd.HKDF=bb,Ni={},ea={},ta={};Object.defineProperty(ta,"__esModule",{value:!0});ta.BrowserRandomSource=void 0;const hl=65536;class Eb{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let s=0;s<t.length;s+=hl)this._crypto.getRandomValues(t.subarray(s,s+Math.min(t.length-s,hl)));return t}}ta.BrowserRandomSource=Eb;function Sb(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ra={};Object.defineProperty(ra,"__esModule",{value:!0});ra.NodeRandomSource=void 0;const Db=xr;class Ob{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Sb<"u"){const e=Nm;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let o=0;o<s.length;o++)s[o]=t[o];return(0,Db.wipe)(t),s}}ra.NodeRandomSource=Ob;Object.defineProperty(ea,"__esModule",{value:!0});ea.SystemRandomSource=void 0;const Ib=ta,xb=ra;class Ab{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Ib.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new xb.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}ea.SystemRandomSource=Ab;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const e=ea,t=Fe,s=xr;n.defaultRandomSource=new e.SystemRandomSource;function o(_,D=n.defaultRandomSource){return D.randomBytes(_)}n.randomBytes=o;function c(_=n.defaultRandomSource){const D=o(4,_),A=(0,t.readUint32LE)(D);return(0,s.wipe)(D),A}n.randomUint32=c;const f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function l(_,D=f,A=n.defaultRandomSource){if(D.length<2)throw new Error("randomString charset is too short");if(D.length>256)throw new Error("randomString charset is too long");let P="";const C=D.length,R=256-256%C;for(;_>0;){const B=o(Math.ceil(_*256/R),A);for(let M=0;M<B.length&&_>0;M++){const ee=B[M];ee<R&&(P+=D.charAt(ee%C),_--)}(0,s.wipe)(B)}return P}n.randomString=l;function m(_,D=f,A=n.defaultRandomSource){const P=Math.ceil(_/(Math.log(D.length)/Math.LN2));return l(P,D,A)}n.randomStringForEntropy=m})(Ni);var na={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Fe,t=xr;n.DIGEST_LENGTH=32,n.BLOCK_SIZE=64;var s=function(){function l(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},l.prototype.update=function(m,_){if(_===void 0&&(_=m.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var D=0;if(this._bytesHashed+=_,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&_>0;)this._buffer[this._bufferLength++]=m[D++],_--;this._bufferLength===this.blockSize&&(c(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(_>=this.blockSize&&(D=c(this._temp,this._state,m,D,_),_%=this.blockSize);_>0;)this._buffer[this._bufferLength++]=m[D++],_--;return this},l.prototype.finish=function(m){if(!this._finished){var _=this._bytesHashed,D=this._bufferLength,A=_/536870912|0,P=_<<3,C=_%64<56?64:128;this._buffer[D]=128;for(var R=D+1;R<C-8;R++)this._buffer[R]=0;e.writeUint32BE(A,this._buffer,C-8),e.writeUint32BE(P,this._buffer,C-4),c(this._temp,this._state,this._buffer,0,C),this._finished=!0}for(var R=0;R<this.digestLength/4;R++)e.writeUint32BE(this._state[R],m,R*4);return this},l.prototype.digest=function(){var m=new Uint8Array(this.digestLength);return this.finish(m),m},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(m){return this._state.set(m.state),this._bufferLength=m.bufferLength,m.buffer&&this._buffer.set(m.buffer),this._bytesHashed=m.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(m){t.wipe(m.state),m.buffer&&t.wipe(m.buffer),m.bufferLength=0,m.bytesHashed=0},l}();n.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(l,m,_,D,A){for(;A>=64;){for(var P=m[0],C=m[1],R=m[2],B=m[3],M=m[4],ee=m[5],p=m[6],E=m[7],v=0;v<16;v++){var w=D+v*4;l[v]=e.readUint32BE(_,w)}for(var v=16;v<64;v++){var g=l[v-2],u=(g>>>17|g<<32-17)^(g>>>19|g<<32-19)^g>>>10;g=l[v-15];var b=(g>>>7|g<<32-7)^(g>>>18|g<<32-18)^g>>>3;l[v]=(u+l[v-7]|0)+(b+l[v-16]|0)}for(var v=0;v<64;v++){var u=(((M>>>6|M<<26)^(M>>>11|M<<21)^(M>>>25|M<<7))+(M&ee^~M&p)|0)+(E+(o[v]+l[v]|0)|0)|0,b=((P>>>2|P<<32-2)^(P>>>13|P<<32-13)^(P>>>22|P<<32-22))+(P&C^P&R^C&R)|0;E=p,p=ee,ee=M,M=B+u|0,B=R,R=C,C=P,P=u+b|0}m[0]+=P,m[1]+=C,m[2]+=R,m[3]+=B,m[4]+=M,m[5]+=ee,m[6]+=p,m[7]+=E,D+=64,A-=64}return D}function f(l){var m=new s;m.update(l);var _=m.digest();return m.clean(),_}n.hash=f})(na);var Mu={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const e=Ni,t=xr;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function s(v){const w=new Float64Array(16);if(v)for(let g=0;g<v.length;g++)w[g]=v[g];return w}const o=new Uint8Array(32);o[0]=9;const c=s([56129,1]);function f(v){let w=1;for(let g=0;g<16;g++){let u=v[g]+w+65535;w=Math.floor(u/65536),v[g]=u-w*65536}v[0]+=w-1+37*(w-1)}function l(v,w,g){const u=~(g-1);for(let b=0;b<16;b++){const K=u&(v[b]^w[b]);v[b]^=K,w[b]^=K}}function m(v,w){const g=s(),u=s();for(let b=0;b<16;b++)u[b]=w[b];f(u),f(u),f(u);for(let b=0;b<2;b++){g[0]=u[0]-65517;for(let G=1;G<15;G++)g[G]=u[G]-65535-(g[G-1]>>16&1),g[G-1]&=65535;g[15]=u[15]-32767-(g[14]>>16&1);const K=g[15]>>16&1;g[14]&=65535,l(u,g,1-K)}for(let b=0;b<16;b++)v[2*b]=u[b]&255,v[2*b+1]=u[b]>>8}function _(v,w){for(let g=0;g<16;g++)v[g]=w[2*g]+(w[2*g+1]<<8);v[15]&=32767}function D(v,w,g){for(let u=0;u<16;u++)v[u]=w[u]+g[u]}function A(v,w,g){for(let u=0;u<16;u++)v[u]=w[u]-g[u]}function P(v,w,g){let u,b,K=0,G=0,se=0,ce=0,de=0,I=0,N=0,te=0,X=0,k=0,W=0,J=0,ne=0,be=0,oe=0,we=0,fe=0,ve=0,H=0,z=0,F=0,d=0,U=0,ae=0,le=0,Oe=0,ze=0,Ve=0,je=0,yt=0,_t=0,Me=g[0],Ie=g[1],Re=g[2],Ue=g[3],qe=g[4],Ae=g[5],$e=g[6],De=g[7],Pe=g[8],He=g[9],xe=g[10],ke=g[11],Ge=g[12],et=g[13],tt=g[14],Je=g[15];u=w[0],K+=u*Me,G+=u*Ie,se+=u*Re,ce+=u*Ue,de+=u*qe,I+=u*Ae,N+=u*$e,te+=u*De,X+=u*Pe,k+=u*He,W+=u*xe,J+=u*ke,ne+=u*Ge,be+=u*et,oe+=u*tt,we+=u*Je,u=w[1],G+=u*Me,se+=u*Ie,ce+=u*Re,de+=u*Ue,I+=u*qe,N+=u*Ae,te+=u*$e,X+=u*De,k+=u*Pe,W+=u*He,J+=u*xe,ne+=u*ke,be+=u*Ge,oe+=u*et,we+=u*tt,fe+=u*Je,u=w[2],se+=u*Me,ce+=u*Ie,de+=u*Re,I+=u*Ue,N+=u*qe,te+=u*Ae,X+=u*$e,k+=u*De,W+=u*Pe,J+=u*He,ne+=u*xe,be+=u*ke,oe+=u*Ge,we+=u*et,fe+=u*tt,ve+=u*Je,u=w[3],ce+=u*Me,de+=u*Ie,I+=u*Re,N+=u*Ue,te+=u*qe,X+=u*Ae,k+=u*$e,W+=u*De,J+=u*Pe,ne+=u*He,be+=u*xe,oe+=u*ke,we+=u*Ge,fe+=u*et,ve+=u*tt,H+=u*Je,u=w[4],de+=u*Me,I+=u*Ie,N+=u*Re,te+=u*Ue,X+=u*qe,k+=u*Ae,W+=u*$e,J+=u*De,ne+=u*Pe,be+=u*He,oe+=u*xe,we+=u*ke,fe+=u*Ge,ve+=u*et,H+=u*tt,z+=u*Je,u=w[5],I+=u*Me,N+=u*Ie,te+=u*Re,X+=u*Ue,k+=u*qe,W+=u*Ae,J+=u*$e,ne+=u*De,be+=u*Pe,oe+=u*He,we+=u*xe,fe+=u*ke,ve+=u*Ge,H+=u*et,z+=u*tt,F+=u*Je,u=w[6],N+=u*Me,te+=u*Ie,X+=u*Re,k+=u*Ue,W+=u*qe,J+=u*Ae,ne+=u*$e,be+=u*De,oe+=u*Pe,we+=u*He,fe+=u*xe,ve+=u*ke,H+=u*Ge,z+=u*et,F+=u*tt,d+=u*Je,u=w[7],te+=u*Me,X+=u*Ie,k+=u*Re,W+=u*Ue,J+=u*qe,ne+=u*Ae,be+=u*$e,oe+=u*De,we+=u*Pe,fe+=u*He,ve+=u*xe,H+=u*ke,z+=u*Ge,F+=u*et,d+=u*tt,U+=u*Je,u=w[8],X+=u*Me,k+=u*Ie,W+=u*Re,J+=u*Ue,ne+=u*qe,be+=u*Ae,oe+=u*$e,we+=u*De,fe+=u*Pe,ve+=u*He,H+=u*xe,z+=u*ke,F+=u*Ge,d+=u*et,U+=u*tt,ae+=u*Je,u=w[9],k+=u*Me,W+=u*Ie,J+=u*Re,ne+=u*Ue,be+=u*qe,oe+=u*Ae,we+=u*$e,fe+=u*De,ve+=u*Pe,H+=u*He,z+=u*xe,F+=u*ke,d+=u*Ge,U+=u*et,ae+=u*tt,le+=u*Je,u=w[10],W+=u*Me,J+=u*Ie,ne+=u*Re,be+=u*Ue,oe+=u*qe,we+=u*Ae,fe+=u*$e,ve+=u*De,H+=u*Pe,z+=u*He,F+=u*xe,d+=u*ke,U+=u*Ge,ae+=u*et,le+=u*tt,Oe+=u*Je,u=w[11],J+=u*Me,ne+=u*Ie,be+=u*Re,oe+=u*Ue,we+=u*qe,fe+=u*Ae,ve+=u*$e,H+=u*De,z+=u*Pe,F+=u*He,d+=u*xe,U+=u*ke,ae+=u*Ge,le+=u*et,Oe+=u*tt,ze+=u*Je,u=w[12],ne+=u*Me,be+=u*Ie,oe+=u*Re,we+=u*Ue,fe+=u*qe,ve+=u*Ae,H+=u*$e,z+=u*De,F+=u*Pe,d+=u*He,U+=u*xe,ae+=u*ke,le+=u*Ge,Oe+=u*et,ze+=u*tt,Ve+=u*Je,u=w[13],be+=u*Me,oe+=u*Ie,we+=u*Re,fe+=u*Ue,ve+=u*qe,H+=u*Ae,z+=u*$e,F+=u*De,d+=u*Pe,U+=u*He,ae+=u*xe,le+=u*ke,Oe+=u*Ge,ze+=u*et,Ve+=u*tt,je+=u*Je,u=w[14],oe+=u*Me,we+=u*Ie,fe+=u*Re,ve+=u*Ue,H+=u*qe,z+=u*Ae,F+=u*$e,d+=u*De,U+=u*Pe,ae+=u*He,le+=u*xe,Oe+=u*ke,ze+=u*Ge,Ve+=u*et,je+=u*tt,yt+=u*Je,u=w[15],we+=u*Me,fe+=u*Ie,ve+=u*Re,H+=u*Ue,z+=u*qe,F+=u*Ae,d+=u*$e,U+=u*De,ae+=u*Pe,le+=u*He,Oe+=u*xe,ze+=u*ke,Ve+=u*Ge,je+=u*et,yt+=u*tt,_t+=u*Je,K+=38*fe,G+=38*ve,se+=38*H,ce+=38*z,de+=38*F,I+=38*d,N+=38*U,te+=38*ae,X+=38*le,k+=38*Oe,W+=38*ze,J+=38*Ve,ne+=38*je,be+=38*yt,oe+=38*_t,b=1,u=K+b+65535,b=Math.floor(u/65536),K=u-b*65536,u=G+b+65535,b=Math.floor(u/65536),G=u-b*65536,u=se+b+65535,b=Math.floor(u/65536),se=u-b*65536,u=ce+b+65535,b=Math.floor(u/65536),ce=u-b*65536,u=de+b+65535,b=Math.floor(u/65536),de=u-b*65536,u=I+b+65535,b=Math.floor(u/65536),I=u-b*65536,u=N+b+65535,b=Math.floor(u/65536),N=u-b*65536,u=te+b+65535,b=Math.floor(u/65536),te=u-b*65536,u=X+b+65535,b=Math.floor(u/65536),X=u-b*65536,u=k+b+65535,b=Math.floor(u/65536),k=u-b*65536,u=W+b+65535,b=Math.floor(u/65536),W=u-b*65536,u=J+b+65535,b=Math.floor(u/65536),J=u-b*65536,u=ne+b+65535,b=Math.floor(u/65536),ne=u-b*65536,u=be+b+65535,b=Math.floor(u/65536),be=u-b*65536,u=oe+b+65535,b=Math.floor(u/65536),oe=u-b*65536,u=we+b+65535,b=Math.floor(u/65536),we=u-b*65536,K+=b-1+37*(b-1),b=1,u=K+b+65535,b=Math.floor(u/65536),K=u-b*65536,u=G+b+65535,b=Math.floor(u/65536),G=u-b*65536,u=se+b+65535,b=Math.floor(u/65536),se=u-b*65536,u=ce+b+65535,b=Math.floor(u/65536),ce=u-b*65536,u=de+b+65535,b=Math.floor(u/65536),de=u-b*65536,u=I+b+65535,b=Math.floor(u/65536),I=u-b*65536,u=N+b+65535,b=Math.floor(u/65536),N=u-b*65536,u=te+b+65535,b=Math.floor(u/65536),te=u-b*65536,u=X+b+65535,b=Math.floor(u/65536),X=u-b*65536,u=k+b+65535,b=Math.floor(u/65536),k=u-b*65536,u=W+b+65535,b=Math.floor(u/65536),W=u-b*65536,u=J+b+65535,b=Math.floor(u/65536),J=u-b*65536,u=ne+b+65535,b=Math.floor(u/65536),ne=u-b*65536,u=be+b+65535,b=Math.floor(u/65536),be=u-b*65536,u=oe+b+65535,b=Math.floor(u/65536),oe=u-b*65536,u=we+b+65535,b=Math.floor(u/65536),we=u-b*65536,K+=b-1+37*(b-1),v[0]=K,v[1]=G,v[2]=se,v[3]=ce,v[4]=de,v[5]=I,v[6]=N,v[7]=te,v[8]=X,v[9]=k,v[10]=W,v[11]=J,v[12]=ne,v[13]=be,v[14]=oe,v[15]=we}function C(v,w){P(v,w,w)}function R(v,w){const g=s();for(let u=0;u<16;u++)g[u]=w[u];for(let u=253;u>=0;u--)C(g,g),u!==2&&u!==4&&P(g,g,w);for(let u=0;u<16;u++)v[u]=g[u]}function B(v,w){const g=new Uint8Array(32),u=new Float64Array(80),b=s(),K=s(),G=s(),se=s(),ce=s(),de=s();for(let X=0;X<31;X++)g[X]=v[X];g[31]=v[31]&127|64,g[0]&=248,_(u,w);for(let X=0;X<16;X++)K[X]=u[X];b[0]=se[0]=1;for(let X=254;X>=0;--X){const k=g[X>>>3]>>>(X&7)&1;l(b,K,k),l(G,se,k),D(ce,b,G),A(b,b,G),D(G,K,se),A(K,K,se),C(se,ce),C(de,b),P(b,G,b),P(G,K,ce),D(ce,b,G),A(b,b,G),C(K,b),A(G,se,de),P(b,G,c),D(b,b,se),P(G,G,b),P(b,se,de),P(se,K,u),C(K,ce),l(b,K,k),l(G,se,k)}for(let X=0;X<16;X++)u[X+16]=b[X],u[X+32]=G[X],u[X+48]=K[X],u[X+64]=se[X];const I=u.subarray(32),N=u.subarray(16);R(I,I),P(N,N,I);const te=new Uint8Array(32);return m(te,N),te}n.scalarMult=B;function M(v){return B(v,o)}n.scalarMultBase=M;function ee(v){if(v.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const w=new Uint8Array(v);return{publicKey:M(w),secretKey:w}}n.generateKeyPairFromSeed=ee;function p(v){const w=(0,e.randomBytes)(32,v),g=ee(w);return(0,t.wipe)(w),g}n.generateKeyPair=p;function E(v,w,g=!1){if(v.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(w.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=B(v,w);if(g){let b=0;for(let K=0;K<u.length;K++)b|=u[K];if(b===0)throw new Error("X25519: invalid shared key")}return u}n.sharedKey=E})(Mu);function qu(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function tp(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?qu(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function su(n,e){e||(e=n.reduce((o,c)=>o+c.length,0));const t=tp(e);let s=0;for(const o of n)t.set(o,s),s+=o.length;return qu(t)}function Pb(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<n.length;o++){var c=n.charAt(o),f=c.charCodeAt(0);if(t[f]!==255)throw new TypeError(c+" is ambiguous");t[f]=o}var l=n.length,m=n.charAt(0),_=Math.log(l)/Math.log(256),D=Math.log(256)/Math.log(l);function A(R){if(R instanceof Uint8Array||(ArrayBuffer.isView(R)?R=new Uint8Array(R.buffer,R.byteOffset,R.byteLength):Array.isArray(R)&&(R=Uint8Array.from(R))),!(R instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(R.length===0)return"";for(var B=0,M=0,ee=0,p=R.length;ee!==p&&R[ee]===0;)ee++,B++;for(var E=(p-ee)*D+1>>>0,v=new Uint8Array(E);ee!==p;){for(var w=R[ee],g=0,u=E-1;(w!==0||g<M)&&u!==-1;u--,g++)w+=256*v[u]>>>0,v[u]=w%l>>>0,w=w/l>>>0;if(w!==0)throw new Error("Non-zero carry");M=g,ee++}for(var b=E-M;b!==E&&v[b]===0;)b++;for(var K=m.repeat(B);b<E;++b)K+=n.charAt(v[b]);return K}function P(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return new Uint8Array;var B=0;if(R[B]!==" "){for(var M=0,ee=0;R[B]===m;)M++,B++;for(var p=(R.length-B)*_+1>>>0,E=new Uint8Array(p);R[B];){var v=t[R.charCodeAt(B)];if(v===255)return;for(var w=0,g=p-1;(v!==0||w<ee)&&g!==-1;g--,w++)v+=l*E[g]>>>0,E[g]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");ee=w,B++}if(R[B]!==" "){for(var u=p-ee;u!==p&&E[u]===0;)u++;for(var b=new Uint8Array(M+(p-u)),K=M;u!==p;)b[K++]=E[u++];return b}}}function C(R){var B=P(R);if(B)return B;throw new Error(`Non-${e} character`)}return{encode:A,decodeUnsafe:P,decode:C}}var Tb=Pb,Cb=Tb;const Nb=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},Rb=n=>new TextEncoder().encode(n),Ub=n=>new TextDecoder().decode(n);class $b{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Fb{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return rp(this,e)}}class jb{constructor(e){this.decoders=e}or(e){return rp(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const rp=(n,e)=>new jb({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class Lb{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new $b(e,t,s),this.decoder=new Fb(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ia=({name:n,prefix:e,encode:t,decode:s})=>new Lb(n,e,t,s),Is=({prefix:n,name:e,alphabet:t})=>{const{encode:s,decode:o}=Cb(t,e);return ia({prefix:n,name:e,encode:s,decode:c=>Nb(o(c))})},Mb=(n,e,t,s)=>{const o={};for(let D=0;D<e.length;++D)o[e[D]]=D;let c=n.length;for(;n[c-1]==="=";)--c;const f=new Uint8Array(c*t/8|0);let l=0,m=0,_=0;for(let D=0;D<c;++D){const A=o[n[D]];if(A===void 0)throw new SyntaxError(`Non-${s} character`);m=m<<t|A,l+=t,l>=8&&(l-=8,f[_++]=255&m>>l)}if(l>=t||255&m<<8-l)throw new SyntaxError("Unexpected end of data");return f},qb=(n,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",f=0,l=0;for(let m=0;m<n.length;++m)for(l=l<<8|n[m],f+=8;f>t;)f-=t,c+=e[o&l>>f];if(f&&(c+=e[o&l<<t-f]),s)for(;c.length*t&7;)c+="=";return c},Xt=({name:n,prefix:e,bitsPerChar:t,alphabet:s})=>ia({prefix:e,name:n,encode(o){return qb(o,s,t)},decode(o){return Mb(o,s,t,n)}}),Bb=ia({prefix:"\0",name:"identity",encode:n=>Ub(n),decode:n=>Rb(n)}),zb=Object.freeze(Object.defineProperty({__proto__:null,identity:Bb},Symbol.toStringTag,{value:"Module"})),Hb=Xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Kb=Object.freeze(Object.defineProperty({__proto__:null,base2:Hb},Symbol.toStringTag,{value:"Module"})),Vb=Xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),kb=Object.freeze(Object.defineProperty({__proto__:null,base8:Vb},Symbol.toStringTag,{value:"Module"})),Wb=Is({prefix:"9",name:"base10",alphabet:"0123456789"}),Gb=Object.freeze(Object.defineProperty({__proto__:null,base10:Wb},Symbol.toStringTag,{value:"Module"})),Yb=Xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Jb=Xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Xb=Object.freeze(Object.defineProperty({__proto__:null,base16:Yb,base16upper:Jb},Symbol.toStringTag,{value:"Module"})),Qb=Xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Zb=Xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ew=Xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),tw=Xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),rw=Xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),nw=Xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),iw=Xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),sw=Xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ow=Xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),aw=Object.freeze(Object.defineProperty({__proto__:null,base32:Qb,base32hex:rw,base32hexpad:iw,base32hexpadupper:sw,base32hexupper:nw,base32pad:ew,base32padupper:tw,base32upper:Zb,base32z:ow},Symbol.toStringTag,{value:"Module"})),cw=Is({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),uw=Is({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),hw=Object.freeze(Object.defineProperty({__proto__:null,base36:cw,base36upper:uw},Symbol.toStringTag,{value:"Module"})),fw=Is({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),lw=Is({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),dw=Object.freeze(Object.defineProperty({__proto__:null,base58btc:fw,base58flickr:lw},Symbol.toStringTag,{value:"Module"})),pw=Xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),gw=Xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),yw=Xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),_w=Xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),vw=Object.freeze(Object.defineProperty({__proto__:null,base64:pw,base64pad:gw,base64url:yw,base64urlpad:_w},Symbol.toStringTag,{value:"Module"})),np=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),mw=np.reduce((n,e,t)=>(n[t]=e,n),[]),bw=np.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function ww(n){return n.reduce((e,t)=>(e+=mw[t],e),"")}function Ew(n){const e=[];for(const t of n){const s=bw[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const Sw=ia({prefix:"ðŸš€",name:"base256emoji",encode:ww,decode:Ew}),Dw=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Sw},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const fl={...zb,...Kb,...kb,...Gb,...Xb,...aw,...hw,...dw,...vw,...Dw};function ip(n,e,t,s){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:s}}}const ll=ip("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Uc=ip("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=tp(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),sp={utf8:ll,"utf-8":ll,hex:fl.base16,latin1:Uc,ascii:Uc,binary:Uc,...fl};function br(n,e="utf8"){const t=sp[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?qu(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function fr(n,e="utf8"){const t=sp[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}var ye={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ou=function(n,e){return ou=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},ou(n,e)};function Ow(n,e){ou(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var au=function(){return au=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},au.apply(this,arguments)};function Iw(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function xw(n,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,s);else for(var l=n.length-1;l>=0;l--)(f=n[l])&&(c=(o<3?f(c):o>3?f(e,t,c):f(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function Aw(n,e){return function(t,s){e(t,s,n)}}function Pw(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Tw(n,e,t,s){function o(c){return c instanceof t?c:new t(function(f){f(c)})}return new(t||(t=Promise))(function(c,f){function l(D){try{_(s.next(D))}catch(A){f(A)}}function m(D){try{_(s.throw(D))}catch(A){f(A)}}function _(D){D.done?c(D.value):o(D.value).then(l,m)}_((s=s.apply(n,e||[])).next())})}function Cw(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,f;return f={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function l(_){return function(D){return m([_,D])}}function m(_){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=_[0]&2?o.return:_[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,_[1])).done)return c;switch(o=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,o=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){t.label=_[1];break}if(_[0]===6&&t.label<c[1]){t.label=c[1],c=_;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(_);break}c[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(D){_=[6,D],o=0}finally{s=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}function Nw(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}function Rw(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function cu(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function op(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,c=[],f;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(l){f={error:l}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(f)throw f.error}}return c}function Uw(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(op(arguments[e]));return n}function $w(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],f=0,l=c.length;f<l;f++,o++)s[o]=c[f];return s}function vs(n){return this instanceof vs?(this.v=n,this):new vs(n)}function Fw(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,c=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(P){s[P]&&(o[P]=function(C){return new Promise(function(R,B){c.push([P,C,R,B])>1||l(P,C)})})}function l(P,C){try{m(s[P](C))}catch(R){A(c[0][3],R)}}function m(P){P.value instanceof vs?Promise.resolve(P.value.v).then(_,D):A(c[0][2],P)}function _(P){l("next",P)}function D(P){l("throw",P)}function A(P,C){P(C),c.shift(),c.length&&l(c[0][0],c[0][1])}}function jw(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=n[o]?function(f){return(t=!t)?{value:vs(n[o](f)),done:o==="return"}:c?c(f):f}:c}}function Lw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof cu=="function"?cu(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=n[c]&&function(f){return new Promise(function(l,m){f=n[c](f),o(l,m,f.done,f.value)})}}function o(c,f,l,m){Promise.resolve(m).then(function(_){c({value:_,done:l})},f)}}function Mw(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function qw(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function Bw(n){return n&&n.__esModule?n:{default:n}}function zw(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function Hw(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const Kw=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return au},__asyncDelegator:jw,__asyncGenerator:Fw,__asyncValues:Lw,__await:vs,__awaiter:Tw,__classPrivateFieldGet:zw,__classPrivateFieldSet:Hw,__createBinding:Nw,__decorate:xw,__exportStar:Rw,__extends:Ow,__generator:Cw,__importDefault:Bw,__importStar:qw,__makeTemplateObject:Mw,__metadata:Pw,__param:Aw,__read:op,__rest:Iw,__spread:Uw,__spreadArrays:$w,__values:cu},Symbol.toStringTag,{value:"Module"})),sa=Ds(Kw);var $c={},ns={},dl;function Vw(){if(dl)return ns;dl=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.delay=void 0;function n(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return ns.delay=n,ns}var Jn={},Fc={},Xn={},pl;function kw(){return pl||(pl=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.ONE_THOUSAND=Xn.ONE_HUNDRED=void 0,Xn.ONE_HUNDRED=100,Xn.ONE_THOUSAND=1e3),Xn}var jc={},gl;function Ww(){return gl||(gl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(jc)),jc}var yl;function ap(){return yl||(yl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=sa;e.__exportStar(kw(),n),e.__exportStar(Ww(),n)}(Fc)),Fc}var _l;function Gw(){if(_l)return Jn;_l=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.fromMiliseconds=Jn.toMiliseconds=void 0;const n=ap();function e(s){return s*n.ONE_THOUSAND}Jn.toMiliseconds=e;function t(s){return Math.floor(s/n.ONE_THOUSAND)}return Jn.fromMiliseconds=t,Jn}var vl;function Yw(){return vl||(vl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=sa;e.__exportStar(Vw(),n),e.__exportStar(Gw(),n)}($c)),$c}var Ai={},ml;function Jw(){if(ml)return Ai;ml=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const s=this.get(t);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const o=Date.now()-s.started;this.timestamps.set(t,{started:s.started,elapsed:o})}get(t){const s=this.timestamps.get(t);if(typeof s>"u")throw new Error(`No timestamp found for label: ${t}`);return s}elapsed(t){const s=this.get(t);return s.elapsed||Date.now()-s.started}}return Ai.Watch=n,Ai.default=n,Ai}var Lc={},is={},bl;function Xw(){if(bl)return is;bl=1,Object.defineProperty(is,"__esModule",{value:!0}),is.IWatch=void 0;class n{}return is.IWatch=n,is}var wl;function Qw(){return wl||(wl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),sa.__exportStar(Xw(),n)}(Lc)),Lc}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=sa;e.__exportStar(Yw(),n),e.__exportStar(Jw(),n),e.__exportStar(Qw(),n),e.__exportStar(ap(),n)})(ye);var ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.getLocalStorage=ft.getLocalStorageOrThrow=ft.getCrypto=ft.getCryptoOrThrow=ft.getLocation=ft.getLocationOrThrow=ft.getNavigator=ft.getNavigatorOrThrow=ft.getDocument=ft.getDocumentOrThrow=ft.getFromWindowOrThrow=ft.getFromWindow=void 0;function ri(n){let e;return typeof window<"u"&&typeof window[n]<"u"&&(e=window[n]),e}ft.getFromWindow=ri;function Ri(n){const e=ri(n);if(!e)throw new Error(`${n} is not defined in Window`);return e}ft.getFromWindowOrThrow=Ri;function Zw(){return Ri("document")}ft.getDocumentOrThrow=Zw;function eE(){return ri("document")}ft.getDocument=eE;function tE(){return Ri("navigator")}ft.getNavigatorOrThrow=tE;function rE(){return ri("navigator")}ft.getNavigator=rE;function nE(){return Ri("location")}ft.getLocationOrThrow=nE;function iE(){return ri("location")}ft.getLocation=iE;function sE(){return Ri("crypto")}ft.getCryptoOrThrow=sE;function oE(){return ri("crypto")}ft.getCrypto=oE;function aE(){return Ri("localStorage")}ft.getLocalStorageOrThrow=aE;function cE(){return ri("localStorage")}ft.getLocalStorage=cE;var Bu={};Object.defineProperty(Bu,"__esModule",{value:!0});Bu.getWindowMetadata=void 0;const El=ft;function uE(){let n,e;try{n=El.getDocumentOrThrow(),e=El.getLocationOrThrow()}catch{return null}function t(){const A=n.getElementsByTagName("link"),P=[];for(let C=0;C<A.length;C++){const R=A[C],B=R.getAttribute("rel");if(B&&B.toLowerCase().indexOf("icon")>-1){const M=R.getAttribute("href");if(M)if(M.toLowerCase().indexOf("https:")===-1&&M.toLowerCase().indexOf("http:")===-1&&M.indexOf("//")!==0){let ee=e.protocol+"//"+e.host;if(M.indexOf("/")===0)ee+=M;else{const p=e.pathname.split("/");p.pop();const E=p.join("/");ee+=E+"/"+M}P.push(ee)}else if(M.indexOf("//")===0){const ee=e.protocol+M;P.push(ee)}else P.push(M)}}return P}function s(...A){const P=n.getElementsByTagName("meta");for(let C=0;C<P.length;C++){const R=P[C],B=["itemprop","property","name"].map(M=>R.getAttribute(M)).filter(M=>M?A.includes(M):!1);if(B.length&&B){const M=R.getAttribute("content");if(M)return M}}return""}function o(){let A=s("name","og:site_name","og:title","twitter:title");return A||(A=n.title),A}function c(){return s("description","og:description","twitter:description","keywords")}const f=o(),l=c(),m=e.origin,_=t();return{description:l,url:m,icons:_,name:f}}Bu.getWindowMetadata=uE;var hE={},zu=function(n,e){for(var t={},s=Object.keys(n),o=Array.isArray(e),c=0;c<s.length;c++){var f=s[c],l=n[f];(o?e.indexOf(f)!==-1:e(f,l,n))&&(t[f]=l)}return t};(function(n){const e=Nu,t=Ru,s=Cu,o=zu,c=p=>p==null,f=Symbol("encodeFragmentIdentifier");function l(p){switch(p.arrayFormat){case"index":return E=>(v,w)=>{const g=v.length;return w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,[D(E,p),"[",g,"]"].join("")]:[...v,[D(E,p),"[",D(g,p),"]=",D(w,p)].join("")]};case"bracket":return E=>(v,w)=>w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,[D(E,p),"[]"].join("")]:[...v,[D(E,p),"[]=",D(w,p)].join("")];case"colon-list-separator":return E=>(v,w)=>w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,[D(E,p),":list="].join("")]:[...v,[D(E,p),":list=",D(w,p)].join("")];case"comma":case"separator":case"bracket-separator":{const E=p.arrayFormat==="bracket-separator"?"[]=":"=";return v=>(w,g)=>g===void 0||p.skipNull&&g===null||p.skipEmptyString&&g===""?w:(g=g===null?"":g,w.length===0?[[D(v,p),E,D(g,p)].join("")]:[[w,D(g,p)].join(p.arrayFormatSeparator)])}default:return E=>(v,w)=>w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,D(E,p)]:[...v,[D(E,p),"=",D(w,p)].join("")]}}function m(p){let E;switch(p.arrayFormat){case"index":return(v,w,g)=>{if(E=/\[(\d*)\]$/.exec(v),v=v.replace(/\[\d*\]$/,""),!E){g[v]=w;return}g[v]===void 0&&(g[v]={}),g[v][E[1]]=w};case"bracket":return(v,w,g)=>{if(E=/(\[\])$/.exec(v),v=v.replace(/\[\]$/,""),!E){g[v]=w;return}if(g[v]===void 0){g[v]=[w];return}g[v]=[].concat(g[v],w)};case"colon-list-separator":return(v,w,g)=>{if(E=/(:list)$/.exec(v),v=v.replace(/:list$/,""),!E){g[v]=w;return}if(g[v]===void 0){g[v]=[w];return}g[v]=[].concat(g[v],w)};case"comma":case"separator":return(v,w,g)=>{const u=typeof w=="string"&&w.includes(p.arrayFormatSeparator),b=typeof w=="string"&&!u&&A(w,p).includes(p.arrayFormatSeparator);w=b?A(w,p):w;const K=u||b?w.split(p.arrayFormatSeparator).map(G=>A(G,p)):w===null?w:A(w,p);g[v]=K};case"bracket-separator":return(v,w,g)=>{const u=/(\[\])$/.test(v);if(v=v.replace(/\[\]$/,""),!u){g[v]=w&&A(w,p);return}const b=w===null?[]:w.split(p.arrayFormatSeparator).map(K=>A(K,p));if(g[v]===void 0){g[v]=b;return}g[v]=[].concat(g[v],b)};default:return(v,w,g)=>{if(g[v]===void 0){g[v]=w;return}g[v]=[].concat(g[v],w)}}}function _(p){if(typeof p!="string"||p.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function D(p,E){return E.encode?E.strict?e(p):encodeURIComponent(p):p}function A(p,E){return E.decode?t(p):p}function P(p){return Array.isArray(p)?p.sort():typeof p=="object"?P(Object.keys(p)).sort((E,v)=>Number(E)-Number(v)).map(E=>p[E]):p}function C(p){const E=p.indexOf("#");return E!==-1&&(p=p.slice(0,E)),p}function R(p){let E="";const v=p.indexOf("#");return v!==-1&&(E=p.slice(v)),E}function B(p){p=C(p);const E=p.indexOf("?");return E===-1?"":p.slice(E+1)}function M(p,E){return E.parseNumbers&&!Number.isNaN(Number(p))&&typeof p=="string"&&p.trim()!==""?p=Number(p):E.parseBooleans&&p!==null&&(p.toLowerCase()==="true"||p.toLowerCase()==="false")&&(p=p.toLowerCase()==="true"),p}function ee(p,E){E=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},E),_(E.arrayFormatSeparator);const v=m(E),w=Object.create(null);if(typeof p!="string"||(p=p.trim().replace(/^[?#&]/,""),!p))return w;for(const g of p.split("&")){if(g==="")continue;let[u,b]=s(E.decode?g.replace(/\+/g," "):g,"=");b=b===void 0?null:["comma","separator","bracket-separator"].includes(E.arrayFormat)?b:A(b,E),v(A(u,E),b,w)}for(const g of Object.keys(w)){const u=w[g];if(typeof u=="object"&&u!==null)for(const b of Object.keys(u))u[b]=M(u[b],E);else w[g]=M(u,E)}return E.sort===!1?w:(E.sort===!0?Object.keys(w).sort():Object.keys(w).sort(E.sort)).reduce((g,u)=>{const b=w[u];return b&&typeof b=="object"&&!Array.isArray(b)?g[u]=P(b):g[u]=b,g},Object.create(null))}n.extract=B,n.parse=ee,n.stringify=(p,E)=>{if(!p)return"";E=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},E),_(E.arrayFormatSeparator);const v=b=>E.skipNull&&c(p[b])||E.skipEmptyString&&p[b]==="",w=l(E),g={};for(const b of Object.keys(p))v(b)||(g[b]=p[b]);const u=Object.keys(g);return E.sort!==!1&&u.sort(E.sort),u.map(b=>{const K=p[b];return K===void 0?"":K===null?D(b,E):Array.isArray(K)?K.length===0&&E.arrayFormat==="bracket-separator"?D(b,E)+"[]":K.reduce(w(b),[]).join("&"):D(b,E)+"="+D(K,E)}).filter(b=>b.length>0).join("&")},n.parseUrl=(p,E)=>{E=Object.assign({decode:!0},E);const[v,w]=s(p,"#");return Object.assign({url:v.split("?")[0]||"",query:ee(B(p),E)},E&&E.parseFragmentIdentifier&&w?{fragmentIdentifier:A(w,E)}:{})},n.stringifyUrl=(p,E)=>{E=Object.assign({encode:!0,strict:!0,[f]:!0},E);const v=C(p.url).split("?")[0]||"",w=n.extract(p.url),g=n.parse(w,{sort:!1}),u=Object.assign(g,p.query);let b=n.stringify(u,E);b&&(b=`?${b}`);let K=R(p.url);return p.fragmentIdentifier&&(K=`#${E[f]?D(p.fragmentIdentifier,E):p.fragmentIdentifier}`),`${v}${b}${K}`},n.pick=(p,E,v)=>{v=Object.assign({parseFragmentIdentifier:!0,[f]:!1},v);const{url:w,query:g,fragmentIdentifier:u}=n.parseUrl(p,v);return n.stringifyUrl({url:w,query:o(g,E),fragmentIdentifier:u},v)},n.exclude=(p,E,v)=>{const w=Array.isArray(E)?g=>!E.includes(g):(g,u)=>!E(g,u);return n.pick(p,w,v)}})(hE);const fE={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function lE(n,e=[]){const t=[];return Object.keys(n).forEach(s=>{if(e.length&&!e.includes(s))return;const o=n[s];t.push(...o.accounts)}),t}const dE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function pE(n,e){const{message:t,code:s}=dE[n];return{message:e?`${t} ${e}`:t,code:s}}function uu(n,e){return Array.isArray(n)?typeof e<"u"&&n.length?n.every(e):!0:!1}var oa={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hu=function(n,e){return hu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},hu(n,e)};function gE(n,e){hu(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var fu=function(){return fu=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},fu.apply(this,arguments)};function yE(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function _E(n,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,s);else for(var l=n.length-1;l>=0;l--)(f=n[l])&&(c=(o<3?f(c):o>3?f(e,t,c):f(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function vE(n,e){return function(t,s){e(t,s,n)}}function mE(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function bE(n,e,t,s){function o(c){return c instanceof t?c:new t(function(f){f(c)})}return new(t||(t=Promise))(function(c,f){function l(D){try{_(s.next(D))}catch(A){f(A)}}function m(D){try{_(s.throw(D))}catch(A){f(A)}}function _(D){D.done?c(D.value):o(D.value).then(l,m)}_((s=s.apply(n,e||[])).next())})}function wE(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,f;return f={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function l(_){return function(D){return m([_,D])}}function m(_){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=_[0]&2?o.return:_[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,_[1])).done)return c;switch(o=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,o=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){t.label=_[1];break}if(_[0]===6&&t.label<c[1]){t.label=c[1],c=_;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(_);break}c[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(D){_=[6,D],o=0}finally{s=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}function EE(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}function SE(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function lu(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cp(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,c=[],f;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(l){f={error:l}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(f)throw f.error}}return c}function DE(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(cp(arguments[e]));return n}function OE(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],f=0,l=c.length;f<l;f++,o++)s[o]=c[f];return s}function ms(n){return this instanceof ms?(this.v=n,this):new ms(n)}function IE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,c=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(P){s[P]&&(o[P]=function(C){return new Promise(function(R,B){c.push([P,C,R,B])>1||l(P,C)})})}function l(P,C){try{m(s[P](C))}catch(R){A(c[0][3],R)}}function m(P){P.value instanceof ms?Promise.resolve(P.value.v).then(_,D):A(c[0][2],P)}function _(P){l("next",P)}function D(P){l("throw",P)}function A(P,C){P(C),c.shift(),c.length&&l(c[0][0],c[0][1])}}function xE(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=n[o]?function(f){return(t=!t)?{value:ms(n[o](f)),done:o==="return"}:c?c(f):f}:c}}function AE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof lu=="function"?lu(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=n[c]&&function(f){return new Promise(function(l,m){f=n[c](f),o(l,m,f.done,f.value)})}}function o(c,f,l,m){Promise.resolve(m).then(function(_){c({value:_,done:l})},f)}}function PE(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function TE(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function CE(n){return n&&n.__esModule?n:{default:n}}function NE(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function RE(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const UE=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return fu},__asyncDelegator:xE,__asyncGenerator:IE,__asyncValues:AE,__await:ms,__awaiter:bE,__classPrivateFieldGet:NE,__classPrivateFieldSet:RE,__createBinding:EE,__decorate:_E,__exportStar:SE,__extends:gE,__generator:wE,__importDefault:CE,__importStar:TE,__makeTemplateObject:PE,__metadata:mE,__param:vE,__read:cp,__rest:yE,__spread:DE,__spreadArrays:OE,__values:lu},Symbol.toStringTag,{value:"Module"})),up=Ds(UE);var xs={};Object.defineProperty(xs,"__esModule",{value:!0});function $E(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return JSON.parse(n)}catch{return n}}xs.safeJsonParse=$E;function FE(n){return typeof n=="string"?n:JSON.stringify(n,(e,t)=>typeof t>"u"?null:t)}xs.safeJsonStringify=FE;var ss={exports:{}},Sl;function jE(){return Sl||(Sl=1,function(){let n;function e(){}n=e,n.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},n.prototype.setItem=function(t,s){this[t]=String(s)},n.prototype.removeItem=function(t){delete this[t]},n.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(s){t[s]=void 0,delete t[s]})},n.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Tn<"u"&&Tn.localStorage?ss.exports=Tn.localStorage:typeof window<"u"&&window.localStorage?ss.exports=window.localStorage:ss.exports=new e}()),ss.exports}var Mc={},os={},Dl;function LE(){if(Dl)return os;Dl=1,Object.defineProperty(os,"__esModule",{value:!0}),os.IKeyValueStorage=void 0;class n{}return os.IKeyValueStorage=n,os}var as={},Ol;function ME(){if(Ol)return as;Ol=1,Object.defineProperty(as,"__esModule",{value:!0}),as.parseEntry=void 0;const n=xs;function e(t){var s;return[t[0],n.safeJsonParse((s=t[1])!==null&&s!==void 0?s:"")]}return as.parseEntry=e,as}var Il;function qE(){return Il||(Il=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=up;e.__exportStar(LE(),n),e.__exportStar(ME(),n)}(Mc)),Mc}Object.defineProperty(oa,"__esModule",{value:!0});oa.KeyValueStorage=void 0;const Pi=up,xl=xs,BE=Pi.__importDefault(jE()),zE=qE();class hp{constructor(){this.localStorage=BE.default}getKeys(){return Pi.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Pi.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(zE.parseEntry)})}getItem(e){return Pi.__awaiter(this,void 0,void 0,function*(){const t=this.localStorage.getItem(e);if(t!==null)return xl.safeJsonParse(t)})}setItem(e,t){return Pi.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,xl.safeJsonStringify(t))})}removeItem(e){return Pi.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}oa.KeyValueStorage=hp;var HE=oa.default=hp,Ui={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var du=function(n,e){return du=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},du(n,e)};function KE(n,e){du(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var pu=function(){return pu=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},pu.apply(this,arguments)};function VE(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function kE(n,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,s);else for(var l=n.length-1;l>=0;l--)(f=n[l])&&(c=(o<3?f(c):o>3?f(e,t,c):f(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function WE(n,e){return function(t,s){e(t,s,n)}}function GE(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function YE(n,e,t,s){function o(c){return c instanceof t?c:new t(function(f){f(c)})}return new(t||(t=Promise))(function(c,f){function l(D){try{_(s.next(D))}catch(A){f(A)}}function m(D){try{_(s.throw(D))}catch(A){f(A)}}function _(D){D.done?c(D.value):o(D.value).then(l,m)}_((s=s.apply(n,e||[])).next())})}function JE(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,f;return f={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function l(_){return function(D){return m([_,D])}}function m(_){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=_[0]&2?o.return:_[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,_[1])).done)return c;switch(o=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,o=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){t.label=_[1];break}if(_[0]===6&&t.label<c[1]){t.label=c[1],c=_;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(_);break}c[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(D){_=[6,D],o=0}finally{s=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}function XE(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}function QE(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function gu(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fp(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,c=[],f;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(l){f={error:l}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(f)throw f.error}}return c}function ZE(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(fp(arguments[e]));return n}function e3(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],f=0,l=c.length;f<l;f++,o++)s[o]=c[f];return s}function bs(n){return this instanceof bs?(this.v=n,this):new bs(n)}function t3(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,c=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(P){s[P]&&(o[P]=function(C){return new Promise(function(R,B){c.push([P,C,R,B])>1||l(P,C)})})}function l(P,C){try{m(s[P](C))}catch(R){A(c[0][3],R)}}function m(P){P.value instanceof bs?Promise.resolve(P.value.v).then(_,D):A(c[0][2],P)}function _(P){l("next",P)}function D(P){l("throw",P)}function A(P,C){P(C),c.shift(),c.length&&l(c[0][0],c[0][1])}}function r3(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=n[o]?function(f){return(t=!t)?{value:bs(n[o](f)),done:o==="return"}:c?c(f):f}:c}}function n3(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof gu=="function"?gu(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=n[c]&&function(f){return new Promise(function(l,m){f=n[c](f),o(l,m,f.done,f.value)})}}function o(c,f,l,m){Promise.resolve(m).then(function(_){c({value:_,done:l})},f)}}function i3(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function s3(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function o3(n){return n&&n.__esModule?n:{default:n}}function a3(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function c3(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const u3=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return pu},__asyncDelegator:r3,__asyncGenerator:t3,__asyncValues:n3,__await:bs,__awaiter:YE,__classPrivateFieldGet:a3,__classPrivateFieldSet:c3,__createBinding:XE,__decorate:kE,__exportStar:QE,__extends:KE,__generator:JE,__importDefault:o3,__importStar:s3,__makeTemplateObject:i3,__metadata:GE,__param:WE,__read:fp,__rest:VE,__spread:ZE,__spreadArrays:e3,__values:gu},Symbol.toStringTag,{value:"Module"})),aa=Ds(u3);var cs={},qc={},us={};class ni{}const h3=Object.freeze(Object.defineProperty({__proto__:null,IEvents:ni},Symbol.toStringTag,{value:"Module"})),f3=Ds(h3);var Al;function l3(){if(Al)return us;Al=1,Object.defineProperty(us,"__esModule",{value:!0}),us.IHeartBeat=void 0;const n=f3;class e extends n.IEvents{constructor(s){super()}}return us.IHeartBeat=e,us}var Pl;function lp(){return Pl||(Pl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),aa.__exportStar(l3(),n)}(qc)),qc}var Bc={},Qn={},Tl;function d3(){if(Tl)return Qn;Tl=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.HEARTBEAT_EVENTS=Qn.HEARTBEAT_INTERVAL=void 0;const n=ye;return Qn.HEARTBEAT_INTERVAL=n.FIVE_SECONDS,Qn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Qn}var Cl;function dp(){return Cl||(Cl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),aa.__exportStar(d3(),n)}(Bc)),Bc}var Nl;function p3(){if(Nl)return cs;Nl=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.HeartBeat=void 0;const n=aa,e=qr,t=ye,s=lp(),o=dp();class c extends s.IHeartBeat{constructor(l){super(l),this.events=new e.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=(l==null?void 0:l.interval)||o.HEARTBEAT_INTERVAL}static init(l){return n.__awaiter(this,void 0,void 0,function*(){const m=new c(l);return yield m.init(),m})}init(){return n.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(l,m){this.events.on(l,m)}once(l,m){this.events.once(l,m)}off(l,m){this.events.off(l,m)}removeListener(l,m){this.events.removeListener(l,m)}initialize(){return n.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return cs.HeartBeat=c,cs}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=aa;e.__exportStar(p3(),n),e.__exportStar(lp(),n),e.__exportStar(dp(),n)})(Ui);var Ze={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yu=function(n,e){return yu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},yu(n,e)};function g3(n,e){yu(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var _u=function(){return _u=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},_u.apply(this,arguments)};function y3(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function _3(n,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,s);else for(var l=n.length-1;l>=0;l--)(f=n[l])&&(c=(o<3?f(c):o>3?f(e,t,c):f(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function v3(n,e){return function(t,s){e(t,s,n)}}function m3(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function b3(n,e,t,s){function o(c){return c instanceof t?c:new t(function(f){f(c)})}return new(t||(t=Promise))(function(c,f){function l(D){try{_(s.next(D))}catch(A){f(A)}}function m(D){try{_(s.throw(D))}catch(A){f(A)}}function _(D){D.done?c(D.value):o(D.value).then(l,m)}_((s=s.apply(n,e||[])).next())})}function w3(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,f;return f={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function l(_){return function(D){return m([_,D])}}function m(_){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=_[0]&2?o.return:_[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,_[1])).done)return c;switch(o=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,o=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){t.label=_[1];break}if(_[0]===6&&t.label<c[1]){t.label=c[1],c=_;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(_);break}c[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(D){_=[6,D],o=0}finally{s=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}function E3(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}function S3(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function vu(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pp(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,c=[],f;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(l){f={error:l}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(f)throw f.error}}return c}function D3(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(pp(arguments[e]));return n}function O3(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],f=0,l=c.length;f<l;f++,o++)s[o]=c[f];return s}function ws(n){return this instanceof ws?(this.v=n,this):new ws(n)}function I3(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,c=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(P){s[P]&&(o[P]=function(C){return new Promise(function(R,B){c.push([P,C,R,B])>1||l(P,C)})})}function l(P,C){try{m(s[P](C))}catch(R){A(c[0][3],R)}}function m(P){P.value instanceof ws?Promise.resolve(P.value.v).then(_,D):A(c[0][2],P)}function _(P){l("next",P)}function D(P){l("throw",P)}function A(P,C){P(C),c.shift(),c.length&&l(c[0][0],c[0][1])}}function x3(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=n[o]?function(f){return(t=!t)?{value:ws(n[o](f)),done:o==="return"}:c?c(f):f}:c}}function A3(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof vu=="function"?vu(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=n[c]&&function(f){return new Promise(function(l,m){f=n[c](f),o(l,m,f.done,f.value)})}}function o(c,f,l,m){Promise.resolve(m).then(function(_){c({value:_,done:l})},f)}}function P3(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function T3(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function C3(n){return n&&n.__esModule?n:{default:n}}function N3(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function R3(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const U3=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return _u},__asyncDelegator:x3,__asyncGenerator:I3,__asyncValues:A3,__await:ws,__awaiter:b3,__classPrivateFieldGet:N3,__classPrivateFieldSet:R3,__createBinding:E3,__decorate:_3,__exportStar:S3,__extends:g3,__generator:w3,__importDefault:C3,__importStar:T3,__makeTemplateObject:P3,__metadata:m3,__param:v3,__read:pp,__rest:y3,__spread:D3,__spreadArrays:O3,__values:vu},Symbol.toStringTag,{value:"Module"})),$3=Ds(U3);var zc,Rl;function F3(){if(Rl)return zc;Rl=1;function n(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}zc=e;function e(t,s,o){var c=o&&o.stringify||n,f=1;if(typeof t=="object"&&t!==null){var l=s.length+f;if(l===1)return t;var m=new Array(l);m[0]=c(t);for(var _=1;_<l;_++)m[_]=c(s[_]);return m.join(" ")}if(typeof t!="string")return t;var D=s.length;if(D===0)return t;for(var A="",P=1-f,C=-1,R=t&&t.length||0,B=0;B<R;){if(t.charCodeAt(B)===37&&B+1<R){switch(C=C>-1?C:0,t.charCodeAt(B+1)){case 100:case 102:if(P>=D||s[P]==null)break;C<B&&(A+=t.slice(C,B)),A+=Number(s[P]),C=B+2,B++;break;case 105:if(P>=D||s[P]==null)break;C<B&&(A+=t.slice(C,B)),A+=Math.floor(Number(s[P])),C=B+2,B++;break;case 79:case 111:case 106:if(P>=D||s[P]===void 0)break;C<B&&(A+=t.slice(C,B));var M=typeof s[P];if(M==="string"){A+="'"+s[P]+"'",C=B+2,B++;break}if(M==="function"){A+=s[P].name||"<anonymous>",C=B+2,B++;break}A+=c(s[P]),C=B+2,B++;break;case 115:if(P>=D)break;C<B&&(A+=t.slice(C,B)),A+=String(s[P]),C=B+2,B++;break;case 37:C<B&&(A+=t.slice(C,B)),A+="%",C=B+2,B++,P--;break}++P}++B}return C===-1?t:(C<R&&(A+=t.slice(C)),A)}return zc}var Hc,Ul;function j3(){if(Ul)return Hc;Ul=1;const n=F3();Hc=o;const e=w().console||{},t={mapHttpRequest:R,mapHttpResponse:R,wrapRequestSerializer:B,wrapResponseSerializer:B,wrapErrorSerializer:B,req:R,res:R,err:P};function s(g,u){return Array.isArray(g)?g.filter(function(K){return K!=="!stdSerializers.err"}):g===!0?Object.keys(u):!1}function o(g){g=g||{},g.browser=g.browser||{};const u=g.browser.transmit;if(u&&typeof u.send!="function")throw Error("pino: transmit option must have a send function");const b=g.browser.write||e;g.browser.write&&(g.browser.asObject=!0);const K=g.serializers||{},G=s(g.browser.serialize,K);let se=g.browser.serialize;Array.isArray(g.browser.serialize)&&g.browser.serialize.indexOf("!stdSerializers.err")>-1&&(se=!1);const ce=["error","fatal","warn","info","debug","trace"];typeof b=="function"&&(b.error=b.fatal=b.warn=b.info=b.debug=b.trace=b),g.enabled===!1&&(g.level="silent");const de=g.level||"info",I=Object.create(b);I.log||(I.log=M),Object.defineProperty(I,"levelVal",{get:te}),Object.defineProperty(I,"level",{get:X,set:k});const N={transmit:u,serialize:G,asObject:g.browser.asObject,levels:ce,timestamp:C(g)};I.levels=o.levels,I.level=de,I.setMaxListeners=I.getMaxListeners=I.emit=I.addListener=I.on=I.prependListener=I.once=I.prependOnceListener=I.removeListener=I.removeAllListeners=I.listeners=I.listenerCount=I.eventNames=I.write=I.flush=M,I.serializers=K,I._serialize=G,I._stdErrSerialize=se,I.child=W,u&&(I._logEvent=A());function te(){return this.level==="silent"?1/0:this.levels.values[this.level]}function X(){return this._level}function k(J){if(J!=="silent"&&!this.levels.values[J])throw Error("unknown level "+J);this._level=J,c(N,I,"error","log"),c(N,I,"fatal","error"),c(N,I,"warn","error"),c(N,I,"info","log"),c(N,I,"debug","log"),c(N,I,"trace","log")}function W(J,ne){if(!J)throw new Error("missing bindings for child Pino");ne=ne||{},G&&J.serializers&&(ne.serializers=J.serializers);const be=ne.serializers;if(G&&be){var oe=Object.assign({},K,be),we=g.browser.serialize===!0?Object.keys(oe):G;delete J.serializers,m([J],we,oe,this._stdErrSerialize)}function fe(ve){this._childLevel=(ve._childLevel|0)+1,this.error=_(ve,J,"error"),this.fatal=_(ve,J,"fatal"),this.warn=_(ve,J,"warn"),this.info=_(ve,J,"info"),this.debug=_(ve,J,"debug"),this.trace=_(ve,J,"trace"),oe&&(this.serializers=oe,this._serialize=we),u&&(this._logEvent=A([].concat(ve._logEvent.bindings,J)))}return fe.prototype=this,new fe(this)}return I}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=t,o.stdTimeFunctions=Object.assign({},{nullTime:ee,epochTime:p,unixTime:E,isoTime:v});function c(g,u,b,K){const G=Object.getPrototypeOf(u);u[b]=u.levelVal>u.levels.values[b]?M:G[b]?G[b]:e[b]||e[K]||M,f(g,u,b)}function f(g,u,b){!g.transmit&&u[b]===M||(u[b]=function(K){return function(){const se=g.timestamp(),ce=new Array(arguments.length),de=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var I=0;I<ce.length;I++)ce[I]=arguments[I];if(g.serialize&&!g.asObject&&m(ce,this._serialize,this.serializers,this._stdErrSerialize),g.asObject?K.call(de,l(this,b,ce,se)):K.apply(de,ce),g.transmit){const N=g.transmit.level||u.level,te=o.levels.values[N],X=o.levels.values[b];if(X<te)return;D(this,{ts:se,methodLevel:b,methodValue:X,transmitLevel:N,transmitValue:o.levels.values[g.transmit.level||u.level],send:g.transmit.send,val:u.levelVal},ce)}}}(u[b]))}function l(g,u,b,K){g._serialize&&m(b,g._serialize,g.serializers,g._stdErrSerialize);const G=b.slice();let se=G[0];const ce={};K&&(ce.time=K),ce.level=o.levels.values[u];let de=(g._childLevel|0)+1;if(de<1&&(de=1),se!==null&&typeof se=="object"){for(;de--&&typeof G[0]=="object";)Object.assign(ce,G.shift());se=G.length?n(G.shift(),G):void 0}else typeof se=="string"&&(se=n(G.shift(),G));return se!==void 0&&(ce.msg=se),ce}function m(g,u,b,K){for(const G in g)if(K&&g[G]instanceof Error)g[G]=o.stdSerializers.err(g[G]);else if(typeof g[G]=="object"&&!Array.isArray(g[G]))for(const se in g[G])u&&u.indexOf(se)>-1&&se in b&&(g[G][se]=b[se](g[G][se]))}function _(g,u,b){return function(){const K=new Array(1+arguments.length);K[0]=u;for(var G=1;G<K.length;G++)K[G]=arguments[G-1];return g[b].apply(this,K)}}function D(g,u,b){const K=u.send,G=u.ts,se=u.methodLevel,ce=u.methodValue,de=u.val,I=g._logEvent.bindings;m(b,g._serialize||Object.keys(g.serializers),g.serializers,g._stdErrSerialize===void 0?!0:g._stdErrSerialize),g._logEvent.ts=G,g._logEvent.messages=b.filter(function(N){return I.indexOf(N)===-1}),g._logEvent.level.label=se,g._logEvent.level.value=ce,K(se,g._logEvent,de),g._logEvent=A(I)}function A(g){return{ts:0,messages:[],bindings:g||[],level:{label:"",value:0}}}function P(g){const u={type:g.constructor.name,msg:g.message,stack:g.stack};for(const b in g)u[b]===void 0&&(u[b]=g[b]);return u}function C(g){return typeof g.timestamp=="function"?g.timestamp:g.timestamp===!1?ee:p}function R(){return{}}function B(g){return g}function M(){}function ee(){return!1}function p(){return Date.now()}function E(){return Math.round(Date.now()/1e3)}function v(){return new Date(Date.now()).toISOString()}function w(){function g(u){return typeof u<"u"&&u}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return g(self)||g(window)||g(this)||{}}}return Hc}var Zn={},$l;function gp(){return $l||($l=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.PINO_CUSTOM_CONTEXT_KEY=Zn.PINO_LOGGER_DEFAULTS=void 0,Zn.PINO_LOGGER_DEFAULTS={level:"info"},Zn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Zn}var cr={},Fl;function L3(){if(Fl)return cr;Fl=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.generateChildLogger=cr.formatChildLoggerContext=cr.getLoggerContext=cr.setBrowserLoggerContext=cr.getBrowserLoggerContext=cr.getDefaultLoggerOptions=void 0;const n=gp();function e(l){return Object.assign(Object.assign({},l),{level:(l==null?void 0:l.level)||n.PINO_LOGGER_DEFAULTS.level})}cr.getDefaultLoggerOptions=e;function t(l,m=n.PINO_CUSTOM_CONTEXT_KEY){return l[m]||""}cr.getBrowserLoggerContext=t;function s(l,m,_=n.PINO_CUSTOM_CONTEXT_KEY){return l[_]=m,l}cr.setBrowserLoggerContext=s;function o(l,m=n.PINO_CUSTOM_CONTEXT_KEY){let _="";return typeof l.bindings>"u"?_=t(l,m):_=l.bindings().context||"",_}cr.getLoggerContext=o;function c(l,m,_=n.PINO_CUSTOM_CONTEXT_KEY){const D=o(l,_);return D.trim()?`${D}/${m}`:m}cr.formatChildLoggerContext=c;function f(l,m,_=n.PINO_CUSTOM_CONTEXT_KEY){const D=c(l,m,_),A=l.child({context:D});return s(A,D,_)}return cr.generateChildLogger=f,cr}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.pino=void 0;const e=$3,t=e.__importDefault(j3());Object.defineProperty(n,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(gp(),n),e.__exportStar(L3(),n)})(Ze);class M3 extends ni{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class q3 extends ni{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class B3{constructor(e,t){this.logger=e,this.core=t}}let z3=class extends ni{constructor(e,t){super(),this.relayer=e,this.logger=t}},H3=class extends ni{constructor(e){super()}},K3=class{constructor(e,t,s,o){this.core=e,this.logger=t,this.name=s}};class V3 extends ni{constructor(e,t){super(),this.relayer=e,this.logger=t}}let k3=class extends ni{constructor(e,t){super(),this.core=e,this.logger=t}},W3=class{constructor(e,t){this.projectId=e,this.logger=t}},G3=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},Y3=class{constructor(e){this.client=e}};const J3=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),X3=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function Hu(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return X3(n)}catch{return n}}function Es(n){return typeof n=="string"?n:J3(n)||""}var Ku={},yp={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Fe,t=xr;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var s=function(){function l(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},l.prototype.update=function(m,_){if(_===void 0&&(_=m.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var D=0;if(this._bytesHashed+=_,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&_>0;)this._buffer[this._bufferLength++]=m[D++],_--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(_>=this.blockSize&&(D=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,m,D,_),_%=this.blockSize);_>0;)this._buffer[this._bufferLength++]=m[D++],_--;return this},l.prototype.finish=function(m){if(!this._finished){var _=this._bytesHashed,D=this._bufferLength,A=_/536870912|0,P=_<<3,C=_%128<112?128:256;this._buffer[D]=128;for(var R=D+1;R<C-8;R++)this._buffer[R]=0;e.writeUint32BE(A,this._buffer,C-8),e.writeUint32BE(P,this._buffer,C-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,C),this._finished=!0}for(var R=0;R<this.digestLength/8;R++)e.writeUint32BE(this._stateHi[R],m,R*8),e.writeUint32BE(this._stateLo[R],m,R*8+4);return this},l.prototype.digest=function(){var m=new Uint8Array(this.digestLength);return this.finish(m),m},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(m){return this._stateHi.set(m.stateHi),this._stateLo.set(m.stateLo),this._bufferLength=m.bufferLength,m.buffer&&this._buffer.set(m.buffer),this._bytesHashed=m.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(m){t.wipe(m.stateHi),t.wipe(m.stateLo),m.buffer&&t.wipe(m.buffer),m.bufferLength=0,m.bytesHashed=0},l}();n.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(l,m,_,D,A,P,C){for(var R=_[0],B=_[1],M=_[2],ee=_[3],p=_[4],E=_[5],v=_[6],w=_[7],g=D[0],u=D[1],b=D[2],K=D[3],G=D[4],se=D[5],ce=D[6],de=D[7],I,N,te,X,k,W,J,ne;C>=128;){for(var be=0;be<16;be++){var oe=8*be+P;l[be]=e.readUint32BE(A,oe),m[be]=e.readUint32BE(A,oe+4)}for(var be=0;be<80;be++){var we=R,fe=B,ve=M,H=ee,z=p,F=E,d=v,U=w,ae=g,le=u,Oe=b,ze=K,Ve=G,je=se,yt=ce,_t=de;if(I=w,N=de,k=N&65535,W=N>>>16,J=I&65535,ne=I>>>16,I=(p>>>14|G<<32-14)^(p>>>18|G<<32-18)^(G>>>41-32|p<<32-(41-32)),N=(G>>>14|p<<32-14)^(G>>>18|p<<32-18)^(p>>>41-32|G<<32-(41-32)),k+=N&65535,W+=N>>>16,J+=I&65535,ne+=I>>>16,I=p&E^~p&v,N=G&se^~G&ce,k+=N&65535,W+=N>>>16,J+=I&65535,ne+=I>>>16,I=o[be*2],N=o[be*2+1],k+=N&65535,W+=N>>>16,J+=I&65535,ne+=I>>>16,I=l[be%16],N=m[be%16],k+=N&65535,W+=N>>>16,J+=I&65535,ne+=I>>>16,W+=k>>>16,J+=W>>>16,ne+=J>>>16,te=J&65535|ne<<16,X=k&65535|W<<16,I=te,N=X,k=N&65535,W=N>>>16,J=I&65535,ne=I>>>16,I=(R>>>28|g<<32-28)^(g>>>34-32|R<<32-(34-32))^(g>>>39-32|R<<32-(39-32)),N=(g>>>28|R<<32-28)^(R>>>34-32|g<<32-(34-32))^(R>>>39-32|g<<32-(39-32)),k+=N&65535,W+=N>>>16,J+=I&65535,ne+=I>>>16,I=R&B^R&M^B&M,N=g&u^g&b^u&b,k+=N&65535,W+=N>>>16,J+=I&65535,ne+=I>>>16,W+=k>>>16,J+=W>>>16,ne+=J>>>16,U=J&65535|ne<<16,_t=k&65535|W<<16,I=H,N=ze,k=N&65535,W=N>>>16,J=I&65535,ne=I>>>16,I=te,N=X,k+=N&65535,W+=N>>>16,J+=I&65535,ne+=I>>>16,W+=k>>>16,J+=W>>>16,ne+=J>>>16,H=J&65535|ne<<16,ze=k&65535|W<<16,B=we,M=fe,ee=ve,p=H,E=z,v=F,w=d,R=U,u=ae,b=le,K=Oe,G=ze,se=Ve,ce=je,de=yt,g=_t,be%16===15)for(var oe=0;oe<16;oe++)I=l[oe],N=m[oe],k=N&65535,W=N>>>16,J=I&65535,ne=I>>>16,I=l[(oe+9)%16],N=m[(oe+9)%16],k+=N&65535,W+=N>>>16,J+=I&65535,ne+=I>>>16,te=l[(oe+1)%16],X=m[(oe+1)%16],I=(te>>>1|X<<32-1)^(te>>>8|X<<32-8)^te>>>7,N=(X>>>1|te<<32-1)^(X>>>8|te<<32-8)^(X>>>7|te<<32-7),k+=N&65535,W+=N>>>16,J+=I&65535,ne+=I>>>16,te=l[(oe+14)%16],X=m[(oe+14)%16],I=(te>>>19|X<<32-19)^(X>>>61-32|te<<32-(61-32))^te>>>6,N=(X>>>19|te<<32-19)^(te>>>61-32|X<<32-(61-32))^(X>>>6|te<<32-6),k+=N&65535,W+=N>>>16,J+=I&65535,ne+=I>>>16,W+=k>>>16,J+=W>>>16,ne+=J>>>16,l[oe]=J&65535|ne<<16,m[oe]=k&65535|W<<16}I=R,N=g,k=N&65535,W=N>>>16,J=I&65535,ne=I>>>16,I=_[0],N=D[0],k+=N&65535,W+=N>>>16,J+=I&65535,ne+=I>>>16,W+=k>>>16,J+=W>>>16,ne+=J>>>16,_[0]=R=J&65535|ne<<16,D[0]=g=k&65535|W<<16,I=B,N=u,k=N&65535,W=N>>>16,J=I&65535,ne=I>>>16,I=_[1],N=D[1],k+=N&65535,W+=N>>>16,J+=I&65535,ne+=I>>>16,W+=k>>>16,J+=W>>>16,ne+=J>>>16,_[1]=B=J&65535|ne<<16,D[1]=u=k&65535|W<<16,I=M,N=b,k=N&65535,W=N>>>16,J=I&65535,ne=I>>>16,I=_[2],N=D[2],k+=N&65535,W+=N>>>16,J+=I&65535,ne+=I>>>16,W+=k>>>16,J+=W>>>16,ne+=J>>>16,_[2]=M=J&65535|ne<<16,D[2]=b=k&65535|W<<16,I=ee,N=K,k=N&65535,W=N>>>16,J=I&65535,ne=I>>>16,I=_[3],N=D[3],k+=N&65535,W+=N>>>16,J+=I&65535,ne+=I>>>16,W+=k>>>16,J+=W>>>16,ne+=J>>>16,_[3]=ee=J&65535|ne<<16,D[3]=K=k&65535|W<<16,I=p,N=G,k=N&65535,W=N>>>16,J=I&65535,ne=I>>>16,I=_[4],N=D[4],k+=N&65535,W+=N>>>16,J+=I&65535,ne+=I>>>16,W+=k>>>16,J+=W>>>16,ne+=J>>>16,_[4]=p=J&65535|ne<<16,D[4]=G=k&65535|W<<16,I=E,N=se,k=N&65535,W=N>>>16,J=I&65535,ne=I>>>16,I=_[5],N=D[5],k+=N&65535,W+=N>>>16,J+=I&65535,ne+=I>>>16,W+=k>>>16,J+=W>>>16,ne+=J>>>16,_[5]=E=J&65535|ne<<16,D[5]=se=k&65535|W<<16,I=v,N=ce,k=N&65535,W=N>>>16,J=I&65535,ne=I>>>16,I=_[6],N=D[6],k+=N&65535,W+=N>>>16,J+=I&65535,ne+=I>>>16,W+=k>>>16,J+=W>>>16,ne+=J>>>16,_[6]=v=J&65535|ne<<16,D[6]=ce=k&65535|W<<16,I=w,N=de,k=N&65535,W=N>>>16,J=I&65535,ne=I>>>16,I=_[7],N=D[7],k+=N&65535,W+=N>>>16,J+=I&65535,ne+=I>>>16,W+=k>>>16,J+=W>>>16,ne+=J>>>16,_[7]=w=J&65535|ne<<16,D[7]=de=k&65535|W<<16,P+=128,C-=128}return P}function f(l){var m=new s;m.update(l);var _=m.digest();return m.clean(),_}n.hash=f})(yp);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const e=Ni,t=yp,s=xr;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function o(H){const z=new Float64Array(16);if(H)for(let F=0;F<H.length;F++)z[F]=H[F];return z}const c=new Uint8Array(32);c[0]=9;const f=o(),l=o([1]),m=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),_=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),D=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),A=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),P=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function C(H,z){for(let F=0;F<16;F++)H[F]=z[F]|0}function R(H){let z=1;for(let F=0;F<16;F++){let d=H[F]+z+65535;z=Math.floor(d/65536),H[F]=d-z*65536}H[0]+=z-1+37*(z-1)}function B(H,z,F){const d=~(F-1);for(let U=0;U<16;U++){const ae=d&(H[U]^z[U]);H[U]^=ae,z[U]^=ae}}function M(H,z){const F=o(),d=o();for(let U=0;U<16;U++)d[U]=z[U];R(d),R(d),R(d);for(let U=0;U<2;U++){F[0]=d[0]-65517;for(let le=1;le<15;le++)F[le]=d[le]-65535-(F[le-1]>>16&1),F[le-1]&=65535;F[15]=d[15]-32767-(F[14]>>16&1);const ae=F[15]>>16&1;F[14]&=65535,B(d,F,1-ae)}for(let U=0;U<16;U++)H[2*U]=d[U]&255,H[2*U+1]=d[U]>>8}function ee(H,z){let F=0;for(let d=0;d<32;d++)F|=H[d]^z[d];return(1&F-1>>>8)-1}function p(H,z){const F=new Uint8Array(32),d=new Uint8Array(32);return M(F,H),M(d,z),ee(F,d)}function E(H){const z=new Uint8Array(32);return M(z,H),z[0]&1}function v(H,z){for(let F=0;F<16;F++)H[F]=z[2*F]+(z[2*F+1]<<8);H[15]&=32767}function w(H,z,F){for(let d=0;d<16;d++)H[d]=z[d]+F[d]}function g(H,z,F){for(let d=0;d<16;d++)H[d]=z[d]-F[d]}function u(H,z,F){let d,U,ae=0,le=0,Oe=0,ze=0,Ve=0,je=0,yt=0,_t=0,Me=0,Ie=0,Re=0,Ue=0,qe=0,Ae=0,$e=0,De=0,Pe=0,He=0,xe=0,ke=0,Ge=0,et=0,tt=0,Je=0,rr=0,lr=0,Yr=0,nr=0,sn=0,vn=0,Fn=0,St=F[0],vt=F[1],Dt=F[2],Ot=F[3],wt=F[4],mt=F[5],Ft=F[6],jt=F[7],It=F[8],Lt=F[9],xt=F[10],Ct=F[11],At=F[12],ht=F[13],Mt=F[14],qt=F[15];d=z[0],ae+=d*St,le+=d*vt,Oe+=d*Dt,ze+=d*Ot,Ve+=d*wt,je+=d*mt,yt+=d*Ft,_t+=d*jt,Me+=d*It,Ie+=d*Lt,Re+=d*xt,Ue+=d*Ct,qe+=d*At,Ae+=d*ht,$e+=d*Mt,De+=d*qt,d=z[1],le+=d*St,Oe+=d*vt,ze+=d*Dt,Ve+=d*Ot,je+=d*wt,yt+=d*mt,_t+=d*Ft,Me+=d*jt,Ie+=d*It,Re+=d*Lt,Ue+=d*xt,qe+=d*Ct,Ae+=d*At,$e+=d*ht,De+=d*Mt,Pe+=d*qt,d=z[2],Oe+=d*St,ze+=d*vt,Ve+=d*Dt,je+=d*Ot,yt+=d*wt,_t+=d*mt,Me+=d*Ft,Ie+=d*jt,Re+=d*It,Ue+=d*Lt,qe+=d*xt,Ae+=d*Ct,$e+=d*At,De+=d*ht,Pe+=d*Mt,He+=d*qt,d=z[3],ze+=d*St,Ve+=d*vt,je+=d*Dt,yt+=d*Ot,_t+=d*wt,Me+=d*mt,Ie+=d*Ft,Re+=d*jt,Ue+=d*It,qe+=d*Lt,Ae+=d*xt,$e+=d*Ct,De+=d*At,Pe+=d*ht,He+=d*Mt,xe+=d*qt,d=z[4],Ve+=d*St,je+=d*vt,yt+=d*Dt,_t+=d*Ot,Me+=d*wt,Ie+=d*mt,Re+=d*Ft,Ue+=d*jt,qe+=d*It,Ae+=d*Lt,$e+=d*xt,De+=d*Ct,Pe+=d*At,He+=d*ht,xe+=d*Mt,ke+=d*qt,d=z[5],je+=d*St,yt+=d*vt,_t+=d*Dt,Me+=d*Ot,Ie+=d*wt,Re+=d*mt,Ue+=d*Ft,qe+=d*jt,Ae+=d*It,$e+=d*Lt,De+=d*xt,Pe+=d*Ct,He+=d*At,xe+=d*ht,ke+=d*Mt,Ge+=d*qt,d=z[6],yt+=d*St,_t+=d*vt,Me+=d*Dt,Ie+=d*Ot,Re+=d*wt,Ue+=d*mt,qe+=d*Ft,Ae+=d*jt,$e+=d*It,De+=d*Lt,Pe+=d*xt,He+=d*Ct,xe+=d*At,ke+=d*ht,Ge+=d*Mt,et+=d*qt,d=z[7],_t+=d*St,Me+=d*vt,Ie+=d*Dt,Re+=d*Ot,Ue+=d*wt,qe+=d*mt,Ae+=d*Ft,$e+=d*jt,De+=d*It,Pe+=d*Lt,He+=d*xt,xe+=d*Ct,ke+=d*At,Ge+=d*ht,et+=d*Mt,tt+=d*qt,d=z[8],Me+=d*St,Ie+=d*vt,Re+=d*Dt,Ue+=d*Ot,qe+=d*wt,Ae+=d*mt,$e+=d*Ft,De+=d*jt,Pe+=d*It,He+=d*Lt,xe+=d*xt,ke+=d*Ct,Ge+=d*At,et+=d*ht,tt+=d*Mt,Je+=d*qt,d=z[9],Ie+=d*St,Re+=d*vt,Ue+=d*Dt,qe+=d*Ot,Ae+=d*wt,$e+=d*mt,De+=d*Ft,Pe+=d*jt,He+=d*It,xe+=d*Lt,ke+=d*xt,Ge+=d*Ct,et+=d*At,tt+=d*ht,Je+=d*Mt,rr+=d*qt,d=z[10],Re+=d*St,Ue+=d*vt,qe+=d*Dt,Ae+=d*Ot,$e+=d*wt,De+=d*mt,Pe+=d*Ft,He+=d*jt,xe+=d*It,ke+=d*Lt,Ge+=d*xt,et+=d*Ct,tt+=d*At,Je+=d*ht,rr+=d*Mt,lr+=d*qt,d=z[11],Ue+=d*St,qe+=d*vt,Ae+=d*Dt,$e+=d*Ot,De+=d*wt,Pe+=d*mt,He+=d*Ft,xe+=d*jt,ke+=d*It,Ge+=d*Lt,et+=d*xt,tt+=d*Ct,Je+=d*At,rr+=d*ht,lr+=d*Mt,Yr+=d*qt,d=z[12],qe+=d*St,Ae+=d*vt,$e+=d*Dt,De+=d*Ot,Pe+=d*wt,He+=d*mt,xe+=d*Ft,ke+=d*jt,Ge+=d*It,et+=d*Lt,tt+=d*xt,Je+=d*Ct,rr+=d*At,lr+=d*ht,Yr+=d*Mt,nr+=d*qt,d=z[13],Ae+=d*St,$e+=d*vt,De+=d*Dt,Pe+=d*Ot,He+=d*wt,xe+=d*mt,ke+=d*Ft,Ge+=d*jt,et+=d*It,tt+=d*Lt,Je+=d*xt,rr+=d*Ct,lr+=d*At,Yr+=d*ht,nr+=d*Mt,sn+=d*qt,d=z[14],$e+=d*St,De+=d*vt,Pe+=d*Dt,He+=d*Ot,xe+=d*wt,ke+=d*mt,Ge+=d*Ft,et+=d*jt,tt+=d*It,Je+=d*Lt,rr+=d*xt,lr+=d*Ct,Yr+=d*At,nr+=d*ht,sn+=d*Mt,vn+=d*qt,d=z[15],De+=d*St,Pe+=d*vt,He+=d*Dt,xe+=d*Ot,ke+=d*wt,Ge+=d*mt,et+=d*Ft,tt+=d*jt,Je+=d*It,rr+=d*Lt,lr+=d*xt,Yr+=d*Ct,nr+=d*At,sn+=d*ht,vn+=d*Mt,Fn+=d*qt,ae+=38*Pe,le+=38*He,Oe+=38*xe,ze+=38*ke,Ve+=38*Ge,je+=38*et,yt+=38*tt,_t+=38*Je,Me+=38*rr,Ie+=38*lr,Re+=38*Yr,Ue+=38*nr,qe+=38*sn,Ae+=38*vn,$e+=38*Fn,U=1,d=ae+U+65535,U=Math.floor(d/65536),ae=d-U*65536,d=le+U+65535,U=Math.floor(d/65536),le=d-U*65536,d=Oe+U+65535,U=Math.floor(d/65536),Oe=d-U*65536,d=ze+U+65535,U=Math.floor(d/65536),ze=d-U*65536,d=Ve+U+65535,U=Math.floor(d/65536),Ve=d-U*65536,d=je+U+65535,U=Math.floor(d/65536),je=d-U*65536,d=yt+U+65535,U=Math.floor(d/65536),yt=d-U*65536,d=_t+U+65535,U=Math.floor(d/65536),_t=d-U*65536,d=Me+U+65535,U=Math.floor(d/65536),Me=d-U*65536,d=Ie+U+65535,U=Math.floor(d/65536),Ie=d-U*65536,d=Re+U+65535,U=Math.floor(d/65536),Re=d-U*65536,d=Ue+U+65535,U=Math.floor(d/65536),Ue=d-U*65536,d=qe+U+65535,U=Math.floor(d/65536),qe=d-U*65536,d=Ae+U+65535,U=Math.floor(d/65536),Ae=d-U*65536,d=$e+U+65535,U=Math.floor(d/65536),$e=d-U*65536,d=De+U+65535,U=Math.floor(d/65536),De=d-U*65536,ae+=U-1+37*(U-1),U=1,d=ae+U+65535,U=Math.floor(d/65536),ae=d-U*65536,d=le+U+65535,U=Math.floor(d/65536),le=d-U*65536,d=Oe+U+65535,U=Math.floor(d/65536),Oe=d-U*65536,d=ze+U+65535,U=Math.floor(d/65536),ze=d-U*65536,d=Ve+U+65535,U=Math.floor(d/65536),Ve=d-U*65536,d=je+U+65535,U=Math.floor(d/65536),je=d-U*65536,d=yt+U+65535,U=Math.floor(d/65536),yt=d-U*65536,d=_t+U+65535,U=Math.floor(d/65536),_t=d-U*65536,d=Me+U+65535,U=Math.floor(d/65536),Me=d-U*65536,d=Ie+U+65535,U=Math.floor(d/65536),Ie=d-U*65536,d=Re+U+65535,U=Math.floor(d/65536),Re=d-U*65536,d=Ue+U+65535,U=Math.floor(d/65536),Ue=d-U*65536,d=qe+U+65535,U=Math.floor(d/65536),qe=d-U*65536,d=Ae+U+65535,U=Math.floor(d/65536),Ae=d-U*65536,d=$e+U+65535,U=Math.floor(d/65536),$e=d-U*65536,d=De+U+65535,U=Math.floor(d/65536),De=d-U*65536,ae+=U-1+37*(U-1),H[0]=ae,H[1]=le,H[2]=Oe,H[3]=ze,H[4]=Ve,H[5]=je,H[6]=yt,H[7]=_t,H[8]=Me,H[9]=Ie,H[10]=Re,H[11]=Ue,H[12]=qe,H[13]=Ae,H[14]=$e,H[15]=De}function b(H,z){u(H,z,z)}function K(H,z){const F=o();let d;for(d=0;d<16;d++)F[d]=z[d];for(d=253;d>=0;d--)b(F,F),d!==2&&d!==4&&u(F,F,z);for(d=0;d<16;d++)H[d]=F[d]}function G(H,z){const F=o();let d;for(d=0;d<16;d++)F[d]=z[d];for(d=250;d>=0;d--)b(F,F),d!==1&&u(F,F,z);for(d=0;d<16;d++)H[d]=F[d]}function se(H,z){const F=o(),d=o(),U=o(),ae=o(),le=o(),Oe=o(),ze=o(),Ve=o(),je=o();g(F,H[1],H[0]),g(je,z[1],z[0]),u(F,F,je),w(d,H[0],H[1]),w(je,z[0],z[1]),u(d,d,je),u(U,H[3],z[3]),u(U,U,_),u(ae,H[2],z[2]),w(ae,ae,ae),g(le,d,F),g(Oe,ae,U),w(ze,ae,U),w(Ve,d,F),u(H[0],le,Oe),u(H[1],Ve,ze),u(H[2],ze,Oe),u(H[3],le,Ve)}function ce(H,z,F){for(let d=0;d<4;d++)B(H[d],z[d],F)}function de(H,z){const F=o(),d=o(),U=o();K(U,z[2]),u(F,z[0],U),u(d,z[1],U),M(H,d),H[31]^=E(F)<<7}function I(H,z,F){C(H[0],f),C(H[1],l),C(H[2],l),C(H[3],f);for(let d=255;d>=0;--d){const U=F[d/8|0]>>(d&7)&1;ce(H,z,U),se(z,H),se(H,H),ce(H,z,U)}}function N(H,z){const F=[o(),o(),o(),o()];C(F[0],D),C(F[1],A),C(F[2],l),u(F[3],D,A),I(H,F,z)}function te(H){if(H.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const z=(0,t.hash)(H);z[0]&=248,z[31]&=127,z[31]|=64;const F=new Uint8Array(32),d=[o(),o(),o(),o()];N(d,z),de(F,d);const U=new Uint8Array(64);return U.set(H),U.set(F,32),{publicKey:F,secretKey:U}}n.generateKeyPairFromSeed=te;function X(H){const z=(0,e.randomBytes)(32,H),F=te(z);return(0,s.wipe)(z),F}n.generateKeyPair=X;function k(H){if(H.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(H.subarray(32))}n.extractPublicKeyFromSecretKey=k;const W=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function J(H,z){let F,d,U,ae;for(d=63;d>=32;--d){for(F=0,U=d-32,ae=d-12;U<ae;++U)z[U]+=F-16*z[d]*W[U-(d-32)],F=Math.floor((z[U]+128)/256),z[U]-=F*256;z[U]+=F,z[d]=0}for(F=0,U=0;U<32;U++)z[U]+=F-(z[31]>>4)*W[U],F=z[U]>>8,z[U]&=255;for(U=0;U<32;U++)z[U]-=F*W[U];for(d=0;d<32;d++)z[d+1]+=z[d]>>8,H[d]=z[d]&255}function ne(H){const z=new Float64Array(64);for(let F=0;F<64;F++)z[F]=H[F];for(let F=0;F<64;F++)H[F]=0;J(H,z)}function be(H,z){const F=new Float64Array(64),d=[o(),o(),o(),o()],U=(0,t.hash)(H.subarray(0,32));U[0]&=248,U[31]&=127,U[31]|=64;const ae=new Uint8Array(64);ae.set(U.subarray(32),32);const le=new t.SHA512;le.update(ae.subarray(32)),le.update(z);const Oe=le.digest();le.clean(),ne(Oe),N(d,Oe),de(ae,d),le.reset(),le.update(ae.subarray(0,32)),le.update(H.subarray(32)),le.update(z);const ze=le.digest();ne(ze);for(let Ve=0;Ve<32;Ve++)F[Ve]=Oe[Ve];for(let Ve=0;Ve<32;Ve++)for(let je=0;je<32;je++)F[Ve+je]+=ze[Ve]*U[je];return J(ae.subarray(32),F),ae}n.sign=be;function oe(H,z){const F=o(),d=o(),U=o(),ae=o(),le=o(),Oe=o(),ze=o();return C(H[2],l),v(H[1],z),b(U,H[1]),u(ae,U,m),g(U,U,H[2]),w(ae,H[2],ae),b(le,ae),b(Oe,le),u(ze,Oe,le),u(F,ze,U),u(F,F,ae),G(F,F),u(F,F,U),u(F,F,ae),u(F,F,ae),u(H[0],F,ae),b(d,H[0]),u(d,d,ae),p(d,U)&&u(H[0],H[0],P),b(d,H[0]),u(d,d,ae),p(d,U)?-1:(E(H[0])===z[31]>>7&&g(H[0],f,H[0]),u(H[3],H[0],H[1]),0)}function we(H,z,F){const d=new Uint8Array(32),U=[o(),o(),o(),o()],ae=[o(),o(),o(),o()];if(F.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(oe(ae,H))return!1;const le=new t.SHA512;le.update(F.subarray(0,32)),le.update(H),le.update(z);const Oe=le.digest();return ne(Oe),I(U,ae,Oe),N(ae,F.subarray(32)),se(U,ae),de(d,U),!ee(F,d)}n.verify=we;function fe(H){let z=[o(),o(),o(),o()];if(oe(z,H))throw new Error("Ed25519: invalid public key");let F=o(),d=o(),U=z[1];w(F,l,U),g(d,l,U),K(d,d),u(F,F,d);let ae=new Uint8Array(32);return M(ae,F),ae}n.convertPublicKeyToX25519=fe;function ve(H){const z=(0,t.hash)(H.subarray(0,32));z[0]&=248,z[31]&=127,z[31]|=64;const F=new Uint8Array(z.subarray(0,32));return(0,s.wipe)(z),F}n.convertSecretKeyToX25519=ve})(Ku);const Q3="EdDSA",Z3="JWT",_p=".",vp="base64url",eS="utf8",tS="utf8",rS=":",nS="did",iS="key",jl="base58btc",sS="z",oS="K36",aS=32;function Ko(n){return fr(br(Es(n),eS),vp)}function mp(n){const e=br(oS,jl),t=sS+fr(su([e,n]),jl);return[nS,iS,t].join(rS)}function cS(n){return fr(n,vp)}function uS(n){return br([Ko(n.header),Ko(n.payload)].join(_p),tS)}function hS(n){return[Ko(n.header),Ko(n.payload),cS(n.signature)].join(_p)}function Ll(n=Ni.randomBytes(aS)){return Ku.generateKeyPairFromSeed(n)}async function fS(n,e,t,s,o=ye.fromMiliseconds(Date.now())){const c={alg:Q3,typ:Z3},f=mp(s.publicKey),l=o+t,m={iss:f,sub:n,aud:e,iat:o,exp:l},_=uS({header:c,payload:m}),D=Ku.sign(s.secretKey,_);return hS({header:c,payload:m,signature:D})}var Ml=globalThis&&globalThis.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var s=0,o=e.length,c;s<o;s++)(c||!(s in e))&&(c||(c=Array.prototype.slice.call(e,0,s)),c[s]=e[s]);return n.concat(c||Array.prototype.slice.call(e))},lS=function(){function n(e,t,s){this.name=e,this.version=t,this.os=s,this.type="browser"}return n}(),dS=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=ti.platform}return n}(),pS=function(){function n(e,t,s,o){this.name=e,this.version=t,this.os=s,this.bot=o,this.type="bot-device"}return n}(),gS=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),yS=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),_S=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,vS=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ql=3,mS=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",_S]],Bl=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function bS(n){return n?zl(n):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new yS:typeof navigator<"u"?zl(navigator.userAgent):SS()}function wS(n){return n!==""&&mS.reduce(function(e,t){var s=t[0],o=t[1];if(e)return e;var c=o.exec(n);return!!c&&[s,c]},!1)}function zl(n){var e=wS(n);if(!e)return null;var t=e[0],s=e[1];if(t==="searchbot")return new gS;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<ql&&(o=Ml(Ml([],o,!0),DS(ql-o.length),!0)):o=[];var c=o.join("."),f=ES(n),l=vS.exec(n);return l&&l[1]?new pS(t,c,f,l[1]):new lS(t,c,f)}function ES(n){for(var e=0,t=Bl.length;e<t;e++){var s=Bl[e],o=s[0],c=s[1],f=c.exec(n);if(f)return o}return null}function SS(){var n=typeof ti<"u"&&ti.version;return n?new dS(ti.version.slice(1)):null}function DS(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.getLocalStorage=lt.getLocalStorageOrThrow=lt.getCrypto=lt.getCryptoOrThrow=wp=lt.getLocation=lt.getLocationOrThrow=Vu=lt.getNavigator=lt.getNavigatorOrThrow=bp=lt.getDocument=lt.getDocumentOrThrow=lt.getFromWindowOrThrow=lt.getFromWindow=void 0;function ii(n){let e;return typeof window<"u"&&typeof window[n]<"u"&&(e=window[n]),e}lt.getFromWindow=ii;function $i(n){const e=ii(n);if(!e)throw new Error(`${n} is not defined in Window`);return e}lt.getFromWindowOrThrow=$i;function OS(){return $i("document")}lt.getDocumentOrThrow=OS;function IS(){return ii("document")}var bp=lt.getDocument=IS;function xS(){return $i("navigator")}lt.getNavigatorOrThrow=xS;function AS(){return ii("navigator")}var Vu=lt.getNavigator=AS;function PS(){return $i("location")}lt.getLocationOrThrow=PS;function TS(){return ii("location")}var wp=lt.getLocation=TS;function CS(){return $i("crypto")}lt.getCryptoOrThrow=CS;function NS(){return ii("crypto")}lt.getCrypto=NS;function RS(){return $i("localStorage")}lt.getLocalStorageOrThrow=RS;function US(){return ii("localStorage")}lt.getLocalStorage=US;var ku={};Object.defineProperty(ku,"__esModule",{value:!0});var Ep=ku.getWindowMetadata=void 0;const Hl=lt;function $S(){let n,e;try{n=Hl.getDocumentOrThrow(),e=Hl.getLocationOrThrow()}catch{return null}function t(){const A=n.getElementsByTagName("link"),P=[];for(let C=0;C<A.length;C++){const R=A[C],B=R.getAttribute("rel");if(B&&B.toLowerCase().indexOf("icon")>-1){const M=R.getAttribute("href");if(M)if(M.toLowerCase().indexOf("https:")===-1&&M.toLowerCase().indexOf("http:")===-1&&M.indexOf("//")!==0){let ee=e.protocol+"//"+e.host;if(M.indexOf("/")===0)ee+=M;else{const p=e.pathname.split("/");p.pop();const E=p.join("/");ee+=E+"/"+M}P.push(ee)}else if(M.indexOf("//")===0){const ee=e.protocol+M;P.push(ee)}else P.push(M)}}return P}function s(...A){const P=n.getElementsByTagName("meta");for(let C=0;C<P.length;C++){const R=P[C],B=["itemprop","property","name"].map(M=>R.getAttribute(M)).filter(M=>M?A.includes(M):!1);if(B.length&&B){const M=R.getAttribute("content");if(M)return M}}return""}function o(){let A=s("name","og:site_name","og:title","twitter:title");return A||(A=n.title),A}function c(){return s("description","og:description","twitter:description","keywords")}const f=o(),l=c(),m=e.origin,_=t();return{description:l,url:m,icons:_,name:f}}Ep=ku.getWindowMetadata=$S;var Ss={};(function(n){const e=Nu,t=Ru,s=Cu,o=zu,c=p=>p==null,f=Symbol("encodeFragmentIdentifier");function l(p){switch(p.arrayFormat){case"index":return E=>(v,w)=>{const g=v.length;return w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,[D(E,p),"[",g,"]"].join("")]:[...v,[D(E,p),"[",D(g,p),"]=",D(w,p)].join("")]};case"bracket":return E=>(v,w)=>w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,[D(E,p),"[]"].join("")]:[...v,[D(E,p),"[]=",D(w,p)].join("")];case"colon-list-separator":return E=>(v,w)=>w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,[D(E,p),":list="].join("")]:[...v,[D(E,p),":list=",D(w,p)].join("")];case"comma":case"separator":case"bracket-separator":{const E=p.arrayFormat==="bracket-separator"?"[]=":"=";return v=>(w,g)=>g===void 0||p.skipNull&&g===null||p.skipEmptyString&&g===""?w:(g=g===null?"":g,w.length===0?[[D(v,p),E,D(g,p)].join("")]:[[w,D(g,p)].join(p.arrayFormatSeparator)])}default:return E=>(v,w)=>w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,D(E,p)]:[...v,[D(E,p),"=",D(w,p)].join("")]}}function m(p){let E;switch(p.arrayFormat){case"index":return(v,w,g)=>{if(E=/\[(\d*)\]$/.exec(v),v=v.replace(/\[\d*\]$/,""),!E){g[v]=w;return}g[v]===void 0&&(g[v]={}),g[v][E[1]]=w};case"bracket":return(v,w,g)=>{if(E=/(\[\])$/.exec(v),v=v.replace(/\[\]$/,""),!E){g[v]=w;return}if(g[v]===void 0){g[v]=[w];return}g[v]=[].concat(g[v],w)};case"colon-list-separator":return(v,w,g)=>{if(E=/(:list)$/.exec(v),v=v.replace(/:list$/,""),!E){g[v]=w;return}if(g[v]===void 0){g[v]=[w];return}g[v]=[].concat(g[v],w)};case"comma":case"separator":return(v,w,g)=>{const u=typeof w=="string"&&w.includes(p.arrayFormatSeparator),b=typeof w=="string"&&!u&&A(w,p).includes(p.arrayFormatSeparator);w=b?A(w,p):w;const K=u||b?w.split(p.arrayFormatSeparator).map(G=>A(G,p)):w===null?w:A(w,p);g[v]=K};case"bracket-separator":return(v,w,g)=>{const u=/(\[\])$/.test(v);if(v=v.replace(/\[\]$/,""),!u){g[v]=w&&A(w,p);return}const b=w===null?[]:w.split(p.arrayFormatSeparator).map(K=>A(K,p));if(g[v]===void 0){g[v]=b;return}g[v]=[].concat(g[v],b)};default:return(v,w,g)=>{if(g[v]===void 0){g[v]=w;return}g[v]=[].concat(g[v],w)}}}function _(p){if(typeof p!="string"||p.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function D(p,E){return E.encode?E.strict?e(p):encodeURIComponent(p):p}function A(p,E){return E.decode?t(p):p}function P(p){return Array.isArray(p)?p.sort():typeof p=="object"?P(Object.keys(p)).sort((E,v)=>Number(E)-Number(v)).map(E=>p[E]):p}function C(p){const E=p.indexOf("#");return E!==-1&&(p=p.slice(0,E)),p}function R(p){let E="";const v=p.indexOf("#");return v!==-1&&(E=p.slice(v)),E}function B(p){p=C(p);const E=p.indexOf("?");return E===-1?"":p.slice(E+1)}function M(p,E){return E.parseNumbers&&!Number.isNaN(Number(p))&&typeof p=="string"&&p.trim()!==""?p=Number(p):E.parseBooleans&&p!==null&&(p.toLowerCase()==="true"||p.toLowerCase()==="false")&&(p=p.toLowerCase()==="true"),p}function ee(p,E){E=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},E),_(E.arrayFormatSeparator);const v=m(E),w=Object.create(null);if(typeof p!="string"||(p=p.trim().replace(/^[?#&]/,""),!p))return w;for(const g of p.split("&")){if(g==="")continue;let[u,b]=s(E.decode?g.replace(/\+/g," "):g,"=");b=b===void 0?null:["comma","separator","bracket-separator"].includes(E.arrayFormat)?b:A(b,E),v(A(u,E),b,w)}for(const g of Object.keys(w)){const u=w[g];if(typeof u=="object"&&u!==null)for(const b of Object.keys(u))u[b]=M(u[b],E);else w[g]=M(u,E)}return E.sort===!1?w:(E.sort===!0?Object.keys(w).sort():Object.keys(w).sort(E.sort)).reduce((g,u)=>{const b=w[u];return b&&typeof b=="object"&&!Array.isArray(b)?g[u]=P(b):g[u]=b,g},Object.create(null))}n.extract=B,n.parse=ee,n.stringify=(p,E)=>{if(!p)return"";E=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},E),_(E.arrayFormatSeparator);const v=b=>E.skipNull&&c(p[b])||E.skipEmptyString&&p[b]==="",w=l(E),g={};for(const b of Object.keys(p))v(b)||(g[b]=p[b]);const u=Object.keys(g);return E.sort!==!1&&u.sort(E.sort),u.map(b=>{const K=p[b];return K===void 0?"":K===null?D(b,E):Array.isArray(K)?K.length===0&&E.arrayFormat==="bracket-separator"?D(b,E)+"[]":K.reduce(w(b),[]).join("&"):D(b,E)+"="+D(K,E)}).filter(b=>b.length>0).join("&")},n.parseUrl=(p,E)=>{E=Object.assign({decode:!0},E);const[v,w]=s(p,"#");return Object.assign({url:v.split("?")[0]||"",query:ee(B(p),E)},E&&E.parseFragmentIdentifier&&w?{fragmentIdentifier:A(w,E)}:{})},n.stringifyUrl=(p,E)=>{E=Object.assign({encode:!0,strict:!0,[f]:!0},E);const v=C(p.url).split("?")[0]||"",w=n.extract(p.url),g=n.parse(w,{sort:!1}),u=Object.assign(g,p.query);let b=n.stringify(u,E);b&&(b=`?${b}`);let K=R(p.url);return p.fragmentIdentifier&&(K=`#${E[f]?D(p.fragmentIdentifier,E):p.fragmentIdentifier}`),`${v}${b}${K}`},n.pick=(p,E,v)=>{v=Object.assign({parseFragmentIdentifier:!0,[f]:!1},v);const{url:w,query:g,fragmentIdentifier:u}=n.parseUrl(p,v);return n.stringifyUrl({url:w,query:o(g,E),fragmentIdentifier:u},v)},n.exclude=(p,E,v)=>{const w=Array.isArray(E)?g=>!E.includes(g):(g,u)=>!E(g,u);return n.pick(p,w,v)}})(Ss);function Sp(n,e){return n.includes(":")?[n]:e.chains||[]}const Dp="base10",hr="base16",mu="base64pad",Wu="utf8",Op=0,si=1,FS=0,Kl=1,bu=12,Gu=32;function jS(){const n=Mu.generateKeyPair();return{privateKey:fr(n.secretKey,hr),publicKey:fr(n.publicKey,hr)}}function wu(){const n=Ni.randomBytes(Gu);return fr(n,hr)}function LS(n,e){const t=Mu.sharedKey(br(n,hr),br(e,hr)),s=new wb(na.SHA256,t).expand(Gu);return fr(s,hr)}function MS(n){const e=na.hash(br(n,hr));return fr(e,hr)}function Ci(n){const e=na.hash(br(n,Wu));return fr(e,hr)}function qS(n){return br(`${n}`,Dp)}function As(n){return Number(fr(n,Dp))}function BS(n){const e=qS(typeof n.type<"u"?n.type:Op);if(As(e)===si&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof n.senderPublicKey<"u"?br(n.senderPublicKey,hr):void 0,s=typeof n.iv<"u"?br(n.iv,hr):Ni.randomBytes(bu),o=new ju.ChaCha20Poly1305(br(n.symKey,hr)).seal(s,br(n.message,Wu));return HS({type:e,sealed:o,iv:s,senderPublicKey:t})}function zS(n){const e=new ju.ChaCha20Poly1305(br(n.symKey,hr)),{sealed:t,iv:s}=Vo(n.encoded),o=e.open(s,t);if(o===null)throw new Error("Failed to decrypt");return fr(o,Wu)}function HS(n){if(As(n.type)===si){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return fr(su([n.type,n.senderPublicKey,n.iv,n.sealed]),mu)}return fr(su([n.type,n.iv,n.sealed]),mu)}function Vo(n){const e=br(n,mu),t=e.slice(FS,Kl),s=Kl;if(As(t)===si){const l=s+Gu,m=l+bu,_=e.slice(s,l),D=e.slice(l,m),A=e.slice(m);return{type:t,sealed:A,iv:D,senderPublicKey:_}}const o=s+bu,c=e.slice(s,o),f=e.slice(o);return{type:t,sealed:f,iv:c}}function KS(n,e){const t=Vo(n);return Ip({type:As(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?fr(t.senderPublicKey,hr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Ip(n){const e=(n==null?void 0:n.type)||Op;if(e===si){if(typeof(n==null?void 0:n.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(n==null?void 0:n.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n==null?void 0:n.senderPublicKey,receiverPublicKey:n==null?void 0:n.receiverPublicKey}}function Vl(n){return n.type===si&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}var VS=Object.defineProperty,kl=Object.getOwnPropertySymbols,kS=Object.prototype.hasOwnProperty,WS=Object.prototype.propertyIsEnumerable,Wl=(n,e,t)=>e in n?VS(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Gl=(n,e)=>{for(var t in e||(e={}))kS.call(e,t)&&Wl(n,t,e[t]);if(kl)for(var t of kl(e))WS.call(e,t)&&Wl(n,t,e[t]);return n};const GS="ReactNative",Cn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},YS="js";function Yu(){return typeof ti<"u"&&typeof ti.versions<"u"&&typeof ti.versions.node<"u"}function xp(){return!bp()&&!!Vu()&&navigator.product===GS}function Ju(){return!Yu()&&!!Vu()}function Xu(){return xp()?Cn.reactNative:Yu()?Cn.node:Ju()?Cn.browser:Cn.unknown}function JS(n,e){let t=Ss.parse(n);return t=Gl(Gl({},t),e),n=Ss.stringify(t),n}function XS(){return Ep()||{name:"",description:"",url:"",icons:[""]}}function QS(){if(Xu()===Cn.reactNative&&typeof mr<"u"&&typeof(mr==null?void 0:mr.Platform)<"u"){const{OS:t,Version:s}=mr.Platform;return[t,s].join("-")}const n=bS();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function ZS(){var n;const e=Xu();return e===Cn.browser?[e,((n=wp())==null?void 0:n.host)||"unknown"].join(":"):e}function eD(n,e,t){const s=QS(),o=ZS();return[[n,e].join("-"),[YS,t].join("-"),s,o].join("/")}function tD({protocol:n,version:e,relayUrl:t,sdkVersion:s,auth:o,projectId:c,useOnCloseEvent:f}){const l=t.split("?"),m=eD(n,e,s),_={auth:o,ua:m,projectId:c,useOnCloseEvent:f||void 0},D=JS(l[1]||"",_);return l[0]+"?"+D}function ei(n,e){return n.filter(t=>e.includes(t)).length===n.length}function Ap(n){return Object.fromEntries(n.entries())}function Pp(n){return new Map(Object.entries(n))}function Ti(n=ye.FIVE_MINUTES,e){const t=ye.toMiliseconds(n||ye.FIVE_MINUTES);let s,o,c;return{resolve:f=>{c&&s&&(clearTimeout(c),s(f))},reject:f=>{c&&o&&(clearTimeout(c),o(f))},done:()=>new Promise((f,l)=>{c=setTimeout(()=>{l(new Error(e))},t),s=f,o=l})}}function ko(n,e,t){return new Promise(async(s,o)=>{const c=setTimeout(()=>o(new Error(t)),e);try{const f=await n;s(f)}catch(f){o(f)}clearTimeout(c)})}function Tp(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function rD(n){return Tp("topic",n)}function nD(n){return Tp("id",n)}function Cp(n){const[e,t]=n.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")s.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))s.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return s}function Gr(n,e){return ye.fromMiliseconds((e||Date.now())+ye.toMiliseconds(n))}function Pn(n){return Date.now()>=ye.toMiliseconds(n)}function Ht(n,e){return`${n}${e?`:${e}`:""}`}async function iD({id:n,topic:e,wcDeepLink:t}){try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t;let o=s==null?void 0:s.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const c=`${o}/wc?requestId=${n}&sessionTopic=${e}`,f=Xu();f===Cn.browser?c.startsWith("https://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,"_self","noreferrer noopener"):f===Cn.reactNative&&typeof(mr==null?void 0:mr.Linking)<"u"&&await mr.Linking.openURL(c)}catch(s){console.error(s)}}const sD="irn";function Eu(n){return(n==null?void 0:n.relay)||{protocol:sD}}function Mo(n){const e=fE[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}var oD=Object.defineProperty,Yl=Object.getOwnPropertySymbols,aD=Object.prototype.hasOwnProperty,cD=Object.prototype.propertyIsEnumerable,Jl=(n,e,t)=>e in n?oD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,uD=(n,e)=>{for(var t in e||(e={}))aD.call(e,t)&&Jl(n,t,e[t]);if(Yl)for(var t of Yl(e))cD.call(e,t)&&Jl(n,t,e[t]);return n};function hD(n,e="-"){const t={},s="relay"+e;return Object.keys(n).forEach(o=>{if(o.startsWith(s)){const c=o.replace(s,""),f=n[o];t[c]=f}}),t}function fD(n){const e=n.indexOf(":"),t=n.indexOf("?")!==-1?n.indexOf("?"):void 0,s=n.substring(0,e),o=n.substring(e+1,t).split("@"),c=typeof t<"u"?n.substring(t):"",f=Ss.parse(c);return{protocol:s,topic:lD(o[0]),version:parseInt(o[1],10),symKey:f.symKey,relay:hD(f)}}function lD(n){return n.startsWith("//")?n.substring(2):n}function dD(n,e="-"){const t="relay",s={};return Object.keys(n).forEach(o=>{const c=t+e+o;n[o]&&(s[c]=n[o])}),s}function pD(n){return`${n.protocol}:${n.topic}@${n.version}?`+Ss.stringify(uD({symKey:n.symKey},dD(n.relay)))}function Fi(n){const e=[];return n.forEach(t=>{const[s,o]=t.split(":");e.push(`${s}:${o}`)}),e}function gD(n){const e=[];return Object.values(n).forEach(t=>{e.push(...Fi(t.accounts))}),e}function yD(n,e){const t=[];return Object.values(n).forEach(s=>{Fi(s.accounts).includes(e)&&t.push(...s.methods)}),t}function _D(n,e){const t=[];return Object.values(n).forEach(s=>{Fi(s.accounts).includes(e)&&t.push(...s.events)}),t}function vD(n,e){const t=qo(n,e);if(t)throw new Error(t.message);const s={};for(const[o,c]of Object.entries(n))s[o]={methods:c.methods,events:c.events,chains:c.accounts.map(f=>`${f.split(":")[0]}:${f.split(":")[1]}`)};return s}const mD={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},bD={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function he(n,e){const{message:t,code:s}=bD[n];return{message:e?`${t} ${e}`:t,code:s}}function Gt(n,e){const{message:t,code:s}=mD[n];return{message:e?`${t} ${e}`:t,code:s}}function Ps(n,e){return Array.isArray(n)?typeof e<"u"&&n.length?n.every(e):!0:!1}function _s(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function ur(n){return typeof n>"u"}function Yt(n,e){return e&&ur(n)?!0:typeof n=="string"&&!!n.trim().length}function Qu(n,e){return e&&ur(n)?!0:typeof n=="number"&&!isNaN(n)}function wD(n,e){const{requiredNamespaces:t}=e,s=Object.keys(n.namespaces),o=Object.keys(t);let c=!0;return ei(o,s)?(s.forEach(f=>{const{accounts:l,methods:m,events:_}=n.namespaces[f],D=Fi(l),A=t[f];(!ei(Sp(f,A),D)||!ei(A.methods,m)||!ei(A.events,_))&&(c=!1)}),c):!1}function Wo(n){return Yt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function ED(n){if(Yt(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&Wo(t)}}return!1}function SD(n){if(Yt(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}function DD(n){var e;return(e=n==null?void 0:n.proposer)==null?void 0:e.publicKey}function OD(n){return n==null?void 0:n.topic}function ID(n,e){let t=null;return Yt(n==null?void 0:n.publicKey,!1)||(t=he("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function Xl(n){let e=!0;return Ps(n)?n.length&&(e=n.every(t=>Yt(t,!1))):e=!1,e}function xD(n,e,t){let s=null;return Ps(e)&&e.length?e.forEach(o=>{s||Wo(o)||(s=Gt("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):Wo(n)||(s=Gt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function AD(n,e,t){let s=null;return Object.entries(n).forEach(([o,c])=>{if(s)return;const f=xD(o,Sp(o,c),`${e} ${t}`);f&&(s=f)}),s}function PD(n,e){let t=null;return Ps(n)?n.forEach(s=>{t||ED(s)||(t=Gt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):t=Gt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function TD(n,e){let t=null;return Object.values(n).forEach(s=>{if(t)return;const o=PD(s==null?void 0:s.accounts,`${e} namespace`);o&&(t=o)}),t}function CD(n,e){let t=null;return Xl(n==null?void 0:n.methods)?Xl(n==null?void 0:n.events)||(t=Gt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Gt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function Np(n,e){let t=null;return Object.values(n).forEach(s=>{if(t)return;const o=CD(s,`${e}, namespace`);o&&(t=o)}),t}function ND(n,e,t){let s=null;if(n&&_s(n)){const o=Np(n,e);o&&(s=o);const c=AD(n,e,t);c&&(s=c)}else s=he("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return s}function qo(n,e){let t=null;if(n&&_s(n)){const s=Np(n,e);s&&(t=s);const o=TD(n,e);o&&(t=o)}else t=he("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function Rp(n){return Yt(n.protocol,!0)}function RD(n,e){let t=!1;return e&&!n?t=!0:n&&Ps(n)&&n.length&&n.forEach(s=>{t=Rp(s)}),t}function UD(n){return typeof n=="number"}function vr(n){return typeof n<"u"&&typeof n!==null}function $D(n){return!(!n||typeof n!="object"||!n.code||!Qu(n.code,!1)||!n.message||!Yt(n.message,!1))}function FD(n){return!(ur(n)||!Yt(n.method,!1))}function jD(n){return!(ur(n)||ur(n.result)&&ur(n.error)||!Qu(n.id,!1)||!Yt(n.jsonrpc,!1))}function LD(n){return!(ur(n)||!Yt(n.name,!1))}function Ql(n,e){return!(!Wo(e)||!gD(n).includes(e))}function MD(n,e,t){return Yt(t,!1)?yD(n,e).includes(t):!1}function qD(n,e,t){return Yt(t,!1)?_D(n,e).includes(t):!1}function Zl(n,e,t){let s=null;const o=BD(n),c=zD(e),f=Object.keys(o),l=Object.keys(c),m=ed(Object.keys(n)),_=ed(Object.keys(e)),D=m.filter(A=>!_.includes(A));return D.length&&(s=he("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${D.toString()}
      Received: ${Object.keys(e).toString()}`)),ei(f,l)||(s=he("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${f.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(A=>{if(!A.includes(":")||s)return;const P=Fi(e[A].accounts);P.includes(A)||(s=he("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${A}
        Required: ${A}
        Approved: ${P.toString()}`))}),f.forEach(A=>{s||(ei(o[A].methods,c[A].methods)?ei(o[A].events,c[A].events)||(s=he("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${A}`)):s=he("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${A}`))}),s}function BD(n){const e={};return Object.keys(n).forEach(t=>{var s;t.includes(":")?e[t]=n[t]:(s=n[t].chains)==null||s.forEach(o=>{e[o]={methods:n[t].methods,events:n[t].events}})}),e}function ed(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function zD(n){const e={};return Object.keys(n).forEach(t=>{if(t.includes(":"))e[t]=n[t];else{const s=Fi(n[t].accounts);s==null||s.forEach(o=>{e[o]={accounts:n[t].accounts.filter(c=>c.includes(`${o}:`)),methods:n[t].methods,events:n[t].events}})}}),e}function HD(n,e){return Qu(n,!1)&&n<=e.max&&n>=e.min}class Un extends jm{constructor(e){super(e),this.events=new qr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Jo(e.method,e.params||[],e.id||Uu().toString()),t)}async requestStrict(e,t){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{Wr(c)?o(c.error):s(c.result)});try{await this.connection.send(e,t)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Qo(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const KD=()=>typeof WebSocket<"u"?WebSocket:typeof mr<"u"&&typeof mr.WebSocket<"u"?mr.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),VD=()=>typeof WebSocket<"u"||typeof mr<"u"&&typeof mr.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",td=n=>n.split("?")[0],rd=10,kD=KD();class WD{constructor(e){if(this.url=e,this.events=new qr.EventEmitter,this.registering=!1,!al(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Es(e))}catch(s){this.onError(e.id,s)}}register(e=this.url){if(!al(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,s)=>{const o=Um.isReactNative()?void 0:{rejectUnauthorized:!Bm(e)},c=new kD(e,[],o);VD()?c.onerror=f=>{const l=f;s(this.emitError(l.error))}:c.on("error",f=>{s(this.emitError(f))}),c.onopen=()=>{this.onOpen(c),t(c)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Hu(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=Xo(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return Bd(e,td(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>rd&&this.events.setMaxListeners(rd)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${td(this.url)}`));return this.events.emit("register_error",t),t}}var Go={exports:{}};Go.exports;(function(n,e){var t=200,s="__lodash_hash_undefined__",o=1,c=2,f=9007199254740991,l="[object Arguments]",m="[object Array]",_="[object AsyncFunction]",D="[object Boolean]",A="[object Date]",P="[object Error]",C="[object Function]",R="[object GeneratorFunction]",B="[object Map]",M="[object Number]",ee="[object Null]",p="[object Object]",E="[object Promise]",v="[object Proxy]",w="[object RegExp]",g="[object Set]",u="[object String]",b="[object Symbol]",K="[object Undefined]",G="[object WeakMap]",se="[object ArrayBuffer]",ce="[object DataView]",de="[object Float32Array]",I="[object Float64Array]",N="[object Int8Array]",te="[object Int16Array]",X="[object Int32Array]",k="[object Uint8Array]",W="[object Uint8ClampedArray]",J="[object Uint16Array]",ne="[object Uint32Array]",be=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,we=/^(?:0|[1-9]\d*)$/,fe={};fe[de]=fe[I]=fe[N]=fe[te]=fe[X]=fe[k]=fe[W]=fe[J]=fe[ne]=!0,fe[l]=fe[m]=fe[se]=fe[D]=fe[ce]=fe[A]=fe[P]=fe[C]=fe[B]=fe[M]=fe[p]=fe[w]=fe[g]=fe[u]=fe[G]=!1;var ve=typeof Tn=="object"&&Tn&&Tn.Object===Object&&Tn,H=typeof self=="object"&&self&&self.Object===Object&&self,z=ve||H||Function("return this")(),F=e&&!e.nodeType&&e,d=F&&!0&&n&&!n.nodeType&&n,U=d&&d.exports===F,ae=U&&ve.process,le=function(){try{return ae&&ae.binding&&ae.binding("util")}catch{}}(),Oe=le&&le.isTypedArray;function ze(x,j){for(var re=-1,pe=x==null?0:x.length,at=0,Ce=[];++re<pe;){var pt=x[re];j(pt,re,x)&&(Ce[at++]=pt)}return Ce}function Ve(x,j){for(var re=-1,pe=j.length,at=x.length;++re<pe;)x[at+re]=j[re];return x}function je(x,j){for(var re=-1,pe=x==null?0:x.length;++re<pe;)if(j(x[re],re,x))return!0;return!1}function yt(x,j){for(var re=-1,pe=Array(x);++re<x;)pe[re]=j(re);return pe}function _t(x){return function(j){return x(j)}}function Me(x,j){return x.has(j)}function Ie(x,j){return x==null?void 0:x[j]}function Re(x){var j=-1,re=Array(x.size);return x.forEach(function(pe,at){re[++j]=[at,pe]}),re}function Ue(x,j){return function(re){return x(j(re))}}function qe(x){var j=-1,re=Array(x.size);return x.forEach(function(pe){re[++j]=pe}),re}var Ae=Array.prototype,$e=Function.prototype,De=Object.prototype,Pe=z["__core-js_shared__"],He=$e.toString,xe=De.hasOwnProperty,ke=function(){var x=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),Ge=De.toString,et=RegExp("^"+He.call(xe).replace(be,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=U?z.Buffer:void 0,Je=z.Symbol,rr=z.Uint8Array,lr=De.propertyIsEnumerable,Yr=Ae.splice,nr=Je?Je.toStringTag:void 0,sn=Object.getOwnPropertySymbols,vn=tt?tt.isBuffer:void 0,Fn=Ue(Object.keys,Object),St=wr(z,"DataView"),vt=wr(z,"Map"),Dt=wr(z,"Promise"),Ot=wr(z,"Set"),wt=wr(z,"WeakMap"),mt=wr(Object,"create"),Ft=an(St),jt=an(vt),It=an(Dt),Lt=an(Ot),xt=an(wt),Ct=Je?Je.prototype:void 0,At=Ct?Ct.valueOf:void 0;function ht(x){var j=-1,re=x==null?0:x.length;for(this.clear();++j<re;){var pe=x[j];this.set(pe[0],pe[1])}}function Mt(){this.__data__=mt?mt(null):{},this.size=0}function qt(x){var j=this.has(x)&&delete this.__data__[x];return this.size-=j?1:0,j}function ha(x){var j=this.__data__;if(mt){var re=j[x];return re===s?void 0:re}return xe.call(j,x)?j[x]:void 0}function fa(x){var j=this.__data__;return mt?j[x]!==void 0:xe.call(j,x)}function la(x,j){var re=this.__data__;return this.size+=this.has(x)?0:1,re[x]=mt&&j===void 0?s:j,this}ht.prototype.clear=Mt,ht.prototype.delete=qt,ht.prototype.get=ha,ht.prototype.has=fa,ht.prototype.set=la;function Ar(x){var j=-1,re=x==null?0:x.length;for(this.clear();++j<re;){var pe=x[j];this.set(pe[0],pe[1])}}function da(){this.__data__=[],this.size=0}function pa(x){var j=this.__data__,re=jn(j,x);if(re<0)return!1;var pe=j.length-1;return re==pe?j.pop():Yr.call(j,re,1),--this.size,!0}function ga(x){var j=this.__data__,re=jn(j,x);return re<0?void 0:j[re][1]}function ya(x){return jn(this.__data__,x)>-1}function _a(x,j){var re=this.__data__,pe=jn(re,x);return pe<0?(++this.size,re.push([x,j])):re[pe][1]=j,this}Ar.prototype.clear=da,Ar.prototype.delete=pa,Ar.prototype.get=ga,Ar.prototype.has=ya,Ar.prototype.set=_a;function on(x){var j=-1,re=x==null?0:x.length;for(this.clear();++j<re;){var pe=x[j];this.set(pe[0],pe[1])}}function ci(){this.size=0,this.__data__={hash:new ht,map:new(vt||Ar),string:new ht}}function va(x){var j=mn(this,x).delete(x);return this.size-=j?1:0,j}function ui(x){return mn(this,x).get(x)}function ma(x){return mn(this,x).has(x)}function ba(x,j){var re=mn(this,x),pe=re.size;return re.set(x,j),this.size+=re.size==pe?0:1,this}on.prototype.clear=ci,on.prototype.delete=va,on.prototype.get=ui,on.prototype.has=ma,on.prototype.set=ba;function hi(x){var j=-1,re=x==null?0:x.length;for(this.__data__=new on;++j<re;)this.add(x[j])}function Cs(x){return this.__data__.set(x,s),this}function Ns(x){return this.__data__.has(x)}hi.prototype.add=hi.prototype.push=Cs,hi.prototype.has=Ns;function Br(x){var j=this.__data__=new Ar(x);this.size=j.size}function wa(){this.__data__=new Ar,this.size=0}function Ea(x){var j=this.__data__,re=j.delete(x);return this.size=j.size,re}function Sa(x){return this.__data__.get(x)}function Da(x){return this.__data__.has(x)}function Rs(x,j){var re=this.__data__;if(re instanceof Ar){var pe=re.__data__;if(!vt||pe.length<t-1)return pe.push([x,j]),this.size=++re.size,this;re=this.__data__=new on(pe)}return re.set(x,j),this.size=re.size,this}Br.prototype.clear=wa,Br.prototype.delete=Ea,Br.prototype.get=Sa,Br.prototype.has=Da,Br.prototype.set=Rs;function Us(x,j){var re=di(x),pe=!re&&ks(x),at=!re&&!pe&&qi(x),Ce=!re&&!pe&&!at&&Ys(x),pt=re||pe||at||Ce,Bt=pt?yt(x.length,String):[],Xe=Bt.length;for(var ct in x)(j||xe.call(x,ct))&&!(pt&&(ct=="length"||at&&(ct=="offset"||ct=="parent")||Ce&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||Bs(ct,Xe)))&&Bt.push(ct);return Bt}function jn(x,j){for(var re=x.length;re--;)if(Vs(x[re][0],j))return re;return-1}function Li(x,j,re){var pe=j(x);return di(x)?pe:Ve(pe,re(x))}function Ln(x){return x==null?x===void 0?K:ee:nr&&nr in Object(x)?Ms(x):xa(x)}function Mi(x){return qn(x)&&Ln(x)==l}function Mn(x,j,re,pe,at){return x===j?!0:x==null||j==null||!qn(x)&&!qn(j)?x!==x&&j!==j:$s(x,j,re,pe,Mn,at)}function $s(x,j,re,pe,at,Ce){var pt=di(x),Bt=di(j),Xe=pt?m:Jr(x),ct=Bt?m:Jr(j);Xe=Xe==l?p:Xe,ct=ct==l?p:ct;var Nt=Xe==p,dr=ct==p,zt=Xe==ct;if(zt&&qi(x)){if(!qi(j))return!1;pt=!0,Nt=!1}if(zt&&!Nt)return Ce||(Ce=new Br),pt||Ys(x)?fi(x,j,re,pe,at,Ce):Ia(x,j,Xe,re,pe,at,Ce);if(!(re&o)){var gt=Nt&&xe.call(x,"__wrapped__"),ir=dr&&xe.call(j,"__wrapped__");if(gt||ir){var zr=gt?x.value():x,Pr=ir?j.value():j;return Ce||(Ce=new Br),at(zr,Pr,re,pe,Ce)}}return zt?(Ce||(Ce=new Br),Ls(x,j,re,pe,at,Ce)):!1}function Oa(x){if(!Gs(x)||Hs(x))return!1;var j=pi(x)?et:oe;return j.test(an(x))}function Fs(x){return qn(x)&&Ws(x.length)&&!!fe[Ln(x)]}function js(x){if(!Ks(x))return Fn(x);var j=[];for(var re in Object(x))xe.call(x,re)&&re!="constructor"&&j.push(re);return j}function fi(x,j,re,pe,at,Ce){var pt=re&o,Bt=x.length,Xe=j.length;if(Bt!=Xe&&!(pt&&Xe>Bt))return!1;var ct=Ce.get(x);if(ct&&Ce.get(j))return ct==j;var Nt=-1,dr=!0,zt=re&c?new hi:void 0;for(Ce.set(x,j),Ce.set(j,x);++Nt<Bt;){var gt=x[Nt],ir=j[Nt];if(pe)var zr=pt?pe(ir,gt,Nt,j,x,Ce):pe(gt,ir,Nt,x,j,Ce);if(zr!==void 0){if(zr)continue;dr=!1;break}if(zt){if(!je(j,function(Pr,Xr){if(!Me(zt,Xr)&&(gt===Pr||at(gt,Pr,re,pe,Ce)))return zt.push(Xr)})){dr=!1;break}}else if(!(gt===ir||at(gt,ir,re,pe,Ce))){dr=!1;break}}return Ce.delete(x),Ce.delete(j),dr}function Ia(x,j,re,pe,at,Ce,pt){switch(re){case ce:if(x.byteLength!=j.byteLength||x.byteOffset!=j.byteOffset)return!1;x=x.buffer,j=j.buffer;case se:return!(x.byteLength!=j.byteLength||!Ce(new rr(x),new rr(j)));case D:case A:case M:return Vs(+x,+j);case P:return x.name==j.name&&x.message==j.message;case w:case u:return x==j+"";case B:var Bt=Re;case g:var Xe=pe&o;if(Bt||(Bt=qe),x.size!=j.size&&!Xe)return!1;var ct=pt.get(x);if(ct)return ct==j;pe|=c,pt.set(x,j);var Nt=fi(Bt(x),Bt(j),pe,at,Ce,pt);return pt.delete(x),Nt;case b:if(At)return At.call(x)==At.call(j)}return!1}function Ls(x,j,re,pe,at,Ce){var pt=re&o,Bt=li(x),Xe=Bt.length,ct=li(j),Nt=ct.length;if(Xe!=Nt&&!pt)return!1;for(var dr=Xe;dr--;){var zt=Bt[dr];if(!(pt?zt in j:xe.call(j,zt)))return!1}var gt=Ce.get(x);if(gt&&Ce.get(j))return gt==j;var ir=!0;Ce.set(x,j),Ce.set(j,x);for(var zr=pt;++dr<Xe;){zt=Bt[dr];var Pr=x[zt],Xr=j[zt];if(pe)var Bi=pt?pe(Xr,Pr,zt,j,x,Ce):pe(Pr,Xr,zt,x,j,Ce);if(!(Bi===void 0?Pr===Xr||at(Pr,Xr,re,pe,Ce):Bi)){ir=!1;break}zr||(zr=zt=="constructor")}if(ir&&!zr){var Bn=x.constructor,kt=j.constructor;Bn!=kt&&"constructor"in x&&"constructor"in j&&!(typeof Bn=="function"&&Bn instanceof Bn&&typeof kt=="function"&&kt instanceof kt)&&(ir=!1)}return Ce.delete(x),Ce.delete(j),ir}function li(x){return Li(x,Ta,qs)}function mn(x,j){var re=x.__data__;return zs(j)?re[typeof j=="string"?"string":"hash"]:re.map}function wr(x,j){var re=Ie(x,j);return Oa(re)?re:void 0}function Ms(x){var j=xe.call(x,nr),re=x[nr];try{x[nr]=void 0;var pe=!0}catch{}var at=Ge.call(x);return pe&&(j?x[nr]=re:delete x[nr]),at}var qs=sn?function(x){return x==null?[]:(x=Object(x),ze(sn(x),function(j){return lr.call(x,j)}))}:ot,Jr=Ln;(St&&Jr(new St(new ArrayBuffer(1)))!=ce||vt&&Jr(new vt)!=B||Dt&&Jr(Dt.resolve())!=E||Ot&&Jr(new Ot)!=g||wt&&Jr(new wt)!=G)&&(Jr=function(x){var j=Ln(x),re=j==p?x.constructor:void 0,pe=re?an(re):"";if(pe)switch(pe){case Ft:return ce;case jt:return B;case It:return E;case Lt:return g;case xt:return G}return j});function Bs(x,j){return j=j??f,!!j&&(typeof x=="number"||we.test(x))&&x>-1&&x%1==0&&x<j}function zs(x){var j=typeof x;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?x!=="__proto__":x===null}function Hs(x){return!!ke&&ke in x}function Ks(x){var j=x&&x.constructor,re=typeof j=="function"&&j.prototype||De;return x===re}function xa(x){return Ge.call(x)}function an(x){if(x!=null){try{return He.call(x)}catch{}try{return x+""}catch{}}return""}function Vs(x,j){return x===j||x!==x&&j!==j}var ks=Mi(function(){return arguments}())?Mi:function(x){return qn(x)&&xe.call(x,"callee")&&!lr.call(x,"callee")},di=Array.isArray;function Aa(x){return x!=null&&Ws(x.length)&&!pi(x)}var qi=vn||st;function Pa(x,j){return Mn(x,j)}function pi(x){if(!Gs(x))return!1;var j=Ln(x);return j==C||j==R||j==_||j==v}function Ws(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=f}function Gs(x){var j=typeof x;return x!=null&&(j=="object"||j=="function")}function qn(x){return x!=null&&typeof x=="object"}var Ys=Oe?_t(Oe):Fs;function Ta(x){return Aa(x)?Us(x):js(x)}function ot(){return[]}function st(){return!1}n.exports=Pa})(Go,Go.exports);var GD=Go.exports;const YD=qd(GD);function JD(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<n.length;o++){var c=n.charAt(o),f=c.charCodeAt(0);if(t[f]!==255)throw new TypeError(c+" is ambiguous");t[f]=o}var l=n.length,m=n.charAt(0),_=Math.log(l)/Math.log(256),D=Math.log(256)/Math.log(l);function A(R){if(R instanceof Uint8Array||(ArrayBuffer.isView(R)?R=new Uint8Array(R.buffer,R.byteOffset,R.byteLength):Array.isArray(R)&&(R=Uint8Array.from(R))),!(R instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(R.length===0)return"";for(var B=0,M=0,ee=0,p=R.length;ee!==p&&R[ee]===0;)ee++,B++;for(var E=(p-ee)*D+1>>>0,v=new Uint8Array(E);ee!==p;){for(var w=R[ee],g=0,u=E-1;(w!==0||g<M)&&u!==-1;u--,g++)w+=256*v[u]>>>0,v[u]=w%l>>>0,w=w/l>>>0;if(w!==0)throw new Error("Non-zero carry");M=g,ee++}for(var b=E-M;b!==E&&v[b]===0;)b++;for(var K=m.repeat(B);b<E;++b)K+=n.charAt(v[b]);return K}function P(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return new Uint8Array;var B=0;if(R[B]!==" "){for(var M=0,ee=0;R[B]===m;)M++,B++;for(var p=(R.length-B)*_+1>>>0,E=new Uint8Array(p);R[B];){var v=t[R.charCodeAt(B)];if(v===255)return;for(var w=0,g=p-1;(v!==0||w<ee)&&g!==-1;g--,w++)v+=l*E[g]>>>0,E[g]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");ee=w,B++}if(R[B]!==" "){for(var u=p-ee;u!==p&&E[u]===0;)u++;for(var b=new Uint8Array(M+(p-u)),K=M;u!==p;)b[K++]=E[u++];return b}}}function C(R){var B=P(R);if(B)return B;throw new Error(`Non-${e} character`)}return{encode:A,decodeUnsafe:P,decode:C}}var XD=JD,QD=XD;const Up=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},ZD=n=>new TextEncoder().encode(n),e6=n=>new TextDecoder().decode(n);class t6{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class r6{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return $p(this,e)}}class n6{constructor(e){this.decoders=e}or(e){return $p(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const $p=(n,e)=>new n6({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class i6{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new t6(e,t,s),this.decoder=new r6(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ca=({name:n,prefix:e,encode:t,decode:s})=>new i6(n,e,t,s),Ts=({prefix:n,name:e,alphabet:t})=>{const{encode:s,decode:o}=QD(t,e);return ca({prefix:n,name:e,encode:s,decode:c=>Up(o(c))})},s6=(n,e,t,s)=>{const o={};for(let D=0;D<e.length;++D)o[e[D]]=D;let c=n.length;for(;n[c-1]==="=";)--c;const f=new Uint8Array(c*t/8|0);let l=0,m=0,_=0;for(let D=0;D<c;++D){const A=o[n[D]];if(A===void 0)throw new SyntaxError(`Non-${s} character`);m=m<<t|A,l+=t,l>=8&&(l-=8,f[_++]=255&m>>l)}if(l>=t||255&m<<8-l)throw new SyntaxError("Unexpected end of data");return f},o6=(n,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",f=0,l=0;for(let m=0;m<n.length;++m)for(l=l<<8|n[m],f+=8;f>t;)f-=t,c+=e[o&l>>f];if(f&&(c+=e[o&l<<t-f]),s)for(;c.length*t&7;)c+="=";return c},Qt=({name:n,prefix:e,bitsPerChar:t,alphabet:s})=>ca({prefix:e,name:n,encode(o){return o6(o,s,t)},decode(o){return s6(o,s,t,n)}}),a6=ca({prefix:"\0",name:"identity",encode:n=>e6(n),decode:n=>ZD(n)});var c6=Object.freeze({__proto__:null,identity:a6});const u6=Qt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var h6=Object.freeze({__proto__:null,base2:u6});const f6=Qt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var l6=Object.freeze({__proto__:null,base8:f6});const d6=Ts({prefix:"9",name:"base10",alphabet:"0123456789"});var p6=Object.freeze({__proto__:null,base10:d6});const g6=Qt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),y6=Qt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var _6=Object.freeze({__proto__:null,base16:g6,base16upper:y6});const v6=Qt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),m6=Qt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),b6=Qt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),w6=Qt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),E6=Qt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),S6=Qt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),D6=Qt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),O6=Qt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),I6=Qt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var x6=Object.freeze({__proto__:null,base32:v6,base32upper:m6,base32pad:b6,base32padupper:w6,base32hex:E6,base32hexupper:S6,base32hexpad:D6,base32hexpadupper:O6,base32z:I6});const A6=Ts({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),P6=Ts({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var T6=Object.freeze({__proto__:null,base36:A6,base36upper:P6});const C6=Ts({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),N6=Ts({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var R6=Object.freeze({__proto__:null,base58btc:C6,base58flickr:N6});const U6=Qt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),$6=Qt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),F6=Qt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),j6=Qt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var L6=Object.freeze({__proto__:null,base64:U6,base64pad:$6,base64url:F6,base64urlpad:j6});const Fp=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),M6=Fp.reduce((n,e,t)=>(n[t]=e,n),[]),q6=Fp.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function B6(n){return n.reduce((e,t)=>(e+=M6[t],e),"")}function z6(n){const e=[];for(const t of n){const s=q6[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const H6=ca({prefix:"ðŸš€",name:"base256emoji",encode:B6,decode:z6});var K6=Object.freeze({__proto__:null,base256emoji:H6}),V6=jp,nd=128,k6=127,W6=~k6,G6=Math.pow(2,31);function jp(n,e,t){e=e||[],t=t||0;for(var s=t;n>=G6;)e[t++]=n&255|nd,n/=128;for(;n&W6;)e[t++]=n&255|nd,n>>>=7;return e[t]=n|0,jp.bytes=t-s+1,e}var Y6=Su,J6=128,id=127;function Su(n,s){var t=0,s=s||0,o=0,c=s,f,l=n.length;do{if(c>=l)throw Su.bytes=0,new RangeError("Could not decode varint");f=n[c++],t+=o<28?(f&id)<<o:(f&id)*Math.pow(2,o),o+=7}while(f>=J6);return Su.bytes=c-s,t}var X6=Math.pow(2,7),Q6=Math.pow(2,14),Z6=Math.pow(2,21),e2=Math.pow(2,28),t2=Math.pow(2,35),r2=Math.pow(2,42),n2=Math.pow(2,49),i2=Math.pow(2,56),s2=Math.pow(2,63),o2=function(n){return n<X6?1:n<Q6?2:n<Z6?3:n<e2?4:n<t2?5:n<r2?6:n<n2?7:n<i2?8:n<s2?9:10},a2={encode:V6,decode:Y6,encodingLength:o2},Lp=a2;const sd=(n,e,t=0)=>(Lp.encode(n,e,t),e),od=n=>Lp.encodingLength(n),Du=(n,e)=>{const t=e.byteLength,s=od(n),o=s+od(t),c=new Uint8Array(o+t);return sd(n,c,0),sd(t,c,s),c.set(e,o),new c2(n,t,e,c)};class c2{constructor(e,t,s,o){this.code=e,this.size=t,this.digest=s,this.bytes=o}}const Mp=({name:n,code:e,encode:t})=>new u2(n,e,t);class u2{constructor(e,t,s){this.name=e,this.code=t,this.encode=s}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Du(this.code,t):t.then(s=>Du(this.code,s))}else throw Error("Unknown type, must be binary type")}}const qp=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),h2=Mp({name:"sha2-256",code:18,encode:qp("SHA-256")}),f2=Mp({name:"sha2-512",code:19,encode:qp("SHA-512")});var l2=Object.freeze({__proto__:null,sha256:h2,sha512:f2});const Bp=0,d2="identity",zp=Up,p2=n=>Du(Bp,zp(n)),g2={code:Bp,name:d2,encode:zp,digest:p2};var y2=Object.freeze({__proto__:null,identity:g2});new TextEncoder,new TextDecoder;const ad={...c6,...h6,...l6,...p6,..._6,...x6,...T6,...R6,...L6,...K6};({...l2,...y2});function Hp(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function _2(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Hp(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Kp(n,e,t,s){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:s}}}const cd=Kp("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Kc=Kp("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=_2(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),v2={utf8:cd,"utf-8":cd,hex:ad.base16,latin1:Kc,ascii:Kc,binary:Kc,...ad};function m2(n,e="utf8"){const t=v2[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Hp(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}const Vp="wc",b2=2,Zu="core",Nn=`${Vp}@2:${Zu}:`,w2={name:Zu,logger:"error"},E2={database:":memory:"},S2="crypto",ud="client_ed25519_seed",D2=ye.ONE_DAY,O2="keychain",I2="0.3",x2="messages",A2="0.3",P2=ye.SIX_HOURS,T2="publisher",kp="irn",C2="error",Wp="wss://relay.walletconnect.com",hd="wss://relay.walletconnect.org",N2="relayer",Tt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},R2="_subscription",hs={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},U2=ye.ONE_SECOND/2,$2="2.9.1",F2=1e4,j2="0.3",L2="WALLETCONNECT_CLIENT_ID",nn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},M2="subscription",q2="0.3",B2=ye.FIVE_SECONDS*1e3,z2="pairing",H2="0.3",fs={wc_pairingDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:0},res:{ttl:ye.ONE_DAY,prompt:!1,tag:0}}},rn={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},K2="history",V2="0.3",k2="expirer",Lr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},W2="0.3",Vc="verify-api",fd="https://verify.walletconnect.com";class G2{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=O2,this.version=I2,this.initialized=!1,this.storagePrefix=Nn,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:c}=he("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(c)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Ze.generateChildLogger(t,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Ap(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Pp(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Y2{constructor(e,t,s){this.core=e,this.logger=t,this.name=S2,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),c=Ll(o);return mp(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=jS();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const c=await this.getClientSeed(),f=Ll(c),l=wu();return await fS(l,o,D2,f)},this.generateSharedKey=(o,c,f)=>{this.isInitialized();const l=this.getPrivateKey(o),m=LS(l,c);return this.setSymKey(m,f)},this.setSymKey=async(o,c)=>{this.isInitialized();const f=c||MS(o);return await this.keychain.set(f,o),f},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,c,f)=>{this.isInitialized();const l=Ip(f),m=Es(c);if(Vl(l)){const P=l.senderPublicKey,C=l.receiverPublicKey;o=await this.generateSharedKey(P,C)}const _=this.getSymKey(o),{type:D,senderPublicKey:A}=l;return BS({type:D,symKey:_,message:m,senderPublicKey:A})},this.decode=async(o,c,f)=>{this.isInitialized();const l=KS(c,f);if(Vl(l)){const m=l.receiverPublicKey,_=l.senderPublicKey;o=await this.generateSharedKey(m,_)}try{const m=this.getSymKey(o),_=zS({symKey:m,encoded:c});return Hu(_)}catch(m){this.logger.error(`Failed to decode message from topic: '${o}', clientId: '${await this.getClientId()}'`),this.logger.error(m)}},this.getPayloadType=o=>{const c=Vo(o);return As(c.type)},this.getPayloadSenderPublicKey=o=>{const c=Vo(o);return c.senderPublicKey?fr(c.senderPublicKey,hr):void 0},this.core=e,this.logger=Ze.generateChildLogger(t,this.name),this.keychain=s||new G2(this.core,this.logger)}get context(){return Ze.getLoggerContext(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(ud)}catch{e=wu(),await this.keychain.set(ud,e)}return m2(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}}class J2 extends B3{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=x2,this.version=A2,this.initialized=!1,this.storagePrefix=Nn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const c=Ci(o);let f=this.messages.get(s);return typeof f>"u"&&(f={}),typeof f[c]<"u"||(f[c]=o,this.messages.set(s,f),await this.persist()),c},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const c=this.get(s),f=Ci(o);return typeof c[f]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Ze.generateChildLogger(e,this.name),this.core=t}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Ap(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Pp(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}}class X2 extends z3{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new qr.EventEmitter,this.name=T2,this.queue=new Map,this.publishTimeout=ye.toMiliseconds(ye.TEN_SECONDS),this.queueTimeout=ye.toMiliseconds(ye.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,o,c)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}});try{const f=(c==null?void 0:c.ttl)||P2,l=Eu(c),m=(c==null?void 0:c.prompt)||!1,_=(c==null?void 0:c.tag)||0,D=(c==null?void 0:c.id)||Uu().toString(),A={topic:s,message:o,opts:{ttl:f,relay:l,prompt:m,tag:_,id:D}},P=setTimeout(()=>this.queue.set(D,A),this.queueTimeout);try{await await ko(this.rpcPublish(s,o,f,l,m,_,D),this.publishTimeout),clearTimeout(P),this.relayer.events.emit(Tt.publish,A)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}})}catch(f){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(f),f}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=e,this.logger=Ze.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return Ze.getLoggerContext(this.logger)}rpcPublish(e,t,s,o,c,f,l){var m,_,D,A;const P={method:Mo(o.protocol).publish,params:{topic:e,message:t,ttl:s,prompt:c,tag:f},id:l};return ur((m=P.params)==null?void 0:m.prompt)&&((_=P.params)==null||delete _.prompt),ur((D=P.params)==null?void 0:D.tag)&&((A=P.params)==null||delete A.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:P}),this.relayer.request(P)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:s,opts:o}=e;await this.publish(t,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ui.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Tt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Tt.message_ack,e=>{this.onPublish(e.id.toString())})}}class Q2{constructor(){this.map=new Map,this.set=(e,t)=>{const s=this.get(e);this.exists(e,t)||this.map.set(e,[...s,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,t))return;const o=s.filter(c=>c!==t);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Z2=Object.defineProperty,e5=Object.defineProperties,t5=Object.getOwnPropertyDescriptors,ld=Object.getOwnPropertySymbols,r5=Object.prototype.hasOwnProperty,n5=Object.prototype.propertyIsEnumerable,dd=(n,e,t)=>e in n?Z2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ls=(n,e)=>{for(var t in e||(e={}))r5.call(e,t)&&dd(n,t,e[t]);if(ld)for(var t of ld(e))n5.call(e,t)&&dd(n,t,e[t]);return n},kc=(n,e)=>e5(n,t5(e));class i5 extends V3{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new Q2,this.events=new qr.EventEmitter,this.name=M2,this.version=q2,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Nn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const c=Eu(o),f={topic:s,relay:c};this.pending.set(s,f);const l=await this.rpcSubscribe(s,c);return this.onSubscribe(l,f),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),l}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof(o==null?void 0:o.id)<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,c)=>{const f=new ye.Watch;f.start(this.pendingSubscriptionWatchLabel);const l=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(l),f.stop(this.pendingSubscriptionWatchLabel),o(!0)),f.elapsed(this.pendingSubscriptionWatchLabel)>=B2&&(clearInterval(l),f.stop(this.pendingSubscriptionWatchLabel),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Ze.generateChildLogger(t,this.name),this.clientId=""}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let s=!1;try{s=this.getSubscription(e).topic===t}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const s=this.topicMap.get(e);await Promise.all(s.map(async o=>await this.unsubscribeById(e,o,t)))}async unsubscribeById(e,t,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}});try{const o=Eu(s);await this.rpcUnsubscribe(e,t,o);const c=Gt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,t){const s={method:Mo(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await ko(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Tt.connection_stalled)}return Ci(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,s={method:Mo(t.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await ko(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Tt.connection_stalled)}}rpcUnsubscribe(e,t,s){const o={method:Mo(s.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,t){this.setSubscription(e,kc(ls({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,ls({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,s){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,ls({},t)),this.topicMap.set(t.topic,e),this.events.emit(nn.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:s}=he("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(nn.deleted,kc(ls({},s),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(nn.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(nn.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);Ps(t)&&this.onBatchSubscribe(t.map((s,o)=>kc(ls({},e[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Ui.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Tt.connect,async()=>{await this.onConnect()}),this.relayer.on(Tt.disconnect,()=>{this.onDisconnect()}),this.events.on(nn.created,async e=>{const t=nn.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(nn.deleted,async e=>{const t=nn.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var s5=Object.defineProperty,pd=Object.getOwnPropertySymbols,o5=Object.prototype.hasOwnProperty,a5=Object.prototype.propertyIsEnumerable,gd=(n,e,t)=>e in n?s5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,c5=(n,e)=>{for(var t in e||(e={}))o5.call(e,t)&&gd(n,t,e[t]);if(pd)for(var t of pd(e))a5.call(e,t)&&gd(n,t,e[t]);return n};class u5 extends H3{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new qr.EventEmitter,this.name=N2,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ze.generateChildLogger(e.logger,this.name):Ze.pino(Ze.getDefaultLoggerOptions({level:e.logger||C2})),this.messages=new J2(this.logger,e.core),this.subscriber=new i5(this,this.logger),this.publisher=new X2(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Wp,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${hd}...`),await this.restartTransport(hd)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},F2)}get context(){return Ze.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,s){this.isInitialized(),await this.publisher.publish(e,t,s),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";return o||(await Promise.all([new Promise(c=>{this.subscriber.once(nn.created,f=>{f.topic===e&&c()})}),new Promise(async c=>{o=await this.subscriber.subscribe(e,t),c()})]),o)}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(Tt.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(t=>{this.initialized||t(),this.subscriber.once(nn.resubscribed,()=>{t()})}),await Promise.race([new Promise(async(t,s)=>{await ko(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>s(o)).then(()=>t()).finally(()=>this.removeListener(Tt.transport_closed,this.rejectTransportOpen))}),new Promise(t=>this.once(Tt.transport_closed,this.rejectTransportOpen))])])}catch(t){this.logger.error(t);const s=t;if(!this.isConnectionStalled(s.message))throw t;this.events.emit(Tt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(t=>{this.provider.once(hs.disconnect,()=>{t()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Un(new WD(tD({sdkVersion:$2,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:s}=e;await this.messages.set(t,s)}async shouldIgnoreMessageEvent(e){const{topic:t,message:s}=e;if(!s||s.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${s}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const o=this.messages.has(t,s);return o&&this.logger.debug(`Ignoring duplicate message: ${s}`),o}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Fu(e)){if(!e.method.endsWith(R2))return;const t=e.params,{topic:s,message:o,publishedAt:c}=t.data,f={topic:s,message:o,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(c5({type:"event",event:t.id},f)),this.events.emit(t.id,f),await this.acknowledgePayload(e),await this.onMessageEvent(f)}else Qo(e)&&this.events.emit(Tt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Tt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=$u(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(hs.payload,e=>this.onProviderPayload(e)),this.provider.on(hs.connect,()=>{this.events.emit(Tt.connect)}),this.provider.on(hs.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(hs.error,e=>{this.logger.error(e),this.events.emit(Tt.error,e)})}registerEventListeners(){this.events.on(Tt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(Tt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},ye.toMiliseconds(U2))}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var h5=Object.defineProperty,yd=Object.getOwnPropertySymbols,f5=Object.prototype.hasOwnProperty,l5=Object.prototype.propertyIsEnumerable,_d=(n,e,t)=>e in n?h5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vd=(n,e)=>{for(var t in e||(e={}))f5.call(e,t)&&_d(n,t,e[t]);if(yd)for(var t of yd(e))l5.call(e,t)&&_d(n,t,e[t]);return n};class ua extends K3{constructor(e,t,s,o=Nn,c=void 0){super(e,t,s,o),this.core=e,this.logger=t,this.name=s,this.map=new Map,this.version=j2,this.cached=[],this.initialized=!1,this.storagePrefix=Nn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(f=>{this.getKey&&f!==null&&!ur(f)?this.map.set(this.getKey(f),f):DD(f)?this.map.set(f.id,f):OD(f)&&this.map.set(f.topic,f)}),this.cached=[],this.initialized=!0)},this.set=async(f,l)=>{this.isInitialized(),this.map.has(f)?await this.update(f,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:f,value:l}),this.map.set(f,l),await this.persist())},this.get=f=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:f}),this.getData(f)),this.getAll=f=>(this.isInitialized(),f?this.values.filter(l=>Object.keys(f).every(m=>YD(l[m],f[m]))):this.values),this.update=async(f,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:f,update:l});const m=vd(vd({},this.getData(f)),l);this.map.set(f,m),await this.persist()},this.delete=async(f,l)=>{this.isInitialized(),this.map.has(f)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:f,reason:l}),this.map.delete(f),await this.persist())},this.logger=Ze.generateChildLogger(t,this.name),this.storagePrefix=o,this.getKey=c}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:s}=he("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}}class d5{constructor(e,t){this.core=e,this.logger=t,this.name=z2,this.version=H2,this.events=new Tu,this.initialized=!1,this.storagePrefix=Nn,this.ignoredPayloadTypes=[si],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=wu(),o=await this.core.crypto.setSymKey(s),c=Gr(ye.FIVE_MINUTES),f={protocol:kp},l={topic:o,expiry:c,relay:f,active:!1},m=pD({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:f});return await this.pairings.set(o,l),await this.core.relayer.subscribe(o),this.core.expirer.set(o,c),{topic:o,uri:m}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:c,relay:f}=fD(s.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const l=Gr(ye.FIVE_MINUTES),m={topic:o,relay:f,expiry:l,active:!1};return await this.pairings.set(o,m),await this.core.crypto.setSymKey(c,o),await this.core.relayer.subscribe(o,{relay:f}),this.core.expirer.set(o,l),s.activatePairing&&await this.activate({topic:o}),m},this.activate=async({topic:s})=>{this.isInitialized();const o=Gr(ye.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const c=await this.sendRequest(o,"wc_pairingPing",{}),{done:f,resolve:l,reject:m}=Ti();this.events.once(Ht("pairing_ping",c),({error:_})=>{_?m(_):l()}),await f()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",Gt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,c)=>{const f=Jo(o,c),l=await this.core.crypto.encode(s,f),m=fs[o].req;return this.core.history.set(s,f),this.core.relayer.publish(s,l,m),f.id},this.sendResult=async(s,o,c)=>{const f=$u(s,c),l=await this.core.crypto.encode(o,f),m=await this.core.history.get(o,s),_=fs[m.request.method].res;await this.core.relayer.publish(o,l,_),await this.core.history.resolve(f)},this.sendError=async(s,o,c)=>{const f=Xo(s,c),l=await this.core.crypto.encode(o,f),m=await this.core.history.get(o,s),_=fs[m.request.method]?fs[m.request.method].res:fs.unregistered_method.res;await this.core.relayer.publish(o,l,_),await this.core.history.resolve(f)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Gt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>Pn(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:c}=s;switch(c.method){case"wc_pairingPing":return this.onPairingPingRequest(o,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,c);default:return this.onUnknownRpcMethodRequest(o,c)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:c}=s,f=(await this.core.history.get(o,c.id)).request.method;switch(f){case"wc_pairingPing":return this.onPairingPingResponse(o,c);default:return this.onUnknownRpcMethodResponse(f)}},this.onPairingPingRequest=async(s,o)=>{const{id:c}=o;try{this.isValidPing({topic:s}),await this.sendResult(c,s,!0),this.events.emit("pairing_ping",{id:c,topic:s})}catch(f){await this.sendError(c,s,f),this.logger.error(f)}},this.onPairingPingResponse=(s,o)=>{const{id:c}=o;setTimeout(()=>{_n(o)?this.events.emit(Ht("pairing_ping",c),{}):Wr(o)&&this.events.emit(Ht("pairing_ping",c),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:c}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:c,topic:s})}catch(f){await this.sendError(c,s,f),this.logger.error(f)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:c,method:f}=o;try{if(this.registeredMethods.includes(f))return;const l=Gt("WC_METHOD_UNSUPPORTED",f);await this.sendError(c,s,l),this.logger.error(l)}catch(l){await this.sendError(c,s,l),this.logger.error(l)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Gt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!vr(s)){const{message:o}=he("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!SD(s.uri)){const{message:o}=he("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=async s=>{if(!vr(s)){const{message:c}=he("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!vr(s)){const{message:c}=he("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Yt(s,!1)){const{message:o}=he("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=he("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(Pn(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=he("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=e,this.logger=Ze.generateChildLogger(t,this.name),this.pairings=new ua(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ze.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Tt.message,async e=>{const{topic:t,message:s}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(t,s);Fu(o)?(this.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):Qo(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.core.history.delete(t,o.id))})}registerExpirerEvents(){this.core.expirer.on(Lr.expired,async e=>{const{topic:t}=Cp(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class p5 extends q3{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new qr.EventEmitter,this.name=K2,this.version=V2,this.cached=[],this.initialized=!1,this.storagePrefix=Nn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:c}),this.records.has(o.id))return;const f={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:c,expiry:Gr(ye.THIRTY_DAYS)};this.records.set(f.id,f),this.events.emit(rn.created,f)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=Wr(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(rn.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(c=>{if(c.topic===s){if(typeof o<"u"&&c.id!==o)return;this.records.delete(c.id),this.events.emit(rn.deleted,c)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ze.generateChildLogger(t,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const s={topic:t.topic,request:Jo(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:s}=he("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(rn.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(rn.created,e=>{const t=rn.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(rn.updated,e=>{const t=rn.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(rn.deleted,e=>{const t=rn.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(Ui.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ye.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}}class g5 extends k3{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new qr.EventEmitter,this.name=k2,this.version=W2,this.cached=[],this.initialized=!1,this.storagePrefix=Nn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const c=this.formatTarget(s),f={target:c,expiry:o};this.expirations.set(c,f),this.checkExpiry(c,f),this.events.emit(Lr.created,{target:c,expiration:f})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),c=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Lr.deleted,{target:o,expiration:c})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ze.generateChildLogger(t,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return rD(e);if(typeof e=="number")return nD(e);const{message:t}=he("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Lr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:s}=he("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}checkExpiry(e,t){const{expiry:s}=t;ye.toMiliseconds(s)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Lr.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Ui.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Lr.created,e=>{const t=Lr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Lr.expired,e=>{const t=Lr.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Lr.deleted,e=>{const t=Lr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}}class y5 extends W3{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=Vc,this.initialized=!1,this.init=async s=>{xp()||!Ju()||(this.verifyUrl=(s==null?void 0:s.verifyUrl)||fd,await this.createIframe())},this.register=async s=>{var o;if(this.initialized||await this.init(),!!this.iframe)try{(o=this.iframe.contentWindow)==null||o.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async s=>{var o;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const c=this.startAbortTimer(ye.FIVE_SECONDS),f=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(c),f.status===200?(o=await f.json())==null?void 0:o.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,o)=>{if(document.getElementById(Vc))return s();const c=document.createElement("iframe");c.setAttribute("id",Vc),c.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),c.style.display="none",c.addEventListener("load",()=>{this.initialized=!0,s()}),c.addEventListener("error",f=>{o(f)}),document.body.append(c),this.iframe=c}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),ye.toMiliseconds(ye.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Ze.generateChildLogger(t,this.name),this.verifyUrl=fd,this.abortController=new AbortController,this.isDevEnv=Yu()&&{}.IS_VITEST}get context(){return Ze.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),ye.toMiliseconds(e))}}var _5=Object.defineProperty,md=Object.getOwnPropertySymbols,v5=Object.prototype.hasOwnProperty,m5=Object.prototype.propertyIsEnumerable,bd=(n,e,t)=>e in n?_5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,wd=(n,e)=>{for(var t in e||(e={}))v5.call(e,t)&&bd(n,t,e[t]);if(md)for(var t of md(e))m5.call(e,t)&&bd(n,t,e[t]);return n};class eh extends M3{constructor(e){super(e),this.protocol=Vp,this.version=b2,this.name=Zu,this.events=new qr.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Wp;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||w2.logger}));this.logger=Ze.generateChildLogger(t,this.name),this.heartbeat=new Ui.HeartBeat,this.crypto=new Y2(this,this.logger,e==null?void 0:e.keychain),this.history=new p5(this,this.logger),this.expirer=new g5(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new HE(wd(wd({},E2),e==null?void 0:e.storageOptions)),this.relayer=new u5({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new d5(this,this.logger),this.verify=new y5(this.projectId||"",this.logger)}static async init(e){const t=new eh(e);await t.initialize();const s=await t.crypto.getClientId();return await t.storage.setItem(L2,s),t}get context(){return Ze.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const b5=eh,Gp="wc",Yp=2,Jp="client",th=`${Gp}@${Yp}:${Jp}:`,Wc={name:Jp,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},w5="WALLETCONNECT_DEEPLINK_CHOICE",E5="proposal",Xp="Proposal expired",S5="session",Fo=ye.SEVEN_DAYS,D5="engine",ds={wc_sessionPropose:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1115}}},Gc={min:ye.FIVE_MINUTES,max:ye.SEVEN_DAYS},ps={idle:"idle",active:"active"},O5="request",I5=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var x5=Object.defineProperty,A5=Object.defineProperties,P5=Object.getOwnPropertyDescriptors,Ed=Object.getOwnPropertySymbols,T5=Object.prototype.hasOwnProperty,C5=Object.prototype.propertyIsEnumerable,Sd=(n,e,t)=>e in n?x5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,jr=(n,e)=>{for(var t in e||(e={}))T5.call(e,t)&&Sd(n,t,e[t]);if(Ed)for(var t of Ed(e))C5.call(e,t)&&Sd(n,t,e[t]);return n},Yc=(n,e)=>A5(n,P5(e));class N5 extends Y3{constructor(e){super(e),this.name=D5,this.events=new Tu,this.initialized=!1,this.ignoredPayloadTypes=[si],this.requestQueue={state:ps.idle,requests:[]},this.requestQueueDelay=ye.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(ds)}),this.initialized=!0,setTimeout(()=>{this.requestQueue.requests=this.getPendingSessionRequests(),this.processRequestQueue()},ye.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{this.isInitialized();const s=Yc(jr({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:c,optionalNamespaces:f,sessionProperties:l,relays:m}=s;let _=o,D,A=!1;if(_&&(A=this.client.core.pairing.pairings.get(_).active),!_||!A){const{topic:E,uri:v}=await this.client.core.pairing.create();_=E,D=v}const P=await this.client.core.crypto.generateKeyPair(),C=jr({requiredNamespaces:c,optionalNamespaces:f,relays:m??[{protocol:kp}],proposer:{publicKey:P,metadata:this.client.metadata}},l&&{sessionProperties:l}),{reject:R,resolve:B,done:M}=Ti(ye.FIVE_MINUTES,Xp);if(this.events.once(Ht("session_connect"),async({error:E,session:v})=>{if(E)R(E);else if(v){v.self.publicKey=P;const w=Yc(jr({},v),{requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces});await this.client.session.set(v.topic,w),await this.setExpiry(v.topic,v.expiry),_&&await this.client.core.pairing.updateMetadata({topic:_,metadata:v.peer.metadata}),B(w)}}),!_){const{message:E}=he("NO_MATCHING_KEY",`connect() pairing topic: ${_}`);throw new Error(E)}const ee=await this.sendRequest(_,"wc_sessionPropose",C),p=Gr(ye.FIVE_MINUTES);return await this.setProposal(ee,jr({id:ee,expiry:p},C)),{uri:D,approval:M}},this.pair=async t=>(this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{this.isInitialized(),await this.isValidApprove(t);const{id:s,relayProtocol:o,namespaces:c,sessionProperties:f}=t,l=this.client.proposal.get(s);let{pairingTopic:m,proposer:_,requiredNamespaces:D,optionalNamespaces:A}=l;m=m||"",_s(D)||(D=vD(c,"approve()"));const P=await this.client.core.crypto.generateKeyPair(),C=_.publicKey,R=await this.client.core.crypto.generateSharedKey(P,C);m&&s&&(await this.client.core.pairing.updateMetadata({topic:m,metadata:_.metadata}),await this.sendResult(s,m,{relay:{protocol:o??"irn"},responderPublicKey:P}),await this.client.proposal.delete(s,Gt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:m}));const B=jr({relay:{protocol:o??"irn"},namespaces:c,requiredNamespaces:D,optionalNamespaces:A,pairingTopic:m,controller:{publicKey:P,metadata:this.client.metadata},expiry:Gr(Fo)},f&&{sessionProperties:f});await this.client.core.relayer.subscribe(R),await this.sendRequest(R,"wc_sessionSettle",B);const M=Yc(jr({},B),{topic:R,pairingTopic:m,acknowledged:!1,self:B.controller,peer:{publicKey:_.publicKey,metadata:_.metadata},controller:P});return await this.client.session.set(R,M),await this.setExpiry(R,Gr(Fo)),{topic:R,acknowledged:()=>new Promise(ee=>setTimeout(()=>ee(this.client.session.get(R)),500))}},this.reject=async t=>{this.isInitialized(),await this.isValidReject(t);const{id:s,reason:o}=t,{pairingTopic:c}=this.client.proposal.get(s);c&&(await this.sendError(s,c,o),await this.client.proposal.delete(s,Gt("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.isValidUpdate(t);const{topic:s,namespaces:o}=t,c=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:o}),{done:f,resolve:l,reject:m}=Ti();return this.events.once(Ht("session_update",c),({error:_})=>{_?m(_):l()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:f}},this.extend=async t=>{this.isInitialized(),await this.isValidExtend(t);const{topic:s}=t,o=await this.sendRequest(s,"wc_sessionExtend",{}),{done:c,resolve:f,reject:l}=Ti();return this.events.once(Ht("session_extend",o),({error:m})=>{m?l(m):f()}),await this.setExpiry(s,Gr(Fo)),{acknowledged:c}},this.request=async t=>{this.isInitialized(),await this.isValidRequest(t);const{chainId:s,request:o,topic:c,expiry:f}=t,l=await this.sendRequest(c,"wc_sessionRequest",{request:o,chainId:s},f),{done:m,resolve:_,reject:D}=Ti(f);this.events.once(Ht("session_request",l),({error:P,result:C})=>{P?D(P):_(C)}),this.client.events.emit("session_request_sent",{topic:c,request:o,chainId:s,id:l});const A=await this.client.core.storage.getItem(w5);return iD({id:l,topic:c,wcDeepLink:A}),await m()},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:s,response:o}=t,{id:c}=o;_n(o)?await this.sendResult(c,s,o.result):Wr(o)&&await this.sendError(c,s,o.error),this.cleanupAfterResponse(t)},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=await this.sendRequest(s,"wc_sessionPing",{}),{done:c,resolve:f,reject:l}=Ti();this.events.once(Ht("session_ping",o),({error:m})=>{m?l(m):f()}),await c()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async t=>{this.isInitialized(),await this.isValidEmit(t);const{topic:s,event:o,chainId:c}=t;await this.sendRequest(s,"wc_sessionEvent",{event:o,chainId:c})},this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=Uu().toString();let c;const f=l=>{(l==null?void 0:l.id.toString())===o&&(this.client.core.relayer.events.removeListener(Tt.message_ack,f),c())};await Promise.all([new Promise(l=>{c=l,this.client.core.relayer.on(Tt.message_ack,f)}),this.sendRequest(s,"wc_sessionDelete",Gt("USER_DISCONNECTED"),void 0,o)]),await this.deleteSession(s)}else await this.client.core.pairing.disconnect({topic:s})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(s=>wD(s,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const s=this.client.core.pairing.pairings.get(t.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(c=>{var f,l;return((f=c.peerMetadata)==null?void 0:f.url)&&((l=c.peerMetadata)==null?void 0:l.url)===t.peer.metadata.url&&c.topic&&c.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(t,s)=>{const{self:o}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,Gt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),s||this.client.core.expirer.del(t)},this.deleteProposal=async(t,s)=>{await Promise.all([this.client.proposal.delete(t,Gt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,s),o?Promise.resolve():this.client.core.expirer.del(t)]),this.requestQueue.requests=this.requestQueue.requests.filter(c=>c.id!==t),o&&(this.requestQueue.state=ps.idle)},this.setExpiry=async(t,s)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:s}),this.client.core.expirer.set(t,s)},this.setProposal=async(t,s)=>{await this.client.proposal.set(t,s),this.client.core.expirer.set(t,s.expiry)},this.setPendingSessionRequest=async t=>{const s=ds.wc_sessionRequest.req.ttl,{id:o,topic:c,params:f}=t;await this.client.pendingRequest.set(o,{id:o,topic:c,params:f}),s&&this.client.core.expirer.set(o,Gr(s))},this.sendRequest=async(t,s,o,c,f)=>{const l=Jo(s,o);if(Ju()&&I5.includes(s)){const D=Ci(JSON.stringify(l));await this.client.core.verify.register({attestationId:D})}const m=await this.client.core.crypto.encode(t,l),_=ds[s].req;return c&&(_.ttl=c),f&&(_.id=f),this.client.core.history.set(t,l),this.client.core.relayer.publish(t,m,_),l.id},this.sendResult=async(t,s,o)=>{const c=$u(t,o),f=await this.client.core.crypto.encode(s,c),l=await this.client.core.history.get(s,t),m=ds[l.request.method].res;this.client.core.relayer.publish(s,f,m),await this.client.core.history.resolve(c)},this.sendError=async(t,s,o)=>{const c=Xo(t,o),f=await this.client.core.crypto.encode(s,c),l=await this.client.core.history.get(s,t),m=ds[l.request.method].res;this.client.core.relayer.publish(s,f,m),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const t=[],s=[];this.client.session.getAll().forEach(o=>{Pn(o.expiry)&&t.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{Pn(o.expiry)&&s.push(o.id)}),await Promise.all([...t.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=t=>{const{topic:s,payload:o}=t,c=o.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{const{topic:s,payload:o}=t,c=(await this.client.core.history.get(s,o.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:s}=t,{message:o}=he("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidConnect(jr({},s.params));const f=Gr(ye.FIVE_MINUTES),l=jr({id:c,pairingTopic:t,expiry:f},o);await this.setProposal(c,l);const m=Ci(JSON.stringify(s)),_=await this.getVerifyContext(m,l.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:l,verifyContext:_})}catch(f){await this.sendError(c,t,f),this.client.logger.error(f)}},this.onSessionProposeResponse=async(t,s)=>{const{id:o}=s;if(_n(s)){const{result:c}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const f=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:f});const l=f.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:l});const m=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:m});const _=await this.client.core.crypto.generateSharedKey(l,m);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:_});const D=await this.client.core.relayer.subscribe(_);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:D}),await this.client.core.pairing.activate({topic:t})}else Wr(s)&&(await this.client.proposal.delete(o,Gt("USER_DISCONNECTED")),this.events.emit(Ht("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidSessionSettleRequest(c);const{relay:f,controller:l,expiry:m,namespaces:_,requiredNamespaces:D,optionalNamespaces:A,sessionProperties:P,pairingTopic:C}=s.params,R=jr({topic:t,relay:f,expiry:m,namespaces:_,acknowledged:!0,pairingTopic:C,requiredNamespaces:D,optionalNamespaces:A,controller:l.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},P&&{sessionProperties:P});await this.sendResult(s.id,t,!0),this.events.emit(Ht("session_connect"),{session:R}),this.cleanupDuplicatePairings(R)}catch(f){await this.sendError(o,t,f),this.client.logger.error(f)}},this.onSessionSettleResponse=async(t,s)=>{const{id:o}=s;_n(s)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Ht("session_approve",o),{})):Wr(s)&&(await this.client.session.delete(t,Gt("USER_DISCONNECTED")),this.events.emit(Ht("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidUpdate(jr({topic:t},o)),await this.client.session.update(t,{namespaces:o.namespaces}),await this.sendResult(c,t,!0),this.client.events.emit("session_update",{id:c,topic:t,params:o})}catch(f){await this.sendError(c,t,f),this.client.logger.error(f)}},this.onSessionUpdateResponse=(t,s)=>{const{id:o}=s;_n(s)?this.events.emit(Ht("session_update",o),{}):Wr(s)&&this.events.emit(Ht("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(t,s)=>{const{id:o}=s;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Gr(Fo)),await this.sendResult(o,t,!0),this.client.events.emit("session_extend",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(t,s)=>{const{id:o}=s;_n(s)?this.events.emit(Ht("session_extend",o),{}):Wr(s)&&this.events.emit(Ht("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(t,s)=>{const{id:o}=s;try{this.isValidPing({topic:t}),await this.sendResult(o,t,!0),this.client.events.emit("session_ping",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionPingResponse=(t,s)=>{const{id:o}=s;setTimeout(()=>{_n(s)?this.events.emit(Ht("session_ping",o),{}):Wr(s)&&this.events.emit(Ht("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(t,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:t,reason:s.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(Tt.publish,async()=>{c(await this.deleteSession(t))})}),this.sendResult(o,t,!0)]),this.client.events.emit("session_delete",{id:o,topic:t})}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidRequest(jr({topic:t},c)),await this.setPendingSessionRequest({id:o,topic:t,params:c}),this.addRequestToQueue({id:o,topic:t,params:c}),await this.processRequestQueue()}catch(f){await this.sendError(o,t,f),this.client.logger.error(f)}},this.onSessionRequestResponse=(t,s)=>{const{id:o}=s;_n(s)?this.events.emit(Ht("session_request",o),{result:s.result}):Wr(s)&&this.events.emit(Ht("session_request",o),{error:s.error})},this.onSessionEventRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidEmit(jr({topic:t},c)),this.client.events.emit("session_event",{id:o,topic:t,params:c})}catch(f){await this.sendError(o,t,f),this.client.logger.error(f)}},this.addRequestToQueue=t=>{this.requestQueue.requests.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.requestQueue.state=ps.idle,this.processRequestQueue()},ye.toMiliseconds(this.requestQueueDelay))},this.processRequestQueue=async()=>{if(this.requestQueue.state===ps.active){this.client.logger.info("session request queue is already active.");return}const t=this.requestQueue.requests[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{const{id:s,topic:o,params:c}=t,f=Ci(JSON.stringify({id:s,params:c})),l=this.client.session.get(o),m=await this.getVerifyContext(f,l.peer.metadata);this.requestQueue.state=ps.active,this.client.events.emit("session_request",{id:s,topic:o,params:c,verifyContext:m})}catch(s){this.client.logger.error(s)}},this.isValidConnect=async t=>{if(!vr(t)){const{message:m}=he("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(m)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:f,relays:l}=t;if(ur(s)||await this.isValidPairingTopic(s),!RD(l,!0)){const{message:m}=he("MISSING_OR_INVALID",`connect() relays: ${l}`);throw new Error(m)}!ur(o)&&_s(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!ur(c)&&_s(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),ur(f)||this.validateSessionProps(f,"sessionProperties")},this.validateNamespaces=(t,s)=>{const o=ND(t,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async t=>{if(!vr(t))throw new Error(he("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:s,namespaces:o,relayProtocol:c,sessionProperties:f}=t;await this.isValidProposalId(s);const l=this.client.proposal.get(s),m=qo(o,"approve()");if(m)throw new Error(m.message);const _=Zl(l.requiredNamespaces,o,"approve()");if(_)throw new Error(_.message);if(!Yt(c,!0)){const{message:D}=he("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(D)}ur(f)||this.validateSessionProps(f,"sessionProperties")},this.isValidReject=async t=>{if(!vr(t)){const{message:c}=he("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(c)}const{id:s,reason:o}=t;if(await this.isValidProposalId(s),!$D(o)){const{message:c}=he("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidSessionSettleRequest=t=>{if(!vr(t)){const{message:_}=he("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(_)}const{relay:s,controller:o,namespaces:c,expiry:f}=t;if(!Rp(s)){const{message:_}=he("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(_)}const l=ID(o,"onSessionSettleRequest()");if(l)throw new Error(l.message);const m=qo(c,"onSessionSettleRequest()");if(m)throw new Error(m.message);if(Pn(f)){const{message:_}=he("EXPIRED","onSessionSettleRequest()");throw new Error(_)}},this.isValidUpdate=async t=>{if(!vr(t)){const{message:m}=he("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(m)}const{topic:s,namespaces:o}=t;await this.isValidSessionTopic(s);const c=this.client.session.get(s),f=qo(o,"update()");if(f)throw new Error(f.message);const l=Zl(c.requiredNamespaces,o,"update()");if(l)throw new Error(l.message)},this.isValidExtend=async t=>{if(!vr(t)){const{message:o}=he("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionTopic(s)},this.isValidRequest=async t=>{if(!vr(t)){const{message:m}=he("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(m)}const{topic:s,request:o,chainId:c,expiry:f}=t;await this.isValidSessionTopic(s);const{namespaces:l}=this.client.session.get(s);if(!Ql(l,c)){const{message:m}=he("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(m)}if(!FD(o)){const{message:m}=he("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(m)}if(!MD(l,c,o.method)){const{message:m}=he("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(m)}if(f&&!HD(f,Gc)){const{message:m}=he("MISSING_OR_INVALID",`request() expiry: ${f}. Expiry must be a number (in seconds) between ${Gc.min} and ${Gc.max}`);throw new Error(m)}},this.isValidRespond=async t=>{if(!vr(t)){const{message:c}=he("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:s,response:o}=t;if(await this.isValidSessionTopic(s),!jD(o)){const{message:c}=he("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidPing=async t=>{if(!vr(t)){const{message:o}=he("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async t=>{if(!vr(t)){const{message:l}=he("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(l)}const{topic:s,event:o,chainId:c}=t;await this.isValidSessionTopic(s);const{namespaces:f}=this.client.session.get(s);if(!Ql(f,c)){const{message:l}=he("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(l)}if(!LD(o)){const{message:l}=he("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(l)}if(!qD(f,c,o.name)){const{message:l}=he("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(l)}},this.isValidDisconnect=async t=>{if(!vr(t)){const{message:o}=he("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(t,s)=>{const o={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:s.verifyUrl});c&&(o.verified.origin=c,o.verified.validation=c===s.url?"VALID":"INVALID")}catch(c){this.client.logger.error(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,s)=>{Object.values(t).forEach(o=>{if(!Yt(o,!1)){const{message:c}=he("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(c)}})}}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(Tt.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(t,s);Fu(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):Qo(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o})})}registerExpirerEvents(){this.client.core.expirer.on(Lr.expired,async e=>{const{topic:t,id:s}=Cp(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,he("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(e){if(!Yt(e,!1)){const{message:t}=he("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=he("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Pn(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=he("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Yt(e,!1)){const{message:t}=he("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=he("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Pn(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=he("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Yt(e,!1)){const{message:t}=he("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=he("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!UD(e)){const{message:t}=he("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=he("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Pn(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=he("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class R5 extends ua{constructor(e,t){super(e,t,E5,th),this.core=e,this.logger=t}}class U5 extends ua{constructor(e,t){super(e,t,S5,th),this.core=e,this.logger=t}}class $5 extends ua{constructor(e,t){super(e,t,O5,th,s=>s.id),this.core=e,this.logger=t}}let F5=class Qp extends G3{constructor(e){super(e),this.protocol=Gp,this.version=Yp,this.name=Wc.name,this.events=new qr.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||Wc.name,this.metadata=(e==null?void 0:e.metadata)||XS();const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Wc.logger}));this.core=(e==null?void 0:e.core)||new b5(e),this.logger=Ze.generateChildLogger(t,this.name),this.session=new U5(this.core,this.logger),this.proposal=new R5(this.core,this.logger),this.pendingRequest=new $5(this.core,this.logger),this.engine=new N5(this)}static async init(e){const t=new Qp(e);return await t.initialize(),t}get context(){return Ze.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.getLocalStorage=dt.getLocalStorageOrThrow=dt.getCrypto=dt.getCryptoOrThrow=dt.getLocation=dt.getLocationOrThrow=dt.getNavigator=dt.getNavigatorOrThrow=dt.getDocument=dt.getDocumentOrThrow=dt.getFromWindowOrThrow=dt.getFromWindow=void 0;function oi(n){let e;return typeof window<"u"&&typeof window[n]<"u"&&(e=window[n]),e}dt.getFromWindow=oi;function ji(n){const e=oi(n);if(!e)throw new Error(`${n} is not defined in Window`);return e}dt.getFromWindowOrThrow=ji;function j5(){return ji("document")}dt.getDocumentOrThrow=j5;function L5(){return oi("document")}dt.getDocument=L5;function M5(){return ji("navigator")}dt.getNavigatorOrThrow=M5;function q5(){return oi("navigator")}dt.getNavigator=q5;function B5(){return ji("location")}dt.getLocationOrThrow=B5;function z5(){return oi("location")}dt.getLocation=z5;function H5(){return ji("crypto")}dt.getCryptoOrThrow=H5;function K5(){return oi("crypto")}dt.getCrypto=K5;function V5(){return ji("localStorage")}dt.getLocalStorageOrThrow=V5;function k5(){return oi("localStorage")}dt.getLocalStorage=k5;var rh={};Object.defineProperty(rh,"__esModule",{value:!0});rh.getWindowMetadata=void 0;const Dd=dt;function W5(){let n,e;try{n=Dd.getDocumentOrThrow(),e=Dd.getLocationOrThrow()}catch{return null}function t(){const A=n.getElementsByTagName("link"),P=[];for(let C=0;C<A.length;C++){const R=A[C],B=R.getAttribute("rel");if(B&&B.toLowerCase().indexOf("icon")>-1){const M=R.getAttribute("href");if(M)if(M.toLowerCase().indexOf("https:")===-1&&M.toLowerCase().indexOf("http:")===-1&&M.indexOf("//")!==0){let ee=e.protocol+"//"+e.host;if(M.indexOf("/")===0)ee+=M;else{const p=e.pathname.split("/");p.pop();const E=p.join("/");ee+=E+"/"+M}P.push(ee)}else if(M.indexOf("//")===0){const ee=e.protocol+M;P.push(ee)}else P.push(M)}}return P}function s(...A){const P=n.getElementsByTagName("meta");for(let C=0;C<P.length;C++){const R=P[C],B=["itemprop","property","name"].map(M=>R.getAttribute(M)).filter(M=>M?A.includes(M):!1);if(B.length&&B){const M=R.getAttribute("content");if(M)return M}}return""}function o(){let A=s("name","og:site_name","og:title","twitter:title");return A||(A=n.title),A}function c(){return s("description","og:description","twitter:description","keywords")}const f=o(),l=c(),m=e.origin,_=t();return{description:l,url:m,icons:_,name:f}}rh.getWindowMetadata=W5;var G5={};(function(n){const e=Nu,t=Ru,s=Cu,o=zu,c=p=>p==null,f=Symbol("encodeFragmentIdentifier");function l(p){switch(p.arrayFormat){case"index":return E=>(v,w)=>{const g=v.length;return w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,[D(E,p),"[",g,"]"].join("")]:[...v,[D(E,p),"[",D(g,p),"]=",D(w,p)].join("")]};case"bracket":return E=>(v,w)=>w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,[D(E,p),"[]"].join("")]:[...v,[D(E,p),"[]=",D(w,p)].join("")];case"colon-list-separator":return E=>(v,w)=>w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,[D(E,p),":list="].join("")]:[...v,[D(E,p),":list=",D(w,p)].join("")];case"comma":case"separator":case"bracket-separator":{const E=p.arrayFormat==="bracket-separator"?"[]=":"=";return v=>(w,g)=>g===void 0||p.skipNull&&g===null||p.skipEmptyString&&g===""?w:(g=g===null?"":g,w.length===0?[[D(v,p),E,D(g,p)].join("")]:[[w,D(g,p)].join(p.arrayFormatSeparator)])}default:return E=>(v,w)=>w===void 0||p.skipNull&&w===null||p.skipEmptyString&&w===""?v:w===null?[...v,D(E,p)]:[...v,[D(E,p),"=",D(w,p)].join("")]}}function m(p){let E;switch(p.arrayFormat){case"index":return(v,w,g)=>{if(E=/\[(\d*)\]$/.exec(v),v=v.replace(/\[\d*\]$/,""),!E){g[v]=w;return}g[v]===void 0&&(g[v]={}),g[v][E[1]]=w};case"bracket":return(v,w,g)=>{if(E=/(\[\])$/.exec(v),v=v.replace(/\[\]$/,""),!E){g[v]=w;return}if(g[v]===void 0){g[v]=[w];return}g[v]=[].concat(g[v],w)};case"colon-list-separator":return(v,w,g)=>{if(E=/(:list)$/.exec(v),v=v.replace(/:list$/,""),!E){g[v]=w;return}if(g[v]===void 0){g[v]=[w];return}g[v]=[].concat(g[v],w)};case"comma":case"separator":return(v,w,g)=>{const u=typeof w=="string"&&w.includes(p.arrayFormatSeparator),b=typeof w=="string"&&!u&&A(w,p).includes(p.arrayFormatSeparator);w=b?A(w,p):w;const K=u||b?w.split(p.arrayFormatSeparator).map(G=>A(G,p)):w===null?w:A(w,p);g[v]=K};case"bracket-separator":return(v,w,g)=>{const u=/(\[\])$/.test(v);if(v=v.replace(/\[\]$/,""),!u){g[v]=w&&A(w,p);return}const b=w===null?[]:w.split(p.arrayFormatSeparator).map(K=>A(K,p));if(g[v]===void 0){g[v]=b;return}g[v]=[].concat(g[v],b)};default:return(v,w,g)=>{if(g[v]===void 0){g[v]=w;return}g[v]=[].concat(g[v],w)}}}function _(p){if(typeof p!="string"||p.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function D(p,E){return E.encode?E.strict?e(p):encodeURIComponent(p):p}function A(p,E){return E.decode?t(p):p}function P(p){return Array.isArray(p)?p.sort():typeof p=="object"?P(Object.keys(p)).sort((E,v)=>Number(E)-Number(v)).map(E=>p[E]):p}function C(p){const E=p.indexOf("#");return E!==-1&&(p=p.slice(0,E)),p}function R(p){let E="";const v=p.indexOf("#");return v!==-1&&(E=p.slice(v)),E}function B(p){p=C(p);const E=p.indexOf("?");return E===-1?"":p.slice(E+1)}function M(p,E){return E.parseNumbers&&!Number.isNaN(Number(p))&&typeof p=="string"&&p.trim()!==""?p=Number(p):E.parseBooleans&&p!==null&&(p.toLowerCase()==="true"||p.toLowerCase()==="false")&&(p=p.toLowerCase()==="true"),p}function ee(p,E){E=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},E),_(E.arrayFormatSeparator);const v=m(E),w=Object.create(null);if(typeof p!="string"||(p=p.trim().replace(/^[?#&]/,""),!p))return w;for(const g of p.split("&")){if(g==="")continue;let[u,b]=s(E.decode?g.replace(/\+/g," "):g,"=");b=b===void 0?null:["comma","separator","bracket-separator"].includes(E.arrayFormat)?b:A(b,E),v(A(u,E),b,w)}for(const g of Object.keys(w)){const u=w[g];if(typeof u=="object"&&u!==null)for(const b of Object.keys(u))u[b]=M(u[b],E);else w[g]=M(u,E)}return E.sort===!1?w:(E.sort===!0?Object.keys(w).sort():Object.keys(w).sort(E.sort)).reduce((g,u)=>{const b=w[u];return b&&typeof b=="object"&&!Array.isArray(b)?g[u]=P(b):g[u]=b,g},Object.create(null))}n.extract=B,n.parse=ee,n.stringify=(p,E)=>{if(!p)return"";E=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},E),_(E.arrayFormatSeparator);const v=b=>E.skipNull&&c(p[b])||E.skipEmptyString&&p[b]==="",w=l(E),g={};for(const b of Object.keys(p))v(b)||(g[b]=p[b]);const u=Object.keys(g);return E.sort!==!1&&u.sort(E.sort),u.map(b=>{const K=p[b];return K===void 0?"":K===null?D(b,E):Array.isArray(K)?K.length===0&&E.arrayFormat==="bracket-separator"?D(b,E)+"[]":K.reduce(w(b),[]).join("&"):D(b,E)+"="+D(K,E)}).filter(b=>b.length>0).join("&")},n.parseUrl=(p,E)=>{E=Object.assign({decode:!0},E);const[v,w]=s(p,"#");return Object.assign({url:v.split("?")[0]||"",query:ee(B(p),E)},E&&E.parseFragmentIdentifier&&w?{fragmentIdentifier:A(w,E)}:{})},n.stringifyUrl=(p,E)=>{E=Object.assign({encode:!0,strict:!0,[f]:!0},E);const v=C(p.url).split("?")[0]||"",w=n.extract(p.url),g=n.parse(w,{sort:!1}),u=Object.assign(g,p.query);let b=n.stringify(u,E);b&&(b=`?${b}`);let K=R(p.url);return p.fragmentIdentifier&&(K=`#${E[f]?D(p.fragmentIdentifier,E):p.fragmentIdentifier}`),`${v}${b}${K}`},n.pick=(p,E,v)=>{v=Object.assign({parseFragmentIdentifier:!0,[f]:!1},v);const{url:w,query:g,fragmentIdentifier:u}=n.parseUrl(p,v);return n.stringifyUrl({url:w,query:o(g,E),fragmentIdentifier:u},v)},n.exclude=(p,E,v)=>{const w=Array.isArray(E)?g=>!E.includes(g):(g,u)=>!E(g,u);return n.pick(p,w,v)}})(G5);function Jc(n=[],e=[]){return[...new Set([...n,...e])]}function nh(n){return n.includes(":")}function Bo(n){return nh(n)?n.split(":")[0]:n}const Y5={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function Od(n,e){const{message:t,code:s}=Y5[n];return{message:e?`${t} ${e}`:t,code:s}}function Id(n,e){return Array.isArray(n)?typeof e<"u"&&n.length?n.every(e):!0:!1}function J5(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}var Ou={exports:{}};(function(n,e){var t=typeof self<"u"?self:Tn,s=function(){function c(){this.fetch=!1,this.DOMException=t.DOMException}return c.prototype=t,new c}();(function(c){(function(f){var l={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function m(I){return I&&DataView.prototype.isPrototypeOf(I)}if(l.arrayBuffer)var _=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],D=ArrayBuffer.isView||function(I){return I&&_.indexOf(Object.prototype.toString.call(I))>-1};function A(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(I))throw new TypeError("Invalid character in header field name");return I.toLowerCase()}function P(I){return typeof I!="string"&&(I=String(I)),I}function C(I){var N={next:function(){var te=I.shift();return{done:te===void 0,value:te}}};return l.iterable&&(N[Symbol.iterator]=function(){return N}),N}function R(I){this.map={},I instanceof R?I.forEach(function(N,te){this.append(te,N)},this):Array.isArray(I)?I.forEach(function(N){this.append(N[0],N[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(N){this.append(N,I[N])},this)}R.prototype.append=function(I,N){I=A(I),N=P(N);var te=this.map[I];this.map[I]=te?te+", "+N:N},R.prototype.delete=function(I){delete this.map[A(I)]},R.prototype.get=function(I){return I=A(I),this.has(I)?this.map[I]:null},R.prototype.has=function(I){return this.map.hasOwnProperty(A(I))},R.prototype.set=function(I,N){this.map[A(I)]=P(N)},R.prototype.forEach=function(I,N){for(var te in this.map)this.map.hasOwnProperty(te)&&I.call(N,this.map[te],te,this)},R.prototype.keys=function(){var I=[];return this.forEach(function(N,te){I.push(te)}),C(I)},R.prototype.values=function(){var I=[];return this.forEach(function(N){I.push(N)}),C(I)},R.prototype.entries=function(){var I=[];return this.forEach(function(N,te){I.push([te,N])}),C(I)},l.iterable&&(R.prototype[Symbol.iterator]=R.prototype.entries);function B(I){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}function M(I){return new Promise(function(N,te){I.onload=function(){N(I.result)},I.onerror=function(){te(I.error)}})}function ee(I){var N=new FileReader,te=M(N);return N.readAsArrayBuffer(I),te}function p(I){var N=new FileReader,te=M(N);return N.readAsText(I),te}function E(I){for(var N=new Uint8Array(I),te=new Array(N.length),X=0;X<N.length;X++)te[X]=String.fromCharCode(N[X]);return te.join("")}function v(I){if(I.slice)return I.slice(0);var N=new Uint8Array(I.byteLength);return N.set(new Uint8Array(I)),N.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(I){this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:l.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:l.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():l.arrayBuffer&&l.blob&&m(I)?(this._bodyArrayBuffer=v(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||D(I))?this._bodyArrayBuffer=v(I):this._bodyText=I=Object.prototype.toString.call(I):this._bodyText="",this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var I=B(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?B(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ee)}),this.text=function(){var I=B(this);if(I)return I;if(this._bodyBlob)return p(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(K)}),this.json=function(){return this.text().then(JSON.parse)},this}var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function u(I){var N=I.toUpperCase();return g.indexOf(N)>-1?N:I}function b(I,N){N=N||{};var te=N.body;if(I instanceof b){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,N.headers||(this.headers=new R(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!te&&I._bodyInit!=null&&(te=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new R(N.headers)),this.method=u(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&te)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(te)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})};function K(I){var N=new FormData;return I.trim().split("&").forEach(function(te){if(te){var X=te.split("="),k=X.shift().replace(/\+/g," "),W=X.join("=").replace(/\+/g," ");N.append(decodeURIComponent(k),decodeURIComponent(W))}}),N}function G(I){var N=new R,te=I.replace(/\r?\n[\t ]+/g," ");return te.split(/\r?\n/).forEach(function(X){var k=X.split(":"),W=k.shift().trim();if(W){var J=k.join(":").trim();N.append(W,J)}}),N}w.call(b.prototype);function se(I,N){N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in N?N.statusText:"OK",this.headers=new R(N.headers),this.url=N.url||"",this._initBody(I)}w.call(se.prototype),se.prototype.clone=function(){return new se(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new R(this.headers),url:this.url})},se.error=function(){var I=new se(null,{status:0,statusText:""});return I.type="error",I};var ce=[301,302,303,307,308];se.redirect=function(I,N){if(ce.indexOf(N)===-1)throw new RangeError("Invalid status code");return new se(null,{status:N,headers:{location:I}})},f.DOMException=c.DOMException;try{new f.DOMException}catch{f.DOMException=function(N,te){this.message=N,this.name=te;var X=Error(N);this.stack=X.stack},f.DOMException.prototype=Object.create(Error.prototype),f.DOMException.prototype.constructor=f.DOMException}function de(I,N){return new Promise(function(te,X){var k=new b(I,N);if(k.signal&&k.signal.aborted)return X(new f.DOMException("Aborted","AbortError"));var W=new XMLHttpRequest;function J(){W.abort()}W.onload=function(){var ne={status:W.status,statusText:W.statusText,headers:G(W.getAllResponseHeaders()||"")};ne.url="responseURL"in W?W.responseURL:ne.headers.get("X-Request-URL");var be="response"in W?W.response:W.responseText;te(new se(be,ne))},W.onerror=function(){X(new TypeError("Network request failed"))},W.ontimeout=function(){X(new TypeError("Network request failed"))},W.onabort=function(){X(new f.DOMException("Aborted","AbortError"))},W.open(k.method,k.url,!0),k.credentials==="include"?W.withCredentials=!0:k.credentials==="omit"&&(W.withCredentials=!1),"responseType"in W&&l.blob&&(W.responseType="blob"),k.headers.forEach(function(ne,be){W.setRequestHeader(be,ne)}),k.signal&&(k.signal.addEventListener("abort",J),W.onreadystatechange=function(){W.readyState===4&&k.signal.removeEventListener("abort",J)}),W.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}return de.polyfill=!0,c.fetch||(c.fetch=de,c.Headers=R,c.Request=b,c.Response=se),f.Headers=R,f.Request=b,f.Response=se,f.fetch=de,Object.defineProperty(f,"__esModule",{value:!0}),f})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var o=s;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,n.exports=e})(Ou,Ou.exports);var X5=Ou.exports;const xd=qd(X5),Q5={Accept:"application/json","Content-Type":"application/json"},Z5="POST",Ad={headers:Q5,method:Z5},Pd=10;class ai{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new qr.EventEmitter,this.isAvailable=!1,this.registering=!1,!ol(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,t){this.isAvailable||await this.register();try{const s=Es(e),c=await(await xd(this.url,Object.assign(Object.assign({},Ad),{body:s}))).json();this.onPayload({data:c})}catch(s){this.onError(e.id,s)}}async register(e=this.url){if(!ol(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=Es({id:1,jsonrpc:"2.0",method:"test",params:[]});await xd(e,Object.assign(Object.assign({},Ad),{body:t}))}this.onOpen()}catch(t){const s=this.parseError(t);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Hu(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=Xo(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return Bd(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Pd&&this.events.setMaxListeners(Pd)}}const Td="error",eO="wss://relay.walletconnect.com",tO="wc",rO="universal_provider",Cd=`${tO}@2:${rO}:`,nO="https://rpc.walletconnect.com/v1",$n={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var gs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof mr<"u"?mr:typeof self<"u"?self:{},Iu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(n,e){(function(){var t,s="4.17.21",o=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",f="Expected a function",l="Invalid `variable` option passed into `_.template`",m="__lodash_hash_undefined__",_=500,D="__lodash_placeholder__",A=1,P=2,C=4,R=1,B=2,M=1,ee=2,p=4,E=8,v=16,w=32,g=64,u=128,b=256,K=512,G=30,se="...",ce=800,de=16,I=1,N=2,te=3,X=1/0,k=9007199254740991,W=17976931348623157e292,J=0/0,ne=4294967295,be=ne-1,oe=ne>>>1,we=[["ary",u],["bind",M],["bindKey",ee],["curry",E],["curryRight",v],["flip",K],["partial",w],["partialRight",g],["rearg",b]],fe="[object Arguments]",ve="[object Array]",H="[object AsyncFunction]",z="[object Boolean]",F="[object Date]",d="[object DOMException]",U="[object Error]",ae="[object Function]",le="[object GeneratorFunction]",Oe="[object Map]",ze="[object Number]",Ve="[object Null]",je="[object Object]",yt="[object Promise]",_t="[object Proxy]",Me="[object RegExp]",Ie="[object Set]",Re="[object String]",Ue="[object Symbol]",qe="[object Undefined]",Ae="[object WeakMap]",$e="[object WeakSet]",De="[object ArrayBuffer]",Pe="[object DataView]",He="[object Float32Array]",xe="[object Float64Array]",ke="[object Int8Array]",Ge="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",rr="[object Uint16Array]",lr="[object Uint32Array]",Yr=/\b__p \+= '';/g,nr=/\b(__p \+=) '' \+/g,sn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vn=/&(?:amp|lt|gt|quot|#39);/g,Fn=/[&<>"']/g,St=RegExp(vn.source),vt=RegExp(Fn.source),Dt=/<%-([\s\S]+?)%>/g,Ot=/<%([\s\S]+?)%>/g,wt=/<%=([\s\S]+?)%>/g,mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ft=/^\w*$/,jt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,Lt=RegExp(It.source),xt=/^\s+/,Ct=/\s/,At=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ht=/\{\n\/\* \[wrapped with (.+)\] \*/,Mt=/,? & /,qt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ha=/[()=,{}\[\]\/\s]/,fa=/\\(\\)?/g,la=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ar=/\w*$/,da=/^[-+]0x[0-9a-f]+$/i,pa=/^0b[01]+$/i,ga=/^\[object .+?Constructor\]$/,ya=/^0o[0-7]+$/i,_a=/^(?:0|[1-9]\d*)$/,on=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ci=/($^)/,va=/['\n\r\u2028\u2029\\]/g,ui="\\ud800-\\udfff",ma="\\u0300-\\u036f",ba="\\ufe20-\\ufe2f",hi="\\u20d0-\\u20ff",Cs=ma+ba+hi,Ns="\\u2700-\\u27bf",Br="a-z\\xdf-\\xf6\\xf8-\\xff",wa="\\xac\\xb1\\xd7\\xf7",Ea="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Sa="\\u2000-\\u206f",Da=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Rs="A-Z\\xc0-\\xd6\\xd8-\\xde",Us="\\ufe0e\\ufe0f",jn=wa+Ea+Sa+Da,Li="['â€™]",Ln="["+ui+"]",Mi="["+jn+"]",Mn="["+Cs+"]",$s="\\d+",Oa="["+Ns+"]",Fs="["+Br+"]",js="[^"+ui+jn+$s+Ns+Br+Rs+"]",fi="\\ud83c[\\udffb-\\udfff]",Ia="(?:"+Mn+"|"+fi+")",Ls="[^"+ui+"]",li="(?:\\ud83c[\\udde6-\\uddff]){2}",mn="[\\ud800-\\udbff][\\udc00-\\udfff]",wr="["+Rs+"]",Ms="\\u200d",qs="(?:"+Fs+"|"+js+")",Jr="(?:"+wr+"|"+js+")",Bs="(?:"+Li+"(?:d|ll|m|re|s|t|ve))?",zs="(?:"+Li+"(?:D|LL|M|RE|S|T|VE))?",Hs=Ia+"?",Ks="["+Us+"]?",xa="(?:"+Ms+"(?:"+[Ls,li,mn].join("|")+")"+Ks+Hs+")*",an="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Vs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ks=Ks+Hs+xa,di="(?:"+[Oa,li,mn].join("|")+")"+ks,Aa="(?:"+[Ls+Mn+"?",Mn,li,mn,Ln].join("|")+")",qi=RegExp(Li,"g"),Pa=RegExp(Mn,"g"),pi=RegExp(fi+"(?="+fi+")|"+Aa+ks,"g"),Ws=RegExp([wr+"?"+Fs+"+"+Bs+"(?="+[Mi,wr,"$"].join("|")+")",Jr+"+"+zs+"(?="+[Mi,wr+qs,"$"].join("|")+")",wr+"?"+qs+"+"+Bs,wr+"+"+zs,Vs,an,$s,di].join("|"),"g"),Gs=RegExp("["+Ms+ui+Cs+Us+"]"),qn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ys=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ta=-1,ot={};ot[He]=ot[xe]=ot[ke]=ot[Ge]=ot[et]=ot[tt]=ot[Je]=ot[rr]=ot[lr]=!0,ot[fe]=ot[ve]=ot[De]=ot[z]=ot[Pe]=ot[F]=ot[U]=ot[ae]=ot[Oe]=ot[ze]=ot[je]=ot[Me]=ot[Ie]=ot[Re]=ot[Ae]=!1;var st={};st[fe]=st[ve]=st[De]=st[Pe]=st[z]=st[F]=st[He]=st[xe]=st[ke]=st[Ge]=st[et]=st[Oe]=st[ze]=st[je]=st[Me]=st[Ie]=st[Re]=st[Ue]=st[tt]=st[Je]=st[rr]=st[lr]=!0,st[U]=st[ae]=st[Ae]=!1;var x={Ã€:"A",Ã:"A",Ã‚:"A",Ãƒ:"A",Ã„:"A",Ã…:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã‡:"C",Ã§:"c",Ã:"D",Ã°:"d",Ãˆ:"E",Ã‰:"E",ÃŠ:"E",Ã‹:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",ÃŒ:"I",Ã:"I",ÃŽ:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã‘:"N",Ã±:"n",Ã’:"O",Ã“:"O",Ã”:"O",Ã•:"O",Ã–:"O",Ã˜:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã™:"U",Ãš:"U",Ã›:"U",Ãœ:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã†:"Ae",Ã¦:"ae",Ãž:"Th",Ã¾:"th",ÃŸ:"ss",Ä€:"A",Ä‚:"A",Ä„:"A",Ä:"a",Äƒ:"a",Ä…:"a",Ä†:"C",Äˆ:"C",ÄŠ:"C",ÄŒ:"C",Ä‡:"c",Ä‰:"c",Ä‹:"c",Ä:"c",ÄŽ:"D",Ä:"D",Ä:"d",Ä‘:"d",Ä’:"E",Ä”:"E",Ä–:"E",Ä˜:"E",Äš:"E",Ä“:"e",Ä•:"e",Ä—:"e",Ä™:"e",Ä›:"e",Äœ:"G",Äž:"G",Ä :"G",Ä¢:"G",Ä:"g",ÄŸ:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å€:"l",Å‚:"l",Åƒ:"N",Å…:"N",Å‡:"N",ÅŠ:"N",Å„:"n",Å†:"n",Åˆ:"n",Å‹:"n",ÅŒ:"O",ÅŽ:"O",Å:"O",Å:"o",Å:"o",Å‘:"o",Å”:"R",Å–:"R",Å˜:"R",Å•:"r",Å—:"r",Å™:"r",Åš:"S",Åœ:"S",Åž:"S",Å :"S",Å›:"s",Å:"s",ÅŸ:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å’:"Oe",Å“:"oe",Å‰:"'n",Å¿:"s"},j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},re={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,Ce=parseInt,pt=typeof gs=="object"&&gs&&gs.Object===Object&&gs,Bt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=pt||Bt||Function("return this")(),ct=e&&!e.nodeType&&e,Nt=ct&&!0&&n&&!n.nodeType&&n,dr=Nt&&Nt.exports===ct,zt=dr&&pt.process,gt=function(){try{var L=Nt&&Nt.require&&Nt.require("util").types;return L||zt&&zt.binding&&zt.binding("util")}catch{}}(),ir=gt&&gt.isArrayBuffer,zr=gt&&gt.isDate,Pr=gt&&gt.isMap,Xr=gt&&gt.isRegExp,Bi=gt&&gt.isSet,Bn=gt&&gt.isTypedArray;function kt(L,Y,V){switch(V.length){case 0:return L.call(Y);case 1:return L.call(Y,V[0]);case 2:return L.call(Y,V[0],V[1]);case 3:return L.call(Y,V[0],V[1],V[2])}return L.apply(Y,V)}function tg(L,Y,V,ge){for(var Te=-1,rt=L==null?0:L.length;++Te<rt;){var Kt=L[Te];Y(ge,Kt,V(Kt),L)}return ge}function Tr(L,Y){for(var V=-1,ge=L==null?0:L.length;++V<ge&&Y(L[V],V,L)!==!1;);return L}function rg(L,Y){for(var V=L==null?0:L.length;V--&&Y(L[V],V,L)!==!1;);return L}function oh(L,Y){for(var V=-1,ge=L==null?0:L.length;++V<ge;)if(!Y(L[V],V,L))return!1;return!0}function bn(L,Y){for(var V=-1,ge=L==null?0:L.length,Te=0,rt=[];++V<ge;){var Kt=L[V];Y(Kt,V,L)&&(rt[Te++]=Kt)}return rt}function Js(L,Y){var V=L==null?0:L.length;return!!V&&gi(L,Y,0)>-1}function Ca(L,Y,V){for(var ge=-1,Te=L==null?0:L.length;++ge<Te;)if(V(Y,L[ge]))return!0;return!1}function bt(L,Y){for(var V=-1,ge=L==null?0:L.length,Te=Array(ge);++V<ge;)Te[V]=Y(L[V],V,L);return Te}function wn(L,Y){for(var V=-1,ge=Y.length,Te=L.length;++V<ge;)L[Te+V]=Y[V];return L}function Na(L,Y,V,ge){var Te=-1,rt=L==null?0:L.length;for(ge&&rt&&(V=L[++Te]);++Te<rt;)V=Y(V,L[Te],Te,L);return V}function ng(L,Y,V,ge){var Te=L==null?0:L.length;for(ge&&Te&&(V=L[--Te]);Te--;)V=Y(V,L[Te],Te,L);return V}function Ra(L,Y){for(var V=-1,ge=L==null?0:L.length;++V<ge;)if(Y(L[V],V,L))return!0;return!1}var ig=Ua("length");function sg(L){return L.split("")}function og(L){return L.match(qt)||[]}function ah(L,Y,V){var ge;return V(L,function(Te,rt,Kt){if(Y(Te,rt,Kt))return ge=rt,!1}),ge}function Xs(L,Y,V,ge){for(var Te=L.length,rt=V+(ge?1:-1);ge?rt--:++rt<Te;)if(Y(L[rt],rt,L))return rt;return-1}function gi(L,Y,V){return Y===Y?vg(L,Y,V):Xs(L,ch,V)}function ag(L,Y,V,ge){for(var Te=V-1,rt=L.length;++Te<rt;)if(ge(L[Te],Y))return Te;return-1}function ch(L){return L!==L}function uh(L,Y){var V=L==null?0:L.length;return V?Fa(L,Y)/V:J}function Ua(L){return function(Y){return Y==null?t:Y[L]}}function $a(L){return function(Y){return L==null?t:L[Y]}}function hh(L,Y,V,ge,Te){return Te(L,function(rt,Kt,ut){V=ge?(ge=!1,rt):Y(V,rt,Kt,ut)}),V}function cg(L,Y){var V=L.length;for(L.sort(Y);V--;)L[V]=L[V].value;return L}function Fa(L,Y){for(var V,ge=-1,Te=L.length;++ge<Te;){var rt=Y(L[ge]);rt!==t&&(V=V===t?rt:V+rt)}return V}function ja(L,Y){for(var V=-1,ge=Array(L);++V<L;)ge[V]=Y(V);return ge}function ug(L,Y){return bt(Y,function(V){return[V,L[V]]})}function fh(L){return L&&L.slice(0,gh(L)+1).replace(xt,"")}function Er(L){return function(Y){return L(Y)}}function La(L,Y){return bt(Y,function(V){return L[V]})}function zi(L,Y){return L.has(Y)}function lh(L,Y){for(var V=-1,ge=L.length;++V<ge&&gi(Y,L[V],0)>-1;);return V}function dh(L,Y){for(var V=L.length;V--&&gi(Y,L[V],0)>-1;);return V}function hg(L,Y){for(var V=L.length,ge=0;V--;)L[V]===Y&&++ge;return ge}var fg=$a(x),lg=$a(j);function dg(L){return"\\"+pe[L]}function pg(L,Y){return L==null?t:L[Y]}function yi(L){return Gs.test(L)}function gg(L){return qn.test(L)}function yg(L){for(var Y,V=[];!(Y=L.next()).done;)V.push(Y.value);return V}function Ma(L){var Y=-1,V=Array(L.size);return L.forEach(function(ge,Te){V[++Y]=[Te,ge]}),V}function ph(L,Y){return function(V){return L(Y(V))}}function En(L,Y){for(var V=-1,ge=L.length,Te=0,rt=[];++V<ge;){var Kt=L[V];(Kt===Y||Kt===D)&&(L[V]=D,rt[Te++]=V)}return rt}function Qs(L){var Y=-1,V=Array(L.size);return L.forEach(function(ge){V[++Y]=ge}),V}function _g(L){var Y=-1,V=Array(L.size);return L.forEach(function(ge){V[++Y]=[ge,ge]}),V}function vg(L,Y,V){for(var ge=V-1,Te=L.length;++ge<Te;)if(L[ge]===Y)return ge;return-1}function mg(L,Y,V){for(var ge=V+1;ge--;)if(L[ge]===Y)return ge;return ge}function _i(L){return yi(L)?wg(L):ig(L)}function Hr(L){return yi(L)?Eg(L):sg(L)}function gh(L){for(var Y=L.length;Y--&&Ct.test(L.charAt(Y)););return Y}var bg=$a(re);function wg(L){for(var Y=pi.lastIndex=0;pi.test(L);)++Y;return Y}function Eg(L){return L.match(pi)||[]}function Sg(L){return L.match(Ws)||[]}var Dg=function L(Y){Y=Y==null?Xe:vi.defaults(Xe.Object(),Y,vi.pick(Xe,Ys));var V=Y.Array,ge=Y.Date,Te=Y.Error,rt=Y.Function,Kt=Y.Math,ut=Y.Object,qa=Y.RegExp,Og=Y.String,Cr=Y.TypeError,Zs=V.prototype,Ig=rt.prototype,mi=ut.prototype,eo=Y["__core-js_shared__"],to=Ig.toString,it=mi.hasOwnProperty,xg=0,yh=function(){var r=/[^.]+$/.exec(eo&&eo.keys&&eo.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),ro=mi.toString,Ag=to.call(ut),Pg=Xe._,Tg=qa("^"+to.call(it).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),no=dr?Y.Buffer:t,Sn=Y.Symbol,io=Y.Uint8Array,_h=no?no.allocUnsafe:t,so=ph(ut.getPrototypeOf,ut),vh=ut.create,mh=mi.propertyIsEnumerable,oo=Zs.splice,bh=Sn?Sn.isConcatSpreadable:t,Hi=Sn?Sn.iterator:t,zn=Sn?Sn.toStringTag:t,ao=function(){try{var r=Wn(ut,"defineProperty");return r({},"",{}),r}catch{}}(),Cg=Y.clearTimeout!==Xe.clearTimeout&&Y.clearTimeout,Ng=ge&&ge.now!==Xe.Date.now&&ge.now,Rg=Y.setTimeout!==Xe.setTimeout&&Y.setTimeout,co=Kt.ceil,uo=Kt.floor,Ba=ut.getOwnPropertySymbols,Ug=no?no.isBuffer:t,wh=Y.isFinite,$g=Zs.join,Fg=ph(ut.keys,ut),Vt=Kt.max,Zt=Kt.min,jg=ge.now,Lg=Y.parseInt,Eh=Kt.random,Mg=Zs.reverse,za=Wn(Y,"DataView"),Ki=Wn(Y,"Map"),Ha=Wn(Y,"Promise"),bi=Wn(Y,"Set"),Vi=Wn(Y,"WeakMap"),ki=Wn(ut,"create"),ho=Vi&&new Vi,wi={},qg=Gn(za),Bg=Gn(Ki),zg=Gn(Ha),Hg=Gn(bi),Kg=Gn(Vi),fo=Sn?Sn.prototype:t,Wi=fo?fo.valueOf:t,Sh=fo?fo.toString:t;function S(r){if(Pt(r)&&!Ne(r)&&!(r instanceof Ye)){if(r instanceof Nr)return r;if(it.call(r,"__wrapped__"))return Of(r)}return new Nr(r)}var Ei=function(){function r(){}return function(i){if(!Et(i))return{};if(vh)return vh(i);r.prototype=i;var a=new r;return r.prototype=t,a}}();function lo(){}function Nr(r,i){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=t}S.templateSettings={escape:Dt,evaluate:Ot,interpolate:wt,variable:"",imports:{_:S}},S.prototype=lo.prototype,S.prototype.constructor=S,Nr.prototype=Ei(lo.prototype),Nr.prototype.constructor=Nr;function Ye(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ne,this.__views__=[]}function Vg(){var r=new Ye(this.__wrapped__);return r.__actions__=pr(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=pr(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=pr(this.__views__),r}function kg(){if(this.__filtered__){var r=new Ye(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function Wg(){var r=this.__wrapped__.value(),i=this.__dir__,a=Ne(r),h=i<0,y=a?r.length:0,O=sy(0,y,this.__views__),T=O.start,$=O.end,q=$-T,Q=h?$:T-1,Z=this.__iteratees__,ie=Z.length,ue=0,_e=Zt(q,this.__takeCount__);if(!a||!h&&y==q&&_e==q)return Wh(r,this.__actions__);var Ee=[];e:for(;q--&&ue<_e;){Q+=i;for(var Be=-1,Se=r[Q];++Be<ie;){var We=Z[Be],Qe=We.iteratee,Or=We.type,ar=Qe(Se);if(Or==N)Se=ar;else if(!ar){if(Or==I)continue e;break e}}Ee[ue++]=Se}return Ee}Ye.prototype=Ei(lo.prototype),Ye.prototype.constructor=Ye;function Hn(r){var i=-1,a=r==null?0:r.length;for(this.clear();++i<a;){var h=r[i];this.set(h[0],h[1])}}function Gg(){this.__data__=ki?ki(null):{},this.size=0}function Yg(r){var i=this.has(r)&&delete this.__data__[r];return this.size-=i?1:0,i}function Jg(r){var i=this.__data__;if(ki){var a=i[r];return a===m?t:a}return it.call(i,r)?i[r]:t}function Xg(r){var i=this.__data__;return ki?i[r]!==t:it.call(i,r)}function Qg(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=ki&&i===t?m:i,this}Hn.prototype.clear=Gg,Hn.prototype.delete=Yg,Hn.prototype.get=Jg,Hn.prototype.has=Xg,Hn.prototype.set=Qg;function cn(r){var i=-1,a=r==null?0:r.length;for(this.clear();++i<a;){var h=r[i];this.set(h[0],h[1])}}function Zg(){this.__data__=[],this.size=0}function e0(r){var i=this.__data__,a=po(i,r);if(a<0)return!1;var h=i.length-1;return a==h?i.pop():oo.call(i,a,1),--this.size,!0}function t0(r){var i=this.__data__,a=po(i,r);return a<0?t:i[a][1]}function r0(r){return po(this.__data__,r)>-1}function n0(r,i){var a=this.__data__,h=po(a,r);return h<0?(++this.size,a.push([r,i])):a[h][1]=i,this}cn.prototype.clear=Zg,cn.prototype.delete=e0,cn.prototype.get=t0,cn.prototype.has=r0,cn.prototype.set=n0;function un(r){var i=-1,a=r==null?0:r.length;for(this.clear();++i<a;){var h=r[i];this.set(h[0],h[1])}}function i0(){this.size=0,this.__data__={hash:new Hn,map:new(Ki||cn),string:new Hn}}function s0(r){var i=Io(this,r).delete(r);return this.size-=i?1:0,i}function o0(r){return Io(this,r).get(r)}function a0(r){return Io(this,r).has(r)}function c0(r,i){var a=Io(this,r),h=a.size;return a.set(r,i),this.size+=a.size==h?0:1,this}un.prototype.clear=i0,un.prototype.delete=s0,un.prototype.get=o0,un.prototype.has=a0,un.prototype.set=c0;function Kn(r){var i=-1,a=r==null?0:r.length;for(this.__data__=new un;++i<a;)this.add(r[i])}function u0(r){return this.__data__.set(r,m),this}function h0(r){return this.__data__.has(r)}Kn.prototype.add=Kn.prototype.push=u0,Kn.prototype.has=h0;function Kr(r){var i=this.__data__=new cn(r);this.size=i.size}function f0(){this.__data__=new cn,this.size=0}function l0(r){var i=this.__data__,a=i.delete(r);return this.size=i.size,a}function d0(r){return this.__data__.get(r)}function p0(r){return this.__data__.has(r)}function g0(r,i){var a=this.__data__;if(a instanceof cn){var h=a.__data__;if(!Ki||h.length<o-1)return h.push([r,i]),this.size=++a.size,this;a=this.__data__=new un(h)}return a.set(r,i),this.size=a.size,this}Kr.prototype.clear=f0,Kr.prototype.delete=l0,Kr.prototype.get=d0,Kr.prototype.has=p0,Kr.prototype.set=g0;function Dh(r,i){var a=Ne(r),h=!a&&Yn(r),y=!a&&!h&&An(r),O=!a&&!h&&!y&&Ii(r),T=a||h||y||O,$=T?ja(r.length,Og):[],q=$.length;for(var Q in r)(i||it.call(r,Q))&&!(T&&(Q=="length"||y&&(Q=="offset"||Q=="parent")||O&&(Q=="buffer"||Q=="byteLength"||Q=="byteOffset")||dn(Q,q)))&&$.push(Q);return $}function Oh(r){var i=r.length;return i?r[ec(0,i-1)]:t}function y0(r,i){return xo(pr(r),Vn(i,0,r.length))}function _0(r){return xo(pr(r))}function Ka(r,i,a){(a!==t&&!Vr(r[i],a)||a===t&&!(i in r))&&hn(r,i,a)}function Gi(r,i,a){var h=r[i];(!(it.call(r,i)&&Vr(h,a))||a===t&&!(i in r))&&hn(r,i,a)}function po(r,i){for(var a=r.length;a--;)if(Vr(r[a][0],i))return a;return-1}function v0(r,i,a,h){return Dn(r,function(y,O,T){i(h,y,a(y),T)}),h}function Ih(r,i){return r&&Zr(i,Wt(i),r)}function m0(r,i){return r&&Zr(i,yr(i),r)}function hn(r,i,a){i=="__proto__"&&ao?ao(r,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[i]=a}function Va(r,i){for(var a=-1,h=i.length,y=V(h),O=r==null;++a<h;)y[a]=O?t:Oc(r,i[a]);return y}function Vn(r,i,a){return r===r&&(a!==t&&(r=r<=a?r:a),i!==t&&(r=r>=i?r:i)),r}function Rr(r,i,a,h,y,O){var T,$=i&A,q=i&P,Q=i&C;if(a&&(T=y?a(r,h,y,O):a(r)),T!==t)return T;if(!Et(r))return r;var Z=Ne(r);if(Z){if(T=ay(r),!$)return pr(r,T)}else{var ie=er(r),ue=ie==ae||ie==le;if(An(r))return Jh(r,$);if(ie==je||ie==fe||ue&&!y){if(T=q||ue?{}:yf(r),!$)return q?J0(r,m0(T,r)):Y0(r,Ih(T,r))}else{if(!st[ie])return y?r:{};T=cy(r,ie,$)}}O||(O=new Kr);var _e=O.get(r);if(_e)return _e;O.set(r,T),Vf(r)?r.forEach(function(Se){T.add(Rr(Se,i,a,Se,r,O))}):Hf(r)&&r.forEach(function(Se,We){T.set(We,Rr(Se,i,a,We,r,O))});var Ee=Q?q?fc:hc:q?yr:Wt,Be=Z?t:Ee(r);return Tr(Be||r,function(Se,We){Be&&(We=Se,Se=r[We]),Gi(T,We,Rr(Se,i,a,We,r,O))}),T}function b0(r){var i=Wt(r);return function(a){return xh(a,r,i)}}function xh(r,i,a){var h=a.length;if(r==null)return!h;for(r=ut(r);h--;){var y=a[h],O=i[y],T=r[y];if(T===t&&!(y in r)||!O(T))return!1}return!0}function Ah(r,i,a){if(typeof r!="function")throw new Cr(f);return ts(function(){r.apply(t,a)},i)}function Yi(r,i,a,h){var y=-1,O=Js,T=!0,$=r.length,q=[],Q=i.length;if(!$)return q;a&&(i=bt(i,Er(a))),h?(O=Ca,T=!1):i.length>=o&&(O=zi,T=!1,i=new Kn(i));e:for(;++y<$;){var Z=r[y],ie=a==null?Z:a(Z);if(Z=h||Z!==0?Z:0,T&&ie===ie){for(var ue=Q;ue--;)if(i[ue]===ie)continue e;q.push(Z)}else O(i,ie,h)||q.push(Z)}return q}var Dn=tf(Qr),Ph=tf(Wa,!0);function w0(r,i){var a=!0;return Dn(r,function(h,y,O){return a=!!i(h,y,O),a}),a}function go(r,i,a){for(var h=-1,y=r.length;++h<y;){var O=r[h],T=i(O);if(T!=null&&($===t?T===T&&!Dr(T):a(T,$)))var $=T,q=O}return q}function E0(r,i,a,h){var y=r.length;for(a=Le(a),a<0&&(a=-a>y?0:y+a),h=h===t||h>y?y:Le(h),h<0&&(h+=y),h=a>h?0:Wf(h);a<h;)r[a++]=i;return r}function Th(r,i){var a=[];return Dn(r,function(h,y,O){i(h,y,O)&&a.push(h)}),a}function Jt(r,i,a,h,y){var O=-1,T=r.length;for(a||(a=hy),y||(y=[]);++O<T;){var $=r[O];i>0&&a($)?i>1?Jt($,i-1,a,h,y):wn(y,$):h||(y[y.length]=$)}return y}var ka=rf(),Ch=rf(!0);function Qr(r,i){return r&&ka(r,i,Wt)}function Wa(r,i){return r&&Ch(r,i,Wt)}function yo(r,i){return bn(i,function(a){return pn(r[a])})}function kn(r,i){i=In(i,r);for(var a=0,h=i.length;r!=null&&a<h;)r=r[en(i[a++])];return a&&a==h?r:t}function Nh(r,i,a){var h=i(r);return Ne(r)?h:wn(h,a(r))}function sr(r){return r==null?r===t?qe:Ve:zn&&zn in ut(r)?iy(r):_y(r)}function Ga(r,i){return r>i}function S0(r,i){return r!=null&&it.call(r,i)}function D0(r,i){return r!=null&&i in ut(r)}function O0(r,i,a){return r>=Zt(i,a)&&r<Vt(i,a)}function Ya(r,i,a){for(var h=a?Ca:Js,y=r[0].length,O=r.length,T=O,$=V(O),q=1/0,Q=[];T--;){var Z=r[T];T&&i&&(Z=bt(Z,Er(i))),q=Zt(Z.length,q),$[T]=!a&&(i||y>=120&&Z.length>=120)?new Kn(T&&Z):t}Z=r[0];var ie=-1,ue=$[0];e:for(;++ie<y&&Q.length<q;){var _e=Z[ie],Ee=i?i(_e):_e;if(_e=a||_e!==0?_e:0,!(ue?zi(ue,Ee):h(Q,Ee,a))){for(T=O;--T;){var Be=$[T];if(!(Be?zi(Be,Ee):h(r[T],Ee,a)))continue e}ue&&ue.push(Ee),Q.push(_e)}}return Q}function I0(r,i,a,h){return Qr(r,function(y,O,T){i(h,a(y),O,T)}),h}function Ji(r,i,a){i=In(i,r),r=bf(r,i);var h=r==null?r:r[en($r(i))];return h==null?t:kt(h,r,a)}function Rh(r){return Pt(r)&&sr(r)==fe}function x0(r){return Pt(r)&&sr(r)==De}function A0(r){return Pt(r)&&sr(r)==F}function Xi(r,i,a,h,y){return r===i?!0:r==null||i==null||!Pt(r)&&!Pt(i)?r!==r&&i!==i:P0(r,i,a,h,Xi,y)}function P0(r,i,a,h,y,O){var T=Ne(r),$=Ne(i),q=T?ve:er(r),Q=$?ve:er(i);q=q==fe?je:q,Q=Q==fe?je:Q;var Z=q==je,ie=Q==je,ue=q==Q;if(ue&&An(r)){if(!An(i))return!1;T=!0,Z=!1}if(ue&&!Z)return O||(O=new Kr),T||Ii(r)?df(r,i,a,h,y,O):ry(r,i,q,a,h,y,O);if(!(a&R)){var _e=Z&&it.call(r,"__wrapped__"),Ee=ie&&it.call(i,"__wrapped__");if(_e||Ee){var Be=_e?r.value():r,Se=Ee?i.value():i;return O||(O=new Kr),y(Be,Se,a,h,O)}}return ue?(O||(O=new Kr),ny(r,i,a,h,y,O)):!1}function T0(r){return Pt(r)&&er(r)==Oe}function Ja(r,i,a,h){var y=a.length,O=y,T=!h;if(r==null)return!O;for(r=ut(r);y--;){var $=a[y];if(T&&$[2]?$[1]!==r[$[0]]:!($[0]in r))return!1}for(;++y<O;){$=a[y];var q=$[0],Q=r[q],Z=$[1];if(T&&$[2]){if(Q===t&&!(q in r))return!1}else{var ie=new Kr;if(h)var ue=h(Q,Z,q,r,i,ie);if(!(ue===t?Xi(Z,Q,R|B,h,ie):ue))return!1}}return!0}function Uh(r){if(!Et(r)||ly(r))return!1;var i=pn(r)?Tg:ga;return i.test(Gn(r))}function C0(r){return Pt(r)&&sr(r)==Me}function N0(r){return Pt(r)&&er(r)==Ie}function R0(r){return Pt(r)&&Ro(r.length)&&!!ot[sr(r)]}function $h(r){return typeof r=="function"?r:r==null?_r:typeof r=="object"?Ne(r)?Lh(r[0],r[1]):jh(r):il(r)}function Xa(r){if(!es(r))return Fg(r);var i=[];for(var a in ut(r))it.call(r,a)&&a!="constructor"&&i.push(a);return i}function U0(r){if(!Et(r))return yy(r);var i=es(r),a=[];for(var h in r)h=="constructor"&&(i||!it.call(r,h))||a.push(h);return a}function Qa(r,i){return r<i}function Fh(r,i){var a=-1,h=gr(r)?V(r.length):[];return Dn(r,function(y,O,T){h[++a]=i(y,O,T)}),h}function jh(r){var i=dc(r);return i.length==1&&i[0][2]?vf(i[0][0],i[0][1]):function(a){return a===r||Ja(a,r,i)}}function Lh(r,i){return gc(r)&&_f(i)?vf(en(r),i):function(a){var h=Oc(a,r);return h===t&&h===i?Ic(a,r):Xi(i,h,R|B)}}function _o(r,i,a,h,y){r!==i&&ka(i,function(O,T){if(y||(y=new Kr),Et(O))$0(r,i,T,a,_o,h,y);else{var $=h?h(_c(r,T),O,T+"",r,i,y):t;$===t&&($=O),Ka(r,T,$)}},yr)}function $0(r,i,a,h,y,O,T){var $=_c(r,a),q=_c(i,a),Q=T.get(q);if(Q){Ka(r,a,Q);return}var Z=O?O($,q,a+"",r,i,T):t,ie=Z===t;if(ie){var ue=Ne(q),_e=!ue&&An(q),Ee=!ue&&!_e&&Ii(q);Z=q,ue||_e||Ee?Ne($)?Z=$:Rt($)?Z=pr($):_e?(ie=!1,Z=Jh(q,!0)):Ee?(ie=!1,Z=Xh(q,!0)):Z=[]:rs(q)||Yn(q)?(Z=$,Yn($)?Z=Gf($):(!Et($)||pn($))&&(Z=yf(q))):ie=!1}ie&&(T.set(q,Z),y(Z,q,h,O,T),T.delete(q)),Ka(r,a,Z)}function Mh(r,i){var a=r.length;if(a)return i+=i<0?a:0,dn(i,a)?r[i]:t}function qh(r,i,a){i.length?i=bt(i,function(O){return Ne(O)?function(T){return kn(T,O.length===1?O[0]:O)}:O}):i=[_r];var h=-1;i=bt(i,Er(me()));var y=Fh(r,function(O,T,$){var q=bt(i,function(Q){return Q(O)});return{criteria:q,index:++h,value:O}});return cg(y,function(O,T){return G0(O,T,a)})}function F0(r,i){return Bh(r,i,function(a,h){return Ic(r,h)})}function Bh(r,i,a){for(var h=-1,y=i.length,O={};++h<y;){var T=i[h],$=kn(r,T);a($,T)&&Qi(O,In(T,r),$)}return O}function j0(r){return function(i){return kn(i,r)}}function Za(r,i,a,h){var y=h?ag:gi,O=-1,T=i.length,$=r;for(r===i&&(i=pr(i)),a&&($=bt(r,Er(a)));++O<T;)for(var q=0,Q=i[O],Z=a?a(Q):Q;(q=y($,Z,q,h))>-1;)$!==r&&oo.call($,q,1),oo.call(r,q,1);return r}function zh(r,i){for(var a=r?i.length:0,h=a-1;a--;){var y=i[a];if(a==h||y!==O){var O=y;dn(y)?oo.call(r,y,1):nc(r,y)}}return r}function ec(r,i){return r+uo(Eh()*(i-r+1))}function L0(r,i,a,h){for(var y=-1,O=Vt(co((i-r)/(a||1)),0),T=V(O);O--;)T[h?O:++y]=r,r+=a;return T}function tc(r,i){var a="";if(!r||i<1||i>k)return a;do i%2&&(a+=r),i=uo(i/2),i&&(r+=r);while(i);return a}function Ke(r,i){return vc(mf(r,i,_r),r+"")}function M0(r){return Oh(xi(r))}function q0(r,i){var a=xi(r);return xo(a,Vn(i,0,a.length))}function Qi(r,i,a,h){if(!Et(r))return r;i=In(i,r);for(var y=-1,O=i.length,T=O-1,$=r;$!=null&&++y<O;){var q=en(i[y]),Q=a;if(q==="__proto__"||q==="constructor"||q==="prototype")return r;if(y!=T){var Z=$[q];Q=h?h(Z,q,$):t,Q===t&&(Q=Et(Z)?Z:dn(i[y+1])?[]:{})}Gi($,q,Q),$=$[q]}return r}var Hh=ho?function(r,i){return ho.set(r,i),r}:_r,B0=ao?function(r,i){return ao(r,"toString",{configurable:!0,enumerable:!1,value:Ac(i),writable:!0})}:_r;function z0(r){return xo(xi(r))}function Ur(r,i,a){var h=-1,y=r.length;i<0&&(i=-i>y?0:y+i),a=a>y?y:a,a<0&&(a+=y),y=i>a?0:a-i>>>0,i>>>=0;for(var O=V(y);++h<y;)O[h]=r[h+i];return O}function H0(r,i){var a;return Dn(r,function(h,y,O){return a=i(h,y,O),!a}),!!a}function vo(r,i,a){var h=0,y=r==null?h:r.length;if(typeof i=="number"&&i===i&&y<=oe){for(;h<y;){var O=h+y>>>1,T=r[O];T!==null&&!Dr(T)&&(a?T<=i:T<i)?h=O+1:y=O}return y}return rc(r,i,_r,a)}function rc(r,i,a,h){var y=0,O=r==null?0:r.length;if(O===0)return 0;i=a(i);for(var T=i!==i,$=i===null,q=Dr(i),Q=i===t;y<O;){var Z=uo((y+O)/2),ie=a(r[Z]),ue=ie!==t,_e=ie===null,Ee=ie===ie,Be=Dr(ie);if(T)var Se=h||Ee;else Q?Se=Ee&&(h||ue):$?Se=Ee&&ue&&(h||!_e):q?Se=Ee&&ue&&!_e&&(h||!Be):_e||Be?Se=!1:Se=h?ie<=i:ie<i;Se?y=Z+1:O=Z}return Zt(O,be)}function Kh(r,i){for(var a=-1,h=r.length,y=0,O=[];++a<h;){var T=r[a],$=i?i(T):T;if(!a||!Vr($,q)){var q=$;O[y++]=T===0?0:T}}return O}function Vh(r){return typeof r=="number"?r:Dr(r)?J:+r}function Sr(r){if(typeof r=="string")return r;if(Ne(r))return bt(r,Sr)+"";if(Dr(r))return Sh?Sh.call(r):"";var i=r+"";return i=="0"&&1/r==-X?"-0":i}function On(r,i,a){var h=-1,y=Js,O=r.length,T=!0,$=[],q=$;if(a)T=!1,y=Ca;else if(O>=o){var Q=i?null:ey(r);if(Q)return Qs(Q);T=!1,y=zi,q=new Kn}else q=i?[]:$;e:for(;++h<O;){var Z=r[h],ie=i?i(Z):Z;if(Z=a||Z!==0?Z:0,T&&ie===ie){for(var ue=q.length;ue--;)if(q[ue]===ie)continue e;i&&q.push(ie),$.push(Z)}else y(q,ie,a)||(q!==$&&q.push(ie),$.push(Z))}return $}function nc(r,i){return i=In(i,r),r=bf(r,i),r==null||delete r[en($r(i))]}function kh(r,i,a,h){return Qi(r,i,a(kn(r,i)),h)}function mo(r,i,a,h){for(var y=r.length,O=h?y:-1;(h?O--:++O<y)&&i(r[O],O,r););return a?Ur(r,h?0:O,h?O+1:y):Ur(r,h?O+1:0,h?y:O)}function Wh(r,i){var a=r;return a instanceof Ye&&(a=a.value()),Na(i,function(h,y){return y.func.apply(y.thisArg,wn([h],y.args))},a)}function ic(r,i,a){var h=r.length;if(h<2)return h?On(r[0]):[];for(var y=-1,O=V(h);++y<h;)for(var T=r[y],$=-1;++$<h;)$!=y&&(O[y]=Yi(O[y]||T,r[$],i,a));return On(Jt(O,1),i,a)}function Gh(r,i,a){for(var h=-1,y=r.length,O=i.length,T={};++h<y;){var $=h<O?i[h]:t;a(T,r[h],$)}return T}function sc(r){return Rt(r)?r:[]}function oc(r){return typeof r=="function"?r:_r}function In(r,i){return Ne(r)?r:gc(r,i)?[r]:Df(nt(r))}var K0=Ke;function xn(r,i,a){var h=r.length;return a=a===t?h:a,!i&&a>=h?r:Ur(r,i,a)}var Yh=Cg||function(r){return Xe.clearTimeout(r)};function Jh(r,i){if(i)return r.slice();var a=r.length,h=_h?_h(a):new r.constructor(a);return r.copy(h),h}function ac(r){var i=new r.constructor(r.byteLength);return new io(i).set(new io(r)),i}function V0(r,i){var a=i?ac(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}function k0(r){var i=new r.constructor(r.source,Ar.exec(r));return i.lastIndex=r.lastIndex,i}function W0(r){return Wi?ut(Wi.call(r)):{}}function Xh(r,i){var a=i?ac(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}function Qh(r,i){if(r!==i){var a=r!==t,h=r===null,y=r===r,O=Dr(r),T=i!==t,$=i===null,q=i===i,Q=Dr(i);if(!$&&!Q&&!O&&r>i||O&&T&&q&&!$&&!Q||h&&T&&q||!a&&q||!y)return 1;if(!h&&!O&&!Q&&r<i||Q&&a&&y&&!h&&!O||$&&a&&y||!T&&y||!q)return-1}return 0}function G0(r,i,a){for(var h=-1,y=r.criteria,O=i.criteria,T=y.length,$=a.length;++h<T;){var q=Qh(y[h],O[h]);if(q){if(h>=$)return q;var Q=a[h];return q*(Q=="desc"?-1:1)}}return r.index-i.index}function Zh(r,i,a,h){for(var y=-1,O=r.length,T=a.length,$=-1,q=i.length,Q=Vt(O-T,0),Z=V(q+Q),ie=!h;++$<q;)Z[$]=i[$];for(;++y<T;)(ie||y<O)&&(Z[a[y]]=r[y]);for(;Q--;)Z[$++]=r[y++];return Z}function ef(r,i,a,h){for(var y=-1,O=r.length,T=-1,$=a.length,q=-1,Q=i.length,Z=Vt(O-$,0),ie=V(Z+Q),ue=!h;++y<Z;)ie[y]=r[y];for(var _e=y;++q<Q;)ie[_e+q]=i[q];for(;++T<$;)(ue||y<O)&&(ie[_e+a[T]]=r[y++]);return ie}function pr(r,i){var a=-1,h=r.length;for(i||(i=V(h));++a<h;)i[a]=r[a];return i}function Zr(r,i,a,h){var y=!a;a||(a={});for(var O=-1,T=i.length;++O<T;){var $=i[O],q=h?h(a[$],r[$],$,a,r):t;q===t&&(q=r[$]),y?hn(a,$,q):Gi(a,$,q)}return a}function Y0(r,i){return Zr(r,pc(r),i)}function J0(r,i){return Zr(r,pf(r),i)}function bo(r,i){return function(a,h){var y=Ne(a)?tg:v0,O=i?i():{};return y(a,r,me(h,2),O)}}function Si(r){return Ke(function(i,a){var h=-1,y=a.length,O=y>1?a[y-1]:t,T=y>2?a[2]:t;for(O=r.length>3&&typeof O=="function"?(y--,O):t,T&&or(a[0],a[1],T)&&(O=y<3?t:O,y=1),i=ut(i);++h<y;){var $=a[h];$&&r(i,$,h,O)}return i})}function tf(r,i){return function(a,h){if(a==null)return a;if(!gr(a))return r(a,h);for(var y=a.length,O=i?y:-1,T=ut(a);(i?O--:++O<y)&&h(T[O],O,T)!==!1;);return a}}function rf(r){return function(i,a,h){for(var y=-1,O=ut(i),T=h(i),$=T.length;$--;){var q=T[r?$:++y];if(a(O[q],q,O)===!1)break}return i}}function X0(r,i,a){var h=i&M,y=Zi(r);function O(){var T=this&&this!==Xe&&this instanceof O?y:r;return T.apply(h?a:this,arguments)}return O}function nf(r){return function(i){i=nt(i);var a=yi(i)?Hr(i):t,h=a?a[0]:i.charAt(0),y=a?xn(a,1).join(""):i.slice(1);return h[r]()+y}}function Di(r){return function(i){return Na(rl(tl(i).replace(qi,"")),r,"")}}function Zi(r){return function(){var i=arguments;switch(i.length){case 0:return new r;case 1:return new r(i[0]);case 2:return new r(i[0],i[1]);case 3:return new r(i[0],i[1],i[2]);case 4:return new r(i[0],i[1],i[2],i[3]);case 5:return new r(i[0],i[1],i[2],i[3],i[4]);case 6:return new r(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new r(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=Ei(r.prototype),h=r.apply(a,i);return Et(h)?h:a}}function Q0(r,i,a){var h=Zi(r);function y(){for(var O=arguments.length,T=V(O),$=O,q=Oi(y);$--;)T[$]=arguments[$];var Q=O<3&&T[0]!==q&&T[O-1]!==q?[]:En(T,q);if(O-=Q.length,O<a)return uf(r,i,wo,y.placeholder,t,T,Q,t,t,a-O);var Z=this&&this!==Xe&&this instanceof y?h:r;return kt(Z,this,T)}return y}function sf(r){return function(i,a,h){var y=ut(i);if(!gr(i)){var O=me(a,3);i=Wt(i),a=function($){return O(y[$],$,y)}}var T=r(i,a,h);return T>-1?y[O?i[T]:T]:t}}function of(r){return ln(function(i){var a=i.length,h=a,y=Nr.prototype.thru;for(r&&i.reverse();h--;){var O=i[h];if(typeof O!="function")throw new Cr(f);if(y&&!T&&Oo(O)=="wrapper")var T=new Nr([],!0)}for(h=T?h:a;++h<a;){O=i[h];var $=Oo(O),q=$=="wrapper"?lc(O):t;q&&yc(q[0])&&q[1]==(u|E|w|b)&&!q[4].length&&q[9]==1?T=T[Oo(q[0])].apply(T,q[3]):T=O.length==1&&yc(O)?T[$]():T.thru(O)}return function(){var Q=arguments,Z=Q[0];if(T&&Q.length==1&&Ne(Z))return T.plant(Z).value();for(var ie=0,ue=a?i[ie].apply(this,Q):Z;++ie<a;)ue=i[ie].call(this,ue);return ue}})}function wo(r,i,a,h,y,O,T,$,q,Q){var Z=i&u,ie=i&M,ue=i&ee,_e=i&(E|v),Ee=i&K,Be=ue?t:Zi(r);function Se(){for(var We=arguments.length,Qe=V(We),Or=We;Or--;)Qe[Or]=arguments[Or];if(_e)var ar=Oi(Se),Ir=hg(Qe,ar);if(h&&(Qe=Zh(Qe,h,y,_e)),O&&(Qe=ef(Qe,O,T,_e)),We-=Ir,_e&&We<Q){var Ut=En(Qe,ar);return uf(r,i,wo,Se.placeholder,a,Qe,Ut,$,q,Q-We)}var kr=ie?a:this,yn=ue?kr[r]:r;return We=Qe.length,$?Qe=vy(Qe,$):Ee&&We>1&&Qe.reverse(),Z&&q<We&&(Qe.length=q),this&&this!==Xe&&this instanceof Se&&(yn=Be||Zi(yn)),yn.apply(kr,Qe)}return Se}function af(r,i){return function(a,h){return I0(a,r,i(h),{})}}function Eo(r,i){return function(a,h){var y;if(a===t&&h===t)return i;if(a!==t&&(y=a),h!==t){if(y===t)return h;typeof a=="string"||typeof h=="string"?(a=Sr(a),h=Sr(h)):(a=Vh(a),h=Vh(h)),y=r(a,h)}return y}}function cc(r){return ln(function(i){return i=bt(i,Er(me())),Ke(function(a){var h=this;return r(i,function(y){return kt(y,h,a)})})})}function So(r,i){i=i===t?" ":Sr(i);var a=i.length;if(a<2)return a?tc(i,r):i;var h=tc(i,co(r/_i(i)));return yi(i)?xn(Hr(h),0,r).join(""):h.slice(0,r)}function Z0(r,i,a,h){var y=i&M,O=Zi(r);function T(){for(var $=-1,q=arguments.length,Q=-1,Z=h.length,ie=V(Z+q),ue=this&&this!==Xe&&this instanceof T?O:r;++Q<Z;)ie[Q]=h[Q];for(;q--;)ie[Q++]=arguments[++$];return kt(ue,y?a:this,ie)}return T}function cf(r){return function(i,a,h){return h&&typeof h!="number"&&or(i,a,h)&&(a=h=t),i=gn(i),a===t?(a=i,i=0):a=gn(a),h=h===t?i<a?1:-1:gn(h),L0(i,a,h,r)}}function Do(r){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=Fr(i),a=Fr(a)),r(i,a)}}function uf(r,i,a,h,y,O,T,$,q,Q){var Z=i&E,ie=Z?T:t,ue=Z?t:T,_e=Z?O:t,Ee=Z?t:O;i|=Z?w:g,i&=~(Z?g:w),i&p||(i&=~(M|ee));var Be=[r,i,y,_e,ie,Ee,ue,$,q,Q],Se=a.apply(t,Be);return yc(r)&&wf(Se,Be),Se.placeholder=h,Ef(Se,r,i)}function uc(r){var i=Kt[r];return function(a,h){if(a=Fr(a),h=h==null?0:Zt(Le(h),292),h&&wh(a)){var y=(nt(a)+"e").split("e"),O=i(y[0]+"e"+(+y[1]+h));return y=(nt(O)+"e").split("e"),+(y[0]+"e"+(+y[1]-h))}return i(a)}}var ey=bi&&1/Qs(new bi([,-0]))[1]==X?function(r){return new bi(r)}:Cc;function hf(r){return function(i){var a=er(i);return a==Oe?Ma(i):a==Ie?_g(i):ug(i,r(i))}}function fn(r,i,a,h,y,O,T,$){var q=i&ee;if(!q&&typeof r!="function")throw new Cr(f);var Q=h?h.length:0;if(Q||(i&=~(w|g),h=y=t),T=T===t?T:Vt(Le(T),0),$=$===t?$:Le($),Q-=y?y.length:0,i&g){var Z=h,ie=y;h=y=t}var ue=q?t:lc(r),_e=[r,i,a,h,y,Z,ie,O,T,$];if(ue&&gy(_e,ue),r=_e[0],i=_e[1],a=_e[2],h=_e[3],y=_e[4],$=_e[9]=_e[9]===t?q?0:r.length:Vt(_e[9]-Q,0),!$&&i&(E|v)&&(i&=~(E|v)),!i||i==M)var Ee=X0(r,i,a);else i==E||i==v?Ee=Q0(r,i,$):(i==w||i==(M|w))&&!y.length?Ee=Z0(r,i,a,h):Ee=wo.apply(t,_e);var Be=ue?Hh:wf;return Ef(Be(Ee,_e),r,i)}function ff(r,i,a,h){return r===t||Vr(r,mi[a])&&!it.call(h,a)?i:r}function lf(r,i,a,h,y,O){return Et(r)&&Et(i)&&(O.set(i,r),_o(r,i,t,lf,O),O.delete(i)),r}function ty(r){return rs(r)?t:r}function df(r,i,a,h,y,O){var T=a&R,$=r.length,q=i.length;if($!=q&&!(T&&q>$))return!1;var Q=O.get(r),Z=O.get(i);if(Q&&Z)return Q==i&&Z==r;var ie=-1,ue=!0,_e=a&B?new Kn:t;for(O.set(r,i),O.set(i,r);++ie<$;){var Ee=r[ie],Be=i[ie];if(h)var Se=T?h(Be,Ee,ie,i,r,O):h(Ee,Be,ie,r,i,O);if(Se!==t){if(Se)continue;ue=!1;break}if(_e){if(!Ra(i,function(We,Qe){if(!zi(_e,Qe)&&(Ee===We||y(Ee,We,a,h,O)))return _e.push(Qe)})){ue=!1;break}}else if(!(Ee===Be||y(Ee,Be,a,h,O))){ue=!1;break}}return O.delete(r),O.delete(i),ue}function ry(r,i,a,h,y,O,T){switch(a){case Pe:if(r.byteLength!=i.byteLength||r.byteOffset!=i.byteOffset)return!1;r=r.buffer,i=i.buffer;case De:return!(r.byteLength!=i.byteLength||!O(new io(r),new io(i)));case z:case F:case ze:return Vr(+r,+i);case U:return r.name==i.name&&r.message==i.message;case Me:case Re:return r==i+"";case Oe:var $=Ma;case Ie:var q=h&R;if($||($=Qs),r.size!=i.size&&!q)return!1;var Q=T.get(r);if(Q)return Q==i;h|=B,T.set(r,i);var Z=df($(r),$(i),h,y,O,T);return T.delete(r),Z;case Ue:if(Wi)return Wi.call(r)==Wi.call(i)}return!1}function ny(r,i,a,h,y,O){var T=a&R,$=hc(r),q=$.length,Q=hc(i),Z=Q.length;if(q!=Z&&!T)return!1;for(var ie=q;ie--;){var ue=$[ie];if(!(T?ue in i:it.call(i,ue)))return!1}var _e=O.get(r),Ee=O.get(i);if(_e&&Ee)return _e==i&&Ee==r;var Be=!0;O.set(r,i),O.set(i,r);for(var Se=T;++ie<q;){ue=$[ie];var We=r[ue],Qe=i[ue];if(h)var Or=T?h(Qe,We,ue,i,r,O):h(We,Qe,ue,r,i,O);if(!(Or===t?We===Qe||y(We,Qe,a,h,O):Or)){Be=!1;break}Se||(Se=ue=="constructor")}if(Be&&!Se){var ar=r.constructor,Ir=i.constructor;ar!=Ir&&"constructor"in r&&"constructor"in i&&!(typeof ar=="function"&&ar instanceof ar&&typeof Ir=="function"&&Ir instanceof Ir)&&(Be=!1)}return O.delete(r),O.delete(i),Be}function ln(r){return vc(mf(r,t,Af),r+"")}function hc(r){return Nh(r,Wt,pc)}function fc(r){return Nh(r,yr,pf)}var lc=ho?function(r){return ho.get(r)}:Cc;function Oo(r){for(var i=r.name+"",a=wi[i],h=it.call(wi,i)?a.length:0;h--;){var y=a[h],O=y.func;if(O==null||O==r)return y.name}return i}function Oi(r){var i=it.call(S,"placeholder")?S:r;return i.placeholder}function me(){var r=S.iteratee||Pc;return r=r===Pc?$h:r,arguments.length?r(arguments[0],arguments[1]):r}function Io(r,i){var a=r.__data__;return fy(i)?a[typeof i=="string"?"string":"hash"]:a.map}function dc(r){for(var i=Wt(r),a=i.length;a--;){var h=i[a],y=r[h];i[a]=[h,y,_f(y)]}return i}function Wn(r,i){var a=pg(r,i);return Uh(a)?a:t}function iy(r){var i=it.call(r,zn),a=r[zn];try{r[zn]=t;var h=!0}catch{}var y=ro.call(r);return h&&(i?r[zn]=a:delete r[zn]),y}var pc=Ba?function(r){return r==null?[]:(r=ut(r),bn(Ba(r),function(i){return mh.call(r,i)}))}:Nc,pf=Ba?function(r){for(var i=[];r;)wn(i,pc(r)),r=so(r);return i}:Nc,er=sr;(za&&er(new za(new ArrayBuffer(1)))!=Pe||Ki&&er(new Ki)!=Oe||Ha&&er(Ha.resolve())!=yt||bi&&er(new bi)!=Ie||Vi&&er(new Vi)!=Ae)&&(er=function(r){var i=sr(r),a=i==je?r.constructor:t,h=a?Gn(a):"";if(h)switch(h){case qg:return Pe;case Bg:return Oe;case zg:return yt;case Hg:return Ie;case Kg:return Ae}return i});function sy(r,i,a){for(var h=-1,y=a.length;++h<y;){var O=a[h],T=O.size;switch(O.type){case"drop":r+=T;break;case"dropRight":i-=T;break;case"take":i=Zt(i,r+T);break;case"takeRight":r=Vt(r,i-T);break}}return{start:r,end:i}}function oy(r){var i=r.match(ht);return i?i[1].split(Mt):[]}function gf(r,i,a){i=In(i,r);for(var h=-1,y=i.length,O=!1;++h<y;){var T=en(i[h]);if(!(O=r!=null&&a(r,T)))break;r=r[T]}return O||++h!=y?O:(y=r==null?0:r.length,!!y&&Ro(y)&&dn(T,y)&&(Ne(r)||Yn(r)))}function ay(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&it.call(r,"index")&&(a.index=r.index,a.input=r.input),a}function yf(r){return typeof r.constructor=="function"&&!es(r)?Ei(so(r)):{}}function cy(r,i,a){var h=r.constructor;switch(i){case De:return ac(r);case z:case F:return new h(+r);case Pe:return V0(r,a);case He:case xe:case ke:case Ge:case et:case tt:case Je:case rr:case lr:return Xh(r,a);case Oe:return new h;case ze:case Re:return new h(r);case Me:return k0(r);case Ie:return new h;case Ue:return W0(r)}}function uy(r,i){var a=i.length;if(!a)return r;var h=a-1;return i[h]=(a>1?"& ":"")+i[h],i=i.join(a>2?", ":" "),r.replace(At,`{
/* [wrapped with `+i+`] */
`)}function hy(r){return Ne(r)||Yn(r)||!!(bh&&r&&r[bh])}function dn(r,i){var a=typeof r;return i=i??k,!!i&&(a=="number"||a!="symbol"&&_a.test(r))&&r>-1&&r%1==0&&r<i}function or(r,i,a){if(!Et(a))return!1;var h=typeof i;return(h=="number"?gr(a)&&dn(i,a.length):h=="string"&&i in a)?Vr(a[i],r):!1}function gc(r,i){if(Ne(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||Dr(r)?!0:Ft.test(r)||!mt.test(r)||i!=null&&r in ut(i)}function fy(r){var i=typeof r;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?r!=="__proto__":r===null}function yc(r){var i=Oo(r),a=S[i];if(typeof a!="function"||!(i in Ye.prototype))return!1;if(r===a)return!0;var h=lc(a);return!!h&&r===h[0]}function ly(r){return!!yh&&yh in r}var dy=eo?pn:Rc;function es(r){var i=r&&r.constructor,a=typeof i=="function"&&i.prototype||mi;return r===a}function _f(r){return r===r&&!Et(r)}function vf(r,i){return function(a){return a==null?!1:a[r]===i&&(i!==t||r in ut(a))}}function py(r){var i=Co(r,function(h){return a.size===_&&a.clear(),h}),a=i.cache;return i}function gy(r,i){var a=r[1],h=i[1],y=a|h,O=y<(M|ee|u),T=h==u&&a==E||h==u&&a==b&&r[7].length<=i[8]||h==(u|b)&&i[7].length<=i[8]&&a==E;if(!(O||T))return r;h&M&&(r[2]=i[2],y|=a&M?0:p);var $=i[3];if($){var q=r[3];r[3]=q?Zh(q,$,i[4]):$,r[4]=q?En(r[3],D):i[4]}return $=i[5],$&&(q=r[5],r[5]=q?ef(q,$,i[6]):$,r[6]=q?En(r[5],D):i[6]),$=i[7],$&&(r[7]=$),h&u&&(r[8]=r[8]==null?i[8]:Zt(r[8],i[8])),r[9]==null&&(r[9]=i[9]),r[0]=i[0],r[1]=y,r}function yy(r){var i=[];if(r!=null)for(var a in ut(r))i.push(a);return i}function _y(r){return ro.call(r)}function mf(r,i,a){return i=Vt(i===t?r.length-1:i,0),function(){for(var h=arguments,y=-1,O=Vt(h.length-i,0),T=V(O);++y<O;)T[y]=h[i+y];y=-1;for(var $=V(i+1);++y<i;)$[y]=h[y];return $[i]=a(T),kt(r,this,$)}}function bf(r,i){return i.length<2?r:kn(r,Ur(i,0,-1))}function vy(r,i){for(var a=r.length,h=Zt(i.length,a),y=pr(r);h--;){var O=i[h];r[h]=dn(O,a)?y[O]:t}return r}function _c(r,i){if(!(i==="constructor"&&typeof r[i]=="function")&&i!="__proto__")return r[i]}var wf=Sf(Hh),ts=Rg||function(r,i){return Xe.setTimeout(r,i)},vc=Sf(B0);function Ef(r,i,a){var h=i+"";return vc(r,uy(h,my(oy(h),a)))}function Sf(r){var i=0,a=0;return function(){var h=jg(),y=de-(h-a);if(a=h,y>0){if(++i>=ce)return arguments[0]}else i=0;return r.apply(t,arguments)}}function xo(r,i){var a=-1,h=r.length,y=h-1;for(i=i===t?h:i;++a<i;){var O=ec(a,y),T=r[O];r[O]=r[a],r[a]=T}return r.length=i,r}var Df=py(function(r){var i=[];return r.charCodeAt(0)===46&&i.push(""),r.replace(jt,function(a,h,y,O){i.push(y?O.replace(fa,"$1"):h||a)}),i});function en(r){if(typeof r=="string"||Dr(r))return r;var i=r+"";return i=="0"&&1/r==-X?"-0":i}function Gn(r){if(r!=null){try{return to.call(r)}catch{}try{return r+""}catch{}}return""}function my(r,i){return Tr(we,function(a){var h="_."+a[0];i&a[1]&&!Js(r,h)&&r.push(h)}),r.sort()}function Of(r){if(r instanceof Ye)return r.clone();var i=new Nr(r.__wrapped__,r.__chain__);return i.__actions__=pr(r.__actions__),i.__index__=r.__index__,i.__values__=r.__values__,i}function by(r,i,a){(a?or(r,i,a):i===t)?i=1:i=Vt(Le(i),0);var h=r==null?0:r.length;if(!h||i<1)return[];for(var y=0,O=0,T=V(co(h/i));y<h;)T[O++]=Ur(r,y,y+=i);return T}function wy(r){for(var i=-1,a=r==null?0:r.length,h=0,y=[];++i<a;){var O=r[i];O&&(y[h++]=O)}return y}function Ey(){var r=arguments.length;if(!r)return[];for(var i=V(r-1),a=arguments[0],h=r;h--;)i[h-1]=arguments[h];return wn(Ne(a)?pr(a):[a],Jt(i,1))}var Sy=Ke(function(r,i){return Rt(r)?Yi(r,Jt(i,1,Rt,!0)):[]}),Dy=Ke(function(r,i){var a=$r(i);return Rt(a)&&(a=t),Rt(r)?Yi(r,Jt(i,1,Rt,!0),me(a,2)):[]}),Oy=Ke(function(r,i){var a=$r(i);return Rt(a)&&(a=t),Rt(r)?Yi(r,Jt(i,1,Rt,!0),t,a):[]});function Iy(r,i,a){var h=r==null?0:r.length;return h?(i=a||i===t?1:Le(i),Ur(r,i<0?0:i,h)):[]}function xy(r,i,a){var h=r==null?0:r.length;return h?(i=a||i===t?1:Le(i),i=h-i,Ur(r,0,i<0?0:i)):[]}function Ay(r,i){return r&&r.length?mo(r,me(i,3),!0,!0):[]}function Py(r,i){return r&&r.length?mo(r,me(i,3),!0):[]}function Ty(r,i,a,h){var y=r==null?0:r.length;return y?(a&&typeof a!="number"&&or(r,i,a)&&(a=0,h=y),E0(r,i,a,h)):[]}function If(r,i,a){var h=r==null?0:r.length;if(!h)return-1;var y=a==null?0:Le(a);return y<0&&(y=Vt(h+y,0)),Xs(r,me(i,3),y)}function xf(r,i,a){var h=r==null?0:r.length;if(!h)return-1;var y=h-1;return a!==t&&(y=Le(a),y=a<0?Vt(h+y,0):Zt(y,h-1)),Xs(r,me(i,3),y,!0)}function Af(r){var i=r==null?0:r.length;return i?Jt(r,1):[]}function Cy(r){var i=r==null?0:r.length;return i?Jt(r,X):[]}function Ny(r,i){var a=r==null?0:r.length;return a?(i=i===t?1:Le(i),Jt(r,i)):[]}function Ry(r){for(var i=-1,a=r==null?0:r.length,h={};++i<a;){var y=r[i];h[y[0]]=y[1]}return h}function Pf(r){return r&&r.length?r[0]:t}function Uy(r,i,a){var h=r==null?0:r.length;if(!h)return-1;var y=a==null?0:Le(a);return y<0&&(y=Vt(h+y,0)),gi(r,i,y)}function $y(r){var i=r==null?0:r.length;return i?Ur(r,0,-1):[]}var Fy=Ke(function(r){var i=bt(r,sc);return i.length&&i[0]===r[0]?Ya(i):[]}),jy=Ke(function(r){var i=$r(r),a=bt(r,sc);return i===$r(a)?i=t:a.pop(),a.length&&a[0]===r[0]?Ya(a,me(i,2)):[]}),Ly=Ke(function(r){var i=$r(r),a=bt(r,sc);return i=typeof i=="function"?i:t,i&&a.pop(),a.length&&a[0]===r[0]?Ya(a,t,i):[]});function My(r,i){return r==null?"":$g.call(r,i)}function $r(r){var i=r==null?0:r.length;return i?r[i-1]:t}function qy(r,i,a){var h=r==null?0:r.length;if(!h)return-1;var y=h;return a!==t&&(y=Le(a),y=y<0?Vt(h+y,0):Zt(y,h-1)),i===i?mg(r,i,y):Xs(r,ch,y,!0)}function By(r,i){return r&&r.length?Mh(r,Le(i)):t}var zy=Ke(Tf);function Tf(r,i){return r&&r.length&&i&&i.length?Za(r,i):r}function Hy(r,i,a){return r&&r.length&&i&&i.length?Za(r,i,me(a,2)):r}function Ky(r,i,a){return r&&r.length&&i&&i.length?Za(r,i,t,a):r}var Vy=ln(function(r,i){var a=r==null?0:r.length,h=Va(r,i);return zh(r,bt(i,function(y){return dn(y,a)?+y:y}).sort(Qh)),h});function ky(r,i){var a=[];if(!(r&&r.length))return a;var h=-1,y=[],O=r.length;for(i=me(i,3);++h<O;){var T=r[h];i(T,h,r)&&(a.push(T),y.push(h))}return zh(r,y),a}function mc(r){return r==null?r:Mg.call(r)}function Wy(r,i,a){var h=r==null?0:r.length;return h?(a&&typeof a!="number"&&or(r,i,a)?(i=0,a=h):(i=i==null?0:Le(i),a=a===t?h:Le(a)),Ur(r,i,a)):[]}function Gy(r,i){return vo(r,i)}function Yy(r,i,a){return rc(r,i,me(a,2))}function Jy(r,i){var a=r==null?0:r.length;if(a){var h=vo(r,i);if(h<a&&Vr(r[h],i))return h}return-1}function Xy(r,i){return vo(r,i,!0)}function Qy(r,i,a){return rc(r,i,me(a,2),!0)}function Zy(r,i){var a=r==null?0:r.length;if(a){var h=vo(r,i,!0)-1;if(Vr(r[h],i))return h}return-1}function e1(r){return r&&r.length?Kh(r):[]}function t1(r,i){return r&&r.length?Kh(r,me(i,2)):[]}function r1(r){var i=r==null?0:r.length;return i?Ur(r,1,i):[]}function n1(r,i,a){return r&&r.length?(i=a||i===t?1:Le(i),Ur(r,0,i<0?0:i)):[]}function i1(r,i,a){var h=r==null?0:r.length;return h?(i=a||i===t?1:Le(i),i=h-i,Ur(r,i<0?0:i,h)):[]}function s1(r,i){return r&&r.length?mo(r,me(i,3),!1,!0):[]}function o1(r,i){return r&&r.length?mo(r,me(i,3)):[]}var a1=Ke(function(r){return On(Jt(r,1,Rt,!0))}),c1=Ke(function(r){var i=$r(r);return Rt(i)&&(i=t),On(Jt(r,1,Rt,!0),me(i,2))}),u1=Ke(function(r){var i=$r(r);return i=typeof i=="function"?i:t,On(Jt(r,1,Rt,!0),t,i)});function h1(r){return r&&r.length?On(r):[]}function f1(r,i){return r&&r.length?On(r,me(i,2)):[]}function l1(r,i){return i=typeof i=="function"?i:t,r&&r.length?On(r,t,i):[]}function bc(r){if(!(r&&r.length))return[];var i=0;return r=bn(r,function(a){if(Rt(a))return i=Vt(a.length,i),!0}),ja(i,function(a){return bt(r,Ua(a))})}function Cf(r,i){if(!(r&&r.length))return[];var a=bc(r);return i==null?a:bt(a,function(h){return kt(i,t,h)})}var d1=Ke(function(r,i){return Rt(r)?Yi(r,i):[]}),p1=Ke(function(r){return ic(bn(r,Rt))}),g1=Ke(function(r){var i=$r(r);return Rt(i)&&(i=t),ic(bn(r,Rt),me(i,2))}),y1=Ke(function(r){var i=$r(r);return i=typeof i=="function"?i:t,ic(bn(r,Rt),t,i)}),_1=Ke(bc);function v1(r,i){return Gh(r||[],i||[],Gi)}function m1(r,i){return Gh(r||[],i||[],Qi)}var b1=Ke(function(r){var i=r.length,a=i>1?r[i-1]:t;return a=typeof a=="function"?(r.pop(),a):t,Cf(r,a)});function Nf(r){var i=S(r);return i.__chain__=!0,i}function w1(r,i){return i(r),r}function Ao(r,i){return i(r)}var E1=ln(function(r){var i=r.length,a=i?r[0]:0,h=this.__wrapped__,y=function(O){return Va(O,r)};return i>1||this.__actions__.length||!(h instanceof Ye)||!dn(a)?this.thru(y):(h=h.slice(a,+a+(i?1:0)),h.__actions__.push({func:Ao,args:[y],thisArg:t}),new Nr(h,this.__chain__).thru(function(O){return i&&!O.length&&O.push(t),O}))});function S1(){return Nf(this)}function D1(){return new Nr(this.value(),this.__chain__)}function O1(){this.__values__===t&&(this.__values__=kf(this.value()));var r=this.__index__>=this.__values__.length,i=r?t:this.__values__[this.__index__++];return{done:r,value:i}}function I1(){return this}function x1(r){for(var i,a=this;a instanceof lo;){var h=Of(a);h.__index__=0,h.__values__=t,i?y.__wrapped__=h:i=h;var y=h;a=a.__wrapped__}return y.__wrapped__=r,i}function A1(){var r=this.__wrapped__;if(r instanceof Ye){var i=r;return this.__actions__.length&&(i=new Ye(this)),i=i.reverse(),i.__actions__.push({func:Ao,args:[mc],thisArg:t}),new Nr(i,this.__chain__)}return this.thru(mc)}function P1(){return Wh(this.__wrapped__,this.__actions__)}var T1=bo(function(r,i,a){it.call(r,a)?++r[a]:hn(r,a,1)});function C1(r,i,a){var h=Ne(r)?oh:w0;return a&&or(r,i,a)&&(i=t),h(r,me(i,3))}function N1(r,i){var a=Ne(r)?bn:Th;return a(r,me(i,3))}var R1=sf(If),U1=sf(xf);function $1(r,i){return Jt(Po(r,i),1)}function F1(r,i){return Jt(Po(r,i),X)}function j1(r,i,a){return a=a===t?1:Le(a),Jt(Po(r,i),a)}function Rf(r,i){var a=Ne(r)?Tr:Dn;return a(r,me(i,3))}function Uf(r,i){var a=Ne(r)?rg:Ph;return a(r,me(i,3))}var L1=bo(function(r,i,a){it.call(r,a)?r[a].push(i):hn(r,a,[i])});function M1(r,i,a,h){r=gr(r)?r:xi(r),a=a&&!h?Le(a):0;var y=r.length;return a<0&&(a=Vt(y+a,0)),Uo(r)?a<=y&&r.indexOf(i,a)>-1:!!y&&gi(r,i,a)>-1}var q1=Ke(function(r,i,a){var h=-1,y=typeof i=="function",O=gr(r)?V(r.length):[];return Dn(r,function(T){O[++h]=y?kt(i,T,a):Ji(T,i,a)}),O}),B1=bo(function(r,i,a){hn(r,a,i)});function Po(r,i){var a=Ne(r)?bt:Fh;return a(r,me(i,3))}function z1(r,i,a,h){return r==null?[]:(Ne(i)||(i=i==null?[]:[i]),a=h?t:a,Ne(a)||(a=a==null?[]:[a]),qh(r,i,a))}var H1=bo(function(r,i,a){r[a?0:1].push(i)},function(){return[[],[]]});function K1(r,i,a){var h=Ne(r)?Na:hh,y=arguments.length<3;return h(r,me(i,4),a,y,Dn)}function V1(r,i,a){var h=Ne(r)?ng:hh,y=arguments.length<3;return h(r,me(i,4),a,y,Ph)}function k1(r,i){var a=Ne(r)?bn:Th;return a(r,No(me(i,3)))}function W1(r){var i=Ne(r)?Oh:M0;return i(r)}function G1(r,i,a){(a?or(r,i,a):i===t)?i=1:i=Le(i);var h=Ne(r)?y0:q0;return h(r,i)}function Y1(r){var i=Ne(r)?_0:z0;return i(r)}function J1(r){if(r==null)return 0;if(gr(r))return Uo(r)?_i(r):r.length;var i=er(r);return i==Oe||i==Ie?r.size:Xa(r).length}function X1(r,i,a){var h=Ne(r)?Ra:H0;return a&&or(r,i,a)&&(i=t),h(r,me(i,3))}var Q1=Ke(function(r,i){if(r==null)return[];var a=i.length;return a>1&&or(r,i[0],i[1])?i=[]:a>2&&or(i[0],i[1],i[2])&&(i=[i[0]]),qh(r,Jt(i,1),[])}),To=Ng||function(){return Xe.Date.now()};function Z1(r,i){if(typeof i!="function")throw new Cr(f);return r=Le(r),function(){if(--r<1)return i.apply(this,arguments)}}function $f(r,i,a){return i=a?t:i,i=r&&i==null?r.length:i,fn(r,u,t,t,t,t,i)}function Ff(r,i){var a;if(typeof i!="function")throw new Cr(f);return r=Le(r),function(){return--r>0&&(a=i.apply(this,arguments)),r<=1&&(i=t),a}}var wc=Ke(function(r,i,a){var h=M;if(a.length){var y=En(a,Oi(wc));h|=w}return fn(r,h,i,a,y)}),jf=Ke(function(r,i,a){var h=M|ee;if(a.length){var y=En(a,Oi(jf));h|=w}return fn(i,h,r,a,y)});function Lf(r,i,a){i=a?t:i;var h=fn(r,E,t,t,t,t,t,i);return h.placeholder=Lf.placeholder,h}function Mf(r,i,a){i=a?t:i;var h=fn(r,v,t,t,t,t,t,i);return h.placeholder=Mf.placeholder,h}function qf(r,i,a){var h,y,O,T,$,q,Q=0,Z=!1,ie=!1,ue=!0;if(typeof r!="function")throw new Cr(f);i=Fr(i)||0,Et(a)&&(Z=!!a.leading,ie="maxWait"in a,O=ie?Vt(Fr(a.maxWait)||0,i):O,ue="trailing"in a?!!a.trailing:ue);function _e(Ut){var kr=h,yn=y;return h=y=t,Q=Ut,T=r.apply(yn,kr),T}function Ee(Ut){return Q=Ut,$=ts(We,i),Z?_e(Ut):T}function Be(Ut){var kr=Ut-q,yn=Ut-Q,sl=i-kr;return ie?Zt(sl,O-yn):sl}function Se(Ut){var kr=Ut-q,yn=Ut-Q;return q===t||kr>=i||kr<0||ie&&yn>=O}function We(){var Ut=To();if(Se(Ut))return Qe(Ut);$=ts(We,Be(Ut))}function Qe(Ut){return $=t,ue&&h?_e(Ut):(h=y=t,T)}function Or(){$!==t&&Yh($),Q=0,h=q=y=$=t}function ar(){return $===t?T:Qe(To())}function Ir(){var Ut=To(),kr=Se(Ut);if(h=arguments,y=this,q=Ut,kr){if($===t)return Ee(q);if(ie)return Yh($),$=ts(We,i),_e(q)}return $===t&&($=ts(We,i)),T}return Ir.cancel=Or,Ir.flush=ar,Ir}var e_=Ke(function(r,i){return Ah(r,1,i)}),t_=Ke(function(r,i,a){return Ah(r,Fr(i)||0,a)});function r_(r){return fn(r,K)}function Co(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new Cr(f);var a=function(){var h=arguments,y=i?i.apply(this,h):h[0],O=a.cache;if(O.has(y))return O.get(y);var T=r.apply(this,h);return a.cache=O.set(y,T)||O,T};return a.cache=new(Co.Cache||un),a}Co.Cache=un;function No(r){if(typeof r!="function")throw new Cr(f);return function(){var i=arguments;switch(i.length){case 0:return!r.call(this);case 1:return!r.call(this,i[0]);case 2:return!r.call(this,i[0],i[1]);case 3:return!r.call(this,i[0],i[1],i[2])}return!r.apply(this,i)}}function n_(r){return Ff(2,r)}var i_=K0(function(r,i){i=i.length==1&&Ne(i[0])?bt(i[0],Er(me())):bt(Jt(i,1),Er(me()));var a=i.length;return Ke(function(h){for(var y=-1,O=Zt(h.length,a);++y<O;)h[y]=i[y].call(this,h[y]);return kt(r,this,h)})}),Ec=Ke(function(r,i){var a=En(i,Oi(Ec));return fn(r,w,t,i,a)}),Bf=Ke(function(r,i){var a=En(i,Oi(Bf));return fn(r,g,t,i,a)}),s_=ln(function(r,i){return fn(r,b,t,t,t,i)});function o_(r,i){if(typeof r!="function")throw new Cr(f);return i=i===t?i:Le(i),Ke(r,i)}function a_(r,i){if(typeof r!="function")throw new Cr(f);return i=i==null?0:Vt(Le(i),0),Ke(function(a){var h=a[i],y=xn(a,0,i);return h&&wn(y,h),kt(r,this,y)})}function c_(r,i,a){var h=!0,y=!0;if(typeof r!="function")throw new Cr(f);return Et(a)&&(h="leading"in a?!!a.leading:h,y="trailing"in a?!!a.trailing:y),qf(r,i,{leading:h,maxWait:i,trailing:y})}function u_(r){return $f(r,1)}function h_(r,i){return Ec(oc(i),r)}function f_(){if(!arguments.length)return[];var r=arguments[0];return Ne(r)?r:[r]}function l_(r){return Rr(r,C)}function d_(r,i){return i=typeof i=="function"?i:t,Rr(r,C,i)}function p_(r){return Rr(r,A|C)}function g_(r,i){return i=typeof i=="function"?i:t,Rr(r,A|C,i)}function y_(r,i){return i==null||xh(r,i,Wt(i))}function Vr(r,i){return r===i||r!==r&&i!==i}var __=Do(Ga),v_=Do(function(r,i){return r>=i}),Yn=Rh(function(){return arguments}())?Rh:function(r){return Pt(r)&&it.call(r,"callee")&&!mh.call(r,"callee")},Ne=V.isArray,m_=ir?Er(ir):x0;function gr(r){return r!=null&&Ro(r.length)&&!pn(r)}function Rt(r){return Pt(r)&&gr(r)}function b_(r){return r===!0||r===!1||Pt(r)&&sr(r)==z}var An=Ug||Rc,w_=zr?Er(zr):A0;function E_(r){return Pt(r)&&r.nodeType===1&&!rs(r)}function S_(r){if(r==null)return!0;if(gr(r)&&(Ne(r)||typeof r=="string"||typeof r.splice=="function"||An(r)||Ii(r)||Yn(r)))return!r.length;var i=er(r);if(i==Oe||i==Ie)return!r.size;if(es(r))return!Xa(r).length;for(var a in r)if(it.call(r,a))return!1;return!0}function D_(r,i){return Xi(r,i)}function O_(r,i,a){a=typeof a=="function"?a:t;var h=a?a(r,i):t;return h===t?Xi(r,i,t,a):!!h}function Sc(r){if(!Pt(r))return!1;var i=sr(r);return i==U||i==d||typeof r.message=="string"&&typeof r.name=="string"&&!rs(r)}function I_(r){return typeof r=="number"&&wh(r)}function pn(r){if(!Et(r))return!1;var i=sr(r);return i==ae||i==le||i==H||i==_t}function zf(r){return typeof r=="number"&&r==Le(r)}function Ro(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=k}function Et(r){var i=typeof r;return r!=null&&(i=="object"||i=="function")}function Pt(r){return r!=null&&typeof r=="object"}var Hf=Pr?Er(Pr):T0;function x_(r,i){return r===i||Ja(r,i,dc(i))}function A_(r,i,a){return a=typeof a=="function"?a:t,Ja(r,i,dc(i),a)}function P_(r){return Kf(r)&&r!=+r}function T_(r){if(dy(r))throw new Te(c);return Uh(r)}function C_(r){return r===null}function N_(r){return r==null}function Kf(r){return typeof r=="number"||Pt(r)&&sr(r)==ze}function rs(r){if(!Pt(r)||sr(r)!=je)return!1;var i=so(r);if(i===null)return!0;var a=it.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&to.call(a)==Ag}var Dc=Xr?Er(Xr):C0;function R_(r){return zf(r)&&r>=-k&&r<=k}var Vf=Bi?Er(Bi):N0;function Uo(r){return typeof r=="string"||!Ne(r)&&Pt(r)&&sr(r)==Re}function Dr(r){return typeof r=="symbol"||Pt(r)&&sr(r)==Ue}var Ii=Bn?Er(Bn):R0;function U_(r){return r===t}function $_(r){return Pt(r)&&er(r)==Ae}function F_(r){return Pt(r)&&sr(r)==$e}var j_=Do(Qa),L_=Do(function(r,i){return r<=i});function kf(r){if(!r)return[];if(gr(r))return Uo(r)?Hr(r):pr(r);if(Hi&&r[Hi])return yg(r[Hi]());var i=er(r),a=i==Oe?Ma:i==Ie?Qs:xi;return a(r)}function gn(r){if(!r)return r===0?r:0;if(r=Fr(r),r===X||r===-X){var i=r<0?-1:1;return i*W}return r===r?r:0}function Le(r){var i=gn(r),a=i%1;return i===i?a?i-a:i:0}function Wf(r){return r?Vn(Le(r),0,ne):0}function Fr(r){if(typeof r=="number")return r;if(Dr(r))return J;if(Et(r)){var i=typeof r.valueOf=="function"?r.valueOf():r;r=Et(i)?i+"":i}if(typeof r!="string")return r===0?r:+r;r=fh(r);var a=pa.test(r);return a||ya.test(r)?Ce(r.slice(2),a?2:8):da.test(r)?J:+r}function Gf(r){return Zr(r,yr(r))}function M_(r){return r?Vn(Le(r),-k,k):r===0?r:0}function nt(r){return r==null?"":Sr(r)}var q_=Si(function(r,i){if(es(i)||gr(i)){Zr(i,Wt(i),r);return}for(var a in i)it.call(i,a)&&Gi(r,a,i[a])}),Yf=Si(function(r,i){Zr(i,yr(i),r)}),$o=Si(function(r,i,a,h){Zr(i,yr(i),r,h)}),B_=Si(function(r,i,a,h){Zr(i,Wt(i),r,h)}),z_=ln(Va);function H_(r,i){var a=Ei(r);return i==null?a:Ih(a,i)}var K_=Ke(function(r,i){r=ut(r);var a=-1,h=i.length,y=h>2?i[2]:t;for(y&&or(i[0],i[1],y)&&(h=1);++a<h;)for(var O=i[a],T=yr(O),$=-1,q=T.length;++$<q;){var Q=T[$],Z=r[Q];(Z===t||Vr(Z,mi[Q])&&!it.call(r,Q))&&(r[Q]=O[Q])}return r}),V_=Ke(function(r){return r.push(t,lf),kt(Jf,t,r)});function k_(r,i){return ah(r,me(i,3),Qr)}function W_(r,i){return ah(r,me(i,3),Wa)}function G_(r,i){return r==null?r:ka(r,me(i,3),yr)}function Y_(r,i){return r==null?r:Ch(r,me(i,3),yr)}function J_(r,i){return r&&Qr(r,me(i,3))}function X_(r,i){return r&&Wa(r,me(i,3))}function Q_(r){return r==null?[]:yo(r,Wt(r))}function Z_(r){return r==null?[]:yo(r,yr(r))}function Oc(r,i,a){var h=r==null?t:kn(r,i);return h===t?a:h}function ev(r,i){return r!=null&&gf(r,i,S0)}function Ic(r,i){return r!=null&&gf(r,i,D0)}var tv=af(function(r,i,a){i!=null&&typeof i.toString!="function"&&(i=ro.call(i)),r[i]=a},Ac(_r)),rv=af(function(r,i,a){i!=null&&typeof i.toString!="function"&&(i=ro.call(i)),it.call(r,i)?r[i].push(a):r[i]=[a]},me),nv=Ke(Ji);function Wt(r){return gr(r)?Dh(r):Xa(r)}function yr(r){return gr(r)?Dh(r,!0):U0(r)}function iv(r,i){var a={};return i=me(i,3),Qr(r,function(h,y,O){hn(a,i(h,y,O),h)}),a}function sv(r,i){var a={};return i=me(i,3),Qr(r,function(h,y,O){hn(a,y,i(h,y,O))}),a}var ov=Si(function(r,i,a){_o(r,i,a)}),Jf=Si(function(r,i,a,h){_o(r,i,a,h)}),av=ln(function(r,i){var a={};if(r==null)return a;var h=!1;i=bt(i,function(O){return O=In(O,r),h||(h=O.length>1),O}),Zr(r,fc(r),a),h&&(a=Rr(a,A|P|C,ty));for(var y=i.length;y--;)nc(a,i[y]);return a});function cv(r,i){return Xf(r,No(me(i)))}var uv=ln(function(r,i){return r==null?{}:F0(r,i)});function Xf(r,i){if(r==null)return{};var a=bt(fc(r),function(h){return[h]});return i=me(i),Bh(r,a,function(h,y){return i(h,y[0])})}function hv(r,i,a){i=In(i,r);var h=-1,y=i.length;for(y||(y=1,r=t);++h<y;){var O=r==null?t:r[en(i[h])];O===t&&(h=y,O=a),r=pn(O)?O.call(r):O}return r}function fv(r,i,a){return r==null?r:Qi(r,i,a)}function lv(r,i,a,h){return h=typeof h=="function"?h:t,r==null?r:Qi(r,i,a,h)}var Qf=hf(Wt),Zf=hf(yr);function dv(r,i,a){var h=Ne(r),y=h||An(r)||Ii(r);if(i=me(i,4),a==null){var O=r&&r.constructor;y?a=h?new O:[]:Et(r)?a=pn(O)?Ei(so(r)):{}:a={}}return(y?Tr:Qr)(r,function(T,$,q){return i(a,T,$,q)}),a}function pv(r,i){return r==null?!0:nc(r,i)}function gv(r,i,a){return r==null?r:kh(r,i,oc(a))}function yv(r,i,a,h){return h=typeof h=="function"?h:t,r==null?r:kh(r,i,oc(a),h)}function xi(r){return r==null?[]:La(r,Wt(r))}function _v(r){return r==null?[]:La(r,yr(r))}function vv(r,i,a){return a===t&&(a=i,i=t),a!==t&&(a=Fr(a),a=a===a?a:0),i!==t&&(i=Fr(i),i=i===i?i:0),Vn(Fr(r),i,a)}function mv(r,i,a){return i=gn(i),a===t?(a=i,i=0):a=gn(a),r=Fr(r),O0(r,i,a)}function bv(r,i,a){if(a&&typeof a!="boolean"&&or(r,i,a)&&(i=a=t),a===t&&(typeof i=="boolean"?(a=i,i=t):typeof r=="boolean"&&(a=r,r=t)),r===t&&i===t?(r=0,i=1):(r=gn(r),i===t?(i=r,r=0):i=gn(i)),r>i){var h=r;r=i,i=h}if(a||r%1||i%1){var y=Eh();return Zt(r+y*(i-r+at("1e-"+((y+"").length-1))),i)}return ec(r,i)}var wv=Di(function(r,i,a){return i=i.toLowerCase(),r+(a?el(i):i)});function el(r){return xc(nt(r).toLowerCase())}function tl(r){return r=nt(r),r&&r.replace(on,fg).replace(Pa,"")}function Ev(r,i,a){r=nt(r),i=Sr(i);var h=r.length;a=a===t?h:Vn(Le(a),0,h);var y=a;return a-=i.length,a>=0&&r.slice(a,y)==i}function Sv(r){return r=nt(r),r&&vt.test(r)?r.replace(Fn,lg):r}function Dv(r){return r=nt(r),r&&Lt.test(r)?r.replace(It,"\\$&"):r}var Ov=Di(function(r,i,a){return r+(a?"-":"")+i.toLowerCase()}),Iv=Di(function(r,i,a){return r+(a?" ":"")+i.toLowerCase()}),xv=nf("toLowerCase");function Av(r,i,a){r=nt(r),i=Le(i);var h=i?_i(r):0;if(!i||h>=i)return r;var y=(i-h)/2;return So(uo(y),a)+r+So(co(y),a)}function Pv(r,i,a){r=nt(r),i=Le(i);var h=i?_i(r):0;return i&&h<i?r+So(i-h,a):r}function Tv(r,i,a){r=nt(r),i=Le(i);var h=i?_i(r):0;return i&&h<i?So(i-h,a)+r:r}function Cv(r,i,a){return a||i==null?i=0:i&&(i=+i),Lg(nt(r).replace(xt,""),i||0)}function Nv(r,i,a){return(a?or(r,i,a):i===t)?i=1:i=Le(i),tc(nt(r),i)}function Rv(){var r=arguments,i=nt(r[0]);return r.length<3?i:i.replace(r[1],r[2])}var Uv=Di(function(r,i,a){return r+(a?"_":"")+i.toLowerCase()});function $v(r,i,a){return a&&typeof a!="number"&&or(r,i,a)&&(i=a=t),a=a===t?ne:a>>>0,a?(r=nt(r),r&&(typeof i=="string"||i!=null&&!Dc(i))&&(i=Sr(i),!i&&yi(r))?xn(Hr(r),0,a):r.split(i,a)):[]}var Fv=Di(function(r,i,a){return r+(a?" ":"")+xc(i)});function jv(r,i,a){return r=nt(r),a=a==null?0:Vn(Le(a),0,r.length),i=Sr(i),r.slice(a,a+i.length)==i}function Lv(r,i,a){var h=S.templateSettings;a&&or(r,i,a)&&(i=t),r=nt(r),i=$o({},i,h,ff);var y=$o({},i.imports,h.imports,ff),O=Wt(y),T=La(y,O),$,q,Q=0,Z=i.interpolate||ci,ie="__p += '",ue=qa((i.escape||ci).source+"|"+Z.source+"|"+(Z===wt?la:ci).source+"|"+(i.evaluate||ci).source+"|$","g"),_e="//# sourceURL="+(it.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ta+"]")+`
`;r.replace(ue,function(Se,We,Qe,Or,ar,Ir){return Qe||(Qe=Or),ie+=r.slice(Q,Ir).replace(va,dg),We&&($=!0,ie+=`' +
__e(`+We+`) +
'`),ar&&(q=!0,ie+=`';
`+ar+`;
__p += '`),Qe&&(ie+=`' +
((__t = (`+Qe+`)) == null ? '' : __t) +
'`),Q=Ir+Se.length,Se}),ie+=`';
`;var Ee=it.call(i,"variable")&&i.variable;if(!Ee)ie=`with (obj) {
`+ie+`
}
`;else if(ha.test(Ee))throw new Te(l);ie=(q?ie.replace(Yr,""):ie).replace(nr,"$1").replace(sn,"$1;"),ie="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($?", __e = _.escape":"")+(q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ie+`return __p
}`;var Be=nl(function(){return rt(O,_e+"return "+ie).apply(t,T)});if(Be.source=ie,Sc(Be))throw Be;return Be}function Mv(r){return nt(r).toLowerCase()}function qv(r){return nt(r).toUpperCase()}function Bv(r,i,a){if(r=nt(r),r&&(a||i===t))return fh(r);if(!r||!(i=Sr(i)))return r;var h=Hr(r),y=Hr(i),O=lh(h,y),T=dh(h,y)+1;return xn(h,O,T).join("")}function zv(r,i,a){if(r=nt(r),r&&(a||i===t))return r.slice(0,gh(r)+1);if(!r||!(i=Sr(i)))return r;var h=Hr(r),y=dh(h,Hr(i))+1;return xn(h,0,y).join("")}function Hv(r,i,a){if(r=nt(r),r&&(a||i===t))return r.replace(xt,"");if(!r||!(i=Sr(i)))return r;var h=Hr(r),y=lh(h,Hr(i));return xn(h,y).join("")}function Kv(r,i){var a=G,h=se;if(Et(i)){var y="separator"in i?i.separator:y;a="length"in i?Le(i.length):a,h="omission"in i?Sr(i.omission):h}r=nt(r);var O=r.length;if(yi(r)){var T=Hr(r);O=T.length}if(a>=O)return r;var $=a-_i(h);if($<1)return h;var q=T?xn(T,0,$).join(""):r.slice(0,$);if(y===t)return q+h;if(T&&($+=q.length-$),Dc(y)){if(r.slice($).search(y)){var Q,Z=q;for(y.global||(y=qa(y.source,nt(Ar.exec(y))+"g")),y.lastIndex=0;Q=y.exec(Z);)var ie=Q.index;q=q.slice(0,ie===t?$:ie)}}else if(r.indexOf(Sr(y),$)!=$){var ue=q.lastIndexOf(y);ue>-1&&(q=q.slice(0,ue))}return q+h}function Vv(r){return r=nt(r),r&&St.test(r)?r.replace(vn,bg):r}var kv=Di(function(r,i,a){return r+(a?" ":"")+i.toUpperCase()}),xc=nf("toUpperCase");function rl(r,i,a){return r=nt(r),i=a?t:i,i===t?gg(r)?Sg(r):og(r):r.match(i)||[]}var nl=Ke(function(r,i){try{return kt(r,t,i)}catch(a){return Sc(a)?a:new Te(a)}}),Wv=ln(function(r,i){return Tr(i,function(a){a=en(a),hn(r,a,wc(r[a],r))}),r});function Gv(r){var i=r==null?0:r.length,a=me();return r=i?bt(r,function(h){if(typeof h[1]!="function")throw new Cr(f);return[a(h[0]),h[1]]}):[],Ke(function(h){for(var y=-1;++y<i;){var O=r[y];if(kt(O[0],this,h))return kt(O[1],this,h)}})}function Yv(r){return b0(Rr(r,A))}function Ac(r){return function(){return r}}function Jv(r,i){return r==null||r!==r?i:r}var Xv=of(),Qv=of(!0);function _r(r){return r}function Pc(r){return $h(typeof r=="function"?r:Rr(r,A))}function Zv(r){return jh(Rr(r,A))}function em(r,i){return Lh(r,Rr(i,A))}var tm=Ke(function(r,i){return function(a){return Ji(a,r,i)}}),rm=Ke(function(r,i){return function(a){return Ji(r,a,i)}});function Tc(r,i,a){var h=Wt(i),y=yo(i,h);a==null&&!(Et(i)&&(y.length||!h.length))&&(a=i,i=r,r=this,y=yo(i,Wt(i)));var O=!(Et(a)&&"chain"in a)||!!a.chain,T=pn(r);return Tr(y,function($){var q=i[$];r[$]=q,T&&(r.prototype[$]=function(){var Q=this.__chain__;if(O||Q){var Z=r(this.__wrapped__),ie=Z.__actions__=pr(this.__actions__);return ie.push({func:q,args:arguments,thisArg:r}),Z.__chain__=Q,Z}return q.apply(r,wn([this.value()],arguments))})}),r}function nm(){return Xe._===this&&(Xe._=Pg),this}function Cc(){}function im(r){return r=Le(r),Ke(function(i){return Mh(i,r)})}var sm=cc(bt),om=cc(oh),am=cc(Ra);function il(r){return gc(r)?Ua(en(r)):j0(r)}function cm(r){return function(i){return r==null?t:kn(r,i)}}var um=cf(),hm=cf(!0);function Nc(){return[]}function Rc(){return!1}function fm(){return{}}function lm(){return""}function dm(){return!0}function pm(r,i){if(r=Le(r),r<1||r>k)return[];var a=ne,h=Zt(r,ne);i=me(i),r-=ne;for(var y=ja(h,i);++a<r;)i(a);return y}function gm(r){return Ne(r)?bt(r,en):Dr(r)?[r]:pr(Df(nt(r)))}function ym(r){var i=++xg;return nt(r)+i}var _m=Eo(function(r,i){return r+i},0),vm=uc("ceil"),mm=Eo(function(r,i){return r/i},1),bm=uc("floor");function wm(r){return r&&r.length?go(r,_r,Ga):t}function Em(r,i){return r&&r.length?go(r,me(i,2),Ga):t}function Sm(r){return uh(r,_r)}function Dm(r,i){return uh(r,me(i,2))}function Om(r){return r&&r.length?go(r,_r,Qa):t}function Im(r,i){return r&&r.length?go(r,me(i,2),Qa):t}var xm=Eo(function(r,i){return r*i},1),Am=uc("round"),Pm=Eo(function(r,i){return r-i},0);function Tm(r){return r&&r.length?Fa(r,_r):0}function Cm(r,i){return r&&r.length?Fa(r,me(i,2)):0}return S.after=Z1,S.ary=$f,S.assign=q_,S.assignIn=Yf,S.assignInWith=$o,S.assignWith=B_,S.at=z_,S.before=Ff,S.bind=wc,S.bindAll=Wv,S.bindKey=jf,S.castArray=f_,S.chain=Nf,S.chunk=by,S.compact=wy,S.concat=Ey,S.cond=Gv,S.conforms=Yv,S.constant=Ac,S.countBy=T1,S.create=H_,S.curry=Lf,S.curryRight=Mf,S.debounce=qf,S.defaults=K_,S.defaultsDeep=V_,S.defer=e_,S.delay=t_,S.difference=Sy,S.differenceBy=Dy,S.differenceWith=Oy,S.drop=Iy,S.dropRight=xy,S.dropRightWhile=Ay,S.dropWhile=Py,S.fill=Ty,S.filter=N1,S.flatMap=$1,S.flatMapDeep=F1,S.flatMapDepth=j1,S.flatten=Af,S.flattenDeep=Cy,S.flattenDepth=Ny,S.flip=r_,S.flow=Xv,S.flowRight=Qv,S.fromPairs=Ry,S.functions=Q_,S.functionsIn=Z_,S.groupBy=L1,S.initial=$y,S.intersection=Fy,S.intersectionBy=jy,S.intersectionWith=Ly,S.invert=tv,S.invertBy=rv,S.invokeMap=q1,S.iteratee=Pc,S.keyBy=B1,S.keys=Wt,S.keysIn=yr,S.map=Po,S.mapKeys=iv,S.mapValues=sv,S.matches=Zv,S.matchesProperty=em,S.memoize=Co,S.merge=ov,S.mergeWith=Jf,S.method=tm,S.methodOf=rm,S.mixin=Tc,S.negate=No,S.nthArg=im,S.omit=av,S.omitBy=cv,S.once=n_,S.orderBy=z1,S.over=sm,S.overArgs=i_,S.overEvery=om,S.overSome=am,S.partial=Ec,S.partialRight=Bf,S.partition=H1,S.pick=uv,S.pickBy=Xf,S.property=il,S.propertyOf=cm,S.pull=zy,S.pullAll=Tf,S.pullAllBy=Hy,S.pullAllWith=Ky,S.pullAt=Vy,S.range=um,S.rangeRight=hm,S.rearg=s_,S.reject=k1,S.remove=ky,S.rest=o_,S.reverse=mc,S.sampleSize=G1,S.set=fv,S.setWith=lv,S.shuffle=Y1,S.slice=Wy,S.sortBy=Q1,S.sortedUniq=e1,S.sortedUniqBy=t1,S.split=$v,S.spread=a_,S.tail=r1,S.take=n1,S.takeRight=i1,S.takeRightWhile=s1,S.takeWhile=o1,S.tap=w1,S.throttle=c_,S.thru=Ao,S.toArray=kf,S.toPairs=Qf,S.toPairsIn=Zf,S.toPath=gm,S.toPlainObject=Gf,S.transform=dv,S.unary=u_,S.union=a1,S.unionBy=c1,S.unionWith=u1,S.uniq=h1,S.uniqBy=f1,S.uniqWith=l1,S.unset=pv,S.unzip=bc,S.unzipWith=Cf,S.update=gv,S.updateWith=yv,S.values=xi,S.valuesIn=_v,S.without=d1,S.words=rl,S.wrap=h_,S.xor=p1,S.xorBy=g1,S.xorWith=y1,S.zip=_1,S.zipObject=v1,S.zipObjectDeep=m1,S.zipWith=b1,S.entries=Qf,S.entriesIn=Zf,S.extend=Yf,S.extendWith=$o,Tc(S,S),S.add=_m,S.attempt=nl,S.camelCase=wv,S.capitalize=el,S.ceil=vm,S.clamp=vv,S.clone=l_,S.cloneDeep=p_,S.cloneDeepWith=g_,S.cloneWith=d_,S.conformsTo=y_,S.deburr=tl,S.defaultTo=Jv,S.divide=mm,S.endsWith=Ev,S.eq=Vr,S.escape=Sv,S.escapeRegExp=Dv,S.every=C1,S.find=R1,S.findIndex=If,S.findKey=k_,S.findLast=U1,S.findLastIndex=xf,S.findLastKey=W_,S.floor=bm,S.forEach=Rf,S.forEachRight=Uf,S.forIn=G_,S.forInRight=Y_,S.forOwn=J_,S.forOwnRight=X_,S.get=Oc,S.gt=__,S.gte=v_,S.has=ev,S.hasIn=Ic,S.head=Pf,S.identity=_r,S.includes=M1,S.indexOf=Uy,S.inRange=mv,S.invoke=nv,S.isArguments=Yn,S.isArray=Ne,S.isArrayBuffer=m_,S.isArrayLike=gr,S.isArrayLikeObject=Rt,S.isBoolean=b_,S.isBuffer=An,S.isDate=w_,S.isElement=E_,S.isEmpty=S_,S.isEqual=D_,S.isEqualWith=O_,S.isError=Sc,S.isFinite=I_,S.isFunction=pn,S.isInteger=zf,S.isLength=Ro,S.isMap=Hf,S.isMatch=x_,S.isMatchWith=A_,S.isNaN=P_,S.isNative=T_,S.isNil=N_,S.isNull=C_,S.isNumber=Kf,S.isObject=Et,S.isObjectLike=Pt,S.isPlainObject=rs,S.isRegExp=Dc,S.isSafeInteger=R_,S.isSet=Vf,S.isString=Uo,S.isSymbol=Dr,S.isTypedArray=Ii,S.isUndefined=U_,S.isWeakMap=$_,S.isWeakSet=F_,S.join=My,S.kebabCase=Ov,S.last=$r,S.lastIndexOf=qy,S.lowerCase=Iv,S.lowerFirst=xv,S.lt=j_,S.lte=L_,S.max=wm,S.maxBy=Em,S.mean=Sm,S.meanBy=Dm,S.min=Om,S.minBy=Im,S.stubArray=Nc,S.stubFalse=Rc,S.stubObject=fm,S.stubString=lm,S.stubTrue=dm,S.multiply=xm,S.nth=By,S.noConflict=nm,S.noop=Cc,S.now=To,S.pad=Av,S.padEnd=Pv,S.padStart=Tv,S.parseInt=Cv,S.random=bv,S.reduce=K1,S.reduceRight=V1,S.repeat=Nv,S.replace=Rv,S.result=hv,S.round=Am,S.runInContext=L,S.sample=W1,S.size=J1,S.snakeCase=Uv,S.some=X1,S.sortedIndex=Gy,S.sortedIndexBy=Yy,S.sortedIndexOf=Jy,S.sortedLastIndex=Xy,S.sortedLastIndexBy=Qy,S.sortedLastIndexOf=Zy,S.startCase=Fv,S.startsWith=jv,S.subtract=Pm,S.sum=Tm,S.sumBy=Cm,S.template=Lv,S.times=pm,S.toFinite=gn,S.toInteger=Le,S.toLength=Wf,S.toLower=Mv,S.toNumber=Fr,S.toSafeInteger=M_,S.toString=nt,S.toUpper=qv,S.trim=Bv,S.trimEnd=zv,S.trimStart=Hv,S.truncate=Kv,S.unescape=Vv,S.uniqueId=ym,S.upperCase=kv,S.upperFirst=xc,S.each=Rf,S.eachRight=Uf,S.first=Pf,Tc(S,function(){var r={};return Qr(S,function(i,a){it.call(S.prototype,a)||(r[a]=i)}),r}(),{chain:!1}),S.VERSION=s,Tr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){S[r].placeholder=S}),Tr(["drop","take"],function(r,i){Ye.prototype[r]=function(a){a=a===t?1:Vt(Le(a),0);var h=this.__filtered__&&!i?new Ye(this):this.clone();return h.__filtered__?h.__takeCount__=Zt(a,h.__takeCount__):h.__views__.push({size:Zt(a,ne),type:r+(h.__dir__<0?"Right":"")}),h},Ye.prototype[r+"Right"]=function(a){return this.reverse()[r](a).reverse()}}),Tr(["filter","map","takeWhile"],function(r,i){var a=i+1,h=a==I||a==te;Ye.prototype[r]=function(y){var O=this.clone();return O.__iteratees__.push({iteratee:me(y,3),type:a}),O.__filtered__=O.__filtered__||h,O}}),Tr(["head","last"],function(r,i){var a="take"+(i?"Right":"");Ye.prototype[r]=function(){return this[a](1).value()[0]}}),Tr(["initial","tail"],function(r,i){var a="drop"+(i?"":"Right");Ye.prototype[r]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(_r)},Ye.prototype.find=function(r){return this.filter(r).head()},Ye.prototype.findLast=function(r){return this.reverse().find(r)},Ye.prototype.invokeMap=Ke(function(r,i){return typeof r=="function"?new Ye(this):this.map(function(a){return Ji(a,r,i)})}),Ye.prototype.reject=function(r){return this.filter(No(me(r)))},Ye.prototype.slice=function(r,i){r=Le(r);var a=this;return a.__filtered__&&(r>0||i<0)?new Ye(a):(r<0?a=a.takeRight(-r):r&&(a=a.drop(r)),i!==t&&(i=Le(i),a=i<0?a.dropRight(-i):a.take(i-r)),a)},Ye.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Ye.prototype.toArray=function(){return this.take(ne)},Qr(Ye.prototype,function(r,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),h=/^(?:head|last)$/.test(i),y=S[h?"take"+(i=="last"?"Right":""):i],O=h||/^find/.test(i);y&&(S.prototype[i]=function(){var T=this.__wrapped__,$=h?[1]:arguments,q=T instanceof Ye,Q=$[0],Z=q||Ne(T),ie=function(We){var Qe=y.apply(S,wn([We],$));return h&&ue?Qe[0]:Qe};Z&&a&&typeof Q=="function"&&Q.length!=1&&(q=Z=!1);var ue=this.__chain__,_e=!!this.__actions__.length,Ee=O&&!ue,Be=q&&!_e;if(!O&&Z){T=Be?T:new Ye(this);var Se=r.apply(T,$);return Se.__actions__.push({func:Ao,args:[ie],thisArg:t}),new Nr(Se,ue)}return Ee&&Be?r.apply(this,$):(Se=this.thru(ie),Ee?h?Se.value()[0]:Se.value():Se)})}),Tr(["pop","push","shift","sort","splice","unshift"],function(r){var i=Zs[r],a=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",h=/^(?:pop|shift)$/.test(r);S.prototype[r]=function(){var y=arguments;if(h&&!this.__chain__){var O=this.value();return i.apply(Ne(O)?O:[],y)}return this[a](function(T){return i.apply(Ne(T)?T:[],y)})}}),Qr(Ye.prototype,function(r,i){var a=S[i];if(a){var h=a.name+"";it.call(wi,h)||(wi[h]=[]),wi[h].push({name:i,func:a})}}),wi[wo(t,ee).name]=[{name:"wrapper",func:t}],Ye.prototype.clone=Vg,Ye.prototype.reverse=kg,Ye.prototype.value=Wg,S.prototype.at=E1,S.prototype.chain=S1,S.prototype.commit=D1,S.prototype.next=O1,S.prototype.plant=x1,S.prototype.reverse=A1,S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=P1,S.prototype.first=S.prototype.head,Hi&&(S.prototype[Hi]=I1),S},vi=Dg();Nt?((Nt.exports=vi)._=vi,ct._=vi):Xe._=vi}).call(gs)})(Iu,Iu.exports);var iO=Object.defineProperty,sO=Object.defineProperties,oO=Object.getOwnPropertyDescriptors,Nd=Object.getOwnPropertySymbols,aO=Object.prototype.hasOwnProperty,cO=Object.prototype.propertyIsEnumerable,Rd=(n,e,t)=>e in n?iO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,jo=(n,e)=>{for(var t in e||(e={}))aO.call(e,t)&&Rd(n,t,e[t]);if(Nd)for(var t of Nd(e))cO.call(e,t)&&Rd(n,t,e[t]);return n},uO=(n,e)=>sO(n,oO(e));function Mr(n,e,t){let s;const o=xu(n);return e.rpcMap&&(s=e.rpcMap[o]),s||(s=`${nO}?chainId=eip155:${o}&projectId=${t}`),s}function xu(n){return n.includes("eip155")?Number(n.split(":")[1]):Number(n)}function Zp(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function hO(n,e){const t=Object.keys(e.namespaces).filter(o=>o.includes(n));if(!t.length)return[];const s=[];return t.forEach(o=>{const c=e.namespaces[o].accounts;s.push(...c)}),s}function fO(n={},e={}){const t=Ud(n),s=Ud(e);return Iu.exports.merge(t,s)}function Ud(n){var e,t,s,o;const c={};if(!J5(n))return c;for(const[f,l]of Object.entries(n)){const m=nh(f)?[f]:l.chains,_=l.methods||[],D=l.events||[],A=l.rpcMap||{},P=Bo(f);c[P]=uO(jo(jo({},c[P]),l),{chains:Jc(m,(e=c[P])==null?void 0:e.chains),methods:Jc(_,(t=c[P])==null?void 0:t.methods),events:Jc(D,(s=c[P])==null?void 0:s.events),rpcMap:jo(jo({},A),(o=c[P])==null?void 0:o.rpcMap)})}return c}function lO(n){return n.includes(":")?n.split(":")[2]:n}function dO(n){const e={};for(const[t,s]of Object.entries(n)){const o=s.methods||[],c=s.events||[],f=s.accounts||[],l=nh(t)?[t]:s.chains?s.chains:Zp(s.accounts);e[t]={chains:l,methods:o,events:c,accounts:f}}return e}const eg={},$t=n=>eg[n],Xc=(n,e)=>{eg[n]=e};class pO{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||Mr(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Mr(e,this.namespace);return typeof s>"u"?void 0:new Un(new ai(s,$t("disableProviderPing")))}}class gO{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const s=xu(e);if(!this.httpProviders[s]){const o=t||Mr(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,o)}this.chainId=s,this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const s=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Un(new ai(s,$t("disableProviderPing")))}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=xu(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,s;let o=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const c=parseInt(o,16);if(this.isChainApproved(c))this.setDefaultChain(`${c}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:o}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${c}`);else throw new Error(`Failed to switch to chain 'eip155:${c}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class yO{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Mr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Un(new ai(s,$t("disableProviderPing")))}}class _O{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Mr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Un(new ai(s,$t("disableProviderPing")))}}class vO{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const s=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||this.getCardanoRPCUrl(e);return typeof s>"u"?void 0:new Un(new ai(s,$t("disableProviderPing")))}}class mO{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Mr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Un(new ai(s,$t("disableProviderPing")))}}class bO{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Mr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Un(new ai(s,$t("disableProviderPing")))}}var wO=Object.defineProperty,EO=Object.defineProperties,SO=Object.getOwnPropertyDescriptors,$d=Object.getOwnPropertySymbols,DO=Object.prototype.hasOwnProperty,OO=Object.prototype.propertyIsEnumerable,Fd=(n,e,t)=>e in n?wO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Lo=(n,e)=>{for(var t in e||(e={}))DO.call(e,t)&&Fd(n,t,e[t]);if($d)for(var t of $d(e))OO.call(e,t)&&Fd(n,t,e[t]);return n},Qc=(n,e)=>EO(n,SO(e));class ih{constructor(e){this.events=new Tu,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Td})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new ih(e);return await t.initialize(),t}async request(e,t){const[s,o]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Lo({},e),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(e,t,s){this.request(e,s).then(o=>t(null,o)).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Od("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(c=>{this.session=c,this.namespaces||(this.namespaces=dO(c.namespaces),this.persist("namespaces",this.namespaces))}).catch(c=>{if(c.message!==Xp)throw c;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[s,o]=this.validateChain(e);this.getProvider(s).setDefaultChain(o,t)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Id(t)){for(const s of t)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await F5.init({logger:this.providerOpts.logger||Td,relayUrl:this.providerOpts.relayUrl||eO,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Bo(t)))];Xc("client",this.client),Xc("events",this.events),Xc("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const s=hO(t,this.session),o=Zp(s),c=fO(this.namespaces,this.optionalNamespaces),f=Qc(Lo({},c[t]),{accounts:s,chains:o});switch(t){case"eip155":this.rpcProviders[t]=new gO({namespace:f});break;case"solana":this.rpcProviders[t]=new yO({namespace:f});break;case"cosmos":this.rpcProviders[t]=new _O({namespace:f});break;case"polkadot":this.rpcProviders[t]=new pO({namespace:f});break;case"cip34":this.rpcProviders[t]=new vO({namespace:f});break;case"elrond":this.rpcProviders[t]=new mO({namespace:f});break;case"multiversx":this.rpcProviders[t]=new bO({namespace:f});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:s}=t;if(s.name==="accountsChanged"){const o=s.data;o&&Id(o)&&this.events.emit("accountsChanged",o.map(lO))}else s.name==="chainChanged"?this.onChainChanged(t.chainId):this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var s;const{namespaces:o}=t,c=(s=this.client)==null?void 0:s.session.get(e);this.session=Qc(Lo({},c),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Qc(Lo({},Od("USER_DISCONNECTED")),{data:e.topic}))}),this.on($n.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:s,sessionProperties:o}=e;t&&Object.keys(t).length&&(this.namespaces=t),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=o,this.persist("namespaces",t),this.persist("optionalNamespaces",s)}validateChain(e){const[t,s]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,s];if(t&&!Object.keys(this.namespaces||{}).map(f=>Bo(f)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&s)return[t,s];const o=Bo(Object.keys(this.namespaces)[0]),c=this.rpcProviders[o].getDefaultChain();return[o,c]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var s;if(!this.namespaces)return;const[o,c]=this.validateChain(e);t||this.getProvider(o).setDefaultChain(c),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${c}`]).defaultChain=c,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",c)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${Cd}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${Cd}/${e}`)}}const IO=ih,xO="wc",AO="ethereum_provider",PO=`${xO}@2:${AO}:`,TO="https://rpc.walletconnect.com/v1/",Au=["eth_sendTransaction","personal_sign"],CO=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Pu=["chainChanged","accountsChanged"],NO=["message","disconnect","connect"];var RO=Object.defineProperty,UO=Object.defineProperties,$O=Object.getOwnPropertyDescriptors,jd=Object.getOwnPropertySymbols,FO=Object.prototype.hasOwnProperty,jO=Object.prototype.propertyIsEnumerable,Ld=(n,e,t)=>e in n?RO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ys=(n,e)=>{for(var t in e||(e={}))FO.call(e,t)&&Ld(n,t,e[t]);if(jd)for(var t of jd(e))jO.call(e,t)&&Ld(n,t,e[t]);return n},Md=(n,e)=>UO(n,$O(e));function Yo(n){return Number(n[0].split(":")[1])}function Zc(n){return`0x${n.toString(16)}`}function LO(n){const{chains:e,optionalChains:t,methods:s,optionalMethods:o,events:c,optionalEvents:f,rpcMap:l}=n;if(!uu(e))throw new Error("Invalid chains");const m={chains:e,methods:s||Au,events:c||Pu,rpcMap:ys({},e.length?{[Yo(e)]:l[Yo(e)]}:{})},_=c==null?void 0:c.filter(C=>!Pu.includes(C)),D=s==null?void 0:s.filter(C=>!Au.includes(C));if(!t&&!f&&!o&&!(_!=null&&_.length)&&!(D!=null&&D.length))return{required:e.length?m:void 0};const A=(_==null?void 0:_.length)&&(D==null?void 0:D.length)||!t,P={chains:[...new Set(A?m.chains.concat(t||[]):t)],methods:[...new Set(m.methods.concat(o!=null&&o.length?o:CO))],events:[...new Set(m.events.concat(f||NO))],rpcMap:l};return{required:e.length?m:void 0,optional:t.length?P:void 0}}class sh{constructor(){this.events=new qr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=PO,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new sh;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:s}=LO(this.rpc);try{const o=await new Promise(async(f,l)=>{var m;this.rpc.showQrModal&&((m=this.modal)==null||m.subscribeModal(_=>{!_.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),l(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Md(ys({namespaces:ys({},t&&{[this.namespace]:t})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(_=>{f(_)}).catch(_=>{l(new Error(_.message))})});if(!o)return;this.setChainIds(this.rpc.chains);const c=lE(o.namespaces,[this.namespace]);this.setAccounts(c),this.events.emit("connect",{chainId:Zc(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:s}=t;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",Zc(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Md(ys({},pE("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,s;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",Zc(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,s,o]=e.split(":");return{chainId:`${t}:${s}`,address:o}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,s;const o=(t=e==null?void 0:e.chains)!=null?t:[],c=(s=e==null?void 0:e.optionalChains)!=null?s:[],f=o.concat(c);if(!f.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const l=o.length?(e==null?void 0:e.methods)||Au:[],m=o.length?(e==null?void 0:e.events)||Pu:[],_=(e==null?void 0:e.optionalMethods)||[],D=(e==null?void 0:e.optionalEvents)||[],A=(e==null?void 0:e.rpcMap)||this.buildRpcMap(f,e.projectId),P=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:o==null?void 0:o.map(C=>this.formatChainId(C)),optionalChains:c.map(C=>this.formatChainId(C)),methods:l,events:m,optionalMethods:_,optionalEvents:D,rpcMap:A,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:P,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const s={};return e.forEach(o=>{s[o]=this.getRpcUrl(o,t)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?Yo(this.rpc.chains):Yo(this.rpc.optionalChains),this.signer=await IO.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:s}=await Rm(()=>import("./index-437d83fa.js").then(o=>o.i),["assets/index-437d83fa.js","assets/vendor-d591a884.js"]);t=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(ys({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:s,rpcMap:o}=e;t&&uu(t)&&(this.rpc.chains=t.map(c=>this.formatChainId(c)),t.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)})),s&&uu(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(c=>this.formatChainId(c)),s.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)}))}getRpcUrl(e,t){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${TO}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const JO=sh;export{JO as EthereumProvider,NO as OPTIONAL_EVENTS,CO as OPTIONAL_METHODS,Pu as REQUIRED_EVENTS,Au as REQUIRED_METHODS,sh as default};
