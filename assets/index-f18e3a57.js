import{m as Ue,f as yt,s as $t,L as ro,d as T,r as V,c as w,w as R,t as z,l as H,o as v,a as P,b as y,e as f,g as S,h as ue,i as wt,n as F,j as G,k as M,F as ae,T as Cn,u as n,p as Ge,q as kn,v as Sn,x as Tn,W as Pn,y as xn,z as zn,A as Q,B as c,C as Ln,D as q,E as $e,G as io,H as pe,I as he,J as Ne,K as te,M as ee,N as co,O as In,P as An,Q as Dn,R as Ve,S as On,U as Ye,V as Bt,X as Vn,Y as Rn,Z as Mn,_ as Bn,$ as de,a0 as ve,a1 as Je,a2 as Ze,a3 as qn,a4 as Wn,a5 as Fn,a6 as En,a7 as Un}from"./vendor-2445ef4d.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function a(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(s){if(s.ep)return;s.ep=!0;const r=a(s);fetch(s.href,r)}})();function De(o,e=0,a=".",t=","){const s=isFinite(+o)?+o:0,r=isFinite(+e)?Math.abs(e):0,i=typeof t>"u"?",":t,h=typeof a>"u"?".":a,m=function(u,l){const p=Math.pow(10,l);return Math.round(u*p)/p},d=(r?m(s,r):Math.round(s)).toString().split(".");return d[0].length>3&&(d[0]=d[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(d[1]||"").length<r&&(d[1]=d[1]||"",d[1]+=new Array(r-d[1].length+1).join("0")),d.join(h)}function K(o,e){const a=Math.abs(o);return e==="percentage"?"%":e==="dollar"?a>=1*10**12?"t":a>=1*10**9?"b":a>=1*10**6?"m":a>=1*10**3?"k":"":""}function Z(o,e,a){const t=Math.abs(o);return e===1/0?o.toLocaleString():a==="percentage"?De(o,e):a==="dollar"?t>=1*10**12?De(o/10**12,e):t>=1*10**9?De(o/10**9,e):t>=1*10**6?De(o/10**6,e):t>=1*10**3?De(o/10**3,e):De(o,e):o.toString()}async function He(o,e=0,a=1e3){const t=await o(e,a),s=await(t.length>=a?He(o,e+1,a):Promise.resolve([]));return t.concat(s)}function ft(o,e){return(Array.isArray(o)?o:[o]).some(t=>e.path.startsWith(t))}const Nn="0x9bc7c6ad7e7cf3a6fcb58fb21e27752ac1e53f99",Hn="0xaef6ea60f6443bad046e825c1d2b0c0b5ebc1f16",jn="0x657ce046d98d163ef4f846210f25919fa7b31944",Gn="https://api.llama.airforce/";async function Yn(o,e,a){return await fetch(o,{method:e?"POST":"GET",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e),signal:a}).then(t=>{if(t.ok)return t;throw new Error(`Fetch error ${t.status} for URL: ${o}`)})}async function Jn(o,e,a){return await(await Yn(o,e,a)).json()}class Ce{constructor(e){this.host=e}async fetch(e,a,t){return Jn(e,a,t)}}const Kn="wss://prices.curve.fi/v1/stream/ws",qt="pool_ohlc";class it{constructor(e,a,t){this.chain=a,this.settings=t,this.socket=e,this.ohlc$=this.socket.pipe(Ue(s=>s),yt(s=>s.subscription.chain===this.chain&&s.channel===qt&&JSON.stringify(s.subscription)===JSON.stringify(t)),Ue(s=>s.payload),$t(1)),this.send("snapshots")}send(e){const a={action:e,channel:qt,settings:[this.settings]};this.socket.next(a)}}const Wt="pool_volume";class Qn{constructor(e,a,t){this.chain=a,this.settings=t,this.socket=e,this.volume$=this.socket.pipe(Ue(s=>s),yt(s=>s.subscription.chain===this.chain&&s.channel===Wt&&JSON.stringify(s.subscription)===JSON.stringify(t)),Ue(s=>s.payload),$t(1)),this.send("snapshots")}send(e){const a={action:e,channel:Wt,settings:[this.settings]};this.socket.next(a)}}async function Xn(o){try{return await o()}catch(e){e instanceof Error&&ro({text:e.message,type:"error"});return}}const Zn="|/-\\",B=T({__name:"AsyncValue",props:{value:{default:null},type:{default:null},precision:{type:[Number,Function],default:2},showUnit:{type:Boolean,default:!0},showSymbol:{type:Boolean,default:!0},showZero:{type:Boolean,default:!1}},setup(o){let e=0,a=0;const t=V("|"),s=w(()=>o.value?Z(o.value,typeof o.precision=="function"?o.precision(o.value):o.precision,o.type??""):o.value===0&&o.showZero?"0":o.value===null||o.value===void 0?t.value:"?"),r=w(()=>o.precision===1/0?"":!o.value||!o.type||!H.isFinite(o.value)?o.showUnit&&o.type?K(0,o.type):"":K(o.value,o.type));return R(()=>o.value,i=>{if(clearInterval(a),e=0,i)return;const h=()=>{e=(e+1)%4,t.value=Zn[e]};a=window.setInterval(h,250)},{immediate:!0}),(i,h)=>z(i.showSymbol&&i.type==="dollar"?"$":"")+z(s.value)+z(i.showUnit?r.value:"")}}),es={key:0,class:"fas fa-chevron-right"},ts=T({__name:"Breadcrumb",props:{crumbs:{},active:{}},emits:["crumb"],setup(o,{emit:e}){const a=e,t=r=>{var i;return o.active?o.active.id===r.id:((i=o.crumbs.at(-1))==null?void 0:i.id)===r.id},s=r=>{var i;return((i=o.crumbs.at(-1))==null?void 0:i.id)===r.id};return(r,i)=>(v(),P(n(oe),null,{default:y(()=>[f(Cn,{name:"fade",tag:"ul"},{default:y(()=>[(v(!0),S(ae,null,ue(r.crumbs,h=>(v(),S("li",{key:h.id},[(v(),P(wt(t(h)?"span":"a"),{class:F({active:t(h)}),onClick:m=>a("crumb",h)},{default:y(()=>[G(z(h.label),1)]),_:2},1032,["class","onClick"])),!s(h)||r.crumbs.length===1?(v(),S("i",es)):M("",!0)]))),128))]),_:1})]),_:1}))}});const x=(o,e)=>{const a=o.__vccOpts||o;for(const[t,s]of e)a[t]=s;return a},as=x(ts,[["__scopeId","data-v-997741c8"]]);function os(){return!1}const Ct=Ge({id:"walletStore",state:()=>({address:void 0,connected:!1,correctNetwork:!1}),actions:{setAddress(o){this.address=o==null?void 0:o.toLocaleLowerCase()}}}),ns=kn(),ss=Sn({projectId:"7a61bbd683f613a5308ca86fd4cb14f7",dappUrl:"https://llama.airforce"}),ls=xn({darkMode:!0}),rs=zn();let we=null;function is(){const o=Tn({wallets:[ns,ss,ls,rs],chains:[{id:"0x1",token:"ETH",label:"Ethereum Mainnet",rpcUrl:"https://mainnet.infura.io/v3/878382a352b14db1b7ad52a89a886207"}],appMetadata:{name:"Llama Airforce",icon:"/wallet-icon.png",description:"Airdropping knowledge bombs about the Curve ecosystem"},theme:"dark"});return o.state.actions.updateAccountCenter({enabled:!1}),o}let gt=null;async function uo(o=!1){we||(we=is());let[e]=we.state.get().wallets;if(!e){const a=window.localStorage.getItem("connectedWallet");a?[e]=await we.connectWallet({autoSelect:{label:a,disableModals:!0}}):o&&([e]=await(we==null?void 0:we.connectWallet())??[null],e&&window.localStorage.setItem("connectedWallet",e.label))}gt=e||null}function at(){return gt?new Pn(gt.provider):void 0}async function cs(){if(!we)return;const[o]=we.state.get().wallets;await we.disconnectWallet({label:o.label}),window.localStorage.removeItem("connectedWallet")}async function _o(o){if(!o)return!1;try{const a=await o.getSigner().getAddress();return!0}catch{return!1}}async function mo(o){if(!o)return!1;try{const{name:e,chainId:a}=await o.getNetwork();return e==="homestead"&&a===1}catch{return!1}}async function us(o){return await o.getSigner().getAddress()}function X(o,e=6){if(!o)return"0x000...000";const a=e/2+2,t=o.length-e/2;return`${o.substring(0,a)}...${o.substring(t)}`}const ds=T({__name:"Button",props:{icon:{default:""},value:{default:""},primary:{type:Boolean,default:!1},web3:{type:Boolean,default:!1}},emits:["click"],setup(o,{emit:e}){const a=e,t=async s=>{if(s.stopImmediatePropagation(),o.web3&&os()){const r=at();if(!r)return;await mo(r)||(await r.send("wallet_switchEthereumChain",[{chainId:"0x1"}]),window.location.reload())}a("click")};return(s,r)=>(v(),S("button",{class:F({primary:s.primary}),onClick:t},[Q(s.$slots,"default",{},()=>[s.icon?(v(),S("i",{key:0,class:F(["icon",[s.icon,{noValue:!!s.value}]])},null,2)):M("",!0),G(" "+z(s.value),1)],!0)],2))}});const be=x(ds,[["__scopeId","data-v-b051a687"]]),_s=T({__name:"ButtonToggle",props:{modelValue:{type:Boolean,default:!1},icon:{default:""},value:{default:""}},emits:["update:modelValue"],setup(o,{emit:e}){const a=e,t=()=>{a("update:modelValue",!o.modelValue)};return(s,r)=>(v(),S("button",{class:F({toggled:s.modelValue}),onClick:t},[Q(s.$slots,"default",{},()=>[s.icon?(v(),S("i",{key:0,class:F(["icon",s.icon])},null,2)):M("",!0),G(" "+z(s.value),1)],!0)],2))}});const Oe=x(_s,[["__scopeId","data-v-a2cabc6a"]]),ms=["inert"],vs={class:"text"},ps=T({__name:"Card",props:{title:{default:""},icon:{default:""},compact:{type:Boolean,default:!1},collapsible:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},setup(o){return(e,a)=>(v(),S("div",{class:"card",inert:e.loading},[f(n(ho),{class:F(["loader",{loading:e.loading}])},null,8,["class"]),c("div",{class:F(["card-container",{loading:e.loading}])},[e.title?(v(),S("div",{key:0,class:F(["card-header",{collapsible:e.collapsible}])},[c("div",vs,[e.icon?(v(),S("i",{key:0,class:F(["icon",e.icon])},null,2)):M("",!0),G(" "+z(e.title),1)]),Q(e.$slots,"actions",{},void 0,!0)],2)):(v(),S("div",{key:1,class:F(["card-no-header",{compact:e.compact}])},null,2)),c("div",{class:F(["card-body",{compact:e.compact,collapsed:e.collapsed}])},[Q(e.$slots,"default",{},void 0,!0)],2)],2)],8,ms))}});const oe=x(ps,[["__scopeId","data-v-c2704c0a"]]),hs=T({__name:"CardGraph",props:{title:{default:""},loading:{type:Boolean,default:!1},options:{},series:{}},setup(o){return(e,a)=>(v(),P(n(oe),{class:"card-graph",title:e.title,loading:e.loading},{actions:y(()=>[Q(e.$slots,"actions",{},void 0,!0)]),default:y(()=>[f(n(Tt),{height:"100%",options:e.options,series:e.series},null,8,["options","series"]),Q(e.$slots,"default",{},void 0,!0)]),_:3},8,["title","loading"]))}});const ce=x(hs,[["__scopeId","data-v-2c4b7886"]]),fs={class:"chip"},gs={class:"label"},bs=T({__name:"Chip",props:{label:{default:""}},setup(o){return(e,a)=>(v(),S("div",fs,[c("div",gs,z(e.label),1)]))}});const ys=x(bs,[["__scopeId","data-v-1eb2caf8"]]);const $s={class:"collapsible-inside"},ws=T({__name:"Collapsible",props:{expanded:{type:Boolean,default:!0}},setup(o){return(e,a)=>(v(),S("div",{class:F(["collapsible-outside",{expanded:e.expanded}])},[c("div",$s,[Q(e.$slots,"default",{},void 0,!0)])],2))}});const kt=x(ws,[["__scopeId","data-v-25b74378"]]),Cs=["inert"],ks={key:0,class:"header"},Ss={key:0,class:"header-icon"},Ts={class:"list"},Ps=["onClick"],xs={key:0,class:"sorting-arrows"},zs={key:0,class:"sorting-arrow fa fa-caret-up"},Ls={key:1,class:"sorting-arrow fa fa-caret-down"},Is={key:2,class:"sorting-arrow"},As={class:"rows"},Ds={key:0,class:"no-data"},St=T({__name:"DataTable",props:{columnsHeader:{default:"auto"},columnsData:{default:"auto"},columns:{default:()=>[]},rows:{default:()=>[]},rowsMin:{default:null},selectedRow:{default:null},expanded:{default:()=>[]},sorting:{type:Boolean,default:!1},sortingColumns:{default:()=>[]},sortingColumnsEnabled:{default:()=>[]},sortingDefaultColumn:{default:null},sortingDefaultDir:{default:null},icon:{default:""},header:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}},emits:["selected","sortColumn"],setup(o,{emit:e}){const a=e,t=V(""),s=V(ne.Ascending),r=w(()=>`grid-template-columns: ${o.columnsHeader}`),i=w(()=>{if(o.rowsMin===null)return[];const g=Math.max(0,o.rowsMin-o.rows.length);return new Array(g)});Ln(()=>{o.sortingDefaultColumn&&(t.value=o.sortingDefaultColumn),o.sortingDefaultDir&&(s.value=o.sortingDefaultDir===ne.Ascending?ne.Ascending:ne.Descending)});const h=g=>{a("selected",g)},{t:m}=q(),d=g=>{const D=g+1;return!!(o.rows[g+1]&&o.rows.findIndex(A=>A===o.selectedRow)===D)},u=g=>o.expanded.includes(g),l=g=>{const D=o.sortingColumns[g];return o.sortingColumnsEnabled.includes(D)},p=g=>t.value===o.sortingColumns[g]&&s.value===ne.Ascending,_=g=>t.value===o.sortingColumns[g]&&s.value===ne.Descending,b=g=>{if(!o.sorting||!o.sortingColumns||!l(g))return;const D=o.sortingColumns[g];D===t.value?s.value=s.value===ne.Ascending?ne.Descending:ne.Ascending:s.value=ne.Ascending,t.value=D,a("sortColumn",t.value,s.value)};return(g,D)=>(v(),S("div",{class:F(["datatable",{loading:g.loading}]),inert:g.loading},[g.header?(v(),S("div",ks,[g.icon?(v(),S("div",Ss,[c("i",{class:F(g.icon)},null,2)])):M("",!0),c("div",{class:"header-content",style:$e(r.value)},[Q(g.$slots,"header-content",{},void 0,!0)],4)])):M("",!0),c("div",Ts,[c("div",{class:F(["row-data",[g.columnsData,{"selected-below":d(-1)}]])},[Q(g.$slots,"column-headers",{},()=>[(v(!0),S(ae,null,ue(g.columns,(k,O)=>(v(),S("div",{key:k,class:F(["column-header",{"sortable-header":g.sorting&&l(O),"current-sort":t.value==g.sortingColumns[O]}]),onClick:A=>b(O)},[G(z(k)+" ",1),g.sorting&&l(O)?(v(),S("div",xs,[p(O)?(v(),S("i",zs)):_(O)?(v(),S("i",Ls)):(v(),S("span",Is," — "))])):M("",!0)],10,Ps))),128))],!0)],2),c("div",As,[f(n(ho),{class:F(["loader",{loading:g.loading}])},null,8,["class"]),(v(!0),S(ae,null,ue(g.rows,(k,O)=>(v(),P(n(mt),{key:k,data:k,class:F({"selected-below":d(O)}),columns:g.columnsData,selected:g.selectedRow===k,expanded:u(k),onClick:h},{row:y(()=>[Q(g.$slots,"row",{item:k},void 0,!0)]),"row-details":y(()=>[Q(g.$slots,"row-details",{item:k},void 0,!0)]),_:2},1032,["data","class","columns","selected","expanded"]))),128)),(v(!0),S(ae,null,ue(i.value,k=>(v(),P(n(mt),{key:k}))),128)),!g.rowsMin&&(!g.rows||g.rows.length===0)&&!g.loading?(v(),S("div",Ds,[Q(g.$slots,"no-data",{},()=>[G(z(n(m)("no-data")),1)],!0)])):M("",!0),g.$slots["row-aggregation"]&&g.rows.length>0?(v(),P(n(mt),{key:1,class:"aggregation",columns:g.columnsData},{row:y(()=>[Q(g.$slots,"row-aggregation",{},void 0,!0)]),_:3},8,["columns"])):M("",!0)])])],10,Cs))}});function Ft(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{"no-data":a=>{const{normalize:t}=a;return t(["No data :("])}}})}function Et(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"zh",resource:{"no-data":a=>{const{normalize:t}=a;return t(["没有数据 :("])}}})}typeof Ft=="function"&&Ft(St);typeof Et=="function"&&Et(St);const re=x(St,[["__scopeId","data-v-841cc030"]]),Os=o=>(pe("data-v-45ff862c"),o=o(),he(),o),Vs=Os(()=>c("i",{class:"fas fa-chevron-up"},null,-1)),Rs=[Vs],Ms={class:"row-details"},Bs=T({__name:"DataTableRow",props:{data:{},columns:{default:"auto"},selected:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1}},emits:["click"],setup(o,{emit:e}){const a=e,t=io(),s=w(()=>{var h;const i=t["row-details"];if(i){const m=(h=i()[0])==null?void 0:h.children;if(m)return m.length>0}return!1}),r=()=>{a("click",o.data)};return(i,h)=>(v(),S("div",{class:F(["row",{expanded:i.expanded}])},[c("div",{class:F(["row-data item",[i.columns,{active:i.selected,expandable:s.value}]]),onClick:r},[Q(i.$slots,"row",{},void 0,!0),s.value?(v(),S("div",{key:0,class:F(["expander",{expanded:i.expanded}])},Rs,2)):M("",!0)],2),f(n(kt),{expanded:i.expanded},{default:y(()=>[c("div",Ms,[Q(i.$slots,"row-details",{},void 0,!0)])]),_:3},8,["expanded"])],2))}});const mt=x(Bs,[["__scopeId","data-v-45ff862c"]]),qs=T({__name:"GraphApex",props:{options:{},series:{}},setup(o){return(e,a)=>{const t=Ne("apexchart");return v(),P(t,{class:"chart",height:"100%",options:e.options,series:e.series},null,8,["options","series"])}}});const Tt=x(qs,[["__scopeId","data-v-3e2879ed"]]),Ws=["min","max","value"],Fs=T({__name:"InputNumber",props:{modelValue:{},min:{},max:{}},emits:["update:modelValue"],setup(o,{emit:e}){const a=e,t=s=>{a("update:modelValue",s.target.value)};return(s,r)=>(v(),S("input",{type:"number",min:s.min,max:s.max,value:s.modelValue,onInput:t},null,40,Ws))}});const Es=x(Fs,[["__scopeId","data-v-097889a4"]]),Us=o=>(pe("data-v-a7ae5e73"),o=o(),he(),o),Ns={class:"input-text"},Hs={key:0,class:"icon"},js=Us(()=>c("i",{class:"fas fa-search"},null,-1)),Gs=[js],Ys=["type","value","placeholder","onInput"],Js=["onClick"],Ks=T({__name:"InputText",props:{modelValue:{},placeholder:{default:""},options:{default:()=>[]},search:{type:Boolean,default:!1},autoComplete:{type:Boolean,default:!1},filter:{type:Function,default:()=>()=>!0},sort:{type:Function,default:null}},emits:["update:modelValue","input","select"],setup(o,{emit:e}){const a=e,t=w(()=>{const r=o.options.filter(h=>o.filter(o.modelValue,h));return o.sort?[...r].sort(o.sort):r}),s=r=>{const i=r.target.value;a("update:modelValue",i),a("input",i)};return(r,i)=>(v(),S("div",Ns,[r.search?(v(),S("span",Hs,Gs)):M("",!0),c("input",{type:r.search?"search":"text",value:r.modelValue,placeholder:r.placeholder,onInput:te(s,["stop"]),onSelect:i[0]||(i[0]=te(()=>{},["stop"]))},null,40,Ys),r.options&&r.autoComplete?(v(),S("div",{key:1,class:F(["items",{selectHide:!r.autoComplete}])},[(v(!0),S(ae,null,ue(t.value,(h,m)=>(v(),S("div",{key:m,onClick:d=>a("select",h)},[Q(r.$slots,"item",{item:h,idx:m},()=>[G(z(h),1)],!0)],8,Js))),128))],2)):M("",!0)]))}});const fe=x(Ks,[["__scopeId","data-v-a7ae5e73"]]),Qs={key:0,class:"value"},Xs={key:1,class:"value"},Zs=["innerHTML"],el={key:0,class:"value"},tl={key:1,class:"value"},al=["innerHTML"],ol={class:"labels"},nl={class:"label"},sl={class:"label-second"},ll=T({__name:"KPI",props:{label:{default:""},labelSecond:{default:""},tooltip:{default:""},tooltipType:{default:"icon"},value:{},hasValue:{type:Boolean,default:!1}},setup(o){return(e,a)=>(v(),S("div",{class:F(["kpi",{disabled:!e.hasValue}])},[c("div",{class:F(["value-container",{underline:e.tooltip&&e.tooltipType==="underline"}])},[Q(e.$slots,"default",{},()=>[e.tooltip&&e.tooltipType==="underline"?(v(),P(n(je),{key:0},{item:y(()=>[e.hasValue?(v(),S("span",Qs,z(e.value),1)):(v(),S("span",Xs," ? "))]),default:y(()=>[Q(e.$slots,"tooltip",{},()=>[c("span",{innerHTML:e.tooltip},null,8,Zs)],!0)]),_:3})):(v(),S(ae,{key:1},[e.hasValue?(v(),S("span",el,z(e.value),1)):(v(),S("span",tl," ? "))],64))],!0),e.tooltip&&e.tooltipType==="icon"?(v(),P(n(je),{key:0},{default:y(()=>[c("span",{innerHTML:e.tooltip},null,8,al)]),_:1})):M("",!0)],2),c("div",ol,[Q(e.$slots,"label",{},()=>[c("div",nl,z(e.label),1)],!0),Q(e.$slots,"label-second",{},()=>[c("div",sl,z(e.labelSecond),1)],!0)])],2))}});const le=x(ll,[["__scopeId","data-v-0123c061"]]),rl={key:0,class:"modal"},il={class:"modal-popup"},cl=T({__name:"Modal",props:{show:{type:Boolean,default:!1}},emits:["close"],setup(o,{emit:e}){const a=e,t=s=>{s.code==="Escape"&&a("close")};return ee(()=>{document.addEventListener("keydown",t)}),co(()=>{document.removeEventListener("keydown",t)}),R(()=>o.show,s=>{document.body.style.overflow=s?"hidden":""}),(s,r)=>s.show?(v(),S("div",rl,[c("div",{class:"modal-mask",onClick:r[0]||(r[0]=i=>a("close"))}),c("div",il,[Q(s.$slots,"default",{},void 0,!0)])])):M("",!0)}});const Re=x(cl,[["__scopeId","data-v-8f349360"]]),ul={class:"buttons"},dl={key:1,class:"not-ready"},vo=T({__name:"ModalYesNo",props:{show:{type:Boolean,default:!1},title:{default:""},ready:{type:Boolean,default:!0},readyMsg:{default:""}},emits:["yes","no"],setup(o,{emit:e}){const a=e,{t}=q();return(s,r)=>(v(),P(n(Re),{show:s.show},{default:y(()=>[f(n(oe),{title:s.title},{default:y(()=>[Q(s.$slots,"default",{},void 0,!0),c("div",ul,[f(n(be),{class:"no",value:n(t)("no"),onClick:r[0]||(r[0]=i=>a("no"))},null,8,["value"]),s.ready?(v(),P(n(be),{key:0,class:"yes",value:n(t)("yes"),onClick:r[1]||(r[1]=i=>a("yes"))},null,8,["value"])):(v(),S("div",dl,z(s.readyMsg),1))])]),_:3},8,["title"])]),_:3},8,["show"]))}});function Ut(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{yes:a=>{const{normalize:t}=a;return t(["Yes"])},no:a=>{const{normalize:t}=a;return t(["No"])}}})}function Nt(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"zh",resource:{yes:a=>{const{normalize:t}=a;return t(["是的"])},no:a=>{const{normalize:t}=a;return t(["不是"])}}})}typeof Ut=="function"&&Ut(vo);typeof Nt=="function"&&Nt(vo);const Pt=o=>(pe("data-v-35eb277c"),o=o(),he(),o),_l=Pt(()=>c("button",null,"1",-1)),ml=[_l],vl=Pt(()=>c("button",null,[c("i",{class:"fas fa-chevron-left"})],-1)),pl=[vl],hl=["onClick"],fl=Pt(()=>c("button",null,[c("i",{class:"fas fa-chevron-right"})],-1)),gl=[fl],bl=T({__name:"Pagination",props:{page:{},itemsCount:{},itemsPerPage:{}},emits:["page"],setup(o,{emit:e}){const a=e,t=w(()=>Math.ceil(o.itemsCount/o.itemsPerPage)),s=w(()=>{const l=[...Array(12).keys()].map(k=>k-6+o.page).filter(k=>k>=1&&k<=t.value),p=l.findIndex(k=>k===o.page),_=[],b=[],g=o.page!==1&&o.page!==t.value?[o.page]:[];let D=1;for(;;){const k=l[p-D];if(k&&k!==1&&_.unshift(k),_.length+b.length+g.length>=5||D>l.length)break;const O=l[p+D];if(O&&O!==t.value&&b.push(O),D++,_.length+b.length+g.length>=5||D>l.length)break}return[..._,...g,...b]}),r=(d,u,l)=>Math.min(Math.max(d,u),l),i=()=>a("page",r(o.page-1,1,t.value)),h=()=>a("page",r(o.page+1,1,t.value)),m=d=>a("page",r(d,1,t.value));return(d,u)=>(v(),S("ul",null,[c("li",{class:F({active:d.page===1}),onClick:u[0]||(u[0]=l=>m(1))},ml,2),t.value>2?(v(),S("li",{key:0,onClick:i},pl)):M("",!0),(v(!0),S(ae,null,ue(s.value,(l,p)=>(v(),S("li",{key:p,class:F({active:l===d.page}),onClick:_=>m(l)},[c("button",null,z(l),1)],10,hl))),128)),t.value>2?(v(),S("li",{key:1,onClick:h},gl)):M("",!0),t.value>1?(v(),S("li",{key:2,class:F({active:d.page===t.value}),onClick:u[1]||(u[1]=l=>m(t.value))},[c("button",null,z(t.value),1)],2)):M("",!0)]))}});const ke=x(bl,[["__scopeId","data-v-35eb277c"]]),yl=o=>(pe("data-v-8e55132f"),o=o(),he(),o),$l={class:"select"},wl={class:"item"},Cl={key:0,class:"label"},kl=["onClick"],Sl=yl(()=>c("div",{class:"chevrons"},[c("i",{class:"fas fa-chevron-up"}),c("i",{class:"fas fa-chevron-down"})],-1)),Tl=T({__name:"Select",props:{options:{default:()=>[]},open:{type:Boolean,default:!1},selected:{default:null},label:{}},emits:["open","close","input"],setup(o,{emit:e}){const a=e;return(t,s)=>(v(),S("div",{class:"select-container",tabindex:"0",onClick:s[0]||(s[0]=te(r=>a("open"),["stop"])),onBlur:s[1]||(s[1]=r=>a("close"))},[c("div",$l,[c("div",{class:F(["selected",{open:t.open}])},[Q(t.$slots,"item",{item:t.selected},()=>[c("div",wl,z(t.selected),1)],!0),t.label?(v(),S("div",Cl,z(t.label),1)):M("",!0)],2),c("div",{class:F(["items",{selectHide:!t.open}])},[(v(!0),S(ae,null,ue(t.options,(r,i)=>(v(),S("div",{key:i,onClick:h=>a("input",r)},[Q(t.$slots,"item",{item:r},()=>[G(z(r),1)],!0)],8,kl))),128))],2)]),Sl],32))}});const xt=x(Tl,[["__scopeId","data-v-8e55132f"]]),Pl={class:"item"},xl={class:"label"},Ht="locale",zl=T({__name:"SelectLanguage",props:{locales:{default:()=>Ll},direction:{default:"up"}},setup(o){const{t:e}=q(),{locale:a}=q({useScope:"global"}),t=V("en"),s=V(!1);ee(()=>{const h=localStorage.getItem(Ht);h&&o.locales.some(m=>m===h)&&i(h)});const r=()=>{s.value=!s.value},i=h=>{t.value=h,a.value=t.value,localStorage.setItem(Ht,t.value)};return(h,m)=>(v(),P(n(xt),{class:F(["select",{"direction-up":h.direction==="up"}]),options:h.locales.map(d=>d),selected:t.value,open:s.value,onOpen:r,onClose:m[0]||(m[0]=d=>s.value=!1),onInput:i},{item:y(d=>[c("div",Pl,[c("div",xl,z(n(e)(d.item)),1)])]),_:1},8,["class","options","selected","open"]))}});function jt(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{en:a=>{const{normalize:t}=a;return t(["English"])},zh:a=>{const{normalize:t}=a;return t(["中文"])},fr:a=>{const{normalize:t}=a;return t(["Français"])}}})}typeof jt=="function"&&jt(zl);const Ll=["en","zh","fr"];var ne=(o=>(o.Ascending="Ascending",o.Descending="Descending",o))(ne||{});const Il={},po=o=>(pe("data-v-ad2adcec"),o=o(),he(),o),Al={class:"lds-ripple"},Dl=po(()=>c("div",null,null,-1)),Ol=po(()=>c("div",null,null,-1)),Vl=[Dl,Ol];function Rl(o,e){return v(),S("div",Al,Vl)}const ho=x(Il,[["render",Rl],["__scopeId","data-v-ad2adcec"]]),me=T({__name:"TabItem",props:{header:{default:""},disabled:{type:Boolean,default:!1}},setup(o){return(e,a)=>Q(e.$slots,"default")}}),Ml={class:"tab-view"},Bl={class:"tab-headers"},ql=["onClick"],Wl={class:"tabs"},Fl=T({__name:"TabView",props:{active:{default:0}},emits:["tab"],setup(o,{emit:e}){const a=e,t=V(null),s=io(),r=w(()=>s!=null&&s.default?s.default():[]);R(()=>o.active,h=>{t.value=h,a("tab",{tab:r.value[h],index:t.value})},{immediate:!0});const i=(h,m)=>{h.props.disabled||(t.value=m,a("tab",{tab:r.value[m],index:t.value}))};return(h,m)=>(v(),S("div",Ml,[c("ul",Bl,[(v(!0),S(ae,null,ue(r.value,(d,u)=>(v(),S("li",{key:u,class:F(["tab-header",{active:t.value===u,disabled:d.props.disabled}]),onClick:l=>i(d,u)},z(d.props.header),11,ql))),128))]),c("div",Wl,[(v(!0),S(ae,null,ue(r.value,(d,u)=>In((v(),S("div",{key:u,class:"tab"},[(v(),P(wt(d)))])),[[An,t.value===u]])),128))])]))}});const ct=x(Fl,[["__scopeId","data-v-5ae69f44"]]),El="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTM0A1t6AAACSklEQVRIS7WVTUhUURTHT4sWgZS4aNFGSgqTmUqiKNAoFMWhqbQ2gX1BGdKUChW1EEqiULEsDNSFOBJiaZHQ9EE1pGik6DAzYYsUochFoEExCIGPf/e8e4d5b+ZJb4bxwm/x3j3n/O69j3cPidEomF4hOgU0/Wec8DeUZoIEUfuXLuAXnVcJBx2Ery8I+JIac+8JblGjpVo+mwQ8ceUI4e6FWMLPYXvwajm+t4FQVUQozrEQ8MpbPXJ7PFldStiTtwWufQX/xZFJ+D1G0KYID2sJ4QELAb+IwsWv11yE3THs98OpJMY6loLvbwkF2xwqVY6O+62oO3/OxLVLHkQiERUBdLe349YZG4JvbwgVJcUqDQhOTmB/NmGky0yL+FYsio6Xg4NoOJ2CYGx0FB6XOZEJ9ImjPHVCRSUp2JSVibbmJp3aqrOWgk89KQoWJwneejPhp3LuQQ1hcxZhV85q7MjOQCgQUOUB3/Nn9gTLwcXLiwqhaZoqGRsL8/PYup4QFMdmzLEt+PGOkL9xg6n4x6EhPO7xos/r1YuPP0rMsy2Y8REqD7tVaWAqHIJznfwxmeiPFU/KgpEPflyusI41kpRg7SrCyaPlOgd25qdXsBgg+O6ZmX1lHWvEtoB3kCF2cNzt0inc7kj/ERm/AV9uSQu4WfTeJCyJKzc+kAVriHCsrERnb16upUATPLkdOz6T4JBTNos2cZ/HJy59lgswEplIjBu4I45x9zINhzsZT4T6ExPtMvta1rhRKZ9jAtXy0k1U0CFYWBmo/x+ShmnKzYg0NQAAAABJRU5ErkJggg==",Ul={key:1,src:El},Nl=T({__name:"Tooltip",props:{icon:{default:""}},setup(o){const e=V(!1);return(a,t)=>(v(),P(n(Dn),{class:"tooltip",show:e.value},{content:y(()=>[Q(a.$slots,"default",{},void 0,!0)]),default:y(()=>[c("div",{onMouseover:t[0]||(t[0]=s=>e.value=!0),onMouseleave:t[1]||(t[1]=s=>e.value=!1)},[Q(a.$slots,"item",{},()=>[a.icon?(v(),S("i",{key:0,class:F(a.icon)},null,2)):(v(),S("img",Ul))],!0)],32)]),_:3},8,["show"]))}});const je=x(Nl,[["__scopeId","data-v-2158cb4b"]]);function U(o,e){const a=V(!1),t=V(e);let s=0;const r=()=>(s++,a.value=!0,Xn(async()=>{t.value=await o(),s--,a.value=s!==0}));return ee(()=>void r()),{loading:a,data:t,load:r}}function Hl(o,e){const t=Math.round(o.value/1e3)-e;return t<60?`${Math.round(t)} seconds ago`:t<60*60?`${Math.round(t/60)} minutes ago`:t<60*60*24?`${Math.round(t/(60*60))} hours ago`:`${Math.round(t/(60*60*24))} days ago`}function Se(){const o=V(Date.now());return ee(()=>{setInterval(()=>{o.value=Date.now()})}),{relativeTime:a=>Hl(o,a)}}function ze(o,e){const a=V(o),t=V(e??ne.Descending);return{sortColumn:a,sortOrder:t,onSort:(r,i)=>{a.value=r,t.value=i}}}function Te(o,e){const a=V(1),t=w(()=>H.chain(o.value).drop((a.value-1)*e).take(e).value()),s=r=>{a.value=r};return R(t,r=>{r.length===0&&(a.value=Math.max(1,Math.ceil(o.value.length/e)))}),{page:a,rowsPage:t,onPage:s}}function ye(o,e){const a=V(e),t=o.subscribe({next:s=>{a.value=s},error:s=>{const r=s instanceof Error?s.message:JSON.stringify(s);ro({text:r,type:"error"})}});return co(()=>{t&&t.unsubscribe()}),a}const jl={class:"legend"},Gl=["onClick"],Yl={class:"label"},Jl=T({__name:"Legend",props:{colors:{},items:{},clickable:{type:Boolean,default:!1},disabled:{default:()=>[]}},emits:["click"],setup(o,{emit:e}){const a=e,t=s=>o.colors[s];return(s,r)=>(v(),S("div",jl,[(v(!0),S(ae,null,ue(s.items,(i,h)=>(v(),S("div",{key:i,class:F(["item",{clickable:s.clickable,disabled:s.disabled.includes(i)}]),onClick:m=>{s.clickable&&a("click",i)}},[c("div",{class:"color",style:$e({"background-color":t(h)})},null,4),c("div",Yl,z(i),1)],10,Gl))),128))]))}});const zt=x(Jl,[["__scopeId","data-v-b0a9ca48"]]);function vt(o){return(o==null?void 0:o.children)!==void 0}function Gt(o){return(o==null?void 0:o.to)!==void 0}const Kl={key:0},Ql={class:"nav-link-container"},Xl={class:"nav-link-container"},Zl={class:"left"},er={class:"right"},tr=T({__name:"MenuItem",props:{item:{}},emits:["navigated"],setup(o,{emit:e}){const a=e,t=Ve(),s=V(!0),r=w(()=>Gt(o.item)?[o.item]:vt(o.item)?o.item.children:[]),i=()=>{vt(o.item)&&o.item.children.filter(d=>ft(d.to,t)).length>0&&(s.value=!0)};R(()=>o.item,()=>{i()},{immediate:!0}),R(()=>t.fullPath,()=>{i()},{immediate:!0});const h=()=>{s.value=!s.value};return(m,d)=>{const u=Ne("router-link");return v(),S(ae,null,[n(vt)(m.item)?(v(),S("li",Kl,[c("a",{class:"nav-link node",onClick:h},[c("div",Ql,[G(z(m.item.label)+" ",1),c("i",{class:F(["expander fas fa-chevron-up",{expanded:s.value}])},null,2)])])])):M("",!0),f(n(kt),{class:"items",expanded:s.value},{default:y(()=>[c("ul",null,[(v(!0),S(ae,null,ue(r.value,l=>(v(),S("li",{key:l.label},[n(Gt)(l)?(v(),P(u,{key:0,to:l.to,class:F(["nav-link leaf",{"router-link-active":n(ft)(l.to,n(t))}]),onClick:d[0]||(d[0]=p=>a("navigated"))},{default:y(()=>[c("div",Xl,[c("div",Zl,z(l.label),1),c("div",er,[l.tag==="beta"?(v(),P(n(ys),{key:0,label:"BETA"})):M("",!0)])])]),_:2},1032,["to","class"])):M("",!0)]))),128))])]),_:1},8,["expanded"])],64)}}});const ar=x(tr,[["__scopeId","data-v-d8ba8816"]]),or=T({__name:"Menu",props:{pages:{default:()=>[]}},emits:["navigated"],setup(o,{emit:e}){const a=e,t=Ve(),s=w(()=>o.pages.find(i=>ft(i.titleRoute,t))),r=w(()=>{var i;return((i=s.value)==null?void 0:i.menuItems)??[]});return(i,h)=>(v(),S("nav",null,[(v(!0),S(ae,null,ue(r.value,m=>(v(),S("ul",{key:m.label},[f(ar,{item:m,onNavigated:h[0]||(h[0]=d=>a("navigated"))},null,8,["item"])]))),128))]))}});const nr=x(or,[["__scopeId","data-v-59493144"]]),sr="/assets/prisma-b38af1f3.png",lr="/assets/hat-80c6c9b1.png";const rr={},fo=o=>(pe("data-v-f01d266e"),o=o(),he(),o),ir={class:"logo"},cr=fo(()=>c("div",{class:"visual"},[c("img",{src:sr}),c("img",{src:lr})],-1)),ur=fo(()=>c("span",null,"prisma.monitor",-1)),dr=[cr,ur];function _r(o,e){return v(),S("div",ir,dr)}const mr=x(rr,[["render",_r],["__scopeId","data-v-f01d266e"]]),vr={class:"header"},pr={class:"buttons"},hr=T({__name:"Header",emits:["toggle-expansion","navigated"],setup(o,{emit:e}){const a=e;return(t,s)=>{const r=Ne("router-link");return v(),S("div",vr,[f(r,{class:"logo",to:"/",onClick:s[0]||(s[0]=i=>a("navigated"))},{default:y(()=>[f(mr,{class:"logo"})]),_:1}),c("div",pr,[f(n(be),{icon:"fas fa-bars",onClick:s[1]||(s[1]=i=>a("toggle-expansion"))})])])}}});const fr=x(hr,[["__scopeId","data-v-a5771fce"]]),gr=o=>(pe("data-v-2a3f89a0"),o=o(),he(),o),br={class:"buttons"},yr=gr(()=>c("i",{class:"fas fa-trash"},null,-1)),$r=["innerHTML"],Lt=T({__name:"WalletConnectButton",emits:["connected"],setup(o,{emit:e}){const{t:a}=q(),t=e,s=Ct(),r=async()=>{await uo(!0);const h=at(),m=await _o(h);s.connected=m,m&&t("connected")},i=()=>{window.localStorage.removeItem("connectedWallet")};return(h,m)=>(v(),S("div",br,[f(n(be),{class:"button",primary:!0,onClick:r},{default:y(()=>[G(z(n(a)("connect-your-wallet")),1)]),_:1}),f(n(je),{class:"tooltip"},{item:y(()=>[f(n(be),{class:"button clear",onClick:i},{default:y(()=>[yr]),_:1})]),default:y(()=>[c("div",{class:"ping",innerHTML:n(a)("clear-cache")},null,8,$r)]),_:1})]))}});function Yt(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{"connect-your-wallet":a=>{const{normalize:t}=a;return t(["Connect Wallet"])},"clear-cache":a=>{const{normalize:t}=a;return t(["<b>Clear Cache</b><br /> Press this button to possibly solve the issue of a non-working connect button.<br /> This problem often occurs when you switch between wallet extensions in your browser.<br /> Try to connect again after pressing this button."])}}})}function Jt(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"zh",resource:{"connect-your-wallet":a=>{const{normalize:t}=a;return t(["连接你的钱包"])},"clear-cache":a=>{const{normalize:t}=a;return t(["<b>清除缓存</b><br /> 按下这个按钮，可能会解决连接按钮不工作的问题.<br /> 这个问题经常发生在你在浏览器中切换钱包扩展时.<br /> 按下这个按钮后，尝试再次连接."])}}})}typeof Yt=="function"&&Yt(Lt);typeof Jt=="function"&&Jt(Lt);const wr=x(Lt,[["__scopeId","data-v-2a3f89a0"]]),Cr={class:"wallet"},kr={key:0,class:"connected"},Sr={key:0,class:"incorrectNetwork"},Tr={class:"info"},Pr={key:1,class:"notConnected"},xr={key:0,class:"info"},go=T({__name:"Wallet",props:{labelPleaseConnect:{}},setup(o){const{t:e}=q(),a=Ct(),t=w(()=>a.connected),s=w(()=>a.correctNetwork),r=w(()=>X(a.address));ee(async()=>{await uo();const m=at(),d=await _o(m);a.connected=d;const u=await mo(m);a.correctNetwork=u}),R(()=>a.connected,async m=>{const d=at(),u=d&&m?await us(d):void 0;a.setAddress(u)},{immediate:!0});const i=async()=>{const m=at();m&&(await m.send("wallet_switchEthereumChain",[{chainId:"0x1"}]),window.location.reload())},h=async()=>{await cs(),a.connected=!1};return(m,d)=>(v(),S("div",Cr,[t.value?(v(),S("div",kr,[s.value?M("",!0):(v(),S("div",Sr,[f(n(be),{class:"changeNetwork",value:"Change Network",primary:!0,onClick:i}),c("span",Tr,z(n(e)("incorrect-network")),1)])),f(n(be),{class:"disconnect",icon:"fas fa-check",value:r.value,onClick:h},null,8,["value"])])):(v(),S("div",Pr,[f(wr),m.labelPleaseConnect?(v(),S("span",xr,z(m.labelPleaseConnect),1)):M("",!0)]))]))}});function Kt(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{"incorrect-network":a=>{const{normalize:t}=a;return t(["You are not on the correct network; should be Ethereum"])}}})}typeof Kt=="function"&&Kt(go);const zr=x(go,[["__scopeId","data-v-7d2ec4f7"]]),Be={blue:"#5a74f6",yellow:"#f6f15a",green:"#5af662",red:"#f65a5a",purple:"#bd5af6",backgroundColor:"#292929",level1:"#292929",level2:"#3c3c3c",level3:"#535353",level4:"#6a6a6a",level5:"#949494",level6:"#aea8af",text:"#ffffff"};Be.blue,Be.yellow,Be.green,Be.red,Be.purple;const qe={blue:"#5baefb",yellow:"#f9ab1a",green:"#05c70c",red:"#f9341a",purple:"#be1af9",backgroundColor:"#f7f7f7",level1:"#f7f7f7",level2:"#efefef",level3:"#e8e8e8",level4:"#d8d8d8",level5:"#6e6e77",level6:"#212124",text:"#000000"};qe.blue,qe.yellow,qe.green,qe.red,qe.purple;const We={blue:"#1a8df9",yellow:"#f9ab1a",green:"#05c70c",red:"#f9341a",purple:"#be1af9",backgroundColor:"#f5f5f5",level1:"#fafafa",level2:"#f2f2f2",level3:"#ebebeb",level4:"#a1a1a1",level5:"#27272a",level6:"#212124",text:"#333333"};We.blue,We.yellow,We.green,We.red,We.purple;function Qt(o){return o==="chad"?We:o==="light"?qe:Be}const ut=Ge({id:"breadcrumbStore",state:()=>({crumbs:[],show:!1})}),It=Ge({id:"pageStore",state:()=>({pages:[]})}),Y=Ge({id:"settingsStore",state:()=>({theme:"light"})});function N(){return Gn}const pt="https://api.prismamonitor.com/v1";class At extends Ce{async getCollateralPrices(e,a,t){return this.fetch(`${pt}/collateral/${e}/${a}/prices?period=${t}`)}async getCollateralPriceImpact(e,a){return this.fetch(`${pt}/collateral/${e}/${a}/impact`)}async getCollateralInfo(e,a){return this.fetch(`${pt}/collateral/${e}/${a}/info`)}}const Xt="https://api.prismamonitor.com/v1";class Dt extends Ce{async getLiquidations(e,a){return He(s=>this.fetch(`${Xt}/liquidations/${e}/${a}?items=100&page=${s}&order_by=block_timestamp&desc=true`).then(r=>r.liquidations),1,100)}async getLiquidationsForTrove(e,a){return He(s=>this.fetch(`${Xt}/liquidations/${e}?items=100&page=${s}&order_by=block_timestamp&desc=true&trove_filter=${a}`).then(r=>r.liquidations),1,100)}}const Pe="https://api.prismamonitor.com/v1";class Ae extends Ce{async getHistoricalOpenTrovesOverview(e,a){return this.fetch(`${Pe}/managers/${e}/open_troves?period=${a}`)}async getHistoricalCollateralRatiosOverview(e,a){return this.fetch(`${Pe}/managers/${e}/collateral_ratios?period=${a}`)}async getCollateralRatioGrouped(e,a){return this.fetch(`${Pe}/managers/${e}/global_collateral_ratio?period=${a}`)}async getHistoricalCollateralOverview(e,a){return this.fetch(`${Pe}/managers/${e}/collateral?period=${a}`)}async getRatioDistributionGrouped(e){return this.fetch(`${Pe}/managers/${e}/ratio_distribution`)}async getLargeTrovePositions(e,a,t){return this.fetch(`${Pe}/managers/${e}/${a}/large_positions?unit=${t}`)}async getVaultCollateralRatio(e,a,t){return this.fetch(`${Pe}/managers/${e}/${a}/collateral_ratio?period=${t}`)}async getVaultTroveCount(e,a,t){return this.fetch(`${Pe}/managers/${e}/${a}/open_trove_count?period=${t}`)}async getTroveDistribution(e,a,t){return this.fetch(`${Pe}/managers/${e}/${a}/histograms?unit=${t}`)}}const et="https://api.prismamonitor.com/v1";class dt extends Ce{async getPriceHistory(e,a){return this.fetch(`${et}/mkusd/${e}/history?period=${a}`)}async getPriceHistogram(e,a,t){return this.fetch(`${et}/mkusd/${e}/histogram?period=${t}&bins=${a}`)}async getLargeStableCoinHolders(e){return this.fetch(`${et}/mkusd/${e}/holders`)}async getStableCoinKPI(e){return this.fetch(`${et}/mkusd/${e}/general`)}async getCurvePoolDepth(e){return this.fetch(`${et}/mkusd/${e}/depth`)}}const Zt="https://api.prismamonitor.com/v1";class Ot extends Ce{async getRedemptions(e,a){return He(s=>this.fetch(`${Zt}/redemptions/${e}/${a}?items=100&page=${s}&order_by=block_timestamp&desc=true`).then(r=>r.redemptions),1,100)}async getRedemptionsForTrove(e,a){return He(s=>this.fetch(`${Zt}/redemptions/${e}?items=100&page=${s}&order_by=block_timestamp&desc=true&trove_filter=${a}`).then(r=>r.redemptions),1,100)}}const ea="https://api.prismamonitor.com/v1";class bo extends Ce{async getSnapshots(){return this.fetch(`${ea}/revenue/ethereum/snapshots?period=3m`)}async getBreakdown(){return this.fetch(`${ea}/revenue/ethereum/breakdown`)}}const Me="https://api.prismamonitor.com/v1";class Ke extends Ce{async getPoolTvl(e,a){return this.fetch(`${Me}/pool/${e}/deposits?period=${a}`)}async getStableFlow(e,a){return this.fetch(`${Me}/pool/${e}/stable_operations?period=${a}`)}async getStableDistribution(e){return this.fetch(`${Me}/pool/${e}/histogram/deposits`)}async getCumulativeWithdrawals(e,a){return this.fetch(`${Me}/pool/${e}/cumulative_withdrawals?period=${a}`)}async getTopStableDeposits(e,a,t){return this.fetch(`${Me}/pool/${e}/top/stable_deposits?top=${a}&period=${t}`)}async getTopStableWithdrawals(e,a,t){return this.fetch(`${Me}/pool/${e}/top/stable_withdrawals?top=${a}&period=${t}`)}}const tt="https://api.prismamonitor.com/v1";class Qe extends Ce{async getTroves(e,a,t){return He(r=>this.fetch(`${tt}/trove/${e}/${a}/troves?items=100&page=${r}&order_by=last_update&desc=true${t?"&owner_filter="+t:""}`).then(i=>i.troves),1,100)}async getTroveSnapshots(e,a,t){return this.fetch(`${tt}/trove/${e}/${a}/snapshots/${t}`)}async getTroveDetail(e,a,t){return this.fetch(`${tt}/trove/${e}/${a}/${t}`)}async getTroveHistory(e,a,t){return this.fetch(`${tt}/trove/${e}/${a}/history/${t}`)}async getTroveRank(e,a,t){return this.fetch(`${tt}/trove/${e}/${a}/rank/${t}`)}}const lt="https://api.prismamonitor.com/v1";function rt(o){switch(o){case"convex":return"0x0c73f1cfd5c9dfc150c8707aa47acbd14f0be108";case"yearn":return"0x774a55c3eeb79929fd445ae97191228ab39c4d0f";default:throw new Error("Unknown contract")}}class ot extends Ce{async getTVL(e){return this.fetch(`${lt}/staking/${rt(e)}/tvl?period=all&groupby=day`)}async getFlow(e){return this.fetch(`${lt}/staking/${rt(e)}/flow?period=all&groupby=day`)}async getDistribution(e){return this.fetch(`${lt}/staking/${rt(e)}/distribution`)}async getSnapshots(e){return this.fetch(`${lt}/staking/${rt(e)}/snapshots?period=7d`)}}const Lr="wss://api.prismamonitor.com/v1/prisma/ws",ta="troves_overview";let ht=null;class Xe{constructor(e,a){if(this.chain=a,this.socket=e,ht){this.send("snapshots");return}ht=this.socket.pipe(Ue(t=>t),yt(t=>t.subscription.chain===this.chain&&t.channel===ta),Ue(t=>t.payload),$t(1)),this.send("subscribe"),this.send("snapshots")}get overview$(){return ht}send(e){const a={action:e,channel:ta,settings:[{chain:this.chain}]};this.socket.next(a)}}function Ir(o){switch(o){case"api":return Lr;case"prices":return Kn;default:throw new Error("Unknown socket type")}}const Le=Ge({id:"socketStore",state:()=>({sockets:{api:null,prices:null}}),getters:{getSocket:o=>e=>{if(!o.sockets[e]){const a=Ir(e);o.sockets[e]=On(a)}return o.sockets[e]}}}),Ar={class:"theme"},Dr={class:"label"},Or={class:"colors"},Vr=T({__name:"SelectTheme",setup(o){const e=[{id:"dark",colors:Qt("dark")},{id:"light",colors:Qt("light")}],a=Y(),t=V(e[0]),s=V(!1);ee(()=>{const h=window.matchMedia("(prefers-color-scheme: dark)").matches,m=localStorage.getItem("theme");if(!m&&h)i(e.find(d=>d.id==="dark"));else{const d=e.find(u=>u.id===m)??e.find(u=>u.id==="light")??e[0];i(d)}});const r=()=>{s.value=!s.value},i=h=>{t.value=h,window.document.documentElement.setAttribute("data-theme",t.value.id),a.theme=t.value.id,localStorage.setItem("theme",t.value.id)};return(h,m)=>(v(),P(n(xt),{class:"select direction-up",options:e.map(d=>d),selected:t.value,open:s.value,onOpen:r,onClose:m[0]||(m[0]=d=>s.value=!1),onInput:i},{item:y(d=>[c("div",Ar,[c("div",Dr,z(d.item.id),1),c("div",Or,[c("div",{class:"color",style:$e({"background-color":d.item.colors.backgroundColor})},null,4),c("div",{class:"color",style:$e({"background-color":d.item.colors.level1})},null,4),c("div",{class:"color",style:$e({"background-color":d.item.colors.level2})},null,4),c("div",{class:"color",style:$e({"background-color":d.item.colors.blue})},null,4),c("div",{class:"color",style:$e({"background-color":d.item.colors.yellow})},null,4),c("div",{class:"color",style:$e({"background-color":d.item.colors.green})},null,4),c("div",{class:"color",style:$e({"background-color":d.item.colors.red})},null,4),c("div",{class:"color",style:$e({"background-color":d.item.colors.purple})},null,4)])])]),_:1},8,["options","selected","open"]))}});const Rr=x(Vr,[["__scopeId","data-v-1b602a1a"]]),Mr={class:"bottom"},Br={class:"buttons"},qr={href:"https://twitter.com/0xAlunara",target:"_blank"},Wr={href:"https://github.com/Llama-Airforce/Llama-Airforce",target:"_blank"},Fr={class:"selectors"},Er=T({__name:"Bottom",emits:["navigated"],setup(o,{emit:e}){const a=e,t=async()=>{await navigator.clipboard.writeText(window.location.href)};return(s,r)=>{const i=Ne("router-link");return v(),S("div",Mr,[c("div",Br,[f(n(be),{class:"copy",icon:"fas fa-link",onClick:t}),c("a",qr,[f(n(be),{icon:"fab fa-twitter"})]),c("a",Wr,[f(n(be),{icon:"fab fa-github"})]),f(i,{to:"/code"},{default:y(()=>[f(n(be),{icon:"fas fa-code",onClick:r[0]||(r[0]=h=>a("navigated"))})]),_:1})]),c("div",Fr,[f(Rr,{class:"themes"})]),f(zr)])}}});const Ur=x(Er,[["__scopeId","data-v-0cf9bbd9"]]),Nr=T({__name:"Navigation",emits:["navigated"],setup(o,{emit:e}){const a=e,t=It(),s=V(!1),r=()=>{s.value=!1,a("navigated")};return(i,h)=>(v(),S("div",{class:F(["menu-desktop",{expanded:s.value}])},[f(fr,{onToggleExpansion:h[0]||(h[0]=m=>s.value=!s.value),onNavigated:r}),f(n(kt),{class:"menu-content",expanded:s.value},{default:y(()=>[f(n(nr),{pages:n(t).pages,onNavigated:r},null,8,["pages"]),f(Ur,{onNavigated:r})]),_:1},8,["expanded"])],2))}});const Hr=x(Nr,[["__scopeId","data-v-9f068ce8"]]),jr={class:"root"},Gr={class:"main"},Yr={class:"content"},Jr=T({__name:"App",setup(o){const e=ut(),a=Ve(),t=Ye();R(()=>a.fullPath,r=>{["/pool","/mkusd","/redemptions","/liquidation","/profile","/wrappers","/veprisma"].some(h=>r.startsWith(h))&&(e.show=!1)});const s=async r=>{r.pathName&&await t.push({name:r.pathName})};return(r,i)=>{const h=Ne("notifications"),m=Ne("router-view");return v(),S("div",jr,[f(h,{width:600,duration:-1}),f(Hr,{class:"navigation"}),c("main",Gr,[f(Bt,{name:"fade",mode:"out-in"},{default:y(()=>[n(e).show?(v(),P(n(as),{key:0,class:"breadcrumb",crumbs:n(e).crumbs,onCrumb:s},null,8,["crumbs"])):M("",!0)]),_:1}),c("div",Yr,[f(m,null,{default:y(({Component:d})=>[f(Bt,{name:"fade",mode:"out-in"},{default:y(()=>[(v(),P(wt(d)))]),_:2},1024)]),_:1})])])])}}});const Kr=x(Jr,[["__scopeId","data-v-9e95b225"]]),Qr="/assets/404-3a4df870.png",Xr=o=>(pe("data-v-c157f3ee"),o=o(),he(),o),Zr={class:"not-found"},ei={class:"not-found-container"},ti=Xr(()=>c("img",{src:Qr},null,-1)),yo=T({__name:"NotFound",setup(o){const{t:e}=q();return(a,t)=>(v(),S("div",Zr,[c("div",ei,[f(n(oe),null,{default:y(()=>[G(z(n(e)("404")),1)]),_:1}),ti])]))}});function aa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{404:a=>{const{normalize:t}=a;return t(["Where are you going, pilot? Page not found, please return home fren."])}}})}typeof aa=="function"&&aa(yo);const ai=x(yo,[["__scopeId","data-v-c157f3ee"]]),oi={class:"contracts"},ni={class:"row"},si={class:"title"},li=["href"],ri={class:"title"},ii=["href"],$o=T({__name:"Code",setup(o){const{t:e}=q(),t=[{name:"Llama Airforce",contracts:[{contract:Nn,description:"multisig",gnosis:!0},{contract:Hn,description:"treasury",gnosis:!0},{contract:jn,description:"treasury-arbitrum",network:"arbitrum",gnosis:!0}]}],s=[{name:"Llama Airforce",url:"https://github.com/Llama-Airforce/Llama-Airforce",description:"repo-laf"}],r=i=>{switch(i.network){case"arbitrum":return i.gnosis?`https://app.safe.global/arb1:${i.contract}`:`https://arbiscan.io/address/${i.contract}`;case"ethereum":default:return i.gnosis?`https://app.safe.global/eth:${i.contract}`:`https://etherscan.io/address/${i.contract}`}};return(i,h)=>(v(),S("div",oi,[c("div",ni,[f(n(re),{class:"datatable-repositories","columns-data":"repositories-columns-data",rows:s,columns:[n(e)("repository"),n(e)("description")]},{"header-content":y(()=>[c("div",si,z(n(e)("repositories")),1)]),row:y(m=>[c("div",null,[c("a",{href:m.item.url,target:"_blank"},z(m.item.name),9,li)]),c("div",null,z(n(e)(m.item.description)),1)]),_:1},8,["columns"])]),(v(),S(ae,null,ue(t,(m,d)=>f(n(re),{key:d,class:"datatable-contracts","columns-header":"1fr","columns-data":"contracts-columns-data",rows:m.contracts,columns:[n(e)("contract"),n(e)("description")]},{"header-content":y(()=>[c("div",ri,z(n(e)(m.name)),1)]),row:y(u=>[c("div",null,[c("a",{href:r(u.item),target:"_blank"},z(u.item.contract),9,ii)]),c("div",null,z(n(e)(u.item.description)),1)]),_:2},1032,["rows","columns"])),64))]))}});function oa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{repositories:a=>{const{normalize:t}=a;return t(["Repositories"])},repository:a=>{const{normalize:t}=a;return t(["Repository"])},description:a=>{const{normalize:t}=a;return t(["Description"])},contract:a=>{const{normalize:t}=a;return t(["Contract"])},other:a=>{const{normalize:t}=a;return t(["Other"])},"repo-laf":a=>{const{normalize:t}=a;return t(["This website's front-end, excluding the Union"])},multisig:a=>{const{normalize:t}=a;return t(["Multisig"])},treasury:a=>{const{normalize:t}=a;return t(["Treasury"])},"treasury-arbitrum":a=>{const{normalize:t}=a;return t(["Treasury Arbitrum"])}}})}typeof oa=="function"&&oa($o);const ci=x($o,[["__scopeId","data-v-7220715c"]]);function ui(){const o=It(),e=[{path:"/code",component:ci},...o.pages.flatMap(t=>t.routes),{path:"/:pathMatch(.*)*",name:"NotFound",component:ai}];return Vn({history:Rn(),routes:e})}const di=o=>({chart:{id:"chart",background:"transparant",foreColor:o.colors.level5,fontFamily:"SF Mono, Consolas, monospace",toolbar:{autoSelected:"zoom",tools:{download:!1,pan:!1}},zoom:{autoScaleYaxis:!0}},colors:o.colorsArray,grid:{borderColor:o.colors.level5,strokeDashArray:4,xaxis:{lines:{show:!1}}},fill:{type:"solid",opacity:1},stroke:{curve:"smooth",width:2},theme:{mode:"dark"},xaxis:{type:"category",axisBorder:{color:o.colors.level5,height:1},axisTicks:{color:o.colors.level5},title:{color:o.colors.level5}},yaxis:{tickAmount:4,axisBorder:{color:o.colors.level5},axisTicks:{color:o.colors.level5},title:{color:o.colors.level5}}});function ie(o,e){const a=di(o),t=(s,r)=>{if(typeof r=="object"){H.mergeWith(s,r,t);return}else return s||r};return H.mergeWith(e,a,t)}const Fe={blue:"#316eff",yellow:"#f6f15a",green:"#5af662",red:"#f65a5a",purple:"#bd5af6",backgroundColor:"#212121",level1:"#2b2b2b",level2:"#404040",level3:"#545454",level4:"#787878",level5:"#9e9e9e",level6:"#c4c4c4",text:"#ffffff"},_i=[Fe.blue,Fe.yellow,Fe.green,Fe.red,Fe.purple,"#ff8f33"],Ee={blue:"#5baefb",yellow:"#f9ab1a",green:"#05c70c",red:"#f9341a",purple:"#be1af9",backgroundColor:"#f7f7f7",level1:"#f7f7f7",level2:"#efefef",level3:"#e8e8e8",level4:"#d8d8d8",level5:"#6e6e77",level6:"#212124",text:"#000000"},mi=[Ee.blue,Ee.yellow,Ee.green,Ee.red,Ee.purple];function j(o){return o==="light"?Ee:Fe}function se(o){return o==="light"?mi:_i}const wo=T({__name:"ChartOpenTroves",setup(o){const{t:e}=q(),a=new Ae(N()),t=Y(),{loading:s,data:r}=U(()=>a.getHistoricalOpenTrovesOverview("ethereum","6m").then(u=>u.managers),[]),i=w(()=>{const u=j(t.theme),l=se(t.theme);return ie({colors:u,colorsArray:l},{chart:{type:"bar",stacked:"true",animations:{enabled:!1},toolbar:{show:!1}},xaxis:{categories:h.value,labels:{formatter:d,rotate:-60},tickPlacement:"on"},plotOptions:{bar:{columnWidth:"50%"}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0,custom:({series:p,dataPointIndex:_,w:b})=>{let g=0;const D=p.map((k,O)=>{const A=k[_];return g+=A,`<div><b>${b.globals.seriesNames[O]}</b>: ${A}</div>`});return D.push(`<div><b>Total</b>: ${g}</div>`),D.join("")}}})}),h=w(()=>r.value.length===0||r.value[0].data.length===0?[]:r.value[0].data.map(u=>new Date(u.timestamp*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"}))),m=w(()=>r.value.length===0?[]:r.value.map(u=>({name:u.manager,data:u.data.map(l=>l.value)}))),d=u=>u;return(u,l)=>(v(),P(n(ce),{class:"chart",title:n(e)("title"),loading:n(s),options:i.value,series:m.value},null,8,["title","loading","options","series"]))}});function na(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Open troves"])}}})}typeof na=="function"&&na(wo);const vi=x(wo,[["__scopeId","data-v-33ccb2a2"]]),pi=(o,e)=>{const a=j(e);return{width:o.clientWidth,height:o.clientHeight,layout:{background:{type:Mn.Solid,color:a.backgroundColor},textColor:a.level5,fontFamily:"SF Mono, Consolas, monospace"},grid:{vertLines:{visible:!1},horzLines:{color:a.level4,style:Bn.SparseDotted}},rightPriceScale:{borderVisible:!1},timeScale:{borderVisible:!1,fixLeftEdge:!0,fixRightEdge:!0},handleScale:!1,handleScroll:!1}};function _e(o,e,a){const t=pi(o,e),s=(r,i)=>{if(typeof i=="object"){H.mergeWith(r,i,s);return}else return r||i};return H.mergeWith(a,t,s)}const Co=T({__name:"ChartCollateralRatio",setup(o){const{t:e}=q(),a=new Ae(N());let t,s;const r=Y(),i=V(null),{loading:h,data:m}=U(()=>a.getCollateralRatioGrouped("ethereum","all").then(p=>p.data),[]);ee(()=>{i.value&&(t=de(i.value,d(i.value,r.theme)),s=t.addAreaSeries(u(r.theme)),l(m.value))}),R(()=>r.theme,p=>{i.value&&(t.applyOptions(d(i.value,p)),s.applyOptions(u(p)))}),R(m,p=>{l(p)});const d=(p,_)=>_e(p,_,{rightPriceScale:{scaleMargins:{top:.1,bottom:.1}}}),u=p=>{const _=j(p);return{priceFormat:{type:"percent",precision:2,minMove:.1},lineWidth:2,lineType:ve.WithSteps,lineColor:_.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},l=p=>{if(!t||!s)return;const _=H.chain(p).map(b=>({time:b.timestamp,value:b.value*100})).uniqWith((b,g)=>b.time===g.time).orderBy(b=>b.time,"asc").value();_.length>0&&s.setData(_),t.timeScale().fitContent()};return(p,_)=>(v(),P(n(oe),{class:"chart-container",title:n(e)("title"),loading:n(h)},{default:y(()=>[c("div",{ref_key:"chartRef",ref:i,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function sa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Global collateral ratio"])}}})}typeof sa=="function"&&sa(Co);const hi=x(Co,[["__scopeId","data-v-c4a54209"]]),ko=T({__name:"ChartRatioDeciles",setup(o){const{t:e}=q(),a=new Ae(N()),t=Y(),{loading:s,data:r}=U(()=>a.getRatioDistributionGrouped("ethereum").then(l=>l.deciles),[]),i=w(()=>{const l=j(t.theme),p=se(t.theme);return ie({colors:l,colorsArray:p},{chart:{type:"bar",animations:{enabled:!1},toolbar:{show:!1}},xaxis:{categories:h.value,labels:{formatter:d,rotate:-60},tickPlacement:"on"},yaxis:{labels:{formatter:u}},plotOptions:{bar:{columnWidth:"50%"}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0}})}),h=w(()=>r.value.map(l=>l.label)),m=w(()=>[{name:e("debt"),data:Object.values(r.value).map(l=>l.data)}]),d=l=>l,u=l=>`$${Z(l,0,"dollar")}${K(l,"dollar")}`;return(l,p)=>(v(),P(n(ce),{class:"chart",title:n(e)("title"),loading:n(s),options:i.value,series:m.value},null,8,["title","loading","options","series"]))}});function la(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Debt per Collateral Ratio Deciles"])},debt:a=>{const{normalize:t}=a;return t(["Debt"])}}})}typeof la=="function"&&la(ko);const fi=x(ko,[["__scopeId","data-v-191f8035"]]),So=T({__name:"ChartGlobalCollateral",setup(o){const{t:e}=q(),a=new Ae(N()),t=Y(),{loading:s,data:r}=U(()=>a.getHistoricalCollateralOverview("ethereum","6m").then(l=>l.managers),[]),i=w(()=>{const l=j(t.theme),p=se(t.theme);return ie({colors:l,colorsArray:p},{chart:{type:"area",stacked:"true",animations:{enabled:!1},toolbar:{show:!1}},xaxis:{categories:h.value,labels:{formatter:d,rotate:-60},tickPlacement:"on"},yaxis:{labels:{formatter:u}},stroke:{curve:"smooth"},fill:{type:"gradient",gradient:{opacityFrom:.6,opacityTo:.8}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}})}),h=w(()=>r.value.length===0||r.value[0].data.length===0?[]:r.value[0].data.map(l=>new Date(l.timestamp*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"}))),m=w(()=>r.value.length===0?[]:r.value.map(l=>({name:l.manager,data:l.data.map(p=>p.value)}))),d=l=>l,u=l=>`$${Z(l,1,"dollar")}${K(l,"dollar")}`;return(l,p)=>(v(),P(n(ce),{class:"chart",title:n(e)("title"),loading:n(s),options:i.value,series:m.value},null,8,["title","loading","options","series"]))}});function ra(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Collateral value"])}}})}typeof ra=="function"&&ra(So);const gi=x(So,[["__scopeId","data-v-43d09eb6"]]);function xe(o){switch(o.toLocaleLowerCase()){case"0x63cc74334f4b1119276667cf0079ac0c8a96cfb2":return"cbETH";case"0xbf6883a03fd2fcfa1b9fc588ad6193b3c3178f8f":return"wstETH";case"0xe0e255fd5281bec3bb8fa1569a20097d9064e445":return"rETH";case"0xf69282a7e7ba5428f92f610e7afa1c0cedc4e483":return"sfrxETH";default:throw new Error(`Unknown collateral for ${o}`)}}function Ie(o){return o==="all"?"":`icons/tokens/${(a=>{switch(a){case"cbETH":return"cbeth.webp";case"wstETH":return"steth.webp";case"rETH":return"reth.webp";case"sfrxETH":return"frxeth.webp";default:return""}})(o)}`}const nt=o=>(pe("data-v-576bc818"),o=o(),he(),o),bi={class:"title"},yi=["src"],$i={class:"number"},wi={class:"number"},Ci={class:"number"},ki={class:"number"},Si={class:"number"},Ti={class:"number"},Pi=nt(()=>c("div",null,null,-1)),xi=nt(()=>c("div",null,null,-1)),zi={class:"number"},Li={class:"number"},Ii=nt(()=>c("div",null,null,-1)),Ai=nt(()=>c("div",null,null,-1)),Di={class:"number"},Oi=nt(()=>c("div",null,null,-1)),To=T({__name:"TableVaults",setup(o){const{t:e}=q(),a=Le().getSocket("api"),t=new Xe(a,"ethereum"),s=V(""),r=ye(t.overview$,[]),i=w(()=>H.chain(r.value).filter(m=>{const d=s.value.toLocaleLowerCase().split(" "),u=l=>d.some(p=>l.toLocaleLowerCase().includes(p));return u(m.name)||u(m.address)}).value()),h=w(()=>r.value.length===0);return(m,d)=>(v(),P(n(re),{class:"datatable-vaults","columns-header":"minmax(7rem, 1fr) minmax(auto, 25rem)","columns-data":"vaults-columns-data",loading:h.value,rows:i.value,columns:["","Name","TVL","Debt","CR","MCR","Troves","Price"]},{"header-content":y(()=>[c("div",bi,z(n(e)("title")),1),f(n(fe),{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=u=>s.value=u),class:"search",search:!0,placeholder:n(e)("search-placeholder")},null,8,["modelValue","placeholder"])]),row:y(u=>[c("img",{src:n(Ie)(u.item.name)},null,8,yi),c("div",null,z(u.item.name),1),c("div",$i,[f(n(B),{value:u.item.tvl,precision:0,"show-symbol":!1,type:"dollar"},null,8,["value"])]),c("div",wi,[f(n(B),{value:u.item.debt,precision:0,"show-symbol":!1,type:"dollar"},null,8,["value"])]),c("div",Ci,[f(n(B),{value:u.item.cr*100,precision:2,type:"percentage"},null,8,["value"])]),c("div",ki,[f(n(B),{value:u.item.mcr*100,precision:2,type:"percentage"},null,8,["value"])]),c("div",Si,z(u.item.open_troves),1),c("div",Ti,[f(n(B),{type:"dollar",value:Math.round(u.item.price),precision:1/0},null,8,["value"])])]),"row-aggregation":y(()=>[Pi,xi,c("div",zi,[f(n(B),{value:i.value.reduce((u,l)=>u+l.tvl,0),precision:0,"show-symbol":!1,type:"dollar"},null,8,["value"])]),c("div",Li,[f(n(B),{value:i.value.reduce((u,l)=>u+l.debt,0),precision:0,"show-symbol":!1,type:"dollar"},null,8,["value"])]),Ii,Ai,c("div",Di,[f(n(B),{value:i.value.reduce((u,l)=>u+l.open_troves,0),precision:0,"show-symbol":!1,type:"dollar"},null,8,["value"])]),Oi]),"row-details":y(()=>[G("   ")]),_:1},8,["loading","rows"]))}});function ia(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Vaults"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof ia=="function"&&ia(To);const Vi=x(To,[["__scopeId","data-v-576bc818"]]),_t=Ge({id:"vaultStore",state:()=>({vault:null,trove:null})}),Ri={class:"vaults"},Mi=T({__name:"Vaults",setup(o){const e=ut(),a=_t(),t=Ye();ee(()=>{e.show=!0,e.crumbs=[{id:"vaults",label:"Vaults",pathName:"vaults"}]});const s=async r=>{a.vault=r,await t.push({name:"prismavault",params:{tab:"",vaultAddr:r.address}})};return(r,i)=>(v(),S("div",Ri,[f(Vi,{style:{"grid-column":"1 / -1"},onSelected:s}),f(hi),f(fi),f(gi),f(vi)]))}});const Bi=x(Mi,[["__scopeId","data-v-8eb6487f"]]),Po=T({__name:"ChartPoolTvl",setup(o){const{t:e}=q(),a=new Ke(N());let t,s;const r=Y(),i=V(null),{loading:h,data:m}=U(()=>a.getPoolTvl("ethereum","1m").then(_=>_.deposits),[]);ee(()=>{i.value&&(t=de(i.value,d(i.value,r.theme)),s=t.addAreaSeries(u(r.theme)),l(m.value))}),R(()=>r.theme,_=>{i.value&&(t.applyOptions(d(i.value,_)),s.applyOptions(u(_)))}),R(m,_=>{l(_)});const d=(_,b)=>_e(_,b,{leftPriceScale:{scaleMargins:{top:.1,bottom:.1}},localization:{priceFormatter:g=>p(g)}}),u=_=>{const b=j(_);return{priceFormat:{type:"price",precision:2,minMove:.001},lineWidth:2,lineType:ve.WithSteps,lineColor:b.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},l=_=>{if(!t||!s)return;const b=H.chain(_).map(g=>({time:g.timestamp,value:g.value})).uniqWith((g,D)=>g.time===D.time).orderBy(g=>g.time,"asc").value();b.length>0&&s.setData(b),t.timeScale().fitContent()},p=_=>`$${Z(_,1,"dollar")}${K(_,"dollar")}`;return(_,b)=>(v(),P(n(oe),{class:"chart-container",title:n(e)("title"),loading:n(h)},{default:y(()=>[c("div",{ref_key:"chartRef",ref:i,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function ca(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Total deposits in stability pool"])}}})}typeof ca=="function"&&ca(Po);const qi=x(Po,[["__scopeId","data-v-1d6c593e"]]),xo=T({__name:"ChartStableFlow",setup(o){const{t:e}=q(),a=new Ke(N()),t=Y(),{loading:s,data:r}=U(()=>a.getStableFlow("ethereum","1m"),{deposits:[],withdrawals:[]}),i=w(()=>{const l=j(t.theme),p=se(t.theme);return ie({colors:l,colorsArray:p},{chart:{type:"bar",stacked:"true",animations:{enabled:!1},toolbar:{show:!1}},colors:[l.green,l.red],xaxis:{categories:h.value,labels:{formatter:d,rotate:-60},tickPlacement:"on"},yaxis:{labels:{formatter:u}},plotOptions:{bar:{columnWidth:"50%"}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0,custom:({series:_,dataPointIndex:b,w:g})=>{let D=0;const k=_.map((O,A)=>{const L=O[b];return D+=L,`<div><b>${g.globals.seriesNames[A]}</b>:	${u(L)}</div>`});return k.push(`<div><b>Total</b>:	${u(D)}</div>`),k.join("")}}})}),h=w(()=>r.value.deposits.length===0?[]:r.value.deposits.map(l=>new Date(l.timestamp*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"}))),m=w(()=>[{name:e("deposits"),data:Object.values(r.value.deposits).map(l=>l.value)},{name:e("withdrawals"),data:Object.values(r.value.withdrawals).map(l=>l.value)}]),d=l=>l,u=l=>`$${Z(l,0,"dollar")}${K(l,"dollar")}`;return(l,p)=>(v(),P(n(ce),{title:n(e)("title"),loading:n(s),options:i.value,series:m.value},null,8,["title","loading","options","series"]))}});function ua(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["mkUSD deposits and withdrawals"])},deposits:a=>{const{normalize:t}=a;return t(["Deposits"])},withdrawals:a=>{const{normalize:t}=a;return t(["Withdrawals"])}}})}typeof ua=="function"&&ua(xo);const Wi=x(xo,[["__scopeId","data-v-82b62776"]]),zo=T({__name:"ChartDepositDistribution",setup(o){const{t:e}=q(),a=new Ke(N()),t=Y(),{loading:s,data:r}=U(()=>a.getStableDistribution("ethereum").then(d=>d.distribution),[]),i=w(()=>{const d=j(t.theme),u=se(t.theme);return ie({colors:d,colorsArray:u},{chart:{id:"distribution",type:"bar",animations:{enabled:!1},toolbar:{show:!1}},xaxis:{categories:m.value,labels:{rotate:-45},tickPlacement:"on"},legend:{inverseOrder:!0},stroke:{width:.5},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0}})}),h=w(()=>[{name:e("numPos"),data:Object.values(r.value).map(d=>d.value)}]),m=w(()=>r.value.map(d=>d.label));return(d,u)=>(v(),P(n(ce),{title:n(e)("title"),loading:n(s),series:h.value,options:i.value},null,8,["title","loading","series","options"]))}});function da(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Distribution of current user deposits"])},numPos:a=>{const{normalize:t}=a;return t(["# of positions"])}}})}typeof da=="function"&&da(zo);const Fi=x(zo,[["__scopeId","data-v-d205b3d2"]]),Lo=T({__name:"ChartCumulativeWithdrawals",setup(o){const{t:e}=q(),a=new Ke(N());let t,s;const r=Y(),i=V(null),{loading:h,data:m}=U(()=>a.getCumulativeWithdrawals("ethereum","all").then(_=>_.withdrawals),[]);ee(()=>{i.value&&(t=de(i.value,d(i.value,r.theme)),s=t.addAreaSeries(u(r.theme)),l(m.value))}),R(()=>r.theme,_=>{i.value&&(t.applyOptions(d(i.value,_)),s.applyOptions(u(_)))}),R(m,_=>{l(_)});const d=(_,b)=>_e(_,b,{leftPriceScale:{scaleMargins:{top:.1,bottom:.1}},localization:{priceFormatter:g=>p(g)}}),u=_=>{const b=j(_);return{priceFormat:{type:"price",precision:2,minMove:.001},lineWidth:2,lineType:ve.WithSteps,lineColor:b.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},l=_=>{if(!t||!s)return;const b=H.chain(_).map(g=>({time:g.timestamp,value:g.value})).uniqWith((g,D)=>g.time===D.time).orderBy(g=>g.time,"asc").value();b.length>0&&s.setData(b),t.timeScale().fitContent()},p=_=>`$${Z(_,1,"dollar")}${K(_,"dollar")}`;return(_,b)=>(v(),P(n(oe),{class:"chart-container",title:n(e)("title"),loading:n(h)},{default:y(()=>[c("div",{ref_key:"chartRef",ref:i,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function _a(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Cumulative value of collaterals withdrawn"])}}})}typeof _a=="function"&&_a(Lo);const Ei=x(Lo,[["__scopeId","data-v-ecb0171b"]]),Ui={class:"title"},Ni={class:"address"},Hi=["href"],ji={class:"number"},Gi={class:"number"},Yi={class:"address"},Ji=["href"],Io=T({__name:"TableTopDeposits",setup(o){const{t:e}=q(),a=new Ke(N()),{loading:t,data:s}=U(()=>a.getTopStableDeposits("ethereum",5,"7d").then(i=>i.operations),[]),r=w(()=>H.chain(s.value).map(i=>i).value());return(i,h)=>(v(),P(n(re),{class:"datatable-deposits","columns-header":"1fr","columns-data":"deposits-columns-data",loading:n(t),rows:r.value,columns:["Address","Amount","Date","Tx"]},{"header-content":y(()=>[c("div",Ui,z(n(e)("title")),1)]),row:y(m=>[c("div",Ni,[c("a",{href:`https://etherscan.io/address/${m.item.user}`,target:"_blank"},z(n(X)(m.item.user,8)),9,Hi)]),c("div",ji,[f(n(B),{value:m.item.amount,precision:2,"show-zero":!0,type:"dollar"},null,8,["value"])]),c("div",Gi,z(new Date(m.item.timestamp*1e3).toLocaleDateString()),1),c("div",Yi,[c("a",{href:`https://etherscan.io/tx/${m.item.hash}`,target:"_blank"},z(n(X)(m.item.hash,8)),9,Ji)])]),_:1},8,["loading","rows"]))}});function ma(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Largest deposits past 7 days"])}}})}typeof ma=="function"&&ma(Io);const Ki=x(Io,[["__scopeId","data-v-595b6a48"]]),Qi={class:"title"},Xi={class:"address"},Zi=["href"],ec={class:"number"},tc={class:"number"},ac={class:"address"},oc=["href"],Ao=T({__name:"TableTopWithdrawals",setup(o){const{t:e}=q(),a=new Ke(N()),t=w(()=>H.chain(r.value).map(i=>i).value()),{loading:s,data:r}=U(()=>a.getTopStableWithdrawals("ethereum",5,"7d").then(i=>i.operations),[]);return(i,h)=>(v(),P(n(re),{class:"datatable-withdrawals","columns-header":"1fr","columns-data":"withdrawals-columns-data",loading:n(s),rows:t.value,columns:["Address","Amount","Date","Tx"]},{"header-content":y(()=>[c("div",Qi,z(n(e)("title")),1)]),row:y(m=>[c("div",Xi,[c("a",{href:`https://etherscan.io/address/${m.item.user}`,target:"_blank"},z(n(X)(m.item.user,8)),9,Zi)]),c("div",ec,[f(n(B),{value:m.item.amount,precision:2,"show-zero":!0,type:"dollar"},null,8,["value"])]),c("div",tc,z(new Date(m.item.timestamp*1e3).toLocaleDateString()),1),c("div",ac,[c("a",{href:`https://etherscan.io/tx/${m.item.hash}`,target:"_blank"},z(n(X)(m.item.hash,8)),9,oc)])]),_:1},8,["loading","rows"]))}});function va(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Largest withdrawals past 7 days"])}}})}typeof va=="function"&&va(Ao);const nc=x(Ao,[["__scopeId","data-v-d8172227"]]),sc={class:"pool"},lc=T({__name:"StabilityPool",setup(o){return(e,a)=>(v(),S("div",sc,[f(qi),f(Wi),f(Fi),f(Ei),f(Ki),f(nc)]))}});const rc=x(lc,[["__scopeId","data-v-c433301c"]]),ic=o=>(pe("data-v-89919786"),o=o(),he(),o),cc=ic(()=>c("div",null,"Price is in USDC from Curve mkUSD/FRAX/USDC pool",-1)),Do=T({__name:"ChartPrice",setup(o){const{t:e}=q();let a,t;const s=Y(),r=V(null),i=()=>{const g=Math.floor(new Date().getTime()/1e3),D=14400,k=g-D*200;return{pool:"0x0CFe5C777A7438C9Dd8Add53ed671cEc7A5FAeE5",chain:"ethereum",main_token:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",reference_token:"0x4591DBfF62656E7859Afe5e45f6f47D3669fBB28",interval:D,start:k,end:g}},h=Le().getSocket("prices"),m=new it(h,"ethereum",i()),d=ye(m.ohlc$,[]),u=w(()=>d.value.length===0);ee(()=>{r.value&&(a=de(r.value,l(r.value,s.theme)),t=a.addCandlestickSeries(p(s.theme)),_(d.value))}),R(()=>s.theme,g=>{r.value&&(a.applyOptions(l(r.value,g)),t.applyOptions(p(g)))}),R(d,g=>{_(g)});const l=(g,D)=>_e(g,D,{leftPriceScale:{scaleMargins:{top:.1,bottom:.1}},localization:{priceFormatter:k=>b(k)}}),p=g=>{const D=j(g);return{priceFormat:{type:"price",precision:6,minMove:.01},upColor:D.green,borderUpColor:D.green,wickUpColor:D.green,downColor:D.red,borderDownColor:D.red,wickDownColor:D.red,lastValueVisible:!1,priceLineVisible:!1}},_=g=>{if(!a||!t)return;const D=H.chain(g).map(k=>({time:k.time,open:k.open,high:k.high,low:k.low,close:k.close})).uniqWith((k,O)=>k.time===O.time).orderBy(k=>k.time,"asc").value();D.length>0&&t.setData(D),a.timeScale().fitContent()},b=g=>`$${Z(g,4,"dollar")}${K(g,"dollar")}`;return(g,D)=>(v(),P(n(oe),{class:"chart-container",title:n(e)("title"),loading:u.value},{actions:y(()=>[f(n(je),{placement:"left"},{default:y(()=>[cc]),_:1})]),default:y(()=>[c("div",{ref_key:"chartRef",ref:r,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function pa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["mkUSD price (last 30 days)"])}}})}typeof pa=="function"&&pa(Do);const uc=x(Do,[["__scopeId","data-v-89919786"]]),Oo=T({__name:"ChartPriceDistribution",setup(o){const{t:e}=q(),a=new dt(N()),t=Y(),{loading:s,data:r}=U(()=>a.getPriceHistogram("ethereum",10,"all").then(u=>u.histogram),[]),i=w(()=>{const u=j(t.theme),l=se(t.theme);return ie({colors:u,colorsArray:l},{chart:{id:"distribution",type:"bar",animations:{enabled:!1},toolbar:{show:!1}},xaxis:{categories:m.value,labels:{rotate:-55},tickPlacement:"on"},legend:{inverseOrder:!0},stroke:{width:.5},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0}})}),h=w(()=>[{name:e("numPos"),data:Object.values(r.value).map(u=>u.value)}]),m=w(()=>r.value.map(u=>d(u.label))),d=u=>{const l=/-?\d+(\.\d+)?/g,p=_=>parseFloat(_).toFixed(4);return u.replace(l,_=>p(_))};return(u,l)=>(v(),P(n(ce),{title:n(e)("title"),loading:n(s),series:h.value,options:i.value},null,8,["title","loading","series","options"]))}});function ha(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Price histogram"])},numPos:a=>{const{normalize:t}=a;return t(["# of hourly price records"])}}})}typeof ha=="function"&&ha(Oo);const dc=x(Oo,[["__scopeId","data-v-8bbfc40d"]]),Vo=T({__name:"ChartHolders",setup(o){const{t:e}=q(),a=new dt(N()),t=Y(),{loading:s,data:r}=U(()=>a.getLargeStableCoinHolders("ethereum").then(u=>u.holders),[]),i=w(()=>{const u=j(t.theme),l=se(t.theme);return ie({colors:u,colorsArray:l},{chart:{id:"mainHolders",type:"donut",animations:{enabled:!1}},legend:{inverseOrder:!0},stroke:{width:.5},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:p=>{let _=m.value[p.seriesIndex];_=_.length>10&&_.startsWith("0x")?X(_):_;const b=p.series[p.seriesIndex];return[`<div><b>${_}</b>:</div><div>${d(b)}</div>`].join("")}},labels:r.value.map(p=>p.label.length>10&&p.label.startsWith("0x")?X(p.label):p.label)})}),h=w(()=>r.value.map(u=>u.value)),m=w(()=>r.value.map(u=>u.label)),d=u=>`$${Z(Math.abs(u),1,"dollar")}${K(u,"dollar")}`;return(u,l)=>(v(),P(n(ce),{class:"graph",title:n(e)("title"),loading:n(s),options:i.value,series:h.value},null,8,["title","loading","options","series"]))}});function fa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Largest holders"])},numPos:a=>{const{normalize:t}=a;return t(["mkUSD balance:"])}}})}typeof fa=="function"&&fa(Vo);const _c=x(Vo,[["__scopeId","data-v-643bb0db"]]),mc={class:"kpis"},vc=T({__name:"KPIs",setup(o){const e=new dt(N()),{data:a}=U(()=>e.getStableCoinKPI("ethereum").then(t=>t.info),null);return(t,s)=>(v(),S("div",mc,[f(n(le),{label:"mkUSD price","has-value":!!n(a)},{default:y(()=>[n(a)?(v(),P(n(B),{key:0,value:n(a).price,precision:4,type:"dollar"},null,8,["value"])):M("",!0)]),_:1},8,["has-value"]),f(n(le),{label:"Total supply","has-value":!!n(a)},{default:y(()=>[n(a)?(v(),P(n(B),{key:0,value:n(a).supply,precision:2,type:"dollar"},null,8,["value"])):M("",!0)]),_:1},8,["has-value"]),f(n(le),{label:"24h Volume (Curve)","has-value":!!n(a)},{default:y(()=>[n(a)?(v(),P(n(B),{key:0,value:n(a).volume,precision:1,type:"dollar"},null,8,["value"])):M("",!0)]),_:1},8,["has-value"]),f(n(le),{label:"Aggregate -2% Depth (Curve)","has-value":!!n(a)},{default:y(()=>[n(a)?(v(),P(n(B),{key:0,value:n(a).depth,precision:1,type:"dollar"},null,8,["value"])):M("",!0)]),_:1},8,["has-value"])]))}});const pc=x(vc,[["__scopeId","data-v-44d14df8"]]),Ro=T({__name:"ChartDepth",props:{depth:{default:null},loading:{type:Boolean}},setup(o){const{t:e}=q(),a=Y(),t=w(()=>{const h=j(a.theme),m=se(a.theme);return ie({colors:h,colorsArray:m},{chart:{type:"area",animations:{enabled:!1},toolbar:{show:!1}},fill:{type:"gradient",gradient:{type:"vertical",shadeIntensity:0,inverseColors:!1,opacityFrom:.8,opacityTo:.2,stops:[0,90,100]}},toolbar:{show:!1},xaxis:{type:"numeric",labels:{formatter:d=>i(d)}},yaxis:{seriesName:"amounts",labels:{formatter:d=>i(d)}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{x:{formatter:d=>i(d)}},colors:[d=>d.value===0?h.blue:h.green,d=>d.value===0?h.blue:h.red]})}),s=w(()=>{if(!o.depth)return[];const h=[...o.depth.ask.prices.map(d=>({x:d,y:0})),...o.depth.bid.prices.map((d,u)=>({x:d,y:o.depth.bid.amounts[u]}))],m=[...o.depth.ask.prices.map((d,u)=>({x:d,y:o.depth.ask.amounts[u]}))];return[{name:"Bid",data:h},{name:"Ask",data:m}]}),r=w(()=>{var m;if(!((m=o.depth)!=null&&m.tokens)||o.depth.tokens.length===0)return e("title");const h=o.depth.tokens.join(" / ");return`${e("title")} - ${h} (Curve)`}),i=h=>`$${Z(Math.abs(h),2,"dollar")}${K(h,"dollar")}`;return(h,m)=>(v(),P(n(ce),{class:"chart",title:r.value,loading:h.loading,options:t.value,series:s.value},null,8,["title","loading","options","series"]))}});function ga(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Liquidity Depth"])}}})}typeof ga=="function"&&ga(Ro);const hc=x(Ro,[["__scopeId","data-v-abdc3b65"]]),fc=T({__name:"ChartDepthContainer",setup(o){const e=new dt(N()),{loading:a,data:t}=U(()=>e.getCurvePoolDepth("ethereum").then(s=>s.depth),[]);return(s,r)=>(v(!0),S(ae,null,ue(n(t),i=>(v(),P(hc,{key:i.name,loading:n(a),depth:i},null,8,["loading","depth"]))),128))}});const gc=x(fc,[["__scopeId","data-v-e0b126e7"]]),bc={class:"mkusd"},yc=T({__name:"Stablecoin",setup(o){return(e,a)=>(v(),S("div",bc,[f(pc,{style:{"grid-column":"1 / -1"}}),f(uc),f(dc),f(_c),f(gc)]))}});const $c=x(yc,[["__scopeId","data-v-738142b2"]]),wc={class:"redemption-details"},Cc={class:"kpis"},kc={class:"title"},Sc=["href"],Mo=T({__name:"RedemptionDetails",props:{vaultAddr:{},redemption:{}},setup(o){const{t:e}=q(),a=V(""),t=w(()=>H.chain(o.redemption.troves_affected).filter(s=>{const r=a.value.toLocaleLowerCase().split(" ");return(h=>r.some(m=>h.toLocaleLowerCase().includes(m)))(s)}).value());return(s,r)=>(v(),P(n(oe),{title:n(e)("redemption-details")},{default:y(()=>[c("div",wc,[c("div",Cc,[f(n(le),{label:n(e)("withdrawal")},{default:y(()=>[f(n(B),{value:s.redemption.attempted_debt_amount,precision:2,type:"dollar"},null,8,["value"]),G(" / "),f(n(B),{value:s.redemption.collateral_sent_to_redeemer_usd,precision:2,type:"dollar"},null,8,["value"])]),_:1},8,["label"]),f(n(le),{label:n(e)("fee")},{default:y(()=>[f(n(B),{value:s.redemption.collateral_fee_usd,precision:2,type:"dollar"},null,8,["value"])]),_:1},8,["label"])]),f(n(re),{class:"datatable-troves-affected","columns-header":"2fr 1fr","columns-data":"troves-affected-columns-data",rows:t.value,columns:["Trove"]},{"header-content":y(()=>[c("div",kc,z(n(e)("troves-affected")),1),f(n(fe),{modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=i=>a.value=i),class:"search",search:!0,placeholder:n(e)("search-placeholder")},null,8,["modelValue","placeholder"])]),row:y(i=>[c("div",null,[c("a",{style:{"font-family":"monospace"},target:"_blank",href:`#/vault/${s.vaultAddr}/trove/${i.item}`,onClick:r[1]||(r[1]=te(()=>{},["stop"]))},z(i.item),9,Sc)])]),_:1},8,["rows"])])]),_:1},8,["title"]))}});function ba(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{"troves-affected":a=>{const{normalize:t}=a;return t(["Troves affected"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])},"redemption-details":a=>{const{normalize:t}=a;return t(["Redemption Details"])},withdrawal:a=>{const{normalize:t}=a;return t(["Attempted / Received"])},fee:a=>{const{normalize:t}=a;return t(["Fee"])}}})}typeof ba=="function"&&ba(Mo);const Vt=x(Mo,[["__scopeId","data-v-8e70495a"]]),Tc={key:0,class:"item"},Pc=["src"],xc={key:1,class:"empty"},zc={class:"label"},Lc=T({__name:"SelectCollateral",props:{collateral:{default:null},all:{type:Boolean,default:!1}},emits:["select-collateral"],setup(o,{emit:e}){const a=e,t=V(!1),s=[...o.all?[{collateral:"all",label:"All"}]:[],{collateral:"cbETH",label:"cbETH"},{collateral:"wstETH",label:"wstETH"},{collateral:"rETH",label:"rETH"},{collateral:"sfrxETH",label:"sfrxETH"}],r=w(()=>s.find(d=>d.collateral===o.collateral)??null);ee(()=>{m(s[0])});const i=d=>d.label,h=()=>{t.value=!t.value},m=d=>{const{collateral:u}=d;a("select-collateral",u)};return(d,u)=>(v(),P(n(xt),{class:"select",options:s,selected:r.value,open:t.value,onOpen:h,onClose:u[0]||(u[0]=l=>t.value=!1),onInput:m},{item:y(l=>[l.item?(v(),S("div",Tc,[n(Ie)(l.item.collateral)?(v(),S("img",{key:0,src:n(Ie)(l.item.collateral)},null,8,Pc)):(v(),S("div",xc)),c("div",zc,z(i(l.item)),1)])):M("",!0)]),_:1},8,["selected","open"]))}});const st=x(Lc,[["__scopeId","data-v-2bf0e714"]]),Ic={class:"title"},Ac={style:{display:"flex",gap:"1rem"}},Dc=["src"],Oc=["href"],Vc=["href"],Rc={class:"number"},Mc={class:"number"},Bc={class:"number"},ya=15,Bo=T({__name:"TableRedemptions",props:{vaults:{default:()=>[]}},setup(o){const e=new Ot(N()),{t:a}=q(),{loading:t,data:s,load:r}=U(()=>o.vaults.length>0?Promise.all(o.vaults.map($=>e.getRedemptions("ethereum",$.address))).then($=>$.flat()):Promise.resolve([]),[]),{relativeTime:i}=Se(),{sortColumn:h,sortOrder:m,onSort:d}=ze("timestamp"),u=V(""),l=V("all"),p=V(null),_=w(()=>["","Redeemer","Transaction","Debt","# Troves","Time"]),b=w(()=>["icon","redeemer","tx","debt","numtroves","timestamp"]),g=w(()=>["redeemer","tx","debt","numtroves","timestamp"]),D=w(()=>H.chain(s.value).filter($=>{const I=u.value.toLocaleLowerCase().split(" "),C=J=>I.some(ge=>J.toLocaleLowerCase().includes(ge)),W=xe($.vault),E=l.value==="all"?!0:l.value===W;return C($.redeemer)&&E}).orderBy($=>{switch(h.value){case"redeemer":return $.redeemer;case"tx":return $.transaction;case"debt":return $.actual_debt_amount;case"numtroves":return $.troves_affected_count;case"timestamp":return $.timestamp;default:return $.timestamp}},m.value===ne.Descending?"desc":"asc").value()),{page:k,rowsPage:O,onPage:A}=Te(D,ya),L=$=>{p.value=$};return R(()=>o.vaults,r),($,I)=>(v(),S(ae,null,[f(n(re),{class:"datatable-redemptions","columns-header":"1fr 12rem 2fr","columns-data":"redemptions-columns-data",loading:n(t),rows:n(O),columns:_.value,sorting:!0,"sorting-columns":b.value,"sorting-columns-enabled":g.value,"sorting-default-column":"timestamp","sorting-default-dir":"Descending",onSortColumn:n(d),onSelected:L},{"header-content":y(()=>[c("div",Ic,z(n(a)("title")),1),f(st,{class:"select-collateral",collateral:l.value,all:!0,onSelectCollateral:I[0]||(I[0]=C=>l.value=C)},null,8,["collateral"]),c("div",Ac,[f(n(fe),{modelValue:u.value,"onUpdate:modelValue":I[1]||(I[1]=C=>u.value=C),class:"search",search:!0,placeholder:n(a)("search-placeholder")},null,8,["modelValue","placeholder"]),f(n(ke),{class:"pagination","items-count":D.value.length,"items-per-page":ya,page:n(k),onPage:n(A)},null,8,["items-count","page","onPage"])])]),row:y(C=>[c("img",{src:n(Ie)(n(xe)(C.item.vault))},null,8,Dc),c("div",null,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${C.item.redeemer}`,target:"_blank",onClick:I[2]||(I[2]=te(()=>{},["stop"]))},z(n(X)(C.item.redeemer)),9,Oc)]),c("div",null,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/tx/${C.item.transaction}`,target:"_blank",onClick:I[3]||(I[3]=te(()=>{},["stop"]))},z(n(X)(C.item.transaction)),9,Vc)]),c("div",Rc,[f(n(B),{type:"dollar",value:Math.round(C.item.actual_debt_amount),precision:1/0},null,8,["value"])]),c("div",Mc,z(C.item.troves_affected_count),1),c("div",Bc,z(n(i)(C.item.timestamp)),1)]),"row-details":y(()=>[G("   ")]),_:1},8,["loading","rows","columns","sorting-columns","sorting-columns-enabled","onSortColumn"]),f(n(Re),{show:!!p.value,onClose:I[4]||(I[4]=C=>p.value=null)},{default:y(()=>[p.value?(v(),P(Vt,{key:0,redemption:p.value,"vault-addr":p.value.vault},null,8,["redemption","vault-addr"])):M("",!0)]),_:1},8,["show"])],64))}});function $a(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Redemptions"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof $a=="function"&&$a(Bo);const qc=x(Bo,[["__scopeId","data-v-7cdfa16c"]]),Wc={class:"redemptions"},Fc=T({__name:"Redemptions",setup(o){const e=Le().getSocket("api"),a=new Xe(e,"ethereum"),t=ye(a.overview$,[]);return(s,r)=>(v(),S("div",Wc,[f(qc,{vaults:n(t)},null,8,["vaults"])]))}});const Ec=x(Fc,[["__scopeId","data-v-dcc2bc26"]]),Uc={class:"liquidation-details"},Nc={class:"kpis"},Hc={class:"title"},jc=["href"],qo=T({__name:"LiquidationDetails",props:{vaultAddr:{},liquidation:{}},setup(o){const{t:e}=q(),a=V(""),t=w(()=>H.chain(o.liquidation.troves_affected).filter(s=>{const r=a.value.toLocaleLowerCase().split(" ");return(h=>r.some(m=>h.toLocaleLowerCase().includes(m)))(s)}).value());return(s,r)=>(v(),P(n(oe),{title:n(e)("liquidation-details")},{default:y(()=>[c("div",Uc,[c("div",Nc,[f(n(le),{label:n(e)("debt")},{default:y(()=>[f(n(B),{value:s.liquidation.liquidated_debt,precision:2,type:"dollar"},null,8,["value"]),G(" / "),f(n(B),{value:s.liquidation.liquidated_collateral,precision:2,"show-symbol":!1,type:"dollar"},null,8,["value"])]),_:1},8,["label"]),f(n(le),{label:n(e)("gas-compensation")},{default:y(()=>[f(n(B),{value:s.liquidation.collateral_gas_compensation_usd,precision:2,type:"dollar"},null,8,["value"])]),_:1},8,["label"])]),f(n(re),{class:"datatable-troves-affected","columns-header":"2fr 1fr","columns-data":"troves-affected-columns-data",rows:t.value,columns:["Trove"]},{"header-content":y(()=>[c("div",Hc,z(n(e)("troves-affected")),1),f(n(fe),{modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=i=>a.value=i),class:"search",search:!0,placeholder:n(e)("search-placeholder")},null,8,["modelValue","placeholder"])]),row:y(i=>[c("div",null,[c("a",{style:{"font-family":"monospace"},target:"_blank",href:`#/vault/${s.vaultAddr}/trove/${i.item}`,onClick:r[1]||(r[1]=te(()=>{},["stop"]))},z(i.item),9,jc)])]),_:1},8,["rows"])])]),_:1},8,["title"]))}});function wa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{"troves-affected":a=>{const{normalize:t}=a;return t(["Troves affected"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])},"liquidation-details":a=>{const{normalize:t}=a;return t(["Liquidation Details"])},debt:a=>{const{normalize:t}=a;return t(["Debt / Collateral"])},"gas-compensation":a=>{const{normalize:t}=a;return t(["Gas compensation"])}}})}typeof wa=="function"&&wa(qo);const Rt=x(qo,[["__scopeId","data-v-29783452"]]),Gc={class:"title"},Yc={style:{display:"flex",gap:"1rem"}},Jc=["src"],Kc=["href"],Qc=["href"],Xc={class:"number"},Zc={class:"number"},eu={class:"number"},Ca=15,Wo=T({__name:"TableLiquidations",props:{vaults:{default:()=>[]}},setup(o){const e=new Dt(N()),{t:a}=q(),{loading:t,data:s,load:r}=U(()=>o.vaults.length>0?Promise.all(o.vaults.map($=>e.getLiquidations("ethereum",$.address))).then($=>$.flat()):Promise.resolve([]),[]),{relativeTime:i}=Se(),{sortColumn:h,sortOrder:m,onSort:d}=ze("timestamp"),u=V(""),l=V("all"),p=V(null),_=w(()=>["","Liquidator","Transaction","Debt","# Troves","Time"]),b=w(()=>["icon","liquidator","tx","debt","numtroves","timestamp"]),g=w(()=>["liquidator","tx","debt","numtroves","timestamp"]),D=w(()=>H.chain(s.value).filter($=>{const I=u.value.toLocaleLowerCase().split(" "),C=J=>I.some(ge=>J.toLocaleLowerCase().includes(ge)),W=xe($.vault),E=l.value==="all"?!0:l.value===W;return C($.liquidator)&&E}).orderBy($=>{switch(h.value){case"liquidator":return $.liquidator;case"tx":return $.transaction;case"debt":return $.liquidated_collateral_usd;case"numtroves":return $.troves_affected_count;case"timestamp":return $.timestamp;default:return $.timestamp}},m.value===ne.Descending?"desc":"asc").value()),{page:k,rowsPage:O,onPage:A}=Te(D,Ca),L=$=>{p.value=$};return R(()=>o.vaults,r),($,I)=>(v(),S(ae,null,[f(n(re),{class:"datatable-liquidations","columns-header":"1fr 12rem 2fr","columns-data":"liquidations-columns-data",loading:n(t),rows:n(O),columns:_.value,sorting:!0,"sorting-columns":b.value,"sorting-columns-enabled":g.value,"sorting-default-column":"timestamp","sorting-default-dir":"Descending",onSortColumn:n(d),onSelected:L},{"header-content":y(()=>[c("div",Gc,z(n(a)("title")),1),f(st,{class:"select-collateral",collateral:l.value,all:!0,onSelectCollateral:I[0]||(I[0]=C=>l.value=C)},null,8,["collateral"]),c("div",Yc,[f(n(fe),{modelValue:u.value,"onUpdate:modelValue":I[1]||(I[1]=C=>u.value=C),class:"search",style:{"flex-grow":"1"},search:!0,placeholder:n(a)("search-placeholder")},null,8,["modelValue","placeholder"]),f(n(ke),{class:"pagination","items-count":D.value.length,"items-per-page":Ca,page:n(k),onPage:n(A)},null,8,["items-count","page","onPage"])])]),row:y(C=>[c("img",{src:n(Ie)(n(xe)(C.item.vault))},null,8,Jc),c("div",null,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${C.item.liquidator}`,target:"_blank",onClick:I[2]||(I[2]=te(()=>{},["stop"]))},z(n(X)(C.item.liquidator)),9,Kc)]),c("div",null,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/tx/${C.item.transaction}`,target:"_blank",onClick:I[3]||(I[3]=te(()=>{},["stop"]))},z(n(X)(C.item.transaction)),9,Qc)]),c("div",Xc,[f(n(B),{type:"dollar",value:Math.round(C.item.liquidated_debt),precision:1/0},null,8,["value"])]),c("div",Zc,z(C.item.troves_affected_count),1),c("div",eu,z(n(i)(C.item.timestamp)),1)]),"row-details":y(()=>[G("   ")]),_:1},8,["loading","rows","columns","sorting-columns","sorting-columns-enabled","onSortColumn"]),f(n(Re),{show:!!p.value,onClose:I[4]||(I[4]=C=>p.value=null)},{default:y(()=>[p.value?(v(),P(Rt,{key:0,liquidation:p.value,"vault-addr":p.value.vault},null,8,["liquidation","vault-addr"])):M("",!0)]),_:1},8,["show"])],64))}});function ka(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Liquidations"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof ka=="function"&&ka(Wo);const tu=x(Wo,[["__scopeId","data-v-7ccf2bb0"]]),au={class:"liquidations"},ou=T({__name:"Liquidations",setup(o){const e=Le().getSocket("api"),a=new Xe(e,"ethereum"),t=ye(a.overview$,[]);return(s,r)=>(v(),S("div",au,[f(tu,{vaults:n(t)},null,8,["vaults"])]))}});const nu=x(ou,[["__scopeId","data-v-305fa11b"]]),su=T({__name:"ChartRevenueLine",props:{data:{default:()=>[]}},setup(o){let e,a;const t=Y(),s=V(null);ee(()=>{s.value&&(e=de(s.value,r(s.value,t.theme)),a=e.addAreaSeries(i(t.theme)),h(o.data))}),R(()=>t.theme,u=>{s.value&&(e.applyOptions(r(s.value,u)),a.applyOptions(i(u)))}),R(()=>o.data,u=>{h(u)});const r=(u,l)=>_e(u,l,{rightPriceScale:{scaleMargins:{top:.1,bottom:.1}},localization:{priceFormatter:p=>m(p)}}),i=u=>{const l=j(u);return{priceFormat:{type:"price",precision:6,minMove:1e-6},lineWidth:2,lineType:ve.WithSteps,lineColor:l.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},h=u=>{if(!e||!u)return;const l=H.chain(u).groupBy(p=>p.timestamp).mapValues(p=>({time:p[0].timestamp,value:d(p[0])})).entries().map(p=>p[1]).uniqWith((p,_)=>p.time===_.time).orderBy(p=>p.time,"asc").value();l.length>0&&a.setData(l),e.timeScale().fitContent()},m=u=>`$${Z(u,1,"dollar")}${K(u,"dollar")}`,d=u=>u.unlock_penalty_revenue_usd+u.borrowing_fees_revenue_usd+u.redemption_fees_revenue_usd;return(u,l)=>(v(),S("div",{ref_key:"chartRef",ref:s,class:"chart"},null,512))}});const lu=x(su,[["__scopeId","data-v-53947c23"]]),ru=T({__name:"ChartRevenueBreakdown",props:{data:{default:()=>[]}},setup(o){const e=Y(),a=w(()=>{const l=j(e.theme),p=se(e.theme);return ie({colors:l,colorsArray:p},{chart:{type:"bar",stacked:!0,animations:{enabled:!1}},xaxis:{categories:t.value,labels:{formatter:i,rotate:0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:h},min:0,max:r.value},plotOptions:{bar:{columnWidth:"75%",dataLabels:{position:"top",hideOverflowingLabels:!1}}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}})}),t=w(()=>H.chain(o.data).orderBy(l=>l.timestamp,"asc").groupBy(l=>l.timestamp).map((l,p)=>new Date(parseInt(p,10)*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"})).map((l,p)=>p%8===0?l:"").value()),s=w(()=>H.chain(Object.keys(o.data[0]).filter(l=>l!=="timestamp")).map(l=>o.data.map(p=>({...p,source:l}))).flatten().groupBy(l=>l.source).map((l,p)=>({name:d(p),data:H.chain(l).orderBy(_=>_.timestamp,"asc").map(_=>({x:new Date(_.timestamp*1e3).toLocaleDateString(),y:_[p]})).value()})).value()),r=w(()=>Math.max(...H.chain(o.data).groupBy(l=>l.timestamp).map(l=>l.reduce((p,_)=>p+m(_),0)).value())*1.1),i=l=>l,h=l=>`$${Z(l,1,"dollar")}${K(l,"dollar")}`,m=l=>l.unlock_penalty_revenue_usd+l.borrowing_fees_revenue_usd+l.redemption_fees_revenue_usd,d=l=>{switch(l){case"unlock_penalty_revenue_usd":return"Unlock penalty";case"borrowing_fees_revenue_usd":return"Borrowing fees";case"redemption_fees_revenue_usd":return"Redemption fees";default:return u(l)}},u=l=>l.split("_").map(p=>p.charAt(0).toUpperCase()+p.slice(1).toLowerCase()).join("");return(l,p)=>(v(),P(n(Tt),{class:"chart",options:a.value,series:s.value},null,8,["options","series"]))}});const iu=x(ru,[["__scopeId","data-v-b710ac5e"]]),cu=o=>(pe("data-v-86b9282b"),o=o(),he(),o),uu={class:"actions"},du={class:"chart-input"},_u={class:"chart-toggles"},mu=cu(()=>c("i",{class:"fas fa-burn"},null,-1)),vu={class:"chart-types"},Fo=T({__name:"ChartRevenue",setup(o){const{t:e}=q(),a=new bo(N()),t=V("line"),s=V(1699723102),r=V(!0),{loading:i,data:h}=U(()=>a.getSnapshots().then(u=>u.snapshots),[]),m=w(()=>h.value.filter(u=>u.timestamp>s.value).map(u=>H.cloneDeep(u)).map(u=>(r.value||(u.unlock_penalty_revenue_usd=0),u))),d=u=>{t.value!==u&&(t.value=u)};return(u,l)=>(v(),P(n(oe),{class:"chart-container",title:n(e)("title"),loading:n(i)},{actions:y(()=>[c("div",uu,[c("div",du,[f(n(Es),{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=p=>s.value=p),placeholder:"Timestamp cut-off",min:0,max:new Date().getTime()/1e3},null,8,["modelValue","max"])]),c("div",_u,[f(n(je),null,{item:y(()=>[f(n(Oe),{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=p=>r.value=p)},{default:y(()=>[mu]),_:1},8,["modelValue"])]),default:y(()=>[G(" "+z(n(e)("include-unlock-penalty")),1)]),_:1})]),c("div",vu,[f(n(Oe),{value:"Line","model-value":t.value==="line",onClick:l[2]||(l[2]=p=>d("line"))},null,8,["model-value"]),f(n(Oe),{value:"Breakdown","model-value":t.value==="breakdown",onClick:l[3]||(l[3]=p=>d("breakdown"))},null,8,["model-value"])])])]),default:y(()=>[t.value==="line"?(v(),P(lu,{key:0,data:m.value},null,8,["data"])):(v(),P(iu,{key:1,data:m.value},null,8,["data"]))]),_:1},8,["title","loading"]))}});function Sa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["PRISMA revenue"])},"include-unlock-penalty":a=>{const{normalize:t}=a;return t(["Include unlock penalty revenue"])}}})}typeof Sa=="function"&&Sa(Fo);const pu=x(Fo,[["__scopeId","data-v-86b9282b"]]),Eo=T({__name:"ChartBreakdown",setup(o){const{t:e}=q(),a=Y(),t=new bo(N()),{loading:s,data:r}=U(()=>t.getBreakdown(),{unlock_penalty:0,borrowing_fees:0,redemption_fees:0}),i=w(()=>{const u=j(a.theme),l=se(a.theme);return ie({colors:u,colorsArray:l},{chart:{id:"breakdown",type:"donut",animations:{enabled:!1}},legend:{inverseOrder:!1,position:"bottom"},stroke:{width:.5},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:p=>{const _=m.value[p.seriesIndex],b=p.series[p.seriesIndex];return[`<div><b>${_}</b>:</div><div>${d(b)}</div>`].join("")}},labels:m.value})}),h=w(()=>[r.value.unlock_penalty,r.value.borrowing_fees,r.value.redemption_fees]),m=w(()=>[e("unlockPenalty"),e("borrowingFees"),e("redemptionFees")]),d=u=>`$${Z(u,2,"percentage")}${K(u,"percentage")}`;return(u,l)=>(v(),P(n(ce),{class:"graph",title:n(e)("title"),options:i.value,series:h.value,loading:n(s)},null,8,["title","options","series","loading"]))}});function Ta(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Breakdown"])},unlockPenalty:a=>{const{normalize:t}=a;return t(["Unlock penalty"])},borrowingFees:a=>{const{normalize:t}=a;return t(["Borrowing fees"])},redemptionFees:a=>{const{normalize:t}=a;return t(["Redemption fees"])}}})}typeof Ta=="function"&&Ta(Eo);const hu=x(Eo,[["__scopeId","data-v-013cccee"]]),fu={class:"revenue"},gu=T({__name:"Revenue",setup(o){return(e,a)=>(v(),S("div",fu,[f(pu,{style:{"grid-column":"1"}}),f(hu,{style:{"grid-column":"2"}})]))}});const bu=x(gu,[["__scopeId","data-v-3af93d93"]]);function bt(o){const e=Math.floor(new Date().getTime()/1e3),a=14400,t=e-a*299;switch(o){case"convex":return{pool:"0x3b21C2868B6028CfB38Ff86127eF22E68d16d53B",chain:"ethereum",main_token:"0xdA47862a83dac0c112BA89c6abC2159b95afd71C",reference_token:"0x34635280737b5BFe6c7DC2FC3065D60d66e78185",interval:a,start:t,end:e};case"yearn":return{pool:"0x69833361991ed76f9e8DBBcdf9ea1520fEbFb4a7",chain:"ethereum",main_token:"0xdA47862a83dac0c112BA89c6abC2159b95afd71C",reference_token:"0xe3668873D944E4A949DA05fc8bDE419eFF543882",interval:a,start:t,end:e};default:throw new Error("Unknown contract")}}function yu(o){const e=Math.floor(new Date().getTime()/1e3),a="day",t=e-86400*299;switch(o){case"convex":return{pool:"0x3b21C2868B6028CfB38Ff86127eF22E68d16d53B",chain:"ethereum",interval:a,start:t,end:e};case"yearn":return{pool:"0x69833361991ed76f9e8DBBcdf9ea1520fEbFb4a7",chain:"ethereum",interval:a,start:t,end:e};default:throw new Error("Unknown contract")}}const $u={class:"actions"},Uo=T({__name:"ChartComparisonPrice",setup(o){const{t:e}=q();let a,t,s;const r=Y(),i=V(null),h=Le().getSocket("prices"),m=new it(h,"ethereum",bt("convex")),d=new it(h,"ethereum",bt("yearn")),u=ye(m.ohlc$,[]),l=ye(d.ohlc$,[]),p=w(()=>u.value.length+l.value.length===0);let _=1.1,b=0;ee(async()=>{i.value&&(await Je(),a=de(i.value,g(i.value,r.theme)),t=a.addLineSeries(D(r.theme,"convex")),s=a.addLineSeries(D(r.theme,"yearn")),k(u.value,"convex"),k(l.value,"yearn"))}),R(()=>r.theme,A=>{i.value&&(a.applyOptions(g(i.value,A)),t.applyOptions(D(A,"convex")),s.applyOptions(D(A,"yearn")))}),R(u,A=>{k(A,"convex")}),R(l,A=>{k(A,"yearn")});const g=(A,L)=>_e(A,L,{leftPriceScale:{scaleMargins:{top:.1,bottom:.1}},localization:{priceFormatter:$=>O($)}}),D=(A,L)=>{const $=j(A),I=L==="convex"?$.blue:$.yellow;return{priceFormat:{type:"price",precision:6,minMove:1e-6},lineWidth:2,lineType:ve.WithSteps,color:I,lastValueVisible:!1,priceLineVisible:!1}},k=(A,L)=>{if(!a||!t||!s)return;const $=H.chain(A).map(I=>({time:I.time,value:I.close})).uniqWith((I,C)=>I.time===C.time).orderBy(I=>I.time,"asc").value();if($.length>0){L==="convex"?t.setData($):L==="yearn"&&s.setData($);const I=[...u.value.map(C=>C.close),...l.value.map(C=>C.close)];b=Math.min(...I),_=Math.max(...I),a.timeScale().fitContent()}},O=A=>{const L=_-b,$=L>1?L-Math.floor(L):L,I=-Math.floor(Math.log10($)+1)+2;return`${Z(A,I,"dollar")}${K(A,"dollar")}`};return(A,L)=>(v(),P(n(oe),{class:"chart-container",title:n(e)("title"),loading:p.value},{actions:y(()=>[c("div",$u,[f(n(zt),{items:["cvxPRISMA","yPRISMA"],colors:n(se)(n(r).theme)},null,8,["colors"])])]),default:y(()=>[c("div",{ref_key:"chartRef",ref:i,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function Pa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Price (peg)"])}}})}typeof Pa=="function"&&Pa(Uo);const wu=x(Uo,[["__scopeId","data-v-65fc9ab1"]]),Cu={class:"actions"},No=T({__name:"ChartComparisonTVL",setup(o){const{t:e}=q(),a=new ot(N());let t,s,r;const i=Y(),h=V(null),{loading:m,data:d}=U(()=>a.getTVL("convex").then(k=>k.tvl),[]),{loading:u,data:l}=U(()=>a.getTVL("yearn").then(k=>k.tvl),[]),p=w(()=>m.value||u.value);ee(async()=>{h.value&&(await Je(),t=de(h.value,_(h.value,i.theme)),s=t.addLineSeries(b(i.theme,"convex")),r=t.addLineSeries(b(i.theme,"yearn")),g(d.value,"convex"),g(l.value,"yearn"))}),R(()=>i.theme,k=>{h.value&&(t.applyOptions(_(h.value,k)),s.applyOptions(b(k,"convex")),r.applyOptions(b(k,"yearn")))}),R(d,k=>{g(k,"convex")}),R(l,k=>{g(k,"yearn")});const _=(k,O)=>_e(k,O,{leftPriceScale:{scaleMargins:{top:.1,bottom:.1}},localization:{priceFormatter:A=>D(A)}}),b=(k,O)=>{const A=j(k),L=O==="convex"?A.blue:A.yellow;return{priceFormat:{type:"price",precision:6,minMove:1e-6},lineWidth:2,lineType:ve.WithSteps,color:L,lastValueVisible:!1,priceLineVisible:!1}},g=(k,O)=>{if(!t||!s||!r)return;const A=H.chain(k).map(L=>({time:L.timestamp,value:L.value})).uniqWith((L,$)=>L.time===$.time).orderBy(L=>L.time,"asc").value();A.length>0&&(O==="convex"?s.setData(A):O==="yearn"&&r.setData(A),t.timeScale().fitContent())},D=k=>`$${Z(k,0,"dollar")}${K(k,"dollar")}`;return(k,O)=>(v(),P(n(oe),{class:"chart-container",title:n(e)("title"),loading:p.value},{actions:y(()=>[c("div",Cu,[f(n(zt),{items:["cvxPRISMA","yPRISMA"],colors:n(se)(n(i).theme)},null,8,["colors"])])]),default:y(()=>[c("div",{ref_key:"chartRef",ref:h,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function xa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["TVL"])}}})}typeof xa=="function"&&xa(No);const ku=x(No,[["__scopeId","data-v-3d366238"]]),Su={class:"overview"},Tu=T({__name:"Overview",setup(o){return(e,a)=>(v(),S("div",Su,[f(wu),f(ku)]))}});const Pu=x(Tu,[["__scopeId","data-v-fba2d088"]]),Ho=T({__name:"ChartPrice",props:{contract:{}},setup(o){const{t:e}=q();let a,t,s,r=1,i=0;const h=Y(),m=V(null),d=bt(o.contract),u=yu(o.contract),l=Le().getSocket("prices"),p=new it(l,"ethereum",d),_=new Qn(l,"ethereum",u),b=ye(p.ohlc$,[]),g=ye(_.volume$,[]),D=w(()=>b.value.length+g.value.length===0);ee(async()=>{m.value&&(await Je(),a=de(m.value,k(m.value,h.theme)),t=a.addCandlestickSeries(O(h.theme)),s=a.addHistogramSeries(A(h.theme)),L(b.value),$(g.value))}),R(()=>h.theme,C=>{m.value&&(a.applyOptions(k(m.value,C)),t.applyOptions(O(C)),s.applyOptions(A(C)))}),R(b,C=>{L(C)}),R(g,C=>{$(C)});const k=(C,W)=>_e(C,W,{leftPriceScale:{scaleMargins:{top:.75,bottom:0}},localization:{priceFormatter:E=>I(E)}}),O=C=>{const W=j(C);return{priceFormat:{type:"price",precision:6,minMove:.01},upColor:W.green,borderUpColor:W.green,wickUpColor:W.green,downColor:W.red,borderDownColor:W.red,wickDownColor:W.red,lastValueVisible:!1,priceLineVisible:!1}},A=C=>({color:j(C).blue,lastValueVisible:!1,priceFormat:{type:"volume"},priceScaleId:"left",priceLineVisible:!1}),L=C=>{if(!a||!t)return;const W=1,E=H.chain(C).map(J=>({time:J.time,open:Math.pow(J.open,W),high:Math.pow(J.high,W),low:Math.pow(J.low,W),close:Math.pow(J.close,W)})).uniqWith((J,ge)=>J.time===ge.time).orderBy(J=>J.time,"asc").value();E.length>0&&(t.setData(E),a.timeScale().fitContent(),i=Math.min(...E.map(J=>J.low)),r=Math.max(...E.map(J=>J.high))),a.timeScale().fitContent()},$=C=>{if(!a||!s)return;const W=H.chain(C).map(E=>({time:E.timestamp,value:E.volume})).uniqWith((E,J)=>E.time===J.time).orderBy(E=>E.time,"asc").value();W.length>0&&s.setData(W)},I=C=>{const W=r-i,E=W>1?W-Math.floor(W):W,J=-Math.floor(Math.log10(E)+1)+2;return`${Z(C,J,"dollar")}${K(C,"dollar")}`};return(C,W)=>(v(),P(n(oe),{class:"chart-container",title:n(e)("title"),loading:D.value},{default:y(()=>[c("div",{ref_key:"chartRef",ref:m,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function za(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Price (peg)"])}}})}typeof za=="function"&&za(Ho);const jo=x(Ho,[["__scopeId","data-v-6dc68303"]]),Go=T({__name:"ChartTVL",props:{contract:{}},setup(o){const{t:e}=q(),a=new ot(N());let t,s;const r=Y(),i=V(null),{loading:h,data:m}=U(()=>a.getTVL(o.contract).then(_=>_.tvl),[]);ee(async()=>{i.value&&(await Je(),t=de(i.value,d(i.value,r.theme)),s=t.addAreaSeries(u(r.theme)),l(m.value))}),R(()=>r.theme,_=>{i.value&&(t.applyOptions(d(i.value,_)),s.applyOptions(u(_)))}),R(m,_=>{l(_)});const d=(_,b)=>_e(_,b,{leftPriceScale:{scaleMargins:{top:.1,bottom:.1}},localization:{priceFormatter:g=>p(g)}}),u=_=>{const b=j(_);return{priceFormat:{type:"price",precision:6,minMove:.01},lineWidth:2,lineType:ve.WithSteps,lineColor:b.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},l=_=>{if(!t||!s)return;const b=H.chain(_).filter(g=>g.value>0).map(g=>({time:g.timestamp,value:g.value})).uniqWith((g,D)=>g.time===D.time).orderBy(g=>g.time,"asc").value();b.length>0&&s.setData(b),t.timeScale().fitContent()},p=_=>`$${Z(_,0,"dollar")}${K(_,"dollar")}`;return(_,b)=>(v(),P(n(oe),{class:"chart-container",title:n(e)("title"),loading:n(h)},{default:y(()=>[c("div",{ref_key:"chartRef",ref:i,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function La(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["TVL"])}}})}typeof La=="function"&&La(Go);const Yo=x(Go,[["__scopeId","data-v-ffcbf531"]]),Jo=T({__name:"ChartFlow",props:{contract:{}},setup(o){const{t:e}=q(),a=new ot(N()),t=Y(),{loading:s,data:r}=U(()=>a.getFlow(o.contract),{deposits:[],withdrawals:[]}),i=w(()=>{const l=j(t.theme),p=se(t.theme);return ie({colors:l,colorsArray:p},{chart:{type:"bar",stacked:"true",animations:{enabled:!1},toolbar:{show:!1}},colors:[l.green,l.red],xaxis:{categories:h.value,labels:{formatter:d,rotate:-60},tickPlacement:"on"},yaxis:{labels:{formatter:u}},plotOptions:{bar:{columnWidth:"50%"}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0,custom:({series:_,dataPointIndex:b,w:g})=>{let D=0;const k=_.map((O,A)=>{const L=O[b];return D+=L,`<div><b>${g.globals.seriesNames[A]}</b>:	${u(L)}</div>`});return k.push(`<div><b>Total</b>:	${u(D)}</div>`),k.join("")}}})}),h=w(()=>r.value.deposits.length===0?[]:r.value.deposits.map(l=>new Date(l.timestamp*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"}))),m=w(()=>[{name:e("deposits"),data:Object.values(r.value.deposits).map(l=>l.amount_usd)},{name:e("withdrawals"),data:Object.values(r.value.withdrawals).map(l=>-l.amount_usd)}]),d=l=>l,u=l=>`$${Z(l,0,"dollar")}${K(l,"dollar")}`;return(l,p)=>(v(),P(n(ce),{title:n(e)("title"),loading:n(s),options:i.value,series:m.value},null,8,["title","loading","options","series"]))}});function Ia(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Staking and unstaking"])},deposits:a=>{const{normalize:t}=a;return t(["Deposits"])},withdrawals:a=>{const{normalize:t}=a;return t(["Withdrawals"])}}})}typeof Ia=="function"&&Ia(Jo);const Ko=x(Jo,[["__scopeId","data-v-f6745216"]]),Qo=T({__name:"ChartAPR",props:{contract:{}},setup(o){const{t:e}=q(),a=new ot(N());let t,s;const r=Y(),i=V(null),{loading:h,data:m}=U(()=>a.getSnapshots(o.contract).then(_=>_.Snapshots),[]);ee(async()=>{i.value&&(await Je(),t=de(i.value,d(i.value,r.theme)),s=t.addAreaSeries(u(r.theme)),l(m.value))}),R(()=>r.theme,_=>{i.value&&(t.applyOptions(d(i.value,_)),s.applyOptions(u(_)))}),R(m,_=>{l(_)});const d=(_,b)=>_e(_,b,{leftPriceScale:{scaleMargins:{top:.1,bottom:.1}},localization:{priceFormatter:g=>p(g)}}),u=_=>{const b=j(_);return{priceFormat:{type:"price",precision:6,minMove:.01},lineWidth:2,lineType:ve.WithSteps,lineColor:b.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},l=_=>{if(!t||!s)return;const b=H.chain(_).filter(g=>g.timestamp>=1699630610).map(g=>({time:g.timestamp,value:g.total_apr*100})).uniqWith((g,D)=>g.time===D.time).orderBy(g=>g.time,"asc").value();b.length>0&&s.setData(b),t.timeScale().fitContent()},p=_=>`${Z(_,0,"percentage")}${K(_,"percentage")}`;return(_,b)=>(v(),P(n(oe),{class:"chart-container",title:n(e)("title"),loading:n(h)},{default:y(()=>[c("div",{ref_key:"chartRef",ref:i,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function Aa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["APR"])}}})}typeof Aa=="function"&&Aa(Qo);const Xo=x(Qo,[["__scopeId","data-v-152432af"]]),Zo=T({__name:"ChartDistribution",props:{contract:{}},setup(o){const{t:e}=q(),a=new ot(N()),t=Y(),{loading:s,data:r}=U(()=>a.getDistribution(o.contract).then(l=>l.distribution),[]),i=w(()=>{const l=j(t.theme),p=se(t.theme);return ie({colors:l,colorsArray:p},{chart:{type:"bar",animations:{enabled:!1},toolbar:{show:!1}},xaxis:{categories:h.value,labels:{formatter:d,rotate:-60},tickPlacement:"on"},yaxis:{labels:{formatter:u}},plotOptions:{bar:{columnWidth:"50%"}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0}})}),h=w(()=>r.value.map(l=>l.label)),m=w(()=>[{name:e("size"),data:Object.values(r.value).map(l=>l.value)}]),d=l=>l,u=l=>`$${Z(l,0,"dollar")}${K(l,"dollar")}`;return(l,p)=>(v(),P(n(ce),{class:"chart",title:n(e)("title"),loading:n(s),options:i.value,series:m.value},null,8,["title","loading","options","series"]))}});function Da(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Position size"])},size:a=>{const{normalize:t}=a;return t(["Size"])}}})}typeof Da=="function"&&Da(Zo);const en=x(Zo,[["__scopeId","data-v-d5e3c55f"]]),xu={class:"cvxprisma"},zu=T({__name:"CvxPrisma",setup(o){return(e,a)=>(v(),S("div",xu,[f(jo,{contract:"convex"}),f(Yo,{contract:"convex"}),f(Ko,{contract:"convex"}),f(Xo,{contract:"convex"}),f(en,{contract:"convex",style:{"grid-column":"1 / -1"}})]))}});const Lu=x(zu,[["__scopeId","data-v-884fe96f"]]),Iu={class:"yprisma"},Au=T({__name:"YPrisma",setup(o){return(e,a)=>(v(),S("div",Iu,[f(jo,{contract:"yearn"}),f(Yo,{contract:"yearn"}),f(Ko,{contract:"yearn"}),f(Xo,{contract:"yearn"}),f(en,{contract:"yearn",style:{"grid-column":"1 / -1"}})]))}});const Du=x(Au,[["__scopeId","data-v-951fffb3"]]),Ou={class:"wrappers"},Vu=T({__name:"Wrappers",setup(o){const e=Ve(),a=Ye(),t=V(0);return ee(()=>{const s=e.params.tab;s&&typeof s=="string"&&(s==="overview"?t.value=0:s==="cvxprisma"?t.value=1:s==="yprisma"&&(t.value=2))}),R(t,async s=>{s===0?await a.push({name:"wrappers",params:{tab:"overview"}}):s===1?await a.push({name:"wrappers",params:{tab:"cvxprisma"}}):s===2&&await a.push({name:"wrappers",params:{tab:"yprisma"}})}),(s,r)=>(v(),S("div",Ou,[f(n(ct),{active:t.value,onTab:r[0]||(r[0]=i=>t.value=i.index)},{default:y(()=>[f(n(me),{header:"Overview"},{default:y(()=>[t.value===0?(v(),P(Pu,{key:0})):M("",!0)]),_:1}),f(n(me),{header:"cvxPRISMA"},{default:y(()=>[t.value===1?(v(),P(Lu,{key:0})):M("",!0)]),_:1}),f(n(me),{header:"yPRISMA"},{default:y(()=>[t.value===2?(v(),P(Du,{key:0})):M("",!0)]),_:1})]),_:1},8,["active"])]))}});const Ru=x(Vu,[["__scopeId","data-v-9af8ba90"]]),Mu={class:"title"},Bu={style:{display:"flex",gap:"1rem"}},qu=["href"],Oa=10,tn=T({__name:"TableLockers",props:{lockers:{default:()=>[]}},setup(o){const{t:e}=q(),{sortColumn:a,sortOrder:t,onSort:s}=ze("weight"),r=V(""),i=w(()=>["Locker","Weight","Locked","Unlocked","Frozen"]),h=w(()=>["locker","weight","locked","unlocked","frozen"]),m=w(()=>["weight","locked","unlocked","frozen"]),d=w(()=>H.chain(o.lockers).filter(_=>{const b=r.value.toLocaleLowerCase().split(" ");return(D=>b.some(k=>D.toLocaleLowerCase().includes(k)))(_.id)}).orderBy(_=>{switch(a.value){case"weight":return _.weight;case"locked":return _.locked;case"unlocked":return _.unlocked;case"frozen":return _.frozen;default:return _.weight}},t.value===ne.Descending?"desc":"asc").value()),{page:u,rowsPage:l,onPage:p}=Te(d,Oa);return(_,b)=>(v(),P(n(re),{class:"datatable-lockers","columns-header":"1fr 3fr","columns-data":"lockers-columns-data",rows:n(l),columns:i.value,sorting:!0,"sorting-columns":h.value,"sorting-columns-enabled":m.value,"sorting-default-column":"weight","sorting-default-dir":"Descending",onSortColumn:n(s)},{"header-content":y(()=>[c("div",Mu,z(n(e)("title")),1),c("div",Bu,[f(n(fe),{modelValue:r.value,"onUpdate:modelValue":b[0]||(b[0]=g=>r.value=g),class:"search",search:!0,placeholder:n(e)("search-placeholder")},null,8,["modelValue","placeholder"]),f(n(ke),{class:"pagination","items-count":d.value.length,"items-per-page":Oa,page:n(u),onPage:n(p)},null,8,["items-count","page","onPage"])])]),row:y(g=>[c("div",null,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${g.item.id}`,target:"_blank",onClick:b[1]||(b[1]=te(()=>{},["stop"]))},z(g.item.id),9,qu)]),c("div",{class:F(["number",{zero:g.item.weight===0}])},[f(n(B),{type:"dollar",value:Math.round(g.item.weight),precision:2,"show-symbol":!1,"show-zero":!0},null,8,["value"])],2),c("div",{class:F(["number",{zero:g.item.locked===0}])},[f(n(B),{type:"dollar",value:Math.round(g.item.locked),precision:2,"show-symbol":!1,"show-zero":!0},null,8,["value"])],2),c("div",{class:F(["number",{zero:g.item.unlocked===0}])},[f(n(B),{type:"dollar",value:Math.round(g.item.unlocked),precision:2,"show-symbol":!1,"show-zero":!0},null,8,["value"])],2),c("div",{class:F(["number",{zero:g.item.frozen===0}])},[f(n(B),{type:"dollar",value:Math.round(g.item.frozen),precision:2,"show-symbol":!1,"show-zero":!0},null,8,["value"])],2)]),_:1},8,["rows","columns","sorting-columns","sorting-columns-enabled","onSortColumn"]))}});function Va(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Lockers"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof Va=="function"&&Va(tn);const Wu=x(tn,[["__scopeId","data-v-8759f4fa"]]),Ra="https://api.thegraph.com/subgraphs/name/benber86/prisma-test";class an extends Ce{async getTopLockers(){const e=`{
      lockers {
        totalWeight
      }
      accountDatas(first: 100 orderBy: weight orderDirection: desc) {
        id
        weight
        locked
        unlocked
        frozen
      }
    }`,a=await this.fetch(Ra,{query:e}),t=a.data.accountDatas.map(r=>({id:r.id,weight:parseInt(r.weight,10),locked:parseInt(r.locked,10),unlocked:parseInt(r.unlocked,10),frozen:parseInt(r.frozen,10)}));return{totalWeight:parseInt(a.data.lockers[0].totalWeight,10),accounts:t}}async getVotesIncentives(){const e=`{
      incentiveVotes(first:100, orderBy:blockNumber, orderDirection:desc) {
        voter {
          id
        }
        votes(first: 100, orderBy:weight, orderDirection:desc) {
          recipient {
            id
            address
          }
          weight
        }
        isClearance
        transactionHash
        blockTimestamp
      }
    }`;return(await this.fetch(Ra,{query:e})).data.incentiveVotes.map(t=>t.votes.map(s=>({voter:t.voter.id,recipient:s.recipient.address,weight:parseInt(s.weight,10),isClearance:t.isClearance,transaction:t.transactionHash,timestamp:parseInt(t.blockTimestamp,10)}))).flat()}}const Fu={class:"title"},Eu=["href"],Uu=["href"],Nu={class:"number"},Hu={class:"number"},ju=["href"],Gu={class:"number"},Ma=20,on=T({__name:"TableVotesIncentives",setup(o){const{t:e}=q(),a=new an(N()),{loading:t,data:s}=U(()=>a.getVotesIncentives(),[]),{relativeTime:r}=Se(),i=w(()=>["Voter","Recipient","Weight","Tx","Time"]),h=w(()=>s.value),{page:m,rowsPage:d,onPage:u}=Te(h,Ma);return(l,p)=>(v(),P(n(re),{class:"datatable-votes-incentives","columns-header":"1fr minmax(auto, 25rem) auto","columns-data":"votes-incentives-columns-data",loading:n(t),rows:n(d),columns:i.value},{"header-content":y(()=>[c("div",Fu,z(n(e)("title")),1),f(n(ke),{class:"pagination","items-count":h.value.length,"items-per-page":Ma,page:n(m),onPage:n(u)},null,8,["items-count","page","onPage"])]),row:y(_=>[c("div",null,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${_.item.voter}`,target:"_blank",onClick:p[0]||(p[0]=te(()=>{},["stop"]))},z(n(X)(_.item.voter)),9,Eu)]),c("div",null,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/tx/${_.item.recipient}`,target:"_blank",onClick:p[1]||(p[1]=te(()=>{},["stop"]))},z(n(X)(_.item.recipient)),9,Uu)]),c("div",Nu,[f(n(B),{type:"dollar",value:Math.round(_.item.weight),precision:2,"show-symbol":!1,"show-zero":!0},null,8,["value"])]),c("div",Hu,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/tx/${_.item.transaction}`,target:"_blank",onClick:p[2]||(p[2]=te(()=>{},["stop"]))},z(n(X)(_.item.transaction)),9,ju)]),c("div",Gu,z(n(r)(_.item.timestamp)),1)]),_:1},8,["loading","rows","columns"]))}});function Ba(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Incentive votes"])}}})}typeof Ba=="function"&&Ba(on);const Yu=x(on,[["__scopeId","data-v-5bb8abfe"]]),nn=T({__name:"ChartTopLockers",props:{totalWeight:{default:0},lockers:{default:()=>[]}},setup(o){const{t:e}=q(),a=Y(),t=w(()=>o.lockers.slice(0,10)),s=w(()=>{const d=j(a.theme),u=se(a.theme);return ie({colors:d,colorsArray:u},{chart:{id:"topLockers",type:"donut",animations:{enabled:!1}},legend:{inverseOrder:!1,position:"bottom"},stroke:{width:.5},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:l=>{const p=i.value[l.seriesIndex],_=l.series[l.seriesIndex],b=_/(o.totalWeight/100);return[`<div><b>${p}</b>:</div><div>${m(b)} - ${h(_)}</div>`].join("")}},labels:t.value.map(l=>l.id).concat(["Other⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"])})}),r=w(()=>{const d=t.value.map(p=>p.weight),u=d.reduce((p,_)=>p+_,0),l=o.totalWeight-u;return[...d,l]}),i=w(()=>t.value.map(d=>d.id).concat(["Other"])),h=d=>`${Z(d,2,"dollar")}${K(d,"dollar")}`,m=d=>`${Z(d,2,"percentage")}${K(d,"percentage")}`;return(d,u)=>(v(),P(n(ce),{class:"graph",title:n(e)("title"),options:s.value,series:r.value},null,8,["title","options","series"]))}});function qa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Top 10 largest lockers"])},numPos:a=>{const{normalize:t}=a;return t(["mkUSD balance:"])}}})}typeof qa=="function"&&qa(nn);const Ju=x(nn,[["__scopeId","data-v-66783f25"]]),Ku={class:"veprisma"},Qu=T({__name:"VePrisma",setup(o){const e=new an(N()),{loading:a,data:t}=U(()=>e.getTopLockers(),{totalWeight:0,accounts:[]}),s=w(()=>t.value.accounts),r=w(()=>t.value.totalWeight);return(i,h)=>(v(),S("div",Ku,[f(Wu,{style:{"grid-row":"1","grid-column":"1"},loading:n(a),lockers:s.value},null,8,["loading","lockers"]),f(Ju,{style:{"grid-row":"1","grid-column":"2"},loading:n(a),lockers:s.value,"total-weight":r.value},null,8,["loading","lockers","total-weight"]),f(Yu,{style:{"grid-row":"2","grid-column":"1 / -1"}})]))}});const Xu=x(Qu,[["__scopeId","data-v-088360fa"]]),Zu=T({__name:"ChartLargePositions",props:{data:{default:()=>[]}},setup(o){const e=Y(),a=w(()=>{const i=j(e.theme),h=se(e.theme);return ie({colors:i,colorsArray:h},{chart:{id:"largePositions",type:"donut",animations:{enabled:!1}},legend:{inverseOrder:!0},stroke:{width:.5},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:m=>{let d=s.value[m.seriesIndex];d=d.length>10?X(d):d;const u=m.series[m.seriesIndex];return[`<div><b>${d}</b>:</div><div>${r(u)}</div>`].join("")}},labels:o.data.map(m=>m.label.length>10?X(m.label):m.label)})}),t=w(()=>o.data.map(i=>i.value)),s=w(()=>o.data.map(i=>i.label)),r=i=>`$${Z(Math.abs(i),1,"dollar")}${K(i,"dollar")}`;return(i,h)=>(v(),P(n(ce),{class:"graph",options:a.value,series:t.value},null,8,["options","series"]))}});const ed=x(Zu,[["__scopeId","data-v-3a117109"]]),td={class:"actions"},sn=T({__name:"ChartLargePositionsSelector",props:{vault:{default:null}},setup(o){const{t:e}=q(),a=new Ae(N()),t=V("collateral"),{loading:s,data:r,load:i}=U(()=>o.vault?a.getLargeTrovePositions("ethereum",o.vault.address,t.value).then(h=>h.positions):Promise.resolve([]),[]);return R([t,()=>o.vault],i),(h,m)=>(v(),P(n(oe),{class:"chart-container",title:n(e)("title"),loading:n(s)},{actions:y(()=>[c("div",td,[f(n(Oe),{value:"Coll.","model-value":t.value==="collateral",onClick:m[0]||(m[0]=d=>t.value="collateral")},null,8,["model-value"]),f(n(Oe),{value:"Debt","model-value":t.value==="debt",onClick:m[1]||(m[1]=d=>t.value="debt")},null,8,["model-value"])])]),default:y(()=>[f(ed,{data:n(r)},null,8,["data"])]),_:1},8,["title","loading"]))}});function Wa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["5 Largest Troves vs Others"])}}})}typeof Wa=="function"&&Wa(sn);const ad=x(sn,[["__scopeId","data-v-ebb2a9ea"]]),od=T({__name:"ChartDistribution",props:{data:{default:()=>[]}},setup(o){const e=Y(),a=w(()=>{const r=j(e.theme),i=se(e.theme);return ie({colors:r,colorsArray:i},{chart:{id:"distribution",type:"bar",animations:{enabled:!1},toolbar:{show:!1}},xaxis:{categories:s.value,labels:{rotate:-45},tickPlacement:"on"},legend:{inverseOrder:!0},stroke:{width:.5},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0}})}),t=w(()=>[{name:"# of troves",data:Object.values(o.data).map(r=>r.value)}]),s=w(()=>o.data.map(r=>r.label));return(r,i)=>(v(),P(n(ce),{class:"graph",options:a.value,series:t.value},null,8,["options","series"]))}});const nd=x(od,[["__scopeId","data-v-3f2e1d65"]]),sd={class:"actions"},ln=T({__name:"ChartDistributionSelector",props:{vault:{default:null}},setup(o){const{t:e}=q(),a=new Ae(N()),{loading:t,data:s,load:r}=U(()=>o.vault?a.getTroveDistribution("ethereum",o.vault.address,i.value).then(h=>h.distribution):Promise.resolve([]),[]),i=V("collateral");return R([i,()=>o.vault],r),(h,m)=>(v(),P(n(oe),{class:"chart-container",title:n(e)("title"),loading:n(t)},{actions:y(()=>[c("div",sd,[f(n(Oe),{value:"Coll.","model-value":i.value==="collateral",onClick:m[0]||(m[0]=d=>i.value="collateral")},null,8,["model-value"]),f(n(Oe),{value:"Debt","model-value":i.value==="debt",onClick:m[1]||(m[1]=d=>i.value="debt")},null,8,["model-value"])])]),default:y(()=>[f(nd,{data:n(s)},null,8,["data"])]),_:1},8,["title","loading"]))}});function Fa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Troves Distribution"])}}})}typeof Fa=="function"&&Fa(ln);const ld=x(ln,[["__scopeId","data-v-a9d23c23"]]),rd={class:"kpis"},id=T({__name:"VaultKPIs",props:{vault:{default:null}},setup(o){return(e,a)=>(v(),S("div",rd,[f(n(le),{label:"TVL","has-value":!!e.vault},{default:y(()=>[e.vault?(v(),P(n(B),{key:0,value:e.vault.tvl,precision:2,type:"dollar"},null,8,["value"])):M("",!0)]),_:1},8,["has-value"]),f(n(le),{label:"Debt / Debt Cap","has-value":!!e.vault},{default:y(()=>[e.vault?(v(),P(n(B),{key:0,value:e.vault.debt,precision:1,type:"dollar"},null,8,["value"])):M("",!0),G(" / "),e.vault?(v(),P(n(B),{key:1,value:e.vault.debt_cap,precision:1,type:"dollar"},null,8,["value"])):M("",!0)]),_:1},8,["has-value"]),f(n(le),{label:"Collat Ratio / Min Ratio","has-value":!!e.vault},{default:y(()=>[e.vault?(v(),P(n(B),{key:0,value:e.vault.cr*100,precision:0,type:"percentage"},null,8,["value"])):M("",!0),G(" / "),e.vault?(v(),P(n(B),{key:1,value:e.vault.mcr*100,precision:0,type:"percentage"},null,8,["value"])):M("",!0)]),_:1},8,["has-value"]),f(n(le),{label:"Interest rate","has-value":!!e.vault},{default:y(()=>[e.vault?(v(),P(n(B),{key:0,value:e.vault.rate*100,"show-zero":!0,precision:1,type:"percentage"},null,8,["value"])):M("",!0)]),_:1},8,["has-value"]),f(n(le),{label:"Troves open / total","has-value":!!e.vault},{default:y(()=>[e.vault?(v(),P(n(B),{key:0,value:e.vault.open_troves,"show-zero":!0,precision:0},null,8,["value"])):M("",!0),G(" / "),e.vault?(v(),P(n(B),{key:1,value:e.vault.open_troves+e.vault.closed_troves,"show-zero":!0,precision:0},null,8,["value"])):M("",!0)]),_:1},8,["has-value"]),f(n(le),{label:"Liquidations / Redemptions","has-value":!!e.vault},{default:y(()=>[e.vault?(v(),P(n(B),{key:0,value:e.vault.liq_troves,"show-zero":!0,precision:0},null,8,["value"])):M("",!0),G(" / "),e.vault?(v(),P(n(B),{key:1,value:e.vault.red_troves,"show-zero":!0,precision:0},null,8,["value"])):M("",!0)]),_:1},8,["has-value"])]))}});const cd=x(id,[["__scopeId","data-v-43359cfa"]]),rn=T({__name:"ChartSingleVaultCollateralRatio",props:{vault:{default:null}},setup(o){const{t:e}=q(),a=new Ae(N());let t,s;const r=Y(),i=V(null),{loading:h,data:m,load:d}=U(()=>o.vault?a.getVaultCollateralRatio("ethereum",o.vault.address,"1m").then(_=>_.ratio):Promise.resolve([]),[]);ee(()=>{i.value&&(t=de(i.value,u(i.value,r.theme)),s=t.addAreaSeries(l(r.theme)),p(m.value))}),R(()=>r.theme,_=>{i.value&&(t.applyOptions(u(i.value,_)),s.applyOptions(l(_)))}),R(()=>o.vault,d),R(m,_=>{p(_)});const u=(_,b)=>_e(_,b,{rightPriceScale:{scaleMargins:{top:.1,bottom:.1}}}),l=_=>{const b=j(_);return{priceFormat:{type:"percent",precision:2,minMove:.1},lineWidth:2,lineType:ve.WithSteps,lineColor:b.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},p=_=>{if(!t||!s)return;const b=H.chain(_).map(g=>({time:g.timestamp,value:g.value*100})).uniqWith((g,D)=>g.time===D.time).orderBy(g=>g.time,"asc").value();b.length>0&&s.setData(b),t.timeScale().fitContent()};return(_,b)=>(v(),P(n(oe),{class:"chart-container",title:n(e)("title"),loading:n(h)},{default:y(()=>[c("div",{ref_key:"chartRef",ref:i,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function Ea(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Vault collateral ratio"])}}})}typeof Ea=="function"&&Ea(rn);const ud=x(rn,[["__scopeId","data-v-2a25091a"]]),cn=T({__name:"ChartSingleVaultOpenTroves",props:{vault:{default:null}},setup(o){const{t:e}=q(),a=new Ae(N());let t,s;const r=Y(),i=V(null),{loading:h,data:m,load:d}=U(()=>o.vault?a.getVaultTroveCount("ethereum",o.vault.address,"1m").then(_=>_.count):Promise.resolve([]),[]);ee(()=>{i.value&&(t=de(i.value,u(i.value,r.theme)),s=t.addAreaSeries(l(r.theme)),p(m.value))}),R(()=>r.theme,_=>{i.value&&(t.applyOptions(u(i.value,_)),s.applyOptions(l(_)))}),R(()=>o.vault,d),R(m,_=>{p(_)});const u=(_,b)=>_e(_,b,{rightPriceScale:{scaleMargins:{top:.1,bottom:.1}}}),l=_=>{const b=j(_);return{priceFormat:{type:"price",precision:0,minMove:.1},lineWidth:2,lineType:ve.WithSteps,lineColor:b.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},p=_=>{if(!t||!s)return;const b=H.chain(_).map(g=>({time:g.timestamp,value:g.value})).uniqWith((g,D)=>g.time===D.time).orderBy(g=>g.time,"asc").value();b.length>0&&s.setData(b),t.timeScale().fitContent()};return(_,b)=>(v(),P(n(oe),{class:"chart-container",title:n(e)("title"),loading:n(h)},{default:y(()=>[c("div",{ref_key:"chartRef",ref:i,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function Ua(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Number of open troves"])}}})}typeof Ua=="function"&&Ua(cn);const dd=x(cn,[["__scopeId","data-v-32bef21c"]]),_d={class:"vault-overview"},md=T({__name:"VaultOverview",props:{vault:{}},setup(o){return(e,a)=>(v(),S("div",_d,[f(cd,{style:{"grid-column":"1 / -1"},vault:e.vault},null,8,["vault"]),f(ld,{vault:e.vault},null,8,["vault"]),f(ad,{vault:e.vault},null,8,["vault"]),f(ud,{vault:e.vault},null,8,["vault"]),f(dd,{vault:e.vault},null,8,["vault"])]))}});const vd=x(md,[["__scopeId","data-v-1531284f"]]),pd={class:"actions"},un=T({__name:"ChartCollateralPrices",props:{vault:{default:null}},setup(o){const{t:e}=q(),a=new At(N());let t,s,r;const i=Y(),h=V(null),m={oracle:[],market:[]},{loading:d,data:u,load:l}=U(async()=>{if(o.vault){const k=await a.getCollateralPrices("ethereum",o.vault.collateral,"7d");return p(k.oracle,k.market)}else return Promise.resolve(m)},m);ee(async()=>{h.value&&(await Je(),t=de(h.value,_(h.value,i.theme)),s=t.addAreaSeries(g(i.theme)),r=t.addAreaSeries(b(i.theme)),D(u.value))}),R(()=>o.vault,l),R(()=>i.theme,k=>{h.value&&(t.applyOptions(_(h.value,k)),s.applyOptions(g(k)),r.applyOptions(b(k)))}),R(u,k=>{D(k)});const p=(k,O)=>{const A=Math.max(k[0].timestamp,O[0].timestamp),L=Math.min(k[k.length-1].timestamp,O[O.length-1].timestamp),$=k.filter(C=>C.timestamp>=A&&C.timestamp<=L),I=O.filter(C=>C.timestamp>=A&&C.timestamp<=L);return $[$.length-1].timestamp<L&&$.push({timestamp:L,value:$[$.length-1].value}),I[I.length-1].timestamp<L&&I.push({timestamp:L,value:I[I.length-1].value}),{oracle:$,market:I}},_=(k,O)=>_e(k,O,{leftPriceScale:{scaleMargins:{top:.1,bottom:.1}}}),b=k=>{const O=j(k);return{priceFormat:{type:"price",precision:2,minMove:.001},lineWidth:2,lineType:ve.WithSteps,lineColor:O.yellow,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},g=k=>{const O=j(k);return{priceFormat:{type:"price",precision:2,minMove:.001},lineWidth:2,lineType:ve.WithSteps,lineColor:O.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},D=k=>{if(!t||!s)return;const O=H.chain(k.oracle).map(L=>({time:L.timestamp,value:L.value})).uniqWith((L,$)=>L.time===$.time).orderBy(L=>L.time,"asc").value(),A=H.chain(k.market).map(L=>({time:L.timestamp,value:L.value})).uniqWith((L,$)=>L.time===$.time).orderBy(L=>L.time,"asc").value();A.length>0&&r.setData(A),O.length>0&&s.setData(O),t.timeScale().fitContent()};return(k,O)=>(v(),P(n(oe),{class:"chart-container",title:n(e)("title"),loading:n(d)},{actions:y(()=>[c("div",pd,[f(n(zt),{items:["Oracle","Market"],colors:n(se)(n(i).theme)},null,8,["colors"])])]),default:y(()=>[c("div",{ref_key:"chartRef",ref:h,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function Na(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Oracle & Market price"])}}})}typeof Na=="function"&&Na(un);const hd=x(un,[["__scopeId","data-v-34c4e618"]]),dn=T({__name:"ChartCollateralPriceImpact",props:{vault:{default:null}},setup(o){const{t:e}=q(),a=new At(N()),t=Y(),{loading:s,data:r,load:i}=U(()=>o.vault?a.getCollateralPriceImpact("ethereum",o.vault.collateral).then(p=>p.impact):Promise.resolve([]),[]),h=w(()=>{const p=j(t.theme),_=se(t.theme);return ie({colors:p,colorsArray:_},{chart:{type:"area",animations:{enabled:!1},toolbar:{show:!1}},fill:{type:"gradient",gradient:{type:"vertical",shadeIntensity:0,inverseColors:!1,opacityFrom:.7,opacityTo:0,stops:[0,90,100]}},toolbar:{show:!1},xaxis:{categories:d.value,labels:{formatter:b=>u(b)}},yaxis:{seriesName:"impact",labels:{formatter:b=>l(b)}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:b=>{if(!o.vault)return"";const g=d.value[b.dataPointIndex],D=u(g*o.vault.price);return`
          <div><b>Collateral sold:</b>:</div>
          <div>${u(g)} ${o.vault.name} ($${D})</div>

          <div><b>Price impact:</b>:</div>
          <div>${l(b.series[0][b.dataPointIndex])}</div>
          `}}})}),m=w(()=>[{name:e("priceImpact"),data:Object.values(r.value).map(p=>p.impact)}]),d=w(()=>r.value.map(p=>o.vault?p.amount/o.vault.price:0)),u=p=>`${Z(Math.abs(p),1,"dollar")}${K(p,"dollar")}`,l=p=>`${Z(p,2,"percentage")}${K(p,"percentage")}`;return R(()=>o.vault,i),(p,_)=>(v(),P(n(ce),{class:"chart",title:n(e)("title"),loading:n(s),options:h.value,series:m.value},null,8,["title","loading","options","series"]))}});function Ha(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["On-chain Selling Price Impact"])},priceImpact:a=>{const{normalize:t}=a;return t(["Price impact"])}}})}typeof Ha=="function"&&Ha(dn);const fd=x(dn,[["__scopeId","data-v-5e82454f"]]),gd={class:"kpis"},bd=["href"],yd=T({__name:"CollateralKPIs",props:{vault:{default:null}},setup(o){const e=new At(N()),{data:a,load:t}=U(()=>o.vault?e.getCollateralInfo("ethereum",o.vault.collateral).then(s=>s.info):Promise.resolve(null),null);return R(()=>o.vault,t),(s,r)=>(v(),S("div",gd,[f(n(le),{label:"Oracle price","has-value":!!n(a)},{default:y(()=>[n(a)?(v(),P(n(B),{key:0,value:n(a).price,precision:2,type:"dollar"},null,8,["value"])):M("",!0)]),_:1},8,["has-value"]),f(n(le),{label:"Total supply","has-value":!!n(a)},{default:y(()=>[n(a)?(v(),P(n(B),{key:0,value:n(a).supply,precision:2,type:"dollar"},null,8,["value"])):M("",!0)]),_:1},8,["has-value"]),f(n(le),{label:"TVL","has-value":!!n(a)},{default:y(()=>[n(a)?(v(),P(n(B),{key:0,value:n(a).tvl,precision:1,type:"dollar"},null,8,["value"])):M("",!0)]),_:1},8,["has-value"]),f(n(le),{label:"Share of the ETH LSD market","has-value":!!n(a)},{default:y(()=>[n(a)?(v(),P(n(B),{key:0,value:n(a).share,precision:1,type:"percentage"},null,8,["value"])):M("",!0)]),_:1},8,["has-value"]),f(n(le),{label:"Full risk analysis by Prisma Risk team","has-value":!!n(a)},{default:y(()=>[n(a)?(v(),S("a",{key:0,href:n(a).risk}," Risk Report ",8,bd)):M("",!0)]),_:1},8,["has-value"])]))}});const $d=x(yd,[["__scopeId","data-v-39133619"]]),wd={class:"collateral"},Cd=T({__name:"Collateral",props:{vault:{}},setup(o){return(e,a)=>(v(),S("div",wd,[f($d,{style:{"grid-column":"1 / -1"},vault:e.vault},null,8,["vault"]),f(hd,{vault:e.vault},null,8,["vault"]),f(fd,{vault:e.vault},null,8,["vault"])]))}});const kd=x(Cd,[["__scopeId","data-v-6dd7b8c7"]]),Sd={class:"title"},Td={style:{display:"flex",gap:"1rem"}},Pd=["href"],xd=["href"],zd={class:"number"},Ld={class:"number"},Id={class:"number"},ja=15,_n=T({__name:"TableLiquidations",props:{vault:{default:null}},setup(o){const{t:e}=q(),a=new Dt(N()),{loading:t,data:s,load:r}=U(()=>o.vault?a.getLiquidations("ethereum",o.vault.address):Promise.resolve([]),[]),{relativeTime:i}=Se(),{sortColumn:h,sortOrder:m,onSort:d}=ze("timestamp"),u=V(""),l=V(null),p=w(()=>["Liquidator","Transaction","Debt","# Troves","Time"]),_=w(()=>["liquidator","tx","debt","numtroves","timestamp"]),b=w(()=>H.chain(s.value).filter(A=>{const L=u.value.toLocaleLowerCase().split(" ");return(I=>L.some(C=>I.toLocaleLowerCase().includes(C)))(A.liquidator)}).orderBy(A=>{switch(h.value){case"liquidator":return A.liquidator;case"tx":return A.transaction;case"debt":return A.liquidated_collateral_usd;case"numtroves":return A.troves_affected_count;case"timestamp":return A.timestamp;default:return A.timestamp}},m.value===ne.Descending?"desc":"asc").value()),{page:g,rowsPage:D,onPage:k}=Te(b,ja),O=A=>{l.value=A};return R(()=>o.vault,r),(A,L)=>(v(),S(ae,null,[f(n(re),{class:"datatable-liquidations","columns-header":"1fr 2fr","columns-data":"liquidations-columns-data",loading:n(t),rows:n(D),columns:p.value,sorting:!0,"sorting-columns":_.value,"sorting-columns-enabled":_.value,"sorting-default-column":"timestamp","sorting-default-dir":"Descending",onSortColumn:n(d),onSelected:O},{"header-content":y(()=>[c("div",Sd,z(n(e)("title")),1),c("div",Td,[f(n(fe),{modelValue:u.value,"onUpdate:modelValue":L[0]||(L[0]=$=>u.value=$),class:"search",search:!0,placeholder:n(e)("search-placeholder")},null,8,["modelValue","placeholder"]),f(n(ke),{class:"pagination","items-count":b.value.length,"items-per-page":ja,page:n(g),onPage:n(k)},null,8,["items-count","page","onPage"])])]),row:y($=>[c("div",null,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${$.item.liquidator}`,target:"_blank",onClick:L[1]||(L[1]=te(()=>{},["stop"]))},z(n(X)($.item.liquidator)),9,Pd)]),c("div",null,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/tx/${$.item.transaction}`,target:"_blank",onClick:L[2]||(L[2]=te(()=>{},["stop"]))},z(n(X)($.item.transaction)),9,xd)]),c("div",zd,[f(n(B),{type:"dollar",value:Math.round($.item.liquidated_debt),precision:1/0},null,8,["value"])]),c("div",Ld,z($.item.troves_affected_count),1),c("div",Id,z(n(i)($.item.timestamp)),1)]),"row-details":y(()=>[G("   ")]),_:1},8,["loading","rows","columns","sorting-columns","sorting-columns-enabled","onSortColumn"]),f(n(Re),{show:!!l.value,onClose:L[3]||(L[3]=$=>l.value=null)},{default:y(()=>{var $;return[l.value?(v(),P(Rt,{key:0,liquidation:l.value,"vault-addr":(($=A.vault)==null?void 0:$.address)??""},null,8,["liquidation","vault-addr"])):M("",!0)]}),_:1},8,["show"])],64))}});function Ga(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Liquidations"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof Ga=="function"&&Ga(_n);const Ad=x(_n,[["__scopeId","data-v-6ae164f8"]]),Dd={class:"liquidations"},Od=T({__name:"Liquidations",props:{vault:{}},setup(o){return(e,a)=>(v(),S("div",Dd,[f(Ad,{vault:e.vault},null,8,["vault"])]))}});const Vd=x(Od,[["__scopeId","data-v-da7280a8"]]),Rd={class:"title"},Md={style:{display:"flex",gap:"1rem"}},Bd=["href"],qd=["href"],Wd={class:"number"},Fd={class:"number"},Ed={class:"number"},Ya=15,mn=T({__name:"TableRedemptions",props:{vault:{default:null}},setup(o){const{t:e}=q(),a=new Ot(N()),{loading:t,data:s,load:r}=U(()=>o.vault?a.getRedemptions("ethereum",o.vault.address):Promise.resolve([]),[]),{relativeTime:i}=Se(),{sortColumn:h,sortOrder:m,onSort:d}=ze("timestamp"),u=V(""),l=V(null),p=w(()=>["Redeemer","Transaction","Debt","# Troves","Time"]),_=w(()=>["redeemer","tx","debt","numtroves","timestamp"]),b=w(()=>H.chain(s.value).filter(A=>{const L=u.value.toLocaleLowerCase().split(" ");return(I=>L.some(C=>I.toLocaleLowerCase().includes(C)))(A.redeemer)}).orderBy(A=>{switch(h.value){case"redeemer":return A.redeemer;case"tx":return A.transaction;case"debt":return A.actual_debt_amount;case"numtroves":return A.troves_affected_count;case"timestamp":return A.timestamp;default:return A.timestamp}},m.value===ne.Descending?"desc":"asc").value()),{page:g,rowsPage:D,onPage:k}=Te(b,Ya),O=A=>{l.value=A};return R(()=>o.vault,r),(A,L)=>(v(),S(ae,null,[f(n(re),{class:"datatable-redemptions","columns-header":"1fr 2fr","columns-data":"redemptions-columns-data",loading:n(t),rows:n(D),columns:p.value,sorting:!0,"sorting-columns":_.value,"sorting-columns-enabled":_.value,"sorting-default-column":"timestamp","sorting-default-dir":"Descending",onSortColumn:n(d),onSelected:O},{"header-content":y(()=>[c("div",Rd,z(n(e)("title")),1),c("div",Md,[f(n(fe),{modelValue:u.value,"onUpdate:modelValue":L[0]||(L[0]=$=>u.value=$),class:"search",search:!0,placeholder:n(e)("search-placeholder")},null,8,["modelValue","placeholder"]),f(n(ke),{class:"pagination","items-count":b.value.length,"items-per-page":Ya,page:n(g),onPage:n(k)},null,8,["items-count","page","onPage"])])]),row:y($=>[c("div",null,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${$.item.redeemer}`,target:"_blank",onClick:L[1]||(L[1]=te(()=>{},["stop"]))},z(n(X)($.item.redeemer)),9,Bd)]),c("div",null,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/tx/${$.item.transaction}`,target:"_blank",onClick:L[2]||(L[2]=te(()=>{},["stop"]))},z(n(X)($.item.transaction)),9,qd)]),c("div",Wd,[f(n(B),{type:"dollar",value:Math.round($.item.actual_debt_amount),precision:1/0},null,8,["value"])]),c("div",Fd,z($.item.troves_affected_count),1),c("div",Ed,z(n(i)($.item.timestamp)),1)]),"row-details":y(()=>[G("   ")]),_:1},8,["loading","rows","columns","sorting-columns","sorting-columns-enabled","onSortColumn"]),f(n(Re),{show:!!l.value,onClose:L[3]||(L[3]=$=>l.value=null)},{default:y(()=>{var $;return[l.value?(v(),P(Vt,{key:0,redemption:l.value,"vault-addr":(($=A.vault)==null?void 0:$.address)??""},null,8,["redemption","vault-addr"])):M("",!0)]}),_:1},8,["show"])],64))}});function Ja(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Redemptions"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof Ja=="function"&&Ja(mn);const Ud=x(mn,[["__scopeId","data-v-1f3c9e2e"]]),Nd={class:"redemptions"},Hd=T({__name:"Redemptions",props:{vault:{}},setup(o){return(e,a)=>(v(),S("div",Nd,[f(Ud,{vault:e.vault},null,8,["vault"])]))}});const jd=x(Hd,[["__scopeId","data-v-ad2fa9c5"]]),Gd={style:{display:"flex",gap:"1rem"}},Yd=["href"],Jd={class:"number"},Kd={class:"number"},Ka=15,vn=T({__name:"TableTroves",props:{vault:{default:null}},setup(o){const{t:e}=q(),a=new Qe(N()),{loading:t,data:s,load:r}=U(()=>o.vault?a.getTroves("ethereum",o.vault.address):Promise.resolve([]),[]),{relativeTime:i}=Se(),{sortColumn:h,sortOrder:m,onSort:d}=ze("updated"),u=V(""),l=V("Open"),p=w(()=>l.value==="Open"?["Owner","Debt","Collateral","Ratio","Created At","Last Updated"]:["Owner","","","","Created At","Last Updated"]),_=w(()=>l.value==="Open"?["owner","debt","coll","ratio","created","updated"]:["owner","","","","created","updated"]),b=w(()=>l.value==="Open"?["owner","debt","coll","ratio","created","updated"]:["owner","created","updated"]),g=w(()=>H.chain(s.value).filter(L=>l.value===L.status).filter(L=>{const $=u.value.toLocaleLowerCase().split(" ");return(C=>$.some(W=>C.toLocaleLowerCase().includes(W)))(L.owner)}).orderBy(L=>{switch(h.value){case"owner":return L.owner;case"debt":return L.debt;case"coll":return L.collateral_usd;case"ratio":return L.collateral_ratio;case"created":return L.created_at;case"updated":return L.last_update;default:return L.last_update}},m.value===ne.Descending?"desc":"asc").value()),{page:D,rowsPage:k,onPage:O}=Te(g,Ka),A=L=>{L===0?l.value="Open":L===1?l.value="Closed":l.value="Open"};return R(()=>o.vault,r),(L,$)=>(v(),P(n(re),{class:"datatable-troves","columns-header":"1fr 2fr","columns-data":"troves-columns-data",loading:n(t),rows:n(k),columns:p.value,sorting:!0,"sorting-columns":_.value,"sorting-columns-enabled":b.value,"sorting-default-column":"updated","sorting-default-dir":"Descending",onSortColumn:n(d)},{"header-content":y(()=>[f(n(ct),{class:"types",onTab:$[0]||($[0]=I=>A(I.index))},{default:y(()=>[f(n(me),{header:"Open"}),f(n(me),{header:"Closed"})]),_:1}),c("div",Gd,[f(n(fe),{modelValue:u.value,"onUpdate:modelValue":$[1]||($[1]=I=>u.value=I),class:"search",search:!0,placeholder:n(e)("search-placeholder")},null,8,["modelValue","placeholder"]),f(n(ke),{class:"pagination","items-count":g.value.length,"items-per-page":Ka,page:n(D),onPage:n(O)},null,8,["items-count","page","onPage"])])]),row:y(I=>[c("div",null,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${I.item.owner}`,target:"_blank",onClick:$[2]||($[2]=te(()=>{},["stop"]))},z(n(X)(I.item.owner)),9,Yd)]),c("div",{class:F(["number",{hide:l.value==="Closed"}])},[f(n(B),{type:"dollar",value:Math.round(I.item.debt),precision:1/0},null,8,["value"])],2),c("div",{class:F(["number",{hide:l.value==="Closed"}])},[f(n(B),{type:"dollar",value:Math.round(I.item.collateral_usd),precision:1/0},null,8,["value"])],2),c("div",{class:F(["number",{hide:l.value==="Closed"}])},[f(n(B),{value:I.item.collateral_ratio*100,precision:2,type:"percentage"},null,8,["value"])],2),c("div",Jd,z(n(i)(I.item.created_at)),1),c("div",Kd,z(n(i)(I.item.last_update)),1)]),"row-details":y(()=>[G("   ")]),_:1},8,["loading","rows","columns","sorting-columns","sorting-columns-enabled","onSortColumn"]))}});function Qa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof Qa=="function"&&Qa(vn);const Qd=x(vn,[["__scopeId","data-v-41b44e8e"]]),Xd={class:"troves"},Zd=T({__name:"Troves",props:{vault:{}},setup(o){const e=_t(),a=Ye(),t=async s=>{e.trove=s,o.vault&&await a.push({name:"prismatrove",params:{troveAddr:s.owner,vaultAddr:o.vault.address}})};return(s,r)=>(v(),S("div",Xd,[f(Qd,{vault:s.vault,onSelected:t},null,8,["vault"])]))}});const e_=x(Zd,[["__scopeId","data-v-7c5b7b3f"]]),t_={class:"vault-manager"},a_=T({__name:"VaultManager",setup(o){const e=Ve(),a=Ye(),t=ut(),s=_t(),r=Le().getSocket("api"),i=new Xe(r,"ethereum"),h=ye(i.overview$,[]),m=V(0),d=w(()=>e.params.vaultAddr),u=w(()=>s.vault);return ee(()=>{var p;const l=e.params.tab;l&&typeof l=="string"&&(l==="collateral"?m.value=1:l==="trove"?m.value=2:l==="liquidations"?m.value=3:l==="redemptions"&&(m.value=4)),t.show=!0,t.crumbs=[{id:"vaults",label:"Vaults",pathName:"vaults"},{id:"vault",label:`Vault: ${((p=u.value)==null?void 0:p.name)??"?"}`}]}),R(h,l=>{const p=l.find(_=>_.address===d.value);p&&(s.vault=p)}),R(u,l=>{t.crumbs=[{id:"vaults",label:"Vaults",pathName:"vaults"},{id:"vault",label:`Vault: ${(l==null?void 0:l.name)??"?"}`}]}),R(m,async l=>{l===0?await a.push({name:"prismavault",params:{tab:"",vaultAddr:d.value}}):l===1?await a.push({name:"prismavault",params:{tab:"collateral",vaultAddr:d.value}}):l===2?await a.push({name:"prismavault",params:{tab:"trove",vaultAddr:d.value}}):l===3?await a.push({name:"prismavault",params:{tab:"liquidations",vaultAddr:d.value}}):l===4&&await a.push({name:"prismavault",params:{tab:"redemptions",vaultAddr:d.value}})}),(l,p)=>(v(),S("div",t_,[f(n(ct),{active:m.value,onTab:p[0]||(p[0]=_=>m.value=_.index)},{default:y(()=>[f(n(me),{header:"Overview"},{default:y(()=>[(v(),P(Ze,null,[m.value===0?(v(),P(vd,{key:0,vault:u.value},null,8,["vault"])):M("",!0)],1024))]),_:1}),f(n(me),{header:"Collateral"},{default:y(()=>[(v(),P(Ze,null,[m.value===1&&u.value?(v(),P(kd,{key:0,vault:u.value},null,8,["vault"])):M("",!0)],1024))]),_:1}),f(n(me),{header:"Troves"},{default:y(()=>[(v(),P(Ze,null,[m.value===2&&u.value?(v(),P(e_,{key:0,vault:u.value},null,8,["vault"])):M("",!0)],1024))]),_:1}),f(n(me),{header:"Liquidations"},{default:y(()=>[(v(),P(Ze,null,[m.value===3&&u.value?(v(),P(Vd,{key:0,vault:u.value},null,8,["vault"])):M("",!0)],1024))]),_:1}),f(n(me),{header:"Redemptions"},{default:y(()=>[(v(),P(Ze,null,[m.value===4&&u.value?(v(),P(jd,{key:0,vault:u.value},null,8,["vault"])):M("",!0)],1024))]),_:1})]),_:1},8,["active"])]))}});const o_=x(a_,[["__scopeId","data-v-da570ee1"]]),n_=o=>(pe("data-v-14282d5b"),o=o(),he(),o),s_=n_(()=>c("div",null,[G(" This chart displays that amount of collateral available below different collateral ratios. "),c("br"),G(" It also displays the position of the trove relative to other troves in this vault. "),c("br"),c("br"),G(" This information is useful to estimate a trove's risk of redemption. "),c("br"),G(" Even if the trove's collateral ratio is high in the absolute, a lower ratio relative "),c("br"),G(" to other troves means a higher risk of redemption."),c("br"),c("br"),G(` As such, the lower the "risk rank" displayed, the higher the trove's risk of being redeemed. `)],-1)),pn=T({__name:"ChartTroveRank",props:{vault:{default:null},trove:{default:null}},setup(o){const{t:e}=q(),a=new Qe(N()),t=Y(),s=V("Trove Relative Position"),r={rank:null,total_positions:0,ratio:null,positions:[]},{loading:i,data:h,load:m}=U(async()=>o.vault&&o.trove?await a.getTroveRank("ethereum",o.vault.address,o.trove.owner):Promise.resolve(r),r),d=w(()=>{var k,O;const b=j(t.theme),g=se(t.theme),D={x:((k=h.value)==null?void 0:k.ratio)??0,borderColor:b.yellow,strokeDashArray:2,label:{borderColor:b.yellow,style:{background:b.yellow,color:"rgb(34, 34, 34)"},position:"top",offsetX:15,text:`This trove: ${_(((O=h.value)==null?void 0:O.ratio)??0,1)}`}};return ie({colors:b,colorsArray:g},{chart:{type:"area",animations:{enabled:!1},toolbar:{show:!0}},fill:{type:"gradient",gradient:{type:"vertical",shadeIntensity:0,inverseColors:!1,opacityFrom:.7,opacityTo:0,stops:[0,90,100]}},annotations:{xaxis:h.value.ratio?[D]:[]},toolbar:{show:!1},xaxis:{type:"numeric",categories:l.value,labels:{formatter:A=>_(A)}},yaxis:{seriesName:"impact",labels:{formatter:A=>p(A)}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:A=>{if(!o.vault)return"";const L=l.value[A.dataPointIndex];return`
          <div><b>Collateral ratio:</b>:</div>
          <div>${A.dataPointIndex===l.value.length-1?"Over 250%":_(L)}</div>

          <div><b>Troves with lower or equal ratio:</b>:</div>
          <div>${h.value.positions[A.dataPointIndex].trove_count}</div>

          <div><b>Collateral value at lower or equal ratio:</b>:</div>
          <div>$${p(A.series[0][A.dataPointIndex])}</div>
          `}}})}),u=w(()=>[{name:e("rank"),data:Object.values(h.value.positions).map(b=>b.collateral_usd)}]),l=w(()=>h.value.positions.map(b=>b.ratio)),p=b=>`${Z(Math.abs(b),1,"dollar")}${K(b,"dollar")}`,_=(b,g=0)=>`${Z(b,g,"percentage")}${K(b,"percentage")}`;return R(()=>o.vault,m),R(h,b=>{b&&typeof b.rank=="number"&&(s.value=e("title",{rank:b.rank,total_positions:b.total_positions}))},{immediate:!0}),(b,g)=>(v(),P(n(oe),{class:"chart-container",title:s.value,loading:n(i)},{actions:y(()=>[f(n(je),null,{default:y(()=>[s_]),_:1})]),default:y(()=>[f(n(Tt),{class:"chart",options:d.value,series:u.value},null,8,["options","series"])]),_:1},8,["title","loading"]))}});function Xa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t,interpolate:s,named:r}=a;return t(["Trove Relative Position (Risk rank: ",s(r("rank"))," / ",s(r("total_positions")),")"])}}})}typeof Xa=="function"&&Xa(pn);const l_=x(pn,[["__scopeId","data-v-14282d5b"]]),hn=T({__name:"ChartTroveHealth",props:{vault:{default:null},trove:{default:null}},setup(o){const{t:e}=q(),a=new Qe(N()),t=Y(),{loading:s,data:r,load:i}=U(async()=>o.vault&&o.trove?await a.getTroveSnapshots("ethereum",o.vault.address,o.trove.owner).then(p=>p.snapshots):Promise.resolve([]),[]),h=w(()=>{const l=j(t.theme),p=se(t.theme);return ie({colors:l,colorsArray:p},{chart:{animations:{enabled:!1},toolbar:{tools:{download:!0}}},xaxis:{type:"datetime"},yaxis:[{seriesName:"collateralUsd",tickAmount:4,opposite:!0,labels:{formatter:_=>d(_)},min:0,max:Math.max(...r.value.map(_=>_.collateral_usd))},{seriesName:"ratio",tickAmount:4,labels:{formatter:_=>u(_)},min:0,max:Math.max(...r.value.map(_=>_.cr??0))}],dataLabels:{enabled:!1},stroke:{curve:"straight"},tooltip:{followCursor:!1,enabled:!0,intersect:!1,custom:_=>{const b=_.w.globals.initialSeries[0].data[_.dataPointIndex].y,g=_.w.globals.initialSeries[1].data[_.dataPointIndex]?_.w.globals.initialSeries[1].data[_.dataPointIndex].y:0;return[`<div><b>${e("ratio")}</b>:</div><div>${u(g)}</div>`,`<div><b>${e("collateralUsd")}</b>:</div><div>${d(b)}</div>`].join("")}}})}),m=w(()=>[{name:e("collateralUsd"),type:"line",data:r.value.map(l=>({x:l.timestamp*1e3,y:l.collateral_usd}))},{name:e("ratio"),type:"line",data:r.value.map(l=>({x:l.timestamp*1e3,y:l.cr??0}))}]),d=l=>`$${Z(l,1,"dollar")}${K(l,"dollar")}`,u=l=>`${De(l*100,2)}%`;return R(()=>o.vault,i),(l,p)=>(v(),P(n(ce),{class:"health",title:n(e)("title"),options:h.value,series:m.value,loading:n(s)},null,8,["title","options","series","loading"]))}});function Za(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Health"])},collateralUsd:a=>{const{normalize:t}=a;return t(["Collateral ($)"])},ratio:a=>{const{normalize:t}=a;return t(["Ratio"])}}})}typeof Za=="function"&&Za(hn);const r_=x(hn,[["__scopeId","data-v-727e85bf"]]),i_={class:"title"},c_={class:"number"},u_={class:"number"},d_={class:"number"},__={class:"number"},m_={class:"number"},v_=["href"],p_={class:"number"},fn=T({__name:"TableTroveOps",props:{vault:{default:null},trove:{default:null}},setup(o){const{t:e}=q(),a=new Qe(N()),{relativeTime:t}=Se(),s=w(()=>H.orderBy(i.value,d=>d.timestamp,"desc")),{loading:r,data:i,load:h}=U(()=>o.vault&&o.trove?a.getTroveSnapshots("ethereum",o.vault.address,o.trove.owner).then(d=>d.snapshots):Promise.resolve([]),[]),m=d=>d.replace(/^_*(.)|_+(.)/g,(u,l,p)=>l?l.toUpperCase():" "+p.toUpperCase());return R(()=>o.vault,h),(d,u)=>(v(),P(n(re),{class:"datatable-trove-ops","columns-header":"1fr 1fr auto","columns-data":"trove-ops-columns-data",loading:n(r),rows:s.value,columns:["Operation","Collateral","Debt","Ratio","Stake","Tx","Time"]},{"header-content":y(()=>[c("div",i_,z(n(e)("title")),1)]),row:y(l=>[c("div",null,z(m(l.item.operation)),1),c("div",c_,[l.item.collateral?(v(),P(n(B),{key:0,value:l.item.collateral,precision:3,"show-symbol":!1,type:"dollar"},null,8,["value"])):M("",!0)]),c("div",u_,[f(n(B),{type:"dollar",value:Math.round(l.item.debt),precision:1/0},null,8,["value"])]),c("div",d_,[l.item.cr?(v(),P(n(B),{key:0,value:l.item.cr*100,precision:2,type:"percentage"},null,8,["value"])):M("",!0)]),c("div",__,[l.item.stake?(v(),P(n(B),{key:0,value:l.item.stake,precision:2,"show-symbol":!1,type:"dollar"},null,8,["value"])):M("",!0)]),c("div",m_,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/tx/${l.item.hash}`,target:"_blank",onClick:u[0]||(u[0]=te(()=>{},["stop"]))},z(n(X)(l.item.hash)),9,v_)]),c("div",p_,z(n(t)(l.item.timestamp)),1)]),_:1},8,["loading","rows"]))}});function eo(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Operations"])}}})}typeof eo=="function"&&eo(fn);const h_=x(fn,[["__scopeId","data-v-4101d450"]]),f_={class:"trove"},g_=T({__name:"Trove",setup(o){const e=new Qe(N()),a=ut(),t=_t(),s=Ve(),r=Le().getSocket("api"),i=new Xe(r,"ethereum"),h=ye(i.overview$,[]),m=w(()=>s.params.vaultAddr),d=w(()=>t.vault),u=w(()=>t.trove);return ee(async()=>{var p,_;const l=await e.getTroveDetail("ethereum",s.params.vaultAddr,s.params.troveAddr);l&&(t.trove=l),a.show=!0,a.crumbs=[{id:"vaults",label:"Vaults",pathName:"vaults"},{id:"vault",label:`Vault: ${((p=d.value)==null?void 0:p.name)??"?"}`,pathName:"prismavault"},{id:"trove",label:`Trove: ${((_=u.value)==null?void 0:_.owner)??"?"}`}]}),R(h,l=>{const p=l.find(_=>_.address===m.value);p&&(t.vault=p)}),R(d,l=>{var p;a.crumbs=[{id:"vaults",label:"Vaults",pathName:"vaults"},{id:"vault",label:`Vault: ${(l==null?void 0:l.name)??"?"}`,pathName:"prismavault"},{id:"trove",label:`Trove: ${((p=u.value)==null?void 0:p.owner)??"?"}`}]}),R(u,l=>{var p;a.crumbs=[{id:"vaults",label:"Vaults",pathName:"vaults"},{id:"vault",label:`Vault: ${((p=d.value)==null?void 0:p.name)??"?"}`,pathName:"prismavault"},{id:"trove",label:`Trove: ${(l==null?void 0:l.owner)??"?"}`}]}),(l,p)=>(v(),S("div",f_,[f(l_,{class:"graph-rank",vault:d.value,trove:u.value},null,8,["vault","trove"]),f(r_,{class:"graph-health",vault:d.value,trove:u.value},null,8,["vault","trove"]),f(h_,{class:"table-ops",vault:d.value,trove:u.value},null,8,["vault","trove"])]))}});const b_=x(g_,[["__scopeId","data-v-43809852"]]),y_={class:"title"},$_={style:{display:"flex",gap:"1rem"}},w_=["src"],C_=["href"],k_=["href"],S_={class:"number"},T_={class:"number"},P_={class:"number"},to=15,gn=T({__name:"TableRedemptions",props:{troves:{default:()=>[]}},setup(o){const e=new Ot(N()),{t:a}=q(),{loading:t,data:s,load:r}=U(()=>Promise.all(o.troves.map($=>e.getRedemptionsForTrove("ethereum",$))).then($=>$.flat()),[]),{relativeTime:i}=Se(),{sortColumn:h,sortOrder:m,onSort:d}=ze("timestamp"),u=V(""),l=V("all"),p=V(null),_=w(()=>["","Redeemer","Transaction","Debt","# Troves","Time"]),b=w(()=>["icon","redeemer","tx","debt","numtroves","timestamp"]),g=w(()=>["redeemer","tx","debt","numtroves","timestamp"]),D=w(()=>H.chain(s.value).filter($=>{const I=u.value.toLocaleLowerCase().split(" "),C=J=>I.some(ge=>J.toLocaleLowerCase().includes(ge)),W=xe($.vault),E=l.value==="all"?!0:l.value===W;return C($.redeemer)&&E}).orderBy($=>{switch(h.value){case"redeemer":return $.redeemer;case"tx":return $.transaction;case"debt":return $.actual_debt_amount;case"numtroves":return $.troves_affected_count;case"timestamp":return $.timestamp;default:return $.timestamp}},m.value===ne.Descending?"desc":"asc").value()),{page:k,rowsPage:O,onPage:A}=Te(D,to),L=$=>{p.value=$};return R(()=>o.troves,r),($,I)=>(v(),S(ae,null,[f(n(re),{class:"datatable-redemptions","columns-header":"1fr 12rem 2fr","columns-data":"redemptions-columns-data",loading:n(t)||$.troves.length===0,rows:n(O),columns:_.value,sorting:!0,"sorting-columns":b.value,"sorting-columns-enabled":g.value,"sorting-default-column":"timestamp","sorting-default-dir":"Descending",onSortColumn:n(d),onSelected:L},{"header-content":y(()=>[c("div",y_,z(n(a)("title")),1),f(st,{class:"select-collateral",collateral:l.value,all:!0,onSelectCollateral:I[0]||(I[0]=C=>l.value=C)},null,8,["collateral"]),c("div",$_,[f(n(fe),{modelValue:u.value,"onUpdate:modelValue":I[1]||(I[1]=C=>u.value=C),class:"search",search:!0,placeholder:n(a)("search-placeholder")},null,8,["modelValue","placeholder"]),f(n(ke),{class:"pagination","items-count":D.value.length,"items-per-page":to,page:n(k),onPage:n(A)},null,8,["items-count","page","onPage"])])]),row:y(C=>[c("img",{src:n(Ie)(n(xe)(C.item.vault))},null,8,w_),c("div",null,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${C.item.redeemer}`,target:"_blank",onClick:I[2]||(I[2]=te(()=>{},["stop"]))},z(n(X)(C.item.redeemer)),9,C_)]),c("div",null,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/tx/${C.item.transaction}`,target:"_blank",onClick:I[3]||(I[3]=te(()=>{},["stop"]))},z(n(X)(C.item.transaction)),9,k_)]),c("div",S_,[f(n(B),{type:"dollar",value:Math.round(C.item.actual_debt_amount),precision:1/0},null,8,["value"])]),c("div",T_,z(C.item.troves_affected_count),1),c("div",P_,z(n(i)(C.item.timestamp)),1)]),"row-details":y(()=>[G("   ")]),_:1},8,["loading","rows","columns","sorting-columns","sorting-columns-enabled","onSortColumn"]),f(n(Re),{show:!!p.value,onClose:I[4]||(I[4]=C=>p.value=null)},{default:y(()=>[p.value?(v(),P(Vt,{key:0,redemption:p.value,"vault-addr":p.value.vault},null,8,["redemption","vault-addr"])):M("",!0)]),_:1},8,["show"])],64))}});function ao(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Redemptions"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof ao=="function"&&ao(gn);const x_=x(gn,[["__scopeId","data-v-6947501b"]]),z_={class:"title"},L_={style:{display:"flex",gap:"1rem"}},I_=["src"],A_=["href"],D_=["href"],O_={class:"number"},V_={class:"number"},R_={class:"number"},oo=15,bn=T({__name:"TableLiquidations",props:{troves:{default:()=>[]}},setup(o){const e=new Dt(N()),{t:a}=q(),{loading:t,data:s,load:r}=U(()=>Promise.all(o.troves.map($=>e.getLiquidationsForTrove("ethereum",$))).then($=>$.flat()),[]),{relativeTime:i}=Se(),{sortColumn:h,sortOrder:m,onSort:d}=ze("timestamp"),u=V(""),l=V("all"),p=V(null),_=w(()=>["","Liquidator","Transaction","Debt","# Troves","Time"]),b=w(()=>["icon","liquidator","tx","debt","numtroves","timestamp"]),g=w(()=>["liquidator","tx","debt","numtroves","timestamp"]),D=w(()=>H.chain(s.value).filter($=>{const I=u.value.toLocaleLowerCase().split(" "),C=J=>I.some(ge=>J.toLocaleLowerCase().includes(ge)),W=xe($.vault),E=l.value==="all"?!0:l.value===W;return C($.liquidator)&&E}).orderBy($=>{switch(h.value){case"liquidator":return $.liquidator;case"tx":return $.transaction;case"debt":return $.liquidated_collateral_usd;case"numtroves":return $.troves_affected_count;case"timestamp":return $.timestamp;default:return $.timestamp}},m.value===ne.Descending?"desc":"asc").value()),{page:k,rowsPage:O,onPage:A}=Te(D,oo),L=$=>{p.value=$};return R(()=>o.troves,r),($,I)=>(v(),S(ae,null,[f(n(re),{class:"datatable-liquidations","columns-header":"1fr 12rem 2fr","columns-data":"liquidations-columns-data",loading:n(t)||$.troves.length===0,rows:n(O),columns:_.value,sorting:!0,"sorting-columns":b.value,"sorting-columns-enabled":g.value,"sorting-default-column":"timestamp","sorting-default-dir":"Descending",onSortColumn:n(d),onSelected:L},{"header-content":y(()=>[c("div",z_,z(n(a)("title")),1),f(st,{class:"select-collateral",collateral:l.value,all:!0,onSelectCollateral:I[0]||(I[0]=C=>l.value=C)},null,8,["collateral"]),c("div",L_,[f(n(fe),{modelValue:u.value,"onUpdate:modelValue":I[1]||(I[1]=C=>u.value=C),class:"search",search:!0,placeholder:n(a)("search-placeholder")},null,8,["modelValue","placeholder"]),f(n(ke),{class:"pagination","items-count":D.value.length,"items-per-page":oo,page:n(k),onPage:n(A)},null,8,["items-count","page","onPage"])])]),row:y(C=>[c("img",{src:n(Ie)(n(xe)(C.item.vault))},null,8,I_),c("div",null,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${C.item.liquidator}`,target:"_blank",onClick:I[2]||(I[2]=te(()=>{},["stop"]))},z(n(X)(C.item.liquidator)),9,A_)]),c("div",null,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/tx/${C.item.transaction}`,target:"_blank",onClick:I[3]||(I[3]=te(()=>{},["stop"]))},z(n(X)(C.item.transaction)),9,D_)]),c("div",O_,[f(n(B),{type:"dollar",value:Math.round(C.item.liquidated_debt),precision:1/0},null,8,["value"])]),c("div",V_,z(C.item.troves_affected_count),1),c("div",R_,z(n(i)(C.item.timestamp)),1)]),"row-details":y(()=>[G("   ")]),_:1},8,["loading","rows","columns","sorting-columns","sorting-columns-enabled","onSortColumn"]),f(n(Re),{show:!!p.value,onClose:I[4]||(I[4]=C=>p.value=null)},{default:y(()=>[p.value?(v(),P(Rt,{key:0,liquidation:p.value,"vault-addr":p.value.vault},null,8,["liquidation","vault-addr"])):M("",!0)]),_:1},8,["show"])],64))}});function no(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Liquidations"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof no=="function"&&no(bn);const M_=x(bn,[["__scopeId","data-v-01fcfe9c"]]),B_={style:{display:"grid","grid-template-columns":"auto 1fr"}},q_={class:"title"},W_={style:{display:"flex",gap:"1rem"}},F_=["src"],E_=["href"],U_={class:"number"},N_={class:"number"},so=15,yn=T({__name:"TableTroves",props:{vaults:{default:()=>[]},user:{}},emits:["troves"],setup(o,{emit:e}){const{t:a}=q(),t=new Qe(N()),s=e,{loading:r,data:i,load:h}=U(async()=>{if(o.vaults.length>0&&o.user){const C=await Promise.all(o.vaults.map(W=>t.getTroves("ethereum",W.address,o.user).then(E=>E.map(J=>({...J,vault:{name:W.name,address:W.address}}))))).then(W=>W.flat());return s("troves",C),C}else return Promise.resolve([])},[]),{relativeTime:m}=Se(),{sortColumn:d,sortOrder:u,onSort:l}=ze("updated"),p=V(""),_=V("all"),b=V("Open"),g=w(()=>b.value==="Open"?["","Owner","Debt","Collateral","Ratio","Created At","Last Updated"]:["","Owner","","","","Created At","Last Updated"]),D=w(()=>b.value==="Open"?["","owner","debt","coll","ratio","created","updated"]:["","owner","","","","created","updated"]),k=w(()=>b.value==="Open"?["owner","debt","coll","ratio","created","updated"]:["owner","created","updated"]),O=w(()=>H.chain(i.value).filter(C=>b.value===C.status).filter(C=>{const W=p.value.toLocaleLowerCase().split(" "),E=$n=>W.some(wn=>$n.toLocaleLowerCase().includes(wn)),J=xe(C.vault.address),ge=_.value==="all"?!0:_.value===J;return E(C.owner)&&ge}).orderBy(C=>{switch(d.value){case"owner":return C.owner;case"debt":return C.debt;case"coll":return C.collateral_usd;case"ratio":return C.collateral_ratio;case"created":return C.created_at;case"updated":return C.last_update;default:return C.last_update}},u.value===ne.Descending?"desc":"asc").value()),{page:A,rowsPage:L,onPage:$}=Te(O,so),I=C=>{C===0?b.value="Open":C===1?b.value="Closed":b.value="Open"};return R(()=>o.vaults,h),(C,W)=>(v(),P(n(re),{class:"datatable-troves","columns-header":"1fr 12rem 2fr","columns-data":"troves-columns-data",loading:n(r),rows:n(L),columns:g.value,sorting:!0,"sorting-columns":D.value,"sorting-columns-enabled":k.value,"sorting-default-column":"updated","sorting-default-dir":"Descending",onSortColumn:n(l)},{"header-content":y(()=>[c("div",B_,[c("div",q_,z(n(a)("title")),1),f(n(ct),{class:"types",onTab:W[0]||(W[0]=E=>I(E.index))},{default:y(()=>[f(n(me),{header:"Open"}),f(n(me),{header:"Closed"})]),_:1})]),f(st,{class:"select-collateral",collateral:_.value,all:!0,onSelectCollateral:W[1]||(W[1]=E=>_.value=E)},null,8,["collateral"]),c("div",W_,[f(n(fe),{modelValue:p.value,"onUpdate:modelValue":W[2]||(W[2]=E=>p.value=E),class:"search",search:!0,placeholder:n(a)("search-placeholder")},null,8,["modelValue","placeholder"]),f(n(ke),{class:"pagination","items-count":O.value.length,"items-per-page":so,page:n(A),onPage:n($)},null,8,["items-count","page","onPage"])])]),row:y(E=>[c("img",{src:n(Ie)(E.item.vault.name)},null,8,F_),c("div",null,[c("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${E.item.owner}`,target:"_blank",onClick:W[3]||(W[3]=te(()=>{},["stop"]))},z(n(X)(E.item.owner)),9,E_)]),c("div",{class:F(["number",{hide:b.value==="Closed"}])},[f(n(B),{type:"dollar",value:Math.round(E.item.debt),precision:1/0},null,8,["value"])],2),c("div",{class:F(["number",{hide:b.value==="Closed"}])},[f(n(B),{type:"dollar",value:Math.round(E.item.collateral_usd),precision:1/0},null,8,["value"])],2),c("div",{class:F(["number",{hide:b.value==="Closed"}])},[f(n(B),{value:E.item.collateral_ratio*100,precision:2,type:"percentage"},null,8,["value"])],2),c("div",U_,z(n(m)(E.item.created_at)),1),c("div",N_,z(n(m)(E.item.last_update)),1)]),"row-details":y(()=>[G("   ")]),_:1},8,["loading","rows","columns","sorting-columns","sorting-columns-enabled","onSortColumn"]))}});function lo(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Troves"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof lo=="function"&&lo(yn);const H_=x(yn,[["__scopeId","data-v-34bcdcd2"]]),j_={class:"profile"},G_={style:{"grid-column":"1 / -1","margin-bottom":"-0.5rem"}},Y_=T({__name:"Profile",setup(o){const e=Ve(),a=Ye(),t=Ct(),s=Le().getSocket("api"),r=new Xe(s,"ethereum"),i=ye(r.overview$,[]),h=V(void 0),m=V([]),d=w(()=>m.value.filter(l=>h.value?l.owner.toLocaleLowerCase()===h.value.toLocaleLowerCase():!1).map(l=>l.owner));ee(()=>{const l=e.params.addr;l&&typeof l=="string"&&(h.value=l)});const u=l=>{m.value=l};return R(()=>t.address,async()=>{!e.params.addr&&!h.value&&t.address&&await a.push({name:"profile",params:{addr:t.address}})},{immediate:!0}),R(()=>e.params,()=>{const l=e.params.addr;l&&typeof l=="string"&&(h.value=l)}),(l,p)=>(v(),S("div",j_,[c("h2",G_," Profile: "+z(h.value??"?"),1),f(H_,{style:{"z-index":"2"},vaults:n(i),user:h.value,onTroves:u},null,8,["vaults","user"]),f(x_,{troves:d.value},null,8,["troves"]),f(M_,{troves:d.value},null,8,["troves"])]))}});const J_=x(Y_,[["__scopeId","data-v-a5eb9524"]]),K_={titleRoute:"/",routes:[{path:"/",redirect:{name:"vaults"}},{path:"/pool",name:"pool",component:rc},{path:"/mkusd",name:"mkusd",component:$c},{path:"/redemptions",name:"redemptions",component:Ec},{path:"/liquidations",name:"liquidations",component:nu},{path:"/revenue",name:"revenue",component:bu},{path:"/vaults",name:"vaults",component:Bi},{path:"/wrappers/:tab?",name:"wrappers",component:Ru},{path:"/veprisma",name:"veprisma",component:Xu},{path:"/profile/:addr?",name:"profile",component:J_},{path:"/vault/:vaultAddr/:tab?",name:"prismavault",component:o_},{path:"/vault/:vaultAddr/trove/:troveAddr",name:"prismatrove",component:b_}],menuItems:[{to:"/vaults",label:"Vaults"},{to:"/mkusd",label:"mkUSD"},{to:"/pool",label:"Stability pool"},{to:"/redemptions",label:"Redemptions"},{to:"/liquidations",label:"Liquidations"},{to:"/veprisma",label:"vePRISMA"},{to:"/wrappers",label:"ve Wrappers"},{to:"/profile",label:"Profile"}]},Mt=qn(Kr),Q_=Wn({legacy:!1,locale:"en",fallbackLocale:"en"});Mt.use(Q_);const X_=Fn();Mt.use(X_);const Z_=[K_],em=It();em.pages=Z_;const tm=ui();Mt.use(tm).use(En).use(Un).mount("#app");
