import{L as Ka,d as k,r as D,c as $,w as R,t as S,l as U,o as m,a as T,b as y,e as h,f as C,g as ce,h as vt,n as W,i as N,j as V,F as ee,T as rn,u as n,k as et,m as cn,p as un,q as dn,W as _n,s as mn,v as vn,x as K,y as d,z as pn,A as B,B as fe,C as Qa,D as ue,E as de,G as Ee,H as X,I as te,J as Xa,K as hn,M as fn,N as gn,O as De,P as Ne,Q as It,R as bn,S as yn,U as $n,V as wn,X as be,Y as he,Z as Cn,_ as xt,$ as kn,a0 as Sn,a1 as pt,a2 as Je,a3 as Tn,a4 as Pn,a5 as zn,a6 as Ln,a7 as In}from"./vendor-d50ff160.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function a(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(s){if(s.ep)return;s.ep=!0;const l=a(s);fetch(s.href,l)}})();function xe(o,e=0,a=".",t=","){const s=isFinite(+o)?+o:0,l=isFinite(+e)?Math.abs(e):0,i=typeof t>"u"?",":t,p=typeof a>"u"?".":a,v=function(c,r){const f=Math.pow(10,r);return Math.round(c*f)/f},u=(l?v(s,l):Math.round(s)).toString().split(".");return u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(u[1]||"").length<l&&(u[1]=u[1]||"",u[1]+=new Array(l-u[1].length+1).join("0")),u.join(p)}function Q(o,e){const a=Math.abs(o);return e==="percentage"?"%":e==="dollar"?a>=1*10**12?"t":a>=1*10**9?"b":a>=1*10**6?"m":a>=1*10**3?"k":"":""}function Z(o,e,a){const t=Math.abs(o);return e===1/0?o.toLocaleString():a==="percentage"?xe(o,e):a==="dollar"?t>=1*10**12?xe(o/10**12,e):t>=1*10**9?xe(o/10**9,e):t>=1*10**6?xe(o/10**6,e):t>=1*10**3?xe(o/10**3,e):xe(o,e):o.toString()}async function Fe(o,e=0,a=1e3){const t=await o(e,a),s=await(t.length>=a?Fe(o,e+1,a):Promise.resolve([]));return t.concat(s)}function _t(o,e){return(Array.isArray(o)?o:[o]).some(t=>e.path.startsWith(t))}const xn="0x9bc7c6ad7e7cf3a6fcb58fb21e27752ac1e53f99",An="0xaef6ea60f6443bad046e825c1d2b0c0b5ebc1f16",Dn="0x657ce046d98d163ef4f846210f25919fa7b31944",On="https://api.llama.airforce/";async function Vn(o,e,a){return await fetch(o,{method:e?"POST":"GET",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e),signal:a}).then(t=>{if(t.ok)return t;throw new Error(`Fetch error ${t.status} for URL: ${o}`)})}async function Rn(o,e,a){return await(await Vn(o,e,a)).json()}class ye{constructor(e){this.host=e}async fetch(e,a,t){return Rn(e,a,t)}}async function Mn(o){try{return await o()}catch(e){e instanceof Error&&Ka({text:e.message,type:"error"});return}}const qn="|/-\\",M=k({__name:"AsyncValue",props:{value:{default:null},type:{default:null},precision:{type:[Number,Function],default:2},showUnit:{type:Boolean,default:!0},showSymbol:{type:Boolean,default:!0},showZero:{type:Boolean,default:!1}},setup(o){let e=0,a=0;const t=D("|"),s=$(()=>o.value?Z(o.value,typeof o.precision=="function"?o.precision(o.value):o.precision,o.type??""):o.value===0&&o.showZero?"0":o.value===null||o.value===void 0?t.value:"?"),l=$(()=>o.precision===1/0?"":!o.value||!o.type||!U.isFinite(o.value)?o.showUnit&&o.type?Q(0,o.type):"":Q(o.value,o.type));return R(()=>o.value,i=>{if(clearInterval(a),e=0,i)return;const p=()=>{e=(e+1)%4,t.value=qn[e]};a=window.setInterval(p,250)},{immediate:!0}),(i,p)=>S(i.showSymbol&&i.type==="dollar"?"$":"")+S(s.value)+S(i.showUnit?l.value:"")}}),Bn={key:0,class:"fas fa-chevron-right"},Wn=k({__name:"Breadcrumb",props:{crumbs:{},active:{}},emits:["crumb"],setup(o,{emit:e}){const a=e,t=l=>{var i;return o.active?o.active.id===l.id:((i=o.crumbs.at(-1))==null?void 0:i.id)===l.id},s=l=>{var i;return((i=o.crumbs.at(-1))==null?void 0:i.id)===l.id};return(l,i)=>(m(),T(n(ne),null,{default:y(()=>[h(rn,{name:"fade",tag:"ul"},{default:y(()=>[(m(!0),C(ee,null,ce(l.crumbs,p=>(m(),C("li",{key:p.id},[(m(),T(vt(t(p)?"span":"a"),{class:W({active:t(p)}),onClick:v=>a("crumb",p)},{default:y(()=>[N(S(p.label),1)]),_:2},1032,["class","onClick"])),!s(p)||l.crumbs.length===1?(m(),C("i",Bn)):V("",!0)]))),128))]),_:1})]),_:1}))}});const P=(o,e)=>{const a=o.__vccOpts||o;for(const[t,s]of e)a[t]=s;return a},En=P(Wn,[["__scopeId","data-v-997741c8"]]);function Fn(){return!1}const ht=et({id:"walletStore",state:()=>({address:void 0,connected:!1,correctNetwork:!1}),actions:{setAddress(o){this.address=o==null?void 0:o.toLocaleLowerCase()}}}),Un=cn(),Nn=un({projectId:"7a61bbd683f613a5308ca86fd4cb14f7",dappUrl:"https://llama.airforce"}),Hn=mn({darkMode:!0}),jn=vn();let ge=null;function Gn(){const o=dn({wallets:[Un,Nn,Hn,jn],chains:[{id:"0x1",token:"ETH",label:"Ethereum Mainnet",rpcUrl:"https://mainnet.infura.io/v3/878382a352b14db1b7ad52a89a886207"}],appMetadata:{name:"Llama Airforce",icon:"/wallet-icon.png",description:"Airdropping knowledge bombs about the Curve ecosystem"},theme:"dark"});return o.state.actions.updateAccountCenter({enabled:!1}),o}let mt=null;async function Za(o=!1){ge||(ge=Gn());let[e]=ge.state.get().wallets;if(!e){const a=window.localStorage.getItem("connectedWallet");a?[e]=await ge.connectWallet({autoSelect:{label:a,disableModals:!0}}):o&&([e]=await(ge==null?void 0:ge.connectWallet())??[null],e&&window.localStorage.setItem("connectedWallet",e.label))}mt=e||null}function Ze(){return mt?new _n(mt.provider):void 0}async function Yn(){if(!ge)return;const[o]=ge.state.get().wallets;await ge.disconnectWallet({label:o.label}),window.localStorage.removeItem("connectedWallet")}async function eo(o){if(!o)return!1;try{const a=await o.getSigner().getAddress();return!0}catch{return!1}}async function to(o){if(!o)return!1;try{const{name:e,chainId:a}=await o.getNetwork();return e==="homestead"&&a===1}catch{return!1}}async function Jn(o){return await o.getSigner().getAddress()}function G(o,e=6){if(!o)return"0x000...000";const a=e/2+2,t=o.length-e/2;return`${o.substring(0,a)}...${o.substring(t)}`}const Kn=k({__name:"Button",props:{icon:{default:""},value:{default:""},primary:{type:Boolean,default:!1},web3:{type:Boolean,default:!1}},emits:["click"],setup(o,{emit:e}){const a=e,t=async s=>{if(s.stopImmediatePropagation(),o.web3&&Fn()){const l=Ze();if(!l)return;await to(l)||(await l.send("wallet_switchEthereumChain",[{chainId:"0x1"}]),window.location.reload())}a("click")};return(s,l)=>(m(),C("button",{class:W({primary:s.primary}),onClick:t},[K(s.$slots,"default",{},()=>[s.icon?(m(),C("i",{key:0,class:W(["icon",[s.icon,{noValue:!!s.value}]])},null,2)):V("",!0),N(" "+S(s.value),1)],!0)],2))}});const pe=P(Kn,[["__scopeId","data-v-b051a687"]]),Qn=k({__name:"ButtonToggle",props:{modelValue:{type:Boolean,default:!1},icon:{default:""},value:{default:""}},emits:["update:modelValue"],setup(o,{emit:e}){const a=e,t=()=>{a("update:modelValue",!o.modelValue)};return(s,l)=>(m(),C("button",{class:W({toggled:s.modelValue}),onClick:t},[K(s.$slots,"default",{},()=>[s.icon?(m(),C("i",{key:0,class:W(["icon",s.icon])},null,2)):V("",!0),N(" "+S(s.value),1)],!0)],2))}});const Ae=P(Qn,[["__scopeId","data-v-a2cabc6a"]]),Xn=["inert"],Zn={class:"text"},es=k({__name:"Card",props:{title:{default:""},icon:{default:""},compact:{type:Boolean,default:!1},collapsible:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},setup(o){return(e,a)=>(m(),C("div",{class:"card",inert:e.loading},[h(n(no),{class:W(["loader",{loading:e.loading}])},null,8,["class"]),d("div",{class:W(["card-container",{loading:e.loading}])},[e.title?(m(),C("div",{key:0,class:W(["card-header",{collapsible:e.collapsible}])},[d("div",Zn,[e.icon?(m(),C("i",{key:0,class:W(["icon",e.icon])},null,2)):V("",!0),N(" "+S(e.title),1)]),K(e.$slots,"actions",{},void 0,!0)],2)):(m(),C("div",{key:1,class:W(["card-no-header",{compact:e.compact}])},null,2)),d("div",{class:W(["card-body",{compact:e.compact,collapsed:e.collapsed}])},[K(e.$slots,"default",{},void 0,!0)],2)],2)],8,Xn))}});const ne=P(es,[["__scopeId","data-v-c2704c0a"]]),ts=k({__name:"CardGraph",props:{title:{default:""},loading:{type:Boolean,default:!1},options:{},series:{}},setup(o){return(e,a)=>(m(),T(n(ne),{class:"card-graph",title:e.title,loading:e.loading},{default:y(()=>[h(n(bt),{height:"100%",options:e.options,series:e.series},null,8,["options","series"]),K(e.$slots,"default",{},void 0,!0)]),_:3},8,["title","loading"]))}});const ie=P(ts,[["__scopeId","data-v-4e0fd9b7"]]),as={class:"chip"},os={class:"label"},ns=k({__name:"Chip",props:{label:{default:""}},setup(o){return(e,a)=>(m(),C("div",as,[d("div",os,S(e.label),1)]))}});const ss=P(ns,[["__scopeId","data-v-1eb2caf8"]]);const ls={class:"collapsible-inside"},rs=k({__name:"Collapsible",props:{expanded:{type:Boolean,default:!0}},setup(o){return(e,a)=>(m(),C("div",{class:W(["collapsible-outside",{expanded:e.expanded}])},[d("div",ls,[K(e.$slots,"default",{},void 0,!0)])],2))}});const ft=P(rs,[["__scopeId","data-v-25b74378"]]),is=["inert"],cs={key:0,class:"header"},us={key:0,class:"header-icon"},ds={class:"list"},_s=["onClick"],ms={key:0,class:"sorting-arrows"},vs={key:0,class:"sorting-arrow fa fa-caret-up"},ps={key:1,class:"sorting-arrow fa fa-caret-down"},hs={key:2,class:"sorting-arrow"},fs={class:"rows"},gs={key:0,class:"no-data"},gt=k({__name:"DataTable",props:{columnsHeader:{default:"auto"},columnsData:{default:"auto"},columns:{default:()=>[]},rows:{default:()=>[]},rowsMin:{default:null},selectedRow:{default:null},expanded:{default:()=>[]},sorting:{type:Boolean,default:!1},sortingColumns:{default:()=>[]},sortingColumnsEnabled:{default:()=>[]},sortingDefaultColumn:{default:null},sortingDefaultDir:{default:null},icon:{default:""},header:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}},emits:["selected","sortColumn"],setup(o,{emit:e}){const a=e,t=D(""),s=D(ae.Ascending),l=$(()=>`grid-template-columns: ${o.columnsHeader}`),i=$(()=>{if(o.rowsMin===null)return[];const g=Math.max(0,o.rowsMin-o.rows.length);return new Array(g)});pn(()=>{o.sortingDefaultColumn&&(t.value=o.sortingDefaultColumn),o.sortingDefaultDir&&(s.value=o.sortingDefaultDir===ae.Ascending?ae.Ascending:ae.Descending)});const p=g=>{a("selected",g)},{t:v}=B(),u=g=>{const A=g+1;return!!(o.rows[g+1]&&o.rows.findIndex(O=>O===o.selectedRow)===A)},c=g=>o.expanded.includes(g),r=g=>{const A=o.sortingColumns[g];return o.sortingColumnsEnabled.includes(A)},f=g=>t.value===o.sortingColumns[g]&&s.value===ae.Ascending,_=g=>t.value===o.sortingColumns[g]&&s.value===ae.Descending,b=g=>{if(!o.sorting||!o.sortingColumns||!r(g))return;const A=o.sortingColumns[g];A===t.value?s.value=s.value===ae.Ascending?ae.Descending:ae.Ascending:s.value=ae.Ascending,t.value=A,a("sortColumn",t.value,s.value)};return(g,A)=>(m(),C("div",{class:W(["datatable",{loading:g.loading}]),inert:g.loading},[g.header?(m(),C("div",cs,[g.icon?(m(),C("div",us,[d("i",{class:W(g.icon)},null,2)])):V("",!0),d("div",{class:"header-content",style:fe(l.value)},[K(g.$slots,"header-content",{},void 0,!0)],4)])):V("",!0),d("div",ds,[d("div",{class:W(["row-data",[g.columnsData,{"selected-below":u(-1)}]])},[K(g.$slots,"column-headers",{},()=>[(m(!0),C(ee,null,ce(g.columns,(I,q)=>(m(),C("div",{key:I,class:W(["column-header",{"sortable-header":g.sorting&&r(q),"current-sort":t.value==g.sortingColumns[q]}]),onClick:O=>b(q)},[N(S(I)+" ",1),g.sorting&&r(q)?(m(),C("div",ms,[f(q)?(m(),C("i",vs)):_(q)?(m(),C("i",ps)):(m(),C("span",hs," — "))])):V("",!0)],10,_s))),128))],!0)],2),d("div",fs,[h(n(no),{class:W(["loader",{loading:g.loading}])},null,8,["class"]),(m(!0),C(ee,null,ce(g.rows,(I,q)=>(m(),T(n(ct),{key:I,data:I,class:W({"selected-below":u(q)}),columns:g.columnsData,selected:g.selectedRow===I,expanded:c(I),onClick:p},{row:y(()=>[K(g.$slots,"row",{item:I},void 0,!0)]),"row-details":y(()=>[K(g.$slots,"row-details",{item:I},void 0,!0)]),_:2},1032,["data","class","columns","selected","expanded"]))),128)),(m(!0),C(ee,null,ce(i.value,I=>(m(),T(n(ct),{key:I}))),128)),!g.rowsMin&&(!g.rows||g.rows.length===0)&&!g.loading?(m(),C("div",gs,[K(g.$slots,"no-data",{},()=>[N(S(n(v)("no-data")),1)],!0)])):V("",!0),g.$slots["row-aggregation"]&&g.rows.length>0?(m(),T(n(ct),{key:1,class:"aggregation",columns:g.columnsData},{row:y(()=>[K(g.$slots,"row-aggregation",{},void 0,!0)]),_:3},8,["columns"])):V("",!0)])])],10,is))}});function At(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{"no-data":a=>{const{normalize:t}=a;return t(["No data :("])}}})}function Dt(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"zh",resource:{"no-data":a=>{const{normalize:t}=a;return t(["没有数据 :("])}}})}typeof At=="function"&&At(gt);typeof Dt=="function"&&Dt(gt);const le=P(gt,[["__scopeId","data-v-841cc030"]]),bs=o=>(ue("data-v-45ff862c"),o=o(),de(),o),ys=bs(()=>d("i",{class:"fas fa-chevron-up"},null,-1)),$s=[ys],ws={class:"row-details"},Cs=k({__name:"DataTableRow",props:{data:{},columns:{default:"auto"},selected:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1}},emits:["click"],setup(o,{emit:e}){const a=e,t=Qa(),s=$(()=>{var p;const i=t["row-details"];if(i){const v=(p=i()[0])==null?void 0:p.children;if(v)return v.length>0}return!1}),l=()=>{a("click",o.data)};return(i,p)=>(m(),C("div",{class:W(["row",{expanded:i.expanded}])},[d("div",{class:W(["row-data item",[i.columns,{active:i.selected,expandable:s.value}]]),onClick:l},[K(i.$slots,"row",{},void 0,!0),s.value?(m(),C("div",{key:0,class:W(["expander",{expanded:i.expanded}])},$s,2)):V("",!0)],2),h(n(ft),{expanded:i.expanded},{default:y(()=>[d("div",ws,[K(i.$slots,"row-details",{},void 0,!0)])]),_:3},8,["expanded"])],2))}});const ct=P(Cs,[["__scopeId","data-v-45ff862c"]]),ks=k({__name:"GraphApex",props:{options:{},series:{}},setup(o){return(e,a)=>{const t=Ee("apexchart");return m(),T(t,{class:"chart",height:"100%",options:e.options,series:e.series},null,8,["options","series"])}}});const bt=P(ks,[["__scopeId","data-v-3e2879ed"]]),Ss=["min","max","value"],Ts=k({__name:"InputNumber",props:{modelValue:{},min:{},max:{}},emits:["update:modelValue"],setup(o,{emit:e}){const a=e,t=s=>{a("update:modelValue",s.target.value)};return(s,l)=>(m(),C("input",{type:"number",min:s.min,max:s.max,value:s.modelValue,onInput:t},null,40,Ss))}});const Ps=P(Ts,[["__scopeId","data-v-097889a4"]]),zs=o=>(ue("data-v-a7ae5e73"),o=o(),de(),o),Ls={class:"input-text"},Is={key:0,class:"icon"},xs=zs(()=>d("i",{class:"fas fa-search"},null,-1)),As=[xs],Ds=["type","value","placeholder","onInput"],Os=["onClick"],Vs=k({__name:"InputText",props:{modelValue:{},placeholder:{default:""},options:{default:()=>[]},search:{type:Boolean,default:!1},autoComplete:{type:Boolean,default:!1},filter:{type:Function,default:()=>()=>!0},sort:{type:Function,default:null}},emits:["update:modelValue","input","select"],setup(o,{emit:e}){const a=e,t=$(()=>{const l=o.options.filter(p=>o.filter(o.modelValue,p));return o.sort?[...l].sort(o.sort):l}),s=l=>{const i=l.target.value;a("update:modelValue",i),a("input",i)};return(l,i)=>(m(),C("div",Ls,[l.search?(m(),C("span",Is,As)):V("",!0),d("input",{type:l.search?"search":"text",value:l.modelValue,placeholder:l.placeholder,onInput:X(s,["stop"]),onSelect:i[0]||(i[0]=X(()=>{},["stop"]))},null,40,Ds),l.options&&l.autoComplete?(m(),C("div",{key:1,class:W(["items",{selectHide:!l.autoComplete}])},[(m(!0),C(ee,null,ce(t.value,(p,v)=>(m(),C("div",{key:v,onClick:u=>a("select",p)},[K(l.$slots,"item",{item:p,idx:v},()=>[N(S(p),1)],!0)],8,Os))),128))],2)):V("",!0)]))}});const _e=P(Vs,[["__scopeId","data-v-a7ae5e73"]]),Rs={key:0,class:"value"},Ms={key:1,class:"value"},qs=["innerHTML"],Bs={key:0,class:"value"},Ws={key:1,class:"value"},Es=["innerHTML"],Fs={class:"labels"},Us={class:"label"},Ns={class:"label-second"},Hs=k({__name:"KPI",props:{label:{default:""},labelSecond:{default:""},tooltip:{default:""},tooltipType:{default:"icon"},value:{},hasValue:{type:Boolean,default:!1}},setup(o){return(e,a)=>(m(),C("div",{class:W(["kpi",{disabled:!e.hasValue}])},[d("div",{class:W(["value-container",{underline:e.tooltip&&e.tooltipType==="underline"}])},[K(e.$slots,"default",{},()=>[e.tooltip&&e.tooltipType==="underline"?(m(),T(n(Ue),{key:0},{item:y(()=>[e.hasValue?(m(),C("span",Rs,S(e.value),1)):(m(),C("span",Ms," ? "))]),default:y(()=>[K(e.$slots,"tooltip",{},()=>[d("span",{innerHTML:e.tooltip},null,8,qs)],!0)]),_:3})):(m(),C(ee,{key:1},[e.hasValue?(m(),C("span",Bs,S(e.value),1)):(m(),C("span",Ws," ? "))],64))],!0),e.tooltip&&e.tooltipType==="icon"?(m(),T(n(Ue),{key:0},{default:y(()=>[d("span",{innerHTML:e.tooltip},null,8,Es)]),_:1})):V("",!0)],2),d("div",Fs,[K(e.$slots,"label",{},()=>[d("div",Us,S(e.label),1)],!0),K(e.$slots,"label-second",{},()=>[d("div",Ns,S(e.labelSecond),1)],!0)])],2))}});const oe=P(Hs,[["__scopeId","data-v-0123c061"]]),js={key:0,class:"modal"},Gs={class:"modal-popup"},Ys=k({__name:"Modal",props:{show:{type:Boolean,default:!1}},emits:["close"],setup(o,{emit:e}){const a=e,t=s=>{s.code==="Escape"&&a("close")};return te(()=>{document.addEventListener("keydown",t)}),Xa(()=>{document.removeEventListener("keydown",t)}),R(()=>o.show,s=>{document.body.style.overflow=s?"hidden":""}),(s,l)=>s.show?(m(),C("div",js,[d("div",{class:"modal-mask",onClick:l[0]||(l[0]=i=>a("close"))}),d("div",Gs,[K(s.$slots,"default",{},void 0,!0)])])):V("",!0)}});const Oe=P(Ys,[["__scopeId","data-v-8f349360"]]),Js={class:"buttons"},Ks={key:1,class:"not-ready"},ao=k({__name:"ModalYesNo",props:{show:{type:Boolean,default:!1},title:{default:""},ready:{type:Boolean,default:!0},readyMsg:{default:""}},emits:["yes","no"],setup(o,{emit:e}){const a=e,{t}=B();return(s,l)=>(m(),T(n(Oe),{show:s.show},{default:y(()=>[h(n(ne),{title:s.title},{default:y(()=>[K(s.$slots,"default",{},void 0,!0),d("div",Js,[h(n(pe),{class:"no",value:n(t)("no"),onClick:l[0]||(l[0]=i=>a("no"))},null,8,["value"]),s.ready?(m(),T(n(pe),{key:0,class:"yes",value:n(t)("yes"),onClick:l[1]||(l[1]=i=>a("yes"))},null,8,["value"])):(m(),C("div",Ks,S(s.readyMsg),1))])]),_:3},8,["title"])]),_:3},8,["show"]))}});function Ot(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{yes:a=>{const{normalize:t}=a;return t(["Yes"])},no:a=>{const{normalize:t}=a;return t(["No"])}}})}function Vt(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"zh",resource:{yes:a=>{const{normalize:t}=a;return t(["是的"])},no:a=>{const{normalize:t}=a;return t(["不是"])}}})}typeof Ot=="function"&&Ot(ao);typeof Vt=="function"&&Vt(ao);const yt=o=>(ue("data-v-6ab859e6"),o=o(),de(),o),Qs=yt(()=>d("button",null,"1",-1)),Xs=[Qs],Zs=yt(()=>d("button",null,[d("i",{class:"fas fa-chevron-left"})],-1)),el=[Zs],tl=["onClick"],al=yt(()=>d("button",null,[d("i",{class:"fas fa-chevron-right"})],-1)),ol=[al],nl=k({__name:"Pagination",props:{page:{},itemsCount:{},itemsPerPage:{}},emits:["page"],setup(o,{emit:e}){const a=e,t=$(()=>Math.ceil(o.itemsCount/o.itemsPerPage)),s=$(()=>{const r=[...Array(12).keys()].map(I=>I-6+o.page).filter(I=>I>=1&&I<=t.value),f=r.findIndex(I=>I===o.page),_=[],b=[],g=o.page!==1&&o.page!==t.value?[o.page]:[];let A=1;for(;;){const I=r[f-A];if(I&&I!==1&&_.unshift(I),_.length+b.length+g.length>=5||A>r.length)break;const q=r[f+A];if(q&&q!==t.value&&b.push(q),A++,_.length+b.length+g.length>=5||A>r.length)break}return[..._,...g,...b]}),l=(u,c,r)=>Math.min(Math.max(u,c),r),i=()=>a("page",l(o.page-1,1,t.value)),p=()=>a("page",l(o.page+1,1,t.value)),v=u=>a("page",l(u,1,t.value));return(u,c)=>(m(),C("ul",null,[d("li",{class:W({active:u.page===1}),onClick:c[0]||(c[0]=r=>v(1))},Xs,2),t.value>2?(m(),C("li",{key:0,onClick:i},el)):V("",!0),(m(!0),C(ee,null,ce(s.value,r=>(m(),C("li",{key:r,class:W({active:r===u.page}),onClick:f=>v(r)},[d("button",null,S(r),1)],10,tl))),128)),t.value>2?(m(),C("li",{key:1,onClick:p},ol)):V("",!0),t.value>1?(m(),C("li",{key:2,class:W({active:u.page===t.value}),onClick:c[1]||(c[1]=r=>v(t.value))},[d("button",null,S(t.value),1)],2)):V("",!0)]))}});const $e=P(nl,[["__scopeId","data-v-6ab859e6"]]),sl=o=>(ue("data-v-8e55132f"),o=o(),de(),o),ll={class:"select"},rl={class:"item"},il={key:0,class:"label"},cl=["onClick"],ul=sl(()=>d("div",{class:"chevrons"},[d("i",{class:"fas fa-chevron-up"}),d("i",{class:"fas fa-chevron-down"})],-1)),dl=k({__name:"Select",props:{options:{default:()=>[]},open:{type:Boolean,default:!1},selected:{default:null},label:{}},emits:["open","close","input"],setup(o,{emit:e}){const a=e;return(t,s)=>(m(),C("div",{class:"select-container",tabindex:"0",onClick:s[0]||(s[0]=X(l=>a("open"),["stop"])),onBlur:s[1]||(s[1]=l=>a("close"))},[d("div",ll,[d("div",{class:W(["selected",{open:t.open}])},[K(t.$slots,"item",{item:t.selected},()=>[d("div",rl,S(t.selected),1)],!0),t.label?(m(),C("div",il,S(t.label),1)):V("",!0)],2),d("div",{class:W(["items",{selectHide:!t.open}])},[(m(!0),C(ee,null,ce(t.options,(l,i)=>(m(),C("div",{key:i,onClick:p=>a("input",l)},[K(t.$slots,"item",{item:l},()=>[N(S(l),1)],!0)],8,cl))),128))],2)]),ul],32))}});const $t=P(dl,[["__scopeId","data-v-8e55132f"]]),_l={class:"item"},ml={class:"label"},Rt="locale",vl=k({__name:"SelectLanguage",props:{locales:{default:()=>pl},direction:{default:"up"}},setup(o){const{t:e}=B(),{locale:a}=B({useScope:"global"}),t=D("en"),s=D(!1);te(()=>{const p=localStorage.getItem(Rt);p&&o.locales.some(v=>v===p)&&i(p)});const l=()=>{s.value=!s.value},i=p=>{t.value=p,a.value=t.value,localStorage.setItem(Rt,t.value)};return(p,v)=>(m(),T(n($t),{class:W(["select",{"direction-up":p.direction==="up"}]),options:p.locales.map(u=>u),selected:t.value,open:s.value,onOpen:l,onClose:v[0]||(v[0]=u=>s.value=!1),onInput:i},{item:y(u=>[d("div",_l,[d("div",ml,S(n(e)(u.item)),1)])]),_:1},8,["class","options","selected","open"]))}});function Mt(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{en:a=>{const{normalize:t}=a;return t(["English"])},zh:a=>{const{normalize:t}=a;return t(["中文"])},fr:a=>{const{normalize:t}=a;return t(["Français"])}}})}typeof Mt=="function"&&Mt(vl);const pl=["en","zh","fr"];var ae=(o=>(o.Ascending="Ascending",o.Descending="Descending",o))(ae||{});const hl={},oo=o=>(ue("data-v-ad2adcec"),o=o(),de(),o),fl={class:"lds-ripple"},gl=oo(()=>d("div",null,null,-1)),bl=oo(()=>d("div",null,null,-1)),yl=[gl,bl];function $l(o,e){return m(),C("div",fl,yl)}const no=P(hl,[["render",$l],["__scopeId","data-v-ad2adcec"]]),ve=k({__name:"TabItem",props:{header:{default:""},disabled:{type:Boolean,default:!1}},setup(o){return(e,a)=>K(e.$slots,"default")}}),wl={class:"tab-view"},Cl={class:"tab-headers"},kl=["onClick"],Sl={class:"tabs"},Tl=k({__name:"TabView",props:{active:{default:0}},emits:["tab"],setup(o,{emit:e}){const a=e,t=D(null),s=Qa(),l=$(()=>s!=null&&s.default?s.default():[]);R(()=>o.active,p=>{t.value=p,a("tab",{tab:l.value[p],index:t.value})},{immediate:!0});const i=(p,v)=>{p.props.disabled||(t.value=v,a("tab",{tab:l.value[v],index:t.value}))};return(p,v)=>(m(),C("div",wl,[d("ul",Cl,[(m(!0),C(ee,null,ce(l.value,(u,c)=>(m(),C("li",{key:c,class:W(["tab-header",{active:t.value===c,disabled:u.props.disabled}]),onClick:r=>i(u,c)},S(u.props.header),11,kl))),128))]),d("div",Sl,[(m(!0),C(ee,null,ce(l.value,(u,c)=>hn((m(),C("div",{key:c,class:"tab"},[(m(),T(vt(u)))])),[[fn,t.value===c]])),128))])]))}});const st=P(Tl,[["__scopeId","data-v-4a99a489"]]),Pl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTM0A1t6AAACSklEQVRIS7WVTUhUURTHT4sWgZS4aNFGSgqTmUqiKNAoFMWhqbQ2gX1BGdKUChW1EEqiULEsDNSFOBJiaZHQ9EE1pGik6DAzYYsUochFoEExCIGPf/e8e4d5b+ZJb4bxwm/x3j3n/O69j3cPidEomF4hOgU0/Wec8DeUZoIEUfuXLuAXnVcJBx2Ery8I+JIac+8JblGjpVo+mwQ8ceUI4e6FWMLPYXvwajm+t4FQVUQozrEQ8MpbPXJ7PFldStiTtwWufQX/xZFJ+D1G0KYID2sJ4QELAb+IwsWv11yE3THs98OpJMY6loLvbwkF2xwqVY6O+62oO3/OxLVLHkQiERUBdLe349YZG4JvbwgVJcUqDQhOTmB/NmGky0yL+FYsio6Xg4NoOJ2CYGx0FB6XOZEJ9ImjPHVCRSUp2JSVibbmJp3aqrOWgk89KQoWJwneejPhp3LuQQ1hcxZhV85q7MjOQCgQUOUB3/Nn9gTLwcXLiwqhaZoqGRsL8/PYup4QFMdmzLEt+PGOkL9xg6n4x6EhPO7xos/r1YuPP0rMsy2Y8REqD7tVaWAqHIJznfwxmeiPFU/KgpEPflyusI41kpRg7SrCyaPlOgd25qdXsBgg+O6ZmX1lHWvEtoB3kCF2cNzt0inc7kj/ERm/AV9uSQu4WfTeJCyJKzc+kAVriHCsrERnb16upUATPLkdOz6T4JBTNos2cZ/HJy59lgswEplIjBu4I45x9zINhzsZT4T6ExPtMvta1rhRKZ9jAtXy0k1U0CFYWBmo/x+ShmnKzYg0NQAAAABJRU5ErkJggg==",zl={key:1,src:Pl},Ll=k({__name:"Tooltip",props:{icon:{default:""}},setup(o){const e=D(!1);return(a,t)=>(m(),T(n(gn),{class:"tooltip",show:e.value},{content:y(()=>[K(a.$slots,"default",{},void 0,!0)]),default:y(()=>[d("div",{onMouseover:t[0]||(t[0]=s=>e.value=!0),onMouseleave:t[1]||(t[1]=s=>e.value=!1)},[K(a.$slots,"item",{},()=>[a.icon?(m(),C("i",{key:0,class:W(a.icon)},null,2)):(m(),C("img",zl))],!0)],32)]),_:3},8,["show"]))}});const Ue=P(Ll,[["__scopeId","data-v-2158cb4b"]]);function F(o,e){const a=D(!1),t=D(e);let s=0;const l=()=>(s++,a.value=!0,Mn(async()=>{t.value=await o(),s--,a.value=s!==0}));return te(()=>void l()),{loading:a,data:t,load:l}}function Il(o,e){const t=Math.round(o.value/1e3)-e;return t<60?`${Math.round(t)} seconds ago`:t<60*60?`${Math.round(t/60)} minutes ago`:t<60*60*24?`${Math.round(t/(60*60))} hours ago`:`${Math.round(t/(60*60*24))} days ago`}function we(){const o=D(Date.now());return te(()=>{setInterval(()=>{o.value=Date.now()})}),{relativeTime:a=>Il(o,a)}}function ze(o,e){const a=D(o),t=D(e??ae.Descending);return{sortColumn:a,sortOrder:t,onSort:(l,i)=>{a.value=l,t.value=i}}}function Ce(o,e){const a=D(1),t=$(()=>U.chain(o.value).drop((a.value-1)*e).take(e).value()),s=l=>{a.value=l};return R(t,l=>{l.length===0&&(a.value=Math.max(1,Math.ceil(o.value.length/e)))}),{page:a,rowsPage:t,onPage:s}}function He(o,e){const a=D(e),t=o.subscribe({next:s=>{a.value=s},error:s=>{const l=s instanceof Error?s.message:JSON.stringify(s);Ka({text:l,type:"error"})}});return Xa(()=>{t&&t.unsubscribe()}),a}const xl={class:"legend"},Al=["onClick"],Dl={class:"label"},Ol=k({__name:"Legend",props:{colors:{},items:{},clickable:{type:Boolean,default:!1},disabled:{default:()=>[]}},emits:["click"],setup(o,{emit:e}){const a=e,t=s=>o.colors[s];return(s,l)=>(m(),C("div",xl,[(m(!0),C(ee,null,ce(s.items,(i,p)=>(m(),C("div",{key:i,class:W(["item",{clickable:s.clickable,disabled:s.disabled.includes(i)}]),onClick:v=>{s.clickable&&a("click",i)}},[d("div",{class:"color",style:fe({"background-color":t(p)})},null,4),d("div",Dl,S(i),1)],10,Al))),128))]))}});const Vl=P(Ol,[["__scopeId","data-v-b0a9ca48"]]);function ut(o){return(o==null?void 0:o.children)!==void 0}function qt(o){return(o==null?void 0:o.to)!==void 0}const Rl={key:0},Ml={class:"nav-link-container"},ql={class:"nav-link-container"},Bl={class:"left"},Wl={class:"right"},El=k({__name:"MenuItem",props:{item:{}},emits:["navigated"],setup(o,{emit:e}){const a=e,t=De(),s=D(!0),l=$(()=>qt(o.item)?[o.item]:ut(o.item)?o.item.children:[]),i=()=>{ut(o.item)&&o.item.children.filter(u=>_t(u.to,t)).length>0&&(s.value=!0)};R(()=>o.item,()=>{i()},{immediate:!0}),R(()=>t.fullPath,()=>{i()},{immediate:!0});const p=()=>{s.value=!s.value};return(v,u)=>{const c=Ee("router-link");return m(),C(ee,null,[n(ut)(v.item)?(m(),C("li",Rl,[d("a",{class:"nav-link node",onClick:p},[d("div",Ml,[N(S(v.item.label)+" ",1),d("i",{class:W(["expander fas fa-chevron-up",{expanded:s.value}])},null,2)])])])):V("",!0),h(n(ft),{class:"items",expanded:s.value},{default:y(()=>[d("ul",null,[(m(!0),C(ee,null,ce(l.value,r=>(m(),C("li",{key:r.label},[n(qt)(r)?(m(),T(c,{key:0,to:r.to,class:W(["nav-link leaf",{"router-link-active":n(_t)(r.to,n(t))}]),onClick:u[0]||(u[0]=f=>a("navigated"))},{default:y(()=>[d("div",ql,[d("div",Bl,S(r.label),1),d("div",Wl,[r.tag==="beta"?(m(),T(n(ss),{key:0,label:"BETA"})):V("",!0)])])]),_:2},1032,["to","class"])):V("",!0)]))),128))])]),_:1},8,["expanded"])],64)}}});const Fl=P(El,[["__scopeId","data-v-d8ba8816"]]),Ul=k({__name:"Menu",props:{pages:{default:()=>[]}},emits:["navigated"],setup(o,{emit:e}){const a=e,t=De(),s=$(()=>o.pages.find(i=>_t(i.titleRoute,t))),l=$(()=>{var i;return((i=s.value)==null?void 0:i.menuItems)??[]});return(i,p)=>(m(),C("nav",null,[(m(!0),C(ee,null,ce(l.value,v=>(m(),C("ul",{key:v.label},[h(Fl,{item:v,onNavigated:p[0]||(p[0]=u=>a("navigated"))},null,8,["item"])]))),128))]))}});const Nl=P(Ul,[["__scopeId","data-v-59493144"]]),Hl="/assets/prisma-b38af1f3.png",jl="/assets/hat-80c6c9b1.png";const Gl={},so=o=>(ue("data-v-f01d266e"),o=o(),de(),o),Yl={class:"logo"},Jl=so(()=>d("div",{class:"visual"},[d("img",{src:Hl}),d("img",{src:jl})],-1)),Kl=so(()=>d("span",null,"prisma.monitor",-1)),Ql=[Jl,Kl];function Xl(o,e){return m(),C("div",Yl,Ql)}const Zl=P(Gl,[["render",Xl],["__scopeId","data-v-f01d266e"]]),er={class:"header"},tr={class:"buttons"},ar=k({__name:"Header",emits:["toggle-expansion","navigated"],setup(o,{emit:e}){const a=e;return(t,s)=>{const l=Ee("router-link");return m(),C("div",er,[h(l,{class:"logo",to:"/",onClick:s[0]||(s[0]=i=>a("navigated"))},{default:y(()=>[h(Zl,{class:"logo"})]),_:1}),d("div",tr,[h(n(pe),{icon:"fas fa-bars",onClick:s[1]||(s[1]=i=>a("toggle-expansion"))})])])}}});const or=P(ar,[["__scopeId","data-v-a5771fce"]]),nr=o=>(ue("data-v-2a3f89a0"),o=o(),de(),o),sr={class:"buttons"},lr=nr(()=>d("i",{class:"fas fa-trash"},null,-1)),rr=["innerHTML"],wt=k({__name:"WalletConnectButton",emits:["connected"],setup(o,{emit:e}){const{t:a}=B(),t=e,s=ht(),l=async()=>{await Za(!0);const p=Ze(),v=await eo(p);s.connected=v,v&&t("connected")},i=()=>{window.localStorage.removeItem("connectedWallet")};return(p,v)=>(m(),C("div",sr,[h(n(pe),{class:"button",primary:!0,onClick:l},{default:y(()=>[N(S(n(a)("connect-your-wallet")),1)]),_:1}),h(n(Ue),{class:"tooltip"},{item:y(()=>[h(n(pe),{class:"button clear",onClick:i},{default:y(()=>[lr]),_:1})]),default:y(()=>[d("div",{class:"ping",innerHTML:n(a)("clear-cache")},null,8,rr)]),_:1})]))}});function Bt(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{"connect-your-wallet":a=>{const{normalize:t}=a;return t(["Connect Wallet"])},"clear-cache":a=>{const{normalize:t}=a;return t(["<b>Clear Cache</b><br /> Press this button to possibly solve the issue of a non-working connect button.<br /> This problem often occurs when you switch between wallet extensions in your browser.<br /> Try to connect again after pressing this button."])}}})}function Wt(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"zh",resource:{"connect-your-wallet":a=>{const{normalize:t}=a;return t(["连接你的钱包"])},"clear-cache":a=>{const{normalize:t}=a;return t(["<b>清除缓存</b><br /> 按下这个按钮，可能会解决连接按钮不工作的问题.<br /> 这个问题经常发生在你在浏览器中切换钱包扩展时.<br /> 按下这个按钮后，尝试再次连接."])}}})}typeof Bt=="function"&&Bt(wt);typeof Wt=="function"&&Wt(wt);const ir=P(wt,[["__scopeId","data-v-2a3f89a0"]]),cr={class:"wallet"},ur={key:0,class:"connected"},dr={key:0,class:"incorrectNetwork"},_r={class:"info"},mr={key:1,class:"notConnected"},vr={key:0,class:"info"},lo=k({__name:"Wallet",props:{labelPleaseConnect:{}},setup(o){const{t:e}=B(),a=ht(),t=$(()=>a.connected),s=$(()=>a.correctNetwork),l=$(()=>G(a.address));te(async()=>{await Za();const v=Ze(),u=await eo(v);a.connected=u;const c=await to(v);a.correctNetwork=c}),R(()=>a.connected,async v=>{const u=Ze(),c=u&&v?await Jn(u):void 0;a.setAddress(c)},{immediate:!0});const i=async()=>{const v=Ze();v&&(await v.send("wallet_switchEthereumChain",[{chainId:"0x1"}]),window.location.reload())},p=async()=>{await Yn(),a.connected=!1};return(v,u)=>(m(),C("div",cr,[t.value?(m(),C("div",ur,[s.value?V("",!0):(m(),C("div",dr,[h(n(pe),{class:"changeNetwork",value:"Change Network",primary:!0,onClick:i}),d("span",_r,S(n(e)("incorrect-network")),1)])),h(n(pe),{class:"disconnect",icon:"fas fa-check",value:l.value,onClick:p},null,8,["value"])])):(m(),C("div",mr,[h(ir),v.labelPleaseConnect?(m(),C("span",vr,S(v.labelPleaseConnect),1)):V("",!0)]))]))}});function Et(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{"incorrect-network":a=>{const{normalize:t}=a;return t(["You are not on the correct network; should be Ethereum"])}}})}typeof Et=="function"&&Et(lo);const pr=P(lo,[["__scopeId","data-v-7d2ec4f7"]]),Re={blue:"#5a74f6",yellow:"#f6f15a",green:"#5af662",red:"#f65a5a",purple:"#bd5af6",backgroundColor:"#292929",level1:"#292929",level2:"#3c3c3c",level3:"#535353",level4:"#6a6a6a",level5:"#949494",level6:"#aea8af",text:"#ffffff"};Re.blue,Re.yellow,Re.green,Re.red,Re.purple;const Me={blue:"#5baefb",yellow:"#f9ab1a",green:"#05c70c",red:"#f9341a",purple:"#be1af9",backgroundColor:"#f7f7f7",level1:"#f7f7f7",level2:"#efefef",level3:"#e8e8e8",level4:"#d8d8d8",level5:"#6e6e77",level6:"#212124",text:"#000000"};Me.blue,Me.yellow,Me.green,Me.red,Me.purple;const qe={blue:"#1a8df9",yellow:"#f9ab1a",green:"#05c70c",red:"#f9341a",purple:"#be1af9",backgroundColor:"#f5f5f5",level1:"#fafafa",level2:"#f2f2f2",level3:"#ebebeb",level4:"#a1a1a1",level5:"#27272a",level6:"#212124",text:"#333333"};qe.blue,qe.yellow,qe.green,qe.red,qe.purple;function Ft(o){return o==="chad"?qe:o==="light"?Me:Re}const j=et({id:"settingsStore",state:()=>({theme:"light"})}),hr={class:"theme"},fr={class:"label"},gr={class:"colors"},br=k({__name:"SelectTheme",setup(o){const e=[{id:"dark",colors:Ft("dark")},{id:"light",colors:Ft("light")}],a=j(),t=D(e[0]),s=D(!1);te(()=>{const p=window.matchMedia("(prefers-color-scheme: dark)").matches,v=localStorage.getItem("theme");if(!v&&p)i(e.find(u=>u.id==="dark"));else{const u=e.find(c=>c.id===v)??e.find(c=>c.id==="light")??e[0];i(u)}});const l=()=>{s.value=!s.value},i=p=>{t.value=p,window.document.documentElement.setAttribute("data-theme",t.value.id),a.theme=t.value.id,localStorage.setItem("theme",t.value.id)};return(p,v)=>(m(),T(n($t),{class:"select direction-up",options:e.map(u=>u),selected:t.value,open:s.value,onOpen:l,onClose:v[0]||(v[0]=u=>s.value=!1),onInput:i},{item:y(u=>[d("div",hr,[d("div",fr,S(u.item.id),1),d("div",gr,[d("div",{class:"color",style:fe({"background-color":u.item.colors.backgroundColor})},null,4),d("div",{class:"color",style:fe({"background-color":u.item.colors.level1})},null,4),d("div",{class:"color",style:fe({"background-color":u.item.colors.level2})},null,4),d("div",{class:"color",style:fe({"background-color":u.item.colors.blue})},null,4),d("div",{class:"color",style:fe({"background-color":u.item.colors.yellow})},null,4),d("div",{class:"color",style:fe({"background-color":u.item.colors.green})},null,4),d("div",{class:"color",style:fe({"background-color":u.item.colors.red})},null,4),d("div",{class:"color",style:fe({"background-color":u.item.colors.purple})},null,4)])])]),_:1},8,["options","selected","open"]))}});const yr=P(br,[["__scopeId","data-v-12a81df3"]]),$r={class:"bottom"},wr={class:"buttons"},Cr={href:"https://twitter.com/0xAlunara",target:"_blank"},kr={href:"https://github.com/Llama-Airforce/Llama-Airforce",target:"_blank"},Sr={class:"selectors"},Tr=k({__name:"Bottom",emits:["navigated"],setup(o,{emit:e}){const a=e,t=async()=>{await navigator.clipboard.writeText(window.location.href)};return(s,l)=>{const i=Ee("router-link");return m(),C("div",$r,[d("div",wr,[h(n(pe),{class:"copy",icon:"fas fa-link",onClick:t}),d("a",Cr,[h(n(pe),{icon:"fab fa-twitter"})]),d("a",kr,[h(n(pe),{icon:"fab fa-github"})]),h(i,{to:"/code"},{default:y(()=>[h(n(pe),{icon:"fas fa-code",onClick:l[0]||(l[0]=p=>a("navigated"))})]),_:1})]),d("div",Sr,[h(yr,{class:"themes"})]),h(pr)])}}});const Pr=P(Tr,[["__scopeId","data-v-0cf9bbd9"]]),Ct=et({id:"pageStore",state:()=>({pages:[]})}),zr=k({__name:"Navigation",emits:["navigated"],setup(o,{emit:e}){const a=e,t=Ct(),s=D(!1),l=()=>{s.value=!1,a("navigated")};return(i,p)=>(m(),C("div",{class:W(["menu-desktop",{expanded:s.value}])},[h(or,{onToggleExpansion:p[0]||(p[0]=v=>s.value=!s.value),onNavigated:l}),h(n(ft),{class:"menu-content",expanded:s.value},{default:y(()=>[h(n(Nl),{pages:n(t).pages,onNavigated:l},null,8,["pages"]),h(Pr,{onNavigated:l})]),_:1},8,["expanded"])],2))}});const Lr=P(zr,[["__scopeId","data-v-07323d4e"]]),lt=et({id:"breadcrumbStore",state:()=>({crumbs:[],show:!1})}),Ir={class:"root"},xr={class:"main"},Ar={class:"content"},Dr=k({__name:"App",setup(o){const e=lt(),a=De(),t=Ne();R(()=>a.fullPath,l=>{["/pool","/mkusd","/redemptions","/liquidation","/profile","/wrappers","/veprisma"].some(p=>l.startsWith(p))&&(e.show=!1)});const s=async l=>{l.pathName&&await t.push({name:l.pathName})};return(l,i)=>{const p=Ee("notifications"),v=Ee("router-view");return m(),C("div",Ir,[h(p,{width:600,duration:-1}),h(Lr,{class:"navigation"}),d("main",xr,[h(It,{name:"fade",mode:"out-in"},{default:y(()=>[n(e).show?(m(),T(n(En),{key:0,class:"breadcrumb",crumbs:n(e).crumbs,onCrumb:s},null,8,["crumbs"])):V("",!0)]),_:1}),d("div",Ar,[h(v,null,{default:y(({Component:u})=>[h(It,{name:"fade",mode:"out-in"},{default:y(()=>[(m(),T(vt(u)))]),_:2},1024)]),_:1})])])])}}});const Or=P(Dr,[["__scopeId","data-v-8c0b3636"]]),Vr="/assets/404-3a4df870.png",Rr=o=>(ue("data-v-c157f3ee"),o=o(),de(),o),Mr={class:"not-found"},qr={class:"not-found-container"},Br=Rr(()=>d("img",{src:Vr},null,-1)),ro=k({__name:"NotFound",setup(o){const{t:e}=B();return(a,t)=>(m(),C("div",Mr,[d("div",qr,[h(n(ne),null,{default:y(()=>[N(S(n(e)("404")),1)]),_:1}),Br])]))}});function Ut(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{404:a=>{const{normalize:t}=a;return t(["Where are you going, pilot? Page not found, please return home fren."])}}})}typeof Ut=="function"&&Ut(ro);const Wr=P(ro,[["__scopeId","data-v-c157f3ee"]]),Er={class:"contracts"},Fr={class:"row"},Ur={class:"title"},Nr=["href"],Hr={class:"title"},jr=["href"],io=k({__name:"Code",setup(o){const{t:e}=B(),t=[{name:"Llama Airforce",contracts:[{contract:xn,description:"multisig",gnosis:!0},{contract:An,description:"treasury",gnosis:!0},{contract:Dn,description:"treasury-arbitrum",network:"arbitrum",gnosis:!0}]}],s=[{name:"Llama Airforce",url:"https://github.com/Llama-Airforce/Llama-Airforce",description:"repo-laf"}],l=i=>{switch(i.network){case"arbitrum":return i.gnosis?`https://app.safe.global/arb1:${i.contract}`:`https://arbiscan.io/address/${i.contract}`;case"ethereum":default:return i.gnosis?`https://app.safe.global/eth:${i.contract}`:`https://etherscan.io/address/${i.contract}`}};return(i,p)=>(m(),C("div",Er,[d("div",Fr,[h(n(le),{class:"datatable-repositories","columns-data":"repositories-columns-data",rows:s,columns:[n(e)("repository"),n(e)("description")]},{"header-content":y(()=>[d("div",Ur,S(n(e)("repositories")),1)]),row:y(v=>[d("div",null,[d("a",{href:v.item.url,target:"_blank"},S(v.item.name),9,Nr)]),d("div",null,S(n(e)(v.item.description)),1)]),_:1},8,["columns"])]),(m(),C(ee,null,ce(t,(v,u)=>h(n(le),{key:u,class:"datatable-contracts","columns-header":"1fr","columns-data":"contracts-columns-data",rows:v.contracts,columns:[n(e)("contract"),n(e)("description")]},{"header-content":y(()=>[d("div",Hr,S(n(e)(v.name)),1)]),row:y(c=>[d("div",null,[d("a",{href:l(c.item),target:"_blank"},S(c.item.contract),9,jr)]),d("div",null,S(n(e)(c.item.description)),1)]),_:2},1032,["rows","columns"])),64))]))}});function Nt(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{repositories:a=>{const{normalize:t}=a;return t(["Repositories"])},repository:a=>{const{normalize:t}=a;return t(["Repository"])},description:a=>{const{normalize:t}=a;return t(["Description"])},contract:a=>{const{normalize:t}=a;return t(["Contract"])},other:a=>{const{normalize:t}=a;return t(["Other"])},"repo-laf":a=>{const{normalize:t}=a;return t(["This website's front-end, excluding the Union"])},multisig:a=>{const{normalize:t}=a;return t(["Multisig"])},treasury:a=>{const{normalize:t}=a;return t(["Treasury"])},"treasury-arbitrum":a=>{const{normalize:t}=a;return t(["Treasury Arbitrum"])}}})}typeof Nt=="function"&&Nt(io);const Gr=P(io,[["__scopeId","data-v-7220715c"]]);function Yr(){const o=Ct(),e=[{path:"/code",component:Gr},...o.pages.flatMap(t=>t.routes),{path:"/:pathMatch(.*)*",name:"NotFound",component:Wr}];return bn({history:yn(),routes:e})}const Jr=o=>({chart:{id:"chart",background:"transparant",foreColor:o.colors.level5,fontFamily:"SF Mono, Consolas, monospace",toolbar:{autoSelected:"zoom",tools:{download:!1,pan:!1}},zoom:{autoScaleYaxis:!0}},colors:o.colorsArray,grid:{borderColor:o.colors.level5,strokeDashArray:4,xaxis:{lines:{show:!1}}},fill:{type:"solid",opacity:1},stroke:{curve:"smooth",width:2},theme:{mode:"dark"},xaxis:{type:"category",axisBorder:{color:o.colors.level5,height:1},axisTicks:{color:o.colors.level5},title:{color:o.colors.level5}},yaxis:{tickAmount:4,axisBorder:{color:o.colors.level5},axisTicks:{color:o.colors.level5},title:{color:o.colors.level5}}});function re(o,e){const a=Jr(o),t=(s,l)=>{if(typeof l=="object"){U.mergeWith(s,l,t);return}else return s||l};return U.mergeWith(e,a,t)}const Be={blue:"#316eff",yellow:"#f6f15a",green:"#5af662",red:"#f65a5a",purple:"#bd5af6",backgroundColor:"#212121",level1:"#2b2b2b",level2:"#404040",level3:"#545454",level4:"#787878",level5:"#9e9e9e",level6:"#c4c4c4",text:"#ffffff"},Kr=[Be.blue,Be.yellow,Be.green,Be.red,Be.purple,"#ff8f33"],We={blue:"#5baefb",yellow:"#f9ab1a",green:"#05c70c",red:"#f9341a",purple:"#be1af9",backgroundColor:"#f7f7f7",level1:"#f7f7f7",level2:"#efefef",level3:"#e8e8e8",level4:"#d8d8d8",level5:"#6e6e77",level6:"#212124",text:"#000000"},Qr=[We.blue,We.yellow,We.green,We.red,We.purple];function H(o){return o==="light"?We:Be}function se(o){return o==="light"?Qr:Kr}function E(){return On}const Te="https://api.prismamonitor.com/v1";class Ie extends ye{async getHistoricalOpenTrovesOverview(e,a){return this.fetch(`${Te}/managers/${e}/open_troves?period=${a}`)}async getHistoricalCollateralRatiosOverview(e,a){return this.fetch(`${Te}/managers/${e}/collateral_ratios?period=${a}`)}async getCollateralRatioGrouped(e,a){return this.fetch(`${Te}/managers/${e}/global_collateral_ratio?period=${a}`)}async getHistoricalCollateralOverview(e,a){return this.fetch(`${Te}/managers/${e}/collateral?period=${a}`)}async getRatioDistributionGrouped(e){return this.fetch(`${Te}/managers/${e}/ratio_distribution`)}async getLargeTrovePositions(e,a,t){return this.fetch(`${Te}/managers/${e}/${a}/large_positions?unit=${t}`)}async getVaultCollateralRatio(e,a,t){return this.fetch(`${Te}/managers/${e}/${a}/collateral_ratio?period=${t}`)}async getVaultTroveCount(e,a,t){return this.fetch(`${Te}/managers/${e}/${a}/open_trove_count?period=${t}`)}async getTroveDistribution(e,a,t){return this.fetch(`${Te}/managers/${e}/${a}/histograms?unit=${t}`)}}const co=k({__name:"ChartOpenTroves",setup(o){const{t:e}=B(),a=new Ie(E()),t=j(),{loading:s,data:l}=F(()=>a.getHistoricalOpenTrovesOverview("ethereum","6m").then(c=>c.managers),[]),i=$(()=>{const c=H(t.theme),r=se(t.theme);return re({colors:c,colorsArray:r},{chart:{type:"bar",stacked:"true",animations:{enabled:!1},toolbar:{show:!1}},xaxis:{categories:p.value,labels:{formatter:u,rotate:-60},tickPlacement:"on"},plotOptions:{bar:{columnWidth:"50%"}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0,custom:({series:f,dataPointIndex:_,w:b})=>{let g=0;const A=f.map((I,q)=>{const O=I[_];return g+=O,`<div><b>${b.globals.seriesNames[q]}</b>: ${O}</div>`});return A.push(`<div><b>Total</b>: ${g}</div>`),A.join("")}}})}),p=$(()=>l.value.length===0||l.value[0].data.length===0?[]:l.value[0].data.map(c=>new Date(c.timestamp*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"}))),v=$(()=>l.value.length===0?[]:l.value.map(c=>({name:c.manager,data:c.data.map(r=>r.value)}))),u=c=>c;return(c,r)=>(m(),T(n(ie),{class:"chart",title:n(e)("title"),loading:n(s),options:i.value,series:v.value},null,8,["title","loading","options","series"]))}});function Ht(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Open troves"])}}})}typeof Ht=="function"&&Ht(co);const Xr=P(co,[["__scopeId","data-v-5e648abe"]]),Zr=(o,e)=>{const a=H(e);return{width:o.clientWidth,height:o.clientHeight,layout:{background:{type:$n.Solid,color:a.backgroundColor},textColor:a.level5,fontFamily:"SF Mono, Consolas, monospace"},grid:{vertLines:{visible:!1},horzLines:{color:a.level4,style:wn.SparseDotted}},rightPriceScale:{borderVisible:!1},timeScale:{borderVisible:!1,fixLeftEdge:!0,fixRightEdge:!0},handleScale:!1,handleScroll:!1}};function ke(o,e,a){const t=Zr(o,e),s=(l,i)=>{if(typeof i=="object"){U.mergeWith(l,i,s);return}else return l||i};return U.mergeWith(a,t,s)}const uo=k({__name:"ChartCollateralRatio",setup(o){const{t:e}=B(),a=new Ie(E());let t,s;const l=j(),i=D(null),{loading:p,data:v}=F(()=>a.getCollateralRatioGrouped("ethereum","all").then(f=>f.data),[]);te(()=>{i.value&&(t=be(i.value,u(i.value,l.theme)),s=t.addAreaSeries(c(l.theme)),r(v.value))}),R(()=>l.theme,f=>{i.value&&(t.applyOptions(u(i.value,f)),s.applyOptions(c(f)))}),R(v,f=>{r(f)});const u=(f,_)=>ke(f,_,{rightPriceScale:{scaleMargins:{top:.1,bottom:.1}}}),c=f=>{const _=H(f);return{priceFormat:{type:"percent",precision:2,minMove:.1},lineWidth:2,lineType:he.WithSteps,lineColor:_.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},r=f=>{if(!t||!s)return;const _=U.chain(f).map(b=>({time:b.timestamp,value:b.value*100})).uniqWith((b,g)=>b.time===g.time).orderBy(b=>b.time,"asc").value();_.length>0&&s.setData(_),t.timeScale().fitContent()};return(f,_)=>(m(),T(n(ne),{class:"chart-container",title:n(e)("title"),loading:n(p)},{default:y(()=>[d("div",{ref_key:"chartRef",ref:i,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function jt(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Global collateral ratio"])}}})}typeof jt=="function"&&jt(uo);const ei=P(uo,[["__scopeId","data-v-d8e9773b"]]),_o=k({__name:"ChartRatioDeciles",setup(o){const{t:e}=B(),a=new Ie(E()),t=j(),{loading:s,data:l}=F(()=>a.getRatioDistributionGrouped("ethereum").then(r=>r.deciles),[]),i=$(()=>{const r=H(t.theme),f=se(t.theme);return re({colors:r,colorsArray:f},{chart:{type:"bar",animations:{enabled:!1},toolbar:{show:!1}},xaxis:{categories:p.value,labels:{formatter:u,rotate:-60},tickPlacement:"on"},yaxis:{labels:{formatter:c}},plotOptions:{bar:{columnWidth:"50%"}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0}})}),p=$(()=>l.value.map(r=>r.label)),v=$(()=>[{name:e("debt"),data:Object.values(l.value).map(r=>r.data)}]),u=r=>r,c=r=>`$${Z(r,0,"dollar")}${Q(r,"dollar")}`;return(r,f)=>(m(),T(n(ie),{class:"chart",title:n(e)("title"),loading:n(s),options:i.value,series:v.value},null,8,["title","loading","options","series"]))}});function Gt(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Debt per Collateral Ratio Deciles"])},debt:a=>{const{normalize:t}=a;return t(["Debt"])}}})}typeof Gt=="function"&&Gt(_o);const ti=P(_o,[["__scopeId","data-v-b5ef781d"]]),mo=k({__name:"ChartGlobalCollateral",setup(o){const{t:e}=B(),a=new Ie(E()),t=j(),{loading:s,data:l}=F(()=>a.getHistoricalCollateralOverview("ethereum","6m").then(r=>r.managers),[]),i=$(()=>{const r=H(t.theme),f=se(t.theme);return re({colors:r,colorsArray:f},{chart:{type:"area",stacked:"true",animations:{enabled:!1},toolbar:{show:!1}},xaxis:{categories:p.value,labels:{formatter:u,rotate:-60},tickPlacement:"on"},yaxis:{labels:{formatter:c}},stroke:{curve:"smooth"},fill:{type:"gradient",gradient:{opacityFrom:.6,opacityTo:.8}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}})}),p=$(()=>l.value.length===0||l.value[0].data.length===0?[]:l.value[0].data.map(r=>new Date(r.timestamp*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"}))),v=$(()=>l.value.length===0?[]:l.value.map(r=>({name:r.manager,data:r.data.map(f=>f.value)}))),u=r=>r,c=r=>`$${Z(r,1,"dollar")}${Q(r,"dollar")}`;return(r,f)=>(m(),T(n(ie),{class:"chart",title:n(e)("title"),loading:n(s),options:i.value,series:v.value},null,8,["title","loading","options","series"]))}});function Yt(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Collateral value"])}}})}typeof Yt=="function"&&Yt(mo);const ai=P(mo,[["__scopeId","data-v-85094bb7"]]);function Pe(o){switch(o.toLocaleLowerCase()){case"0x63cc74334f4b1119276667cf0079ac0c8a96cfb2":return"cbETH";case"0xbf6883a03fd2fcfa1b9fc588ad6193b3c3178f8f":return"wstETH";case"0xe0e255fd5281bec3bb8fa1569a20097d9064e445":return"rETH";case"0xf69282a7e7ba5428f92f610e7afa1c0cedc4e483":return"sfrxETH";default:throw new Error(`Unknown collateral for ${o}`)}}function Le(o){return o==="all"?"":`icons/tokens/${(a=>{switch(a){case"cbETH":return"cbeth.webp";case"wstETH":return"steth.webp";case"rETH":return"reth.webp";case"sfrxETH":return"frxeth.webp";default:return""}})(o)}`}const oi="wss://api.prismamonitor.com/v1/prisma/ws",Jt="troves_overview";let Ke=null,Kt=null;class je{constructor(e){if(this.chain=e,Ke){this.send("snapshots");return}Ke=Ke??Cn(oi),Kt=Ke.pipe(xt(a=>a),kn(a=>a.subscription.chain===this.chain&&a.channel===Jt),xt(a=>a.payload),Sn(1)),this.send("subscribe"),this.send("snapshots")}get overview$(){return Kt}send(e){const a={action:e,channel:Jt,settings:[{chain:this.chain}]};Ke.next(a)}}const tt=o=>(ue("data-v-ec3f010b"),o=o(),de(),o),ni={class:"title"},si=["src"],li={class:"number"},ri={class:"number"},ii={class:"number"},ci={class:"number"},ui={class:"number"},di={class:"number"},_i=tt(()=>d("div",null,null,-1)),mi=tt(()=>d("div",null,null,-1)),vi={class:"number"},pi={class:"number"},hi=tt(()=>d("div",null,null,-1)),fi=tt(()=>d("div",null,null,-1)),gi={class:"number"},bi=tt(()=>d("div",null,null,-1)),vo=k({__name:"TableVaults",setup(o){const{t:e}=B(),a=new je("ethereum"),t=D(""),s=He(a.overview$,[]),l=$(()=>U.chain(s.value).filter(p=>{const v=t.value.toLocaleLowerCase().split(" "),u=c=>v.some(r=>c.toLocaleLowerCase().includes(r));return u(p.name)||u(p.address)}).value()),i=$(()=>s.value.length===0);return(p,v)=>(m(),T(n(le),{class:"datatable-vaults","columns-header":"minmax(7rem, 1fr) minmax(auto, 25rem)","columns-data":"vaults-columns-data",loading:i.value,rows:l.value,columns:["","Name","TVL","Debt","CR","MCR","Troves","Price"]},{"header-content":y(()=>[d("div",ni,S(n(e)("title")),1),h(n(_e),{modelValue:t.value,"onUpdate:modelValue":v[0]||(v[0]=u=>t.value=u),class:"search",search:!0,placeholder:n(e)("search-placeholder")},null,8,["modelValue","placeholder"])]),row:y(u=>[d("img",{src:n(Le)(u.item.name)},null,8,si),d("div",null,S(u.item.name),1),d("div",li,[h(n(M),{value:u.item.tvl,precision:0,"show-symbol":!1,type:"dollar"},null,8,["value"])]),d("div",ri,[h(n(M),{value:u.item.debt,precision:0,"show-symbol":!1,type:"dollar"},null,8,["value"])]),d("div",ii,[h(n(M),{value:u.item.cr*100,precision:2,type:"percentage"},null,8,["value"])]),d("div",ci,[h(n(M),{value:u.item.mcr*100,precision:2,type:"percentage"},null,8,["value"])]),d("div",ui,S(u.item.open_troves),1),d("div",di,[h(n(M),{type:"dollar",value:Math.round(u.item.price),precision:1/0},null,8,["value"])])]),"row-aggregation":y(()=>[_i,mi,d("div",vi,[h(n(M),{value:l.value.reduce((u,c)=>u+c.tvl,0),precision:0,"show-symbol":!1,type:"dollar"},null,8,["value"])]),d("div",pi,[h(n(M),{value:l.value.reduce((u,c)=>u+c.debt,0),precision:0,"show-symbol":!1,type:"dollar"},null,8,["value"])]),hi,fi,d("div",gi,[h(n(M),{value:l.value.reduce((u,c)=>u+c.open_troves,0),precision:0,"show-symbol":!1,type:"dollar"},null,8,["value"])]),bi]),"row-details":y(()=>[N("   ")]),_:1},8,["loading","rows"]))}});function Qt(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Vaults"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof Qt=="function"&&Qt(vo);const yi=P(vo,[["__scopeId","data-v-ec3f010b"]]),rt=et({id:"vaultStore",state:()=>({vault:null,trove:null})}),$i={class:"vaults"},wi=k({__name:"Vaults",setup(o){const e=lt(),a=rt(),t=Ne();te(()=>{e.show=!0,e.crumbs=[{id:"vaults",label:"Vaults",pathName:"vaults"}]});const s=async l=>{a.vault=l,await t.push({name:"prismavault",params:{tab:"",vaultAddr:l.address}})};return(l,i)=>(m(),C("div",$i,[h(yi,{style:{"grid-column":"1 / -1"},onSelected:s}),h(ei),h(ti),h(ai),h(Xr)]))}});const Ci=P(wi,[["__scopeId","data-v-47785ba8"]]),Ve="https://api.prismamonitor.com/v1";class Ge extends ye{async getPoolTvl(e,a){return this.fetch(`${Ve}/pool/${e}/deposits?period=${a}`)}async getStableFlow(e,a){return this.fetch(`${Ve}/pool/${e}/stable_operations?period=${a}`)}async getStableDistribution(e){return this.fetch(`${Ve}/pool/${e}/histogram/deposits`)}async getCumulativeWithdrawals(e,a){return this.fetch(`${Ve}/pool/${e}/cumulative_withdrawals?period=${a}`)}async getTopStableDeposits(e,a,t){return this.fetch(`${Ve}/pool/${e}/top/stable_deposits?top=${a}&period=${t}`)}async getTopStableWithdrawals(e,a,t){return this.fetch(`${Ve}/pool/${e}/top/stable_withdrawals?top=${a}&period=${t}`)}}const po=k({__name:"ChartPoolTvl",setup(o){const{t:e}=B(),a=new Ge(E());let t,s;const l=j(),i=D(null),{loading:p,data:v}=F(()=>a.getPoolTvl("ethereum","1m").then(_=>_.deposits),[]);te(()=>{i.value&&(t=be(i.value,u(i.value,l.theme)),s=t.addAreaSeries(c(l.theme)),r(v.value))}),R(()=>l.theme,_=>{i.value&&(t.applyOptions(u(i.value,_)),s.applyOptions(c(_)))}),R(v,_=>{r(_)});const u=(_,b)=>ke(_,b,{leftPriceScale:{scaleMargins:{top:.1,bottom:.1}},localization:{priceFormatter:g=>f(g)}}),c=_=>{const b=H(_);return{priceFormat:{type:"price",precision:2,minMove:.001},lineWidth:2,lineType:he.WithSteps,lineColor:b.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},r=_=>{if(!t||!s)return;const b=U.chain(_).map(g=>({time:g.timestamp,value:g.value})).uniqWith((g,A)=>g.time===A.time).orderBy(g=>g.time,"asc").value();b.length>0&&s.setData(b),t.timeScale().fitContent()},f=_=>`$${Z(_,1,"dollar")}${Q(_,"dollar")}`;return(_,b)=>(m(),T(n(ne),{class:"chart-container",title:n(e)("title"),loading:n(p)},{default:y(()=>[d("div",{ref_key:"chartRef",ref:i,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function Xt(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Total deposits in stability pool"])}}})}typeof Xt=="function"&&Xt(po);const ki=P(po,[["__scopeId","data-v-08ef8b78"]]),ho=k({__name:"ChartStableFlow",setup(o){const{t:e}=B(),a=new Ge(E()),t=j(),{loading:s,data:l}=F(()=>a.getStableFlow("ethereum","1m"),{deposits:[],withdrawals:[]}),i=$(()=>{const r=H(t.theme),f=se(t.theme);return re({colors:r,colorsArray:f},{chart:{type:"bar",stacked:"true",animations:{enabled:!1},toolbar:{show:!1}},colors:[r.green,r.red],xaxis:{categories:p.value,labels:{formatter:u,rotate:-60},tickPlacement:"on"},yaxis:{labels:{formatter:c}},plotOptions:{bar:{columnWidth:"50%"}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0,custom:({series:_,dataPointIndex:b,w:g})=>{let A=0;const I=_.map((q,O)=>{const x=q[b];return A+=x,`<div><b>${g.globals.seriesNames[O]}</b>:	${c(x)}</div>`});return I.push(`<div><b>Total</b>:	${c(A)}</div>`),I.join("")}}})}),p=$(()=>l.value.deposits.length===0?[]:l.value.deposits.map(r=>new Date(r.timestamp*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"}))),v=$(()=>[{name:e("deposits"),data:Object.values(l.value.deposits).map(r=>r.value)},{name:e("withdrawals"),data:Object.values(l.value.withdrawals).map(r=>r.value)}]),u=r=>r,c=r=>`$${Z(r,0,"dollar")}${Q(r,"dollar")}`;return(r,f)=>(m(),T(n(ie),{title:n(e)("title"),loading:n(s),options:i.value,series:v.value},null,8,["title","loading","options","series"]))}});function Zt(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["mkUSD deposits and withdrawals"])},deposits:a=>{const{normalize:t}=a;return t(["Deposits"])},withdrawals:a=>{const{normalize:t}=a;return t(["Withdrawals"])}}})}typeof Zt=="function"&&Zt(ho);const Si=P(ho,[["__scopeId","data-v-59000d87"]]),fo=k({__name:"ChartDepositDistribution",setup(o){const{t:e}=B(),a=new Ge(E()),t=j(),{loading:s,data:l}=F(()=>a.getStableDistribution("ethereum").then(u=>u.distribution),[]),i=$(()=>{const u=H(t.theme),c=se(t.theme);return re({colors:u,colorsArray:c},{chart:{id:"distribution",type:"bar",animations:{enabled:!1},toolbar:{show:!1}},xaxis:{categories:v.value,labels:{rotate:-45},tickPlacement:"on"},legend:{inverseOrder:!0},stroke:{width:.5},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0}})}),p=$(()=>[{name:e("numPos"),data:Object.values(l.value).map(u=>u.value)}]),v=$(()=>l.value.map(u=>u.label));return(u,c)=>(m(),T(n(ie),{title:n(e)("title"),loading:n(s),series:p.value,options:i.value},null,8,["title","loading","series","options"]))}});function ea(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Distribution of current user deposits"])},numPos:a=>{const{normalize:t}=a;return t(["# of positions"])}}})}typeof ea=="function"&&ea(fo);const Ti=P(fo,[["__scopeId","data-v-0c200c77"]]),go=k({__name:"ChartCumulativeWithdrawals",setup(o){const{t:e}=B(),a=new Ge(E());let t,s;const l=j(),i=D(null),{loading:p,data:v}=F(()=>a.getCumulativeWithdrawals("ethereum","all").then(_=>_.withdrawals),[]);te(()=>{i.value&&(t=be(i.value,u(i.value,l.theme)),s=t.addAreaSeries(c(l.theme)),r(v.value))}),R(()=>l.theme,_=>{i.value&&(t.applyOptions(u(i.value,_)),s.applyOptions(c(_)))}),R(v,_=>{r(_)});const u=(_,b)=>ke(_,b,{leftPriceScale:{scaleMargins:{top:.1,bottom:.1}},localization:{priceFormatter:g=>f(g)}}),c=_=>{const b=H(_);return{priceFormat:{type:"price",precision:2,minMove:.001},lineWidth:2,lineType:he.WithSteps,lineColor:b.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},r=_=>{if(!t||!s)return;const b=U.chain(_).map(g=>({time:g.timestamp,value:g.value})).uniqWith((g,A)=>g.time===A.time).orderBy(g=>g.time,"asc").value();b.length>0&&s.setData(b),t.timeScale().fitContent()},f=_=>`$${Z(_,1,"dollar")}${Q(_,"dollar")}`;return(_,b)=>(m(),T(n(ne),{class:"chart-container",title:n(e)("title"),loading:n(p)},{default:y(()=>[d("div",{ref_key:"chartRef",ref:i,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function ta(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Cumulative value of collaterals withdrawn"])}}})}typeof ta=="function"&&ta(go);const Pi=P(go,[["__scopeId","data-v-32707dbe"]]),zi={class:"title"},Li={class:"address"},Ii=["href"],xi={class:"number"},Ai={class:"number"},Di={class:"address"},Oi=["href"],bo=k({__name:"TableTopDeposits",setup(o){const{t:e}=B(),a=new Ge(E()),{loading:t,data:s}=F(()=>a.getTopStableDeposits("ethereum",5,"7d").then(i=>i.operations),[]),l=$(()=>U.chain(s.value).map(i=>i).value());return(i,p)=>(m(),T(n(le),{class:"datatable-deposits","columns-header":"1fr","columns-data":"deposits-columns-data",loading:n(t),rows:l.value,columns:["Address","Amount","Date","Tx"]},{"header-content":y(()=>[d("div",zi,S(n(e)("title")),1)]),row:y(v=>[d("div",Li,[d("a",{href:`https://etherscan.io/address/${v.item.user}`,target:"_blank"},S(n(G)(v.item.user,8)),9,Ii)]),d("div",xi,[h(n(M),{value:v.item.amount,precision:2,"show-zero":!0,type:"dollar"},null,8,["value"])]),d("div",Ai,S(new Date(v.item.timestamp*1e3).toLocaleDateString()),1),d("div",Di,[d("a",{href:`https://etherscan.io/tx/${v.item.hash}`,target:"_blank"},S(n(G)(v.item.hash,8)),9,Oi)])]),_:1},8,["loading","rows"]))}});function aa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Largest deposits past 7 days"])}}})}typeof aa=="function"&&aa(bo);const Vi=P(bo,[["__scopeId","data-v-4e9e0fb0"]]),Ri={class:"title"},Mi={class:"address"},qi=["href"],Bi={class:"number"},Wi={class:"number"},Ei={class:"address"},Fi=["href"],yo=k({__name:"TableTopWithdrawals",setup(o){const{t:e}=B(),a=new Ge(E()),t=$(()=>U.chain(l.value).map(i=>i).value()),{loading:s,data:l}=F(()=>a.getTopStableWithdrawals("ethereum",5,"7d").then(i=>i.operations),[]);return(i,p)=>(m(),T(n(le),{class:"datatable-withdrawals","columns-header":"1fr","columns-data":"withdrawals-columns-data",loading:n(s),rows:t.value,columns:["Address","Amount","Date","Tx"]},{"header-content":y(()=>[d("div",Ri,S(n(e)("title")),1)]),row:y(v=>[d("div",Mi,[d("a",{href:`https://etherscan.io/address/${v.item.user}`,target:"_blank"},S(n(G)(v.item.user,8)),9,qi)]),d("div",Bi,[h(n(M),{value:v.item.amount,precision:2,"show-zero":!0,type:"dollar"},null,8,["value"])]),d("div",Wi,S(new Date(v.item.timestamp*1e3).toLocaleDateString()),1),d("div",Ei,[d("a",{href:`https://etherscan.io/tx/${v.item.hash}`,target:"_blank"},S(n(G)(v.item.hash,8)),9,Fi)])]),_:1},8,["loading","rows"]))}});function oa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Largest withdrawals past 7 days"])}}})}typeof oa=="function"&&oa(yo);const Ui=P(yo,[["__scopeId","data-v-ccae8030"]]),Ni={class:"pool"},Hi=k({__name:"StabilityPool",setup(o){return(e,a)=>(m(),C("div",Ni,[h(ki),h(Si),h(Ti),h(Pi),h(Vi),h(Ui)]))}});const ji=P(Hi,[["__scopeId","data-v-c433301c"]]),Qe="https://api.prismamonitor.com/v1";class at extends ye{async getPriceHistory(e,a){return this.fetch(`${Qe}/mkusd/${e}/history?period=${a}`)}async getPriceHistogram(e,a,t){return this.fetch(`${Qe}/mkusd/${e}/histogram?period=${t}&bins=${a}`)}async getLargeStableCoinHolders(e){return this.fetch(`${Qe}/mkusd/${e}/holders`)}async getStableCoinKPI(e){return this.fetch(`${Qe}/mkusd/${e}/general`)}async getCurvePoolDepth(e){return this.fetch(`${Qe}/mkusd/${e}/depth`)}}const Gi=o=>(ue("data-v-b3c56b08"),o=o(),de(),o),Yi=Gi(()=>d("div",null,"Price data is sourced from Curve pools only.",-1)),$o=k({__name:"ChartPrice",setup(o){const{t:e}=B(),a=new at(E());let t,s;const l=j(),i=D(null),{loading:p,data:v}=F(()=>a.getPriceHistory("ethereum","1m").then(_=>_.prices),[]);te(()=>{i.value&&(t=be(i.value,u(i.value,l.theme)),s=t.addAreaSeries(c(l.theme)),r(v.value))}),R(()=>l.theme,_=>{i.value&&(t.applyOptions(u(i.value,_)),s.applyOptions(c(_)))}),R(v,_=>{r(_)});const u=(_,b)=>ke(_,b,{leftPriceScale:{scaleMargins:{top:.1,bottom:.1}},localization:{priceFormatter:g=>f(g)}}),c=_=>{const b=H(_);return{priceFormat:{type:"price",precision:6,minMove:.01},lineWidth:2,lineType:he.WithSteps,lineColor:b.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},r=_=>{if(!t||!s)return;const b=U.chain(_).map(g=>({time:g.timestamp,value:g.value})).uniqWith((g,A)=>g.time===A.time).orderBy(g=>g.time,"asc").value();b.length>0&&s.setData(b),t.timeScale().fitContent()},f=_=>`$${Z(_,2,"dollar")}${Q(_,"dollar")}`;return(_,b)=>(m(),T(n(ne),{class:"chart-container",title:n(e)("title"),loading:n(p)},{actions:y(()=>[h(n(Ue),null,{default:y(()=>[Yi]),_:1})]),default:y(()=>[d("div",{ref_key:"chartRef",ref:i,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function na(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["mkUSD price (last 30 days)"])}}})}typeof na=="function"&&na($o);const Ji=P($o,[["__scopeId","data-v-b3c56b08"]]),wo=k({__name:"ChartPriceDistribution",setup(o){const{t:e}=B(),a=new at(E()),t=j(),{loading:s,data:l}=F(()=>a.getPriceHistogram("ethereum",10,"all").then(u=>u.histogram),[]),i=$(()=>{const u=H(t.theme),c=se(t.theme);return re({colors:u,colorsArray:c},{chart:{id:"distribution",type:"bar",animations:{enabled:!1},toolbar:{show:!1}},xaxis:{categories:v.value,labels:{rotate:-55},tickPlacement:"on"},legend:{inverseOrder:!0},stroke:{width:.5},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0}})}),p=$(()=>[{name:e("numPos"),data:Object.values(l.value).map(u=>u.value)}]),v=$(()=>l.value.map(u=>u.label));return(u,c)=>(m(),T(n(ie),{title:n(e)("title"),loading:n(s),series:p.value,options:i.value},null,8,["title","loading","series","options"]))}});function sa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Price histogram"])},numPos:a=>{const{normalize:t}=a;return t(["# of hourly price records"])}}})}typeof sa=="function"&&sa(wo);const Ki=P(wo,[["__scopeId","data-v-80e70b60"]]),Co=k({__name:"ChartHolders",setup(o){const{t:e}=B(),a=new at(E()),t=j(),{loading:s,data:l}=F(()=>a.getLargeStableCoinHolders("ethereum").then(c=>c.holders),[]),i=$(()=>{const c=H(t.theme),r=se(t.theme);return re({colors:c,colorsArray:r},{chart:{id:"mainHolders",type:"donut",animations:{enabled:!1}},legend:{inverseOrder:!0},stroke:{width:.5},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:f=>{let _=v.value[f.seriesIndex];_=_.length>10&&_.startsWith("0x")?G(_):_;const b=f.series[f.seriesIndex];return[`<div><b>${_}</b>:</div><div>${u(b)}</div>`].join("")}},labels:l.value.map(f=>f.label.length>10&&f.label.startsWith("0x")?G(f.label):f.label)})}),p=$(()=>l.value.map(c=>c.value)),v=$(()=>l.value.map(c=>c.label)),u=c=>`$${Z(Math.abs(c),1,"dollar")}${Q(c,"dollar")}`;return(c,r)=>(m(),T(n(ie),{class:"graph",title:n(e)("title"),loading:n(s),options:i.value,series:p.value},null,8,["title","loading","options","series"]))}});function la(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Largest holders"])},numPos:a=>{const{normalize:t}=a;return t(["mkUSD balance:"])}}})}typeof la=="function"&&la(Co);const Qi=P(Co,[["__scopeId","data-v-1ddc910f"]]),Xi={class:"kpis"},Zi=k({__name:"KPIs",setup(o){const e=new at(E()),{data:a}=F(()=>e.getStableCoinKPI("ethereum").then(t=>t.info),null);return(t,s)=>(m(),C("div",Xi,[h(n(oe),{label:"mkUSD price","has-value":!!n(a)},{default:y(()=>[n(a)?(m(),T(n(M),{key:0,value:n(a).price,precision:4,type:"dollar"},null,8,["value"])):V("",!0)]),_:1},8,["has-value"]),h(n(oe),{label:"Total supply","has-value":!!n(a)},{default:y(()=>[n(a)?(m(),T(n(M),{key:0,value:n(a).supply,precision:2,type:"dollar"},null,8,["value"])):V("",!0)]),_:1},8,["has-value"]),h(n(oe),{label:"24h Volume (Curve)","has-value":!!n(a)},{default:y(()=>[n(a)?(m(),T(n(M),{key:0,value:n(a).volume,precision:1,type:"dollar"},null,8,["value"])):V("",!0)]),_:1},8,["has-value"]),h(n(oe),{label:"Aggregate -2% Depth (Curve)","has-value":!!n(a)},{default:y(()=>[n(a)?(m(),T(n(M),{key:0,value:n(a).depth,precision:1,type:"dollar"},null,8,["value"])):V("",!0)]),_:1},8,["has-value"])]))}});const ec=P(Zi,[["__scopeId","data-v-48e5701e"]]),ko=k({__name:"ChartDepth",props:{depth:{default:null},loading:{type:Boolean}},setup(o){const{t:e}=B(),a=j(),t=$(()=>{const p=H(a.theme),v=se(a.theme);return re({colors:p,colorsArray:v},{chart:{type:"area",animations:{enabled:!1},toolbar:{show:!1}},fill:{type:"gradient",gradient:{type:"vertical",shadeIntensity:0,inverseColors:!1,opacityFrom:.8,opacityTo:.2,stops:[0,90,100]}},toolbar:{show:!1},xaxis:{type:"numeric",labels:{formatter:u=>i(u)}},yaxis:{seriesName:"amounts",labels:{formatter:u=>i(u)}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{x:{formatter:u=>i(u)}},colors:[u=>u.value===0?p.blue:p.green,u=>u.value===0?p.blue:p.red]})}),s=$(()=>{if(!o.depth)return[];const p=[...o.depth.ask.prices.map(u=>({x:u,y:0})),...o.depth.bid.prices.map((u,c)=>({x:u,y:o.depth.bid.amounts[c]}))],v=[...o.depth.ask.prices.map((u,c)=>({x:u,y:o.depth.ask.amounts[c]}))];return[{name:"Bid",data:p},{name:"Ask",data:v}]}),l=$(()=>{var v;if(!((v=o.depth)!=null&&v.tokens)||o.depth.tokens.length===0)return e("title");const p=o.depth.tokens.join(" / ");return`${e("title")} - ${p} (Curve)`}),i=p=>`$${Z(Math.abs(p),2,"dollar")}${Q(p,"dollar")}`;return(p,v)=>(m(),T(n(ie),{class:"chart",title:l.value,loading:p.loading,options:t.value,series:s.value},null,8,["title","loading","options","series"]))}});function ra(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Liquidity Depth"])}}})}typeof ra=="function"&&ra(ko);const tc=P(ko,[["__scopeId","data-v-69d5ffa2"]]),ac=k({__name:"ChartDepthContainer",setup(o){const e=new at(E()),{loading:a,data:t}=F(()=>e.getCurvePoolDepth("ethereum").then(s=>s.depth),[]);return(s,l)=>(m(!0),C(ee,null,ce(n(t),i=>(m(),T(tc,{key:i.name,loading:n(a),depth:i},null,8,["loading","depth"]))),128))}});const oc=P(ac,[["__scopeId","data-v-28ca1d13"]]),nc={class:"mkusd"},sc=k({__name:"Stablecoin",setup(o){return(e,a)=>(m(),C("div",nc,[h(ec,{style:{"grid-column":"1 / -1"}}),h(Ji),h(Ki),h(Qi),h(oc)]))}});const lc=P(sc,[["__scopeId","data-v-738142b2"]]),rc={class:"redemption-details"},ic={class:"kpis"},cc={class:"title"},uc=["href"],So=k({__name:"RedemptionDetails",props:{vaultAddr:{},redemption:{}},setup(o){const{t:e}=B(),a=D(""),t=$(()=>U.chain(o.redemption.troves_affected).filter(s=>{const l=a.value.toLocaleLowerCase().split(" ");return(p=>l.some(v=>p.toLocaleLowerCase().includes(v)))(s)}).value());return(s,l)=>(m(),T(n(ne),{title:n(e)("redemption-details")},{default:y(()=>[d("div",rc,[d("div",ic,[h(n(oe),{label:n(e)("withdrawal")},{default:y(()=>[h(n(M),{value:s.redemption.attempted_debt_amount,precision:2,type:"dollar"},null,8,["value"]),N(" / "),h(n(M),{value:s.redemption.collateral_sent_to_redeemer_usd,precision:2,type:"dollar"},null,8,["value"])]),_:1},8,["label"]),h(n(oe),{label:n(e)("fee")},{default:y(()=>[h(n(M),{value:s.redemption.collateral_fee_usd,precision:2,type:"dollar"},null,8,["value"])]),_:1},8,["label"])]),h(n(le),{class:"datatable-troves-affected","columns-header":"2fr 1fr","columns-data":"troves-affected-columns-data",rows:t.value,columns:["Trove"]},{"header-content":y(()=>[d("div",cc,S(n(e)("troves-affected")),1),h(n(_e),{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=i=>a.value=i),class:"search",search:!0,placeholder:n(e)("search-placeholder")},null,8,["modelValue","placeholder"])]),row:y(i=>[d("div",null,[d("a",{style:{"font-family":"monospace"},target:"_blank",href:`#/vault/${s.vaultAddr}/trove/${i.item}`,onClick:l[1]||(l[1]=X(()=>{},["stop"]))},S(i.item),9,uc)])]),_:1},8,["rows"])])]),_:1},8,["title"]))}});function ia(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{"troves-affected":a=>{const{normalize:t}=a;return t(["Troves affected"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])},"redemption-details":a=>{const{normalize:t}=a;return t(["Redemption Details"])},withdrawal:a=>{const{normalize:t}=a;return t(["Attempted / Received"])},fee:a=>{const{normalize:t}=a;return t(["Fee"])}}})}typeof ia=="function"&&ia(So);const kt=P(So,[["__scopeId","data-v-da85ccb3"]]),dc={key:0,class:"item"},_c=["src"],mc={key:1,class:"empty"},vc={class:"label"},pc=k({__name:"SelectCollateral",props:{collateral:{default:null},all:{type:Boolean,default:!1}},emits:["select-collateral"],setup(o,{emit:e}){const a=e,t=D(!1),s=[...o.all?[{collateral:"all",label:"All"}]:[],{collateral:"cbETH",label:"cbETH"},{collateral:"wstETH",label:"wstETH"},{collateral:"rETH",label:"rETH"},{collateral:"sfrxETH",label:"sfrxETH"}],l=$(()=>s.find(u=>u.collateral===o.collateral)??null);te(()=>{v(s[0])});const i=u=>u.label,p=()=>{t.value=!t.value},v=u=>{const{collateral:c}=u;a("select-collateral",c)};return(u,c)=>(m(),T(n($t),{class:"select",options:s,selected:l.value,open:t.value,onOpen:p,onClose:c[0]||(c[0]=r=>t.value=!1),onInput:v},{item:y(r=>[r.item?(m(),C("div",dc,[n(Le)(r.item.collateral)?(m(),C("img",{key:0,src:n(Le)(r.item.collateral)},null,8,_c)):(m(),C("div",mc)),d("div",vc,S(i(r.item)),1)])):V("",!0)]),_:1},8,["selected","open"]))}});const ot=P(pc,[["__scopeId","data-v-2bf0e714"]]),ca="https://api.prismamonitor.com/v1";class St extends ye{async getRedemptions(e,a){return Fe(s=>this.fetch(`${ca}/redemptions/${e}/${a}?items=100&page=${s}&order_by=block_timestamp&desc=true`).then(l=>l.redemptions),1,100)}async getRedemptionsForTrove(e,a){return Fe(s=>this.fetch(`${ca}/redemptions/${e}?items=100&page=${s}&order_by=block_timestamp&desc=true&trove_filter=${a}`).then(l=>l.redemptions),1,100)}}const hc={class:"title"},fc=["src"],gc=["href"],bc=["href"],yc={class:"number"},$c={class:"number"},wc={class:"number"},ua=15,To=k({__name:"TableRedemptions",props:{vaults:{default:()=>[]}},setup(o){const e=new St(E()),{t:a}=B(),{loading:t,data:s,load:l}=F(()=>o.vaults.length>0?Promise.all(o.vaults.map(w=>e.getRedemptions("ethereum",w.address))).then(w=>w.flat()):Promise.resolve([]),[]),{relativeTime:i}=we(),{sortColumn:p,sortOrder:v,onSort:u}=ze("timestamp"),c=D(""),r=D("all"),f=D(null),_=$(()=>["","Redeemer","Transaction","Debt","# Troves","Time"]),b=$(()=>["icon","redeemer","tx","debt","numtroves","timestamp"]),g=$(()=>["redeemer","tx","debt","numtroves","timestamp"]),A=$(()=>U.chain(s.value).filter(w=>{const L=c.value.toLocaleLowerCase().split(" "),z=me=>L.some(Se=>me.toLocaleLowerCase().includes(Se)),Y=Pe(w.vault),J=r.value==="all"?!0:r.value===Y;return z(w.redeemer)&&J}).orderBy(w=>{switch(p.value){case"redeemer":return w.redeemer;case"tx":return w.transaction;case"debt":return w.actual_debt_amount;case"numtroves":return w.troves_affected_count;case"timestamp":return w.timestamp;default:return w.timestamp}},v.value===ae.Descending?"desc":"asc").value()),{page:I,rowsPage:q,onPage:O}=Ce(A,ua),x=w=>{f.value=w};return R(()=>o.vaults,l),(w,L)=>(m(),C(ee,null,[h(n(le),{class:"datatable-redemptions","columns-header":"1fr 12rem minmax(auto, 25rem) auto auto","columns-data":"redemptions-columns-data",loading:n(t),rows:n(q),columns:_.value,sorting:!0,"sorting-columns":b.value,"sorting-columns-enabled":g.value,"sorting-default-column":"timestamp","sorting-default-dir":"Descending",onSortColumn:n(u),onSelected:x},{"header-content":y(()=>[d("div",hc,S(n(a)("title")),1),h(ot,{class:"select-collateral",collateral:r.value,all:!0,onSelectCollateral:L[0]||(L[0]=z=>r.value=z)},null,8,["collateral"]),h(n(_e),{modelValue:c.value,"onUpdate:modelValue":L[1]||(L[1]=z=>c.value=z),class:"search",search:!0,placeholder:n(a)("search-placeholder")},null,8,["modelValue","placeholder"]),h(n($e),{class:"pagination","items-count":A.value.length,"items-per-page":ua,page:n(I),onPage:n(O)},null,8,["items-count","page","onPage"])]),row:y(z=>[d("img",{src:n(Le)(n(Pe)(z.item.vault))},null,8,fc),d("div",null,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${z.item.redeemer}`,target:"_blank",onClick:L[2]||(L[2]=X(()=>{},["stop"]))},S(n(G)(z.item.redeemer)),9,gc)]),d("div",null,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/tx/${z.item.transaction}`,target:"_blank",onClick:L[3]||(L[3]=X(()=>{},["stop"]))},S(n(G)(z.item.transaction)),9,bc)]),d("div",yc,[h(n(M),{type:"dollar",value:Math.round(z.item.actual_debt_amount),precision:1/0},null,8,["value"])]),d("div",$c,S(z.item.troves_affected_count),1),d("div",wc,S(n(i)(z.item.timestamp)),1)]),"row-details":y(()=>[N("   ")]),_:1},8,["loading","rows","columns","sorting-columns","sorting-columns-enabled","onSortColumn"]),h(n(Oe),{show:!!f.value,onClose:L[4]||(L[4]=z=>f.value=null)},{default:y(()=>[f.value?(m(),T(kt,{key:0,redemption:f.value,"vault-addr":f.value.vault},null,8,["redemption","vault-addr"])):V("",!0)]),_:1},8,["show"])],64))}});function da(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Redemptions"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof da=="function"&&da(To);const Cc=P(To,[["__scopeId","data-v-9c28ae22"]]),kc={class:"redemptions"},Sc=k({__name:"Redemptions",setup(o){const e=new je("ethereum"),a=He(e.overview$,[]);return(t,s)=>(m(),C("div",kc,[h(Cc,{vaults:n(a)},null,8,["vaults"])]))}});const Tc=P(Sc,[["__scopeId","data-v-7dad5953"]]),Pc={class:"liquidation-details"},zc={class:"kpis"},Lc={class:"title"},Ic=["href"],Po=k({__name:"LiquidationDetails",props:{vaultAddr:{},liquidation:{}},setup(o){const{t:e}=B(),a=D(""),t=$(()=>U.chain(o.liquidation.troves_affected).filter(s=>{const l=a.value.toLocaleLowerCase().split(" ");return(p=>l.some(v=>p.toLocaleLowerCase().includes(v)))(s)}).value());return(s,l)=>(m(),T(n(ne),{title:n(e)("liquidation-details")},{default:y(()=>[d("div",Pc,[d("div",zc,[h(n(oe),{label:n(e)("debt")},{default:y(()=>[h(n(M),{value:s.liquidation.liquidated_debt,precision:2,type:"dollar"},null,8,["value"]),N(" / "),h(n(M),{value:s.liquidation.liquidated_collateral,precision:2,"show-symbol":!1,type:"dollar"},null,8,["value"])]),_:1},8,["label"]),h(n(oe),{label:n(e)("gas-compensation")},{default:y(()=>[h(n(M),{value:s.liquidation.collateral_gas_compensation_usd,precision:2,type:"dollar"},null,8,["value"])]),_:1},8,["label"])]),h(n(le),{class:"datatable-troves-affected","columns-header":"2fr 1fr","columns-data":"troves-affected-columns-data",rows:t.value,columns:["Trove"]},{"header-content":y(()=>[d("div",Lc,S(n(e)("troves-affected")),1),h(n(_e),{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=i=>a.value=i),class:"search",search:!0,placeholder:n(e)("search-placeholder")},null,8,["modelValue","placeholder"])]),row:y(i=>[d("div",null,[d("a",{style:{"font-family":"monospace"},target:"_blank",href:`#/vault/${s.vaultAddr}/trove/${i.item}`,onClick:l[1]||(l[1]=X(()=>{},["stop"]))},S(i.item),9,Ic)])]),_:1},8,["rows"])])]),_:1},8,["title"]))}});function _a(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{"troves-affected":a=>{const{normalize:t}=a;return t(["Troves affected"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])},"liquidation-details":a=>{const{normalize:t}=a;return t(["Liquidation Details"])},debt:a=>{const{normalize:t}=a;return t(["Debt / Collateral"])},"gas-compensation":a=>{const{normalize:t}=a;return t(["Gas compensation"])}}})}typeof _a=="function"&&_a(Po);const Tt=P(Po,[["__scopeId","data-v-3718b149"]]),ma="https://api.prismamonitor.com/v1";class Pt extends ye{async getLiquidations(e,a){return Fe(s=>this.fetch(`${ma}/liquidations/${e}/${a}?items=100&page=${s}&order_by=block_timestamp&desc=true`).then(l=>l.liquidations),1,100)}async getLiquidationsForTrove(e,a){return Fe(s=>this.fetch(`${ma}/liquidations/${e}?items=100&page=${s}&order_by=block_timestamp&desc=true&trove_filter=${a}`).then(l=>l.liquidations),1,100)}}const xc={class:"title"},Ac=["src"],Dc=["href"],Oc=["href"],Vc={class:"number"},Rc={class:"number"},Mc={class:"number"},va=15,zo=k({__name:"TableLiquidations",props:{vaults:{default:()=>[]}},setup(o){const e=new Pt(E()),{t:a}=B(),{loading:t,data:s,load:l}=F(()=>o.vaults.length>0?Promise.all(o.vaults.map(w=>e.getLiquidations("ethereum",w.address))).then(w=>w.flat()):Promise.resolve([]),[]),{relativeTime:i}=we(),{sortColumn:p,sortOrder:v,onSort:u}=ze("timestamp"),c=D(""),r=D("all"),f=D(null),_=$(()=>["","Liquidator","Transaction","Debt","# Troves","Time"]),b=$(()=>["icon","liquidator","tx","debt","numtroves","timestamp"]),g=$(()=>["liquidator","tx","debt","numtroves","timestamp"]),A=$(()=>U.chain(s.value).filter(w=>{const L=c.value.toLocaleLowerCase().split(" "),z=me=>L.some(Se=>me.toLocaleLowerCase().includes(Se)),Y=Pe(w.vault),J=r.value==="all"?!0:r.value===Y;return z(w.liquidator)&&J}).orderBy(w=>{switch(p.value){case"liquidator":return w.liquidator;case"tx":return w.transaction;case"debt":return w.liquidated_collateral_usd;case"numtroves":return w.troves_affected_count;case"timestamp":return w.timestamp;default:return w.timestamp}},v.value===ae.Descending?"desc":"asc").value()),{page:I,rowsPage:q,onPage:O}=Ce(A,va),x=w=>{f.value=w};return R(()=>o.vaults,l),(w,L)=>(m(),C(ee,null,[h(n(le),{class:"datatable-liquidations","columns-header":"1fr 12rem minmax(auto, 25rem) auto auto","columns-data":"liquidations-columns-data",loading:n(t),rows:n(q),columns:_.value,sorting:!0,"sorting-columns":b.value,"sorting-columns-enabled":g.value,"sorting-default-column":"timestamp","sorting-default-dir":"Descending",onSortColumn:n(u),onSelected:x},{"header-content":y(()=>[d("div",xc,S(n(a)("title")),1),h(ot,{class:"select-collateral",collateral:r.value,all:!0,onSelectCollateral:L[0]||(L[0]=z=>r.value=z)},null,8,["collateral"]),h(n(_e),{modelValue:c.value,"onUpdate:modelValue":L[1]||(L[1]=z=>c.value=z),class:"search",search:!0,placeholder:n(a)("search-placeholder")},null,8,["modelValue","placeholder"]),h(n($e),{class:"pagination","items-count":A.value.length,"items-per-page":va,page:n(I),onPage:n(O)},null,8,["items-count","page","onPage"])]),row:y(z=>[d("img",{src:n(Le)(n(Pe)(z.item.vault))},null,8,Ac),d("div",null,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${z.item.liquidator}`,target:"_blank",onClick:L[2]||(L[2]=X(()=>{},["stop"]))},S(n(G)(z.item.liquidator)),9,Dc)]),d("div",null,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/tx/${z.item.transaction}`,target:"_blank",onClick:L[3]||(L[3]=X(()=>{},["stop"]))},S(n(G)(z.item.transaction)),9,Oc)]),d("div",Vc,[h(n(M),{type:"dollar",value:Math.round(z.item.liquidated_debt),precision:1/0},null,8,["value"])]),d("div",Rc,S(z.item.troves_affected_count),1),d("div",Mc,S(n(i)(z.item.timestamp)),1)]),"row-details":y(()=>[N("   ")]),_:1},8,["loading","rows","columns","sorting-columns","sorting-columns-enabled","onSortColumn"]),h(n(Oe),{show:!!f.value,onClose:L[4]||(L[4]=z=>f.value=null)},{default:y(()=>[f.value?(m(),T(Tt,{key:0,liquidation:f.value,"vault-addr":f.value.vault},null,8,["liquidation","vault-addr"])):V("",!0)]),_:1},8,["show"])],64))}});function pa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Liquidations"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof pa=="function"&&pa(zo);const qc=P(zo,[["__scopeId","data-v-c9f8db7b"]]),Bc={class:"liquidations"},Wc=k({__name:"Liquidations",setup(o){const e=new je("ethereum"),a=He(e.overview$,[]);return(t,s)=>(m(),C("div",Bc,[h(qc,{vaults:n(a)},null,8,["vaults"])]))}});const Ec=P(Wc,[["__scopeId","data-v-c74db113"]]),Fc=k({__name:"ChartRevenueLine",props:{data:{default:()=>[]}},setup(o){let e,a;const t=j(),s=D(null);te(()=>{s.value&&(e=be(s.value,l(s.value,t.theme)),a=e.addAreaSeries(i(t.theme)),p(o.data))}),R(()=>t.theme,c=>{s.value&&(e.applyOptions(l(s.value,c)),a.applyOptions(i(c)))}),R(()=>o.data,c=>{p(c)});const l=(c,r)=>ke(c,r,{rightPriceScale:{scaleMargins:{top:.1,bottom:.1}},localization:{priceFormatter:f=>v(f)}}),i=c=>{const r=H(c);return{priceFormat:{type:"price",precision:6,minMove:1e-6},lineWidth:2,lineType:he.WithSteps,lineColor:r.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},p=c=>{if(!e||!c)return;const r=U.chain(c).groupBy(f=>f.timestamp).mapValues(f=>({time:f[0].timestamp,value:u(f[0])})).entries().map(f=>f[1]).uniqWith((f,_)=>f.time===_.time).orderBy(f=>f.time,"asc").value();r.length>0&&a.setData(r),e.timeScale().fitContent()},v=c=>`$${Z(c,1,"dollar")}${Q(c,"dollar")}`,u=c=>c.unlock_penalty_revenue_usd+c.borrowing_fees_revenue_usd+c.redemption_fees_revenue_usd;return(c,r)=>(m(),C("div",{ref_key:"chartRef",ref:s,class:"chart"},null,512))}});const Uc=P(Fc,[["__scopeId","data-v-606bbd46"]]),Nc=k({__name:"ChartRevenueBreakdown",props:{data:{default:()=>[]}},setup(o){const e=j(),a=$(()=>{const r=H(e.theme),f=se(e.theme);return re({colors:r,colorsArray:f},{chart:{type:"bar",stacked:!0,animations:{enabled:!1}},xaxis:{categories:t.value,labels:{formatter:i,rotate:0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:p},min:0,max:l.value},plotOptions:{bar:{columnWidth:"75%",dataLabels:{position:"top",hideOverflowingLabels:!1}}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0}})}),t=$(()=>U.chain(o.data).orderBy(r=>r.timestamp,"asc").groupBy(r=>r.timestamp).map((r,f)=>new Date(parseInt(f,10)*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"})).map((r,f)=>f%8===0?r:"").value()),s=$(()=>U.chain(Object.keys(o.data[0]).filter(r=>r!=="timestamp")).map(r=>o.data.map(f=>({...f,source:r}))).flatten().groupBy(r=>r.source).map((r,f)=>({name:u(f),data:U.chain(r).orderBy(_=>_.timestamp,"asc").map(_=>({x:new Date(_.timestamp*1e3).toLocaleDateString(),y:_[f]})).value()})).value()),l=$(()=>Math.max(...U.chain(o.data).groupBy(r=>r.timestamp).map(r=>r.reduce((f,_)=>f+v(_),0)).value())*1.1),i=r=>r,p=r=>`$${Z(r,1,"dollar")}${Q(r,"dollar")}`,v=r=>r.unlock_penalty_revenue_usd+r.borrowing_fees_revenue_usd+r.redemption_fees_revenue_usd,u=r=>{switch(r){case"unlock_penalty_revenue_usd":return"Unlock penalty";case"borrowing_fees_revenue_usd":return"Borrowing fees";case"redemption_fees_revenue_usd":return"Redemption fees";default:return c(r)}},c=r=>r.split("_").map(f=>f.charAt(0).toUpperCase()+f.slice(1).toLowerCase()).join("");return(r,f)=>(m(),T(n(bt),{class:"chart",options:a.value,series:s.value},null,8,["options","series"]))}});const Hc=P(Nc,[["__scopeId","data-v-7a1bc3c3"]]),ha="https://api.prismamonitor.com/v1";class Lo extends ye{async getSnapshots(){return this.fetch(`${ha}/revenue/ethereum/snapshots?period=3m`)}async getBreakdown(){return this.fetch(`${ha}/revenue/ethereum/breakdown`)}}const jc=o=>(ue("data-v-1db9c72a"),o=o(),de(),o),Gc={class:"actions"},Yc={class:"chart-input"},Jc={class:"chart-toggles"},Kc=jc(()=>d("i",{class:"fas fa-burn"},null,-1)),Qc={class:"chart-types"},Io=k({__name:"ChartRevenue",setup(o){const{t:e}=B(),a=new Lo(E()),t=D("line"),s=D(1699723102),l=D(!0),{loading:i,data:p}=F(()=>a.getSnapshots().then(c=>c.snapshots),[]),v=$(()=>p.value.filter(c=>c.timestamp>s.value).map(c=>U.cloneDeep(c)).map(c=>(l.value||(c.unlock_penalty_revenue_usd=0),c))),u=c=>{t.value!==c&&(t.value=c)};return(c,r)=>(m(),T(n(ne),{class:"chart-container",title:n(e)("title"),loading:n(i)},{actions:y(()=>[d("div",Gc,[d("div",Yc,[h(n(Ps),{modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=f=>s.value=f),placeholder:"Timestamp cut-off",min:0,max:new Date().getTime()/1e3},null,8,["modelValue","max"])]),d("div",Jc,[h(n(Ue),null,{item:y(()=>[h(n(Ae),{modelValue:l.value,"onUpdate:modelValue":r[1]||(r[1]=f=>l.value=f)},{default:y(()=>[Kc]),_:1},8,["modelValue"])]),default:y(()=>[N(" "+S(n(e)("include-unlock-penalty")),1)]),_:1})]),d("div",Qc,[h(n(Ae),{value:"Line","model-value":t.value==="line",onClick:r[2]||(r[2]=f=>u("line"))},null,8,["model-value"]),h(n(Ae),{value:"Breakdown","model-value":t.value==="breakdown",onClick:r[3]||(r[3]=f=>u("breakdown"))},null,8,["model-value"])])])]),default:y(()=>[t.value==="line"?(m(),T(Uc,{key:0,data:v.value},null,8,["data"])):(m(),T(Hc,{key:1,data:v.value},null,8,["data"]))]),_:1},8,["title","loading"]))}});function fa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["PRISMA revenue"])},"include-unlock-penalty":a=>{const{normalize:t}=a;return t(["Include unlock penalty revenue"])}}})}typeof fa=="function"&&fa(Io);const Xc=P(Io,[["__scopeId","data-v-1db9c72a"]]),xo=k({__name:"ChartBreakdown",setup(o){const{t:e}=B(),a=j(),t=new Lo(E()),{loading:s,data:l}=F(()=>t.getBreakdown(),{unlock_penalty:0,borrowing_fees:0,redemption_fees:0}),i=$(()=>{const c=H(a.theme),r=se(a.theme);return re({colors:c,colorsArray:r},{chart:{id:"breakdown",type:"donut",animations:{enabled:!1}},legend:{inverseOrder:!1,position:"bottom"},stroke:{width:.5},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:f=>{const _=v.value[f.seriesIndex],b=f.series[f.seriesIndex];return[`<div><b>${_}</b>:</div><div>${u(b)}</div>`].join("")}},labels:v.value})}),p=$(()=>[l.value.unlock_penalty,l.value.borrowing_fees,l.value.redemption_fees]),v=$(()=>[e("unlockPenalty"),e("borrowingFees"),e("redemptionFees")]),u=c=>`$${Z(c,2,"percentage")}${Q(c,"percentage")}`;return(c,r)=>(m(),T(n(ie),{class:"graph",title:n(e)("title"),options:i.value,series:p.value,loading:n(s)},null,8,["title","options","series","loading"]))}});function ga(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Breakdown"])},unlockPenalty:a=>{const{normalize:t}=a;return t(["Unlock penalty"])},borrowingFees:a=>{const{normalize:t}=a;return t(["Borrowing fees"])},redemptionFees:a=>{const{normalize:t}=a;return t(["Redemption fees"])}}})}typeof ga=="function"&&ga(xo);const Zc=P(xo,[["__scopeId","data-v-9d7efc6e"]]),eu={class:"revenue"},tu=k({__name:"Revenue",setup(o){return(e,a)=>(m(),C("div",eu,[h(Xc,{style:{"grid-column":"1"}}),h(Zc,{style:{"grid-column":"2"}})]))}});const au=P(tu,[["__scopeId","data-v-3af93d93"]]),nt="https://api.prismamonitor.com/v1";class it extends ye{getContractAddress(e){switch(e){case"convex":return"0x0c73f1cfd5c9dfc150c8707aa47acbd14f0be108";case"yearn":return"0x774a55c3eeb79929fd445ae97191228ab39c4d0f";default:throw new Error("Unknown contract")}}async getTVL(e){return this.fetch(`${nt}/staking/${this.getContractAddress(e)}/tvl?period=all&groupby=day`)}async getFlow(e){return this.fetch(`${nt}/staking/${this.getContractAddress(e)}/flow?period=all&groupby=day`)}async getDistribution(e){return this.fetch(`${nt}/staking/${this.getContractAddress(e)}/distribution`)}async getSnapshots(e){return this.fetch(`${nt}/staking/${this.getContractAddress(e)}/snapshots?period=7d`)}}const Ao=k({__name:"ChartTVL",props:{contract:{}},setup(o){const{t:e}=B(),a=new it(E());let t,s;const l=j(),i=D(null),{loading:p,data:v}=F(()=>a.getTVL(o.contract).then(_=>_.tvl),[]);te(async()=>{i.value&&(await pt(),t=be(i.value,u(i.value,l.theme)),s=t.addAreaSeries(c(l.theme)),r(v.value))}),R(()=>l.theme,_=>{i.value&&(t.applyOptions(u(i.value,_)),s.applyOptions(c(_)))}),R(v,_=>{r(_)});const u=(_,b)=>ke(_,b,{leftPriceScale:{scaleMargins:{top:.1,bottom:.1}},localization:{priceFormatter:g=>f(g)}}),c=_=>{const b=H(_);return{priceFormat:{type:"price",precision:6,minMove:.01},lineWidth:2,lineType:he.WithSteps,lineColor:b.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},r=_=>{if(!t||!s)return;const b=U.chain(_).filter(g=>g.value>0).map(g=>({time:g.timestamp,value:g.value})).uniqWith((g,A)=>g.time===A.time).orderBy(g=>g.time,"asc").value();b.length>0&&s.setData(b),t.timeScale().fitContent()},f=_=>`$${Z(_,0,"dollar")}${Q(_,"dollar")}`;return(_,b)=>(m(),T(n(ne),{class:"chart-container",title:n(e)("title"),loading:n(p)},{default:y(()=>[d("div",{ref_key:"chartRef",ref:i,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function ba(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["TVL"])}}})}typeof ba=="function"&&ba(Ao);const Do=P(Ao,[["__scopeId","data-v-4cb4d1d0"]]),Oo=k({__name:"ChartFlow",props:{contract:{}},setup(o){const{t:e}=B(),a=new it(E()),t=j(),{loading:s,data:l}=F(()=>a.getFlow(o.contract),{deposits:[],withdrawals:[]}),i=$(()=>{const r=H(t.theme),f=se(t.theme);return re({colors:r,colorsArray:f},{chart:{type:"bar",stacked:"true",animations:{enabled:!1},toolbar:{show:!1}},colors:[r.green,r.red],xaxis:{categories:p.value,labels:{formatter:u,rotate:-60},tickPlacement:"on"},yaxis:{labels:{formatter:c}},plotOptions:{bar:{columnWidth:"50%"}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0,custom:({series:_,dataPointIndex:b,w:g})=>{let A=0;const I=_.map((q,O)=>{const x=q[b];return A+=x,`<div><b>${g.globals.seriesNames[O]}</b>:	${c(x)}</div>`});return I.push(`<div><b>Total</b>:	${c(A)}</div>`),I.join("")}}})}),p=$(()=>l.value.deposits.length===0?[]:l.value.deposits.map(r=>new Date(r.timestamp*1e3).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"}))),v=$(()=>[{name:e("deposits"),data:Object.values(l.value.deposits).map(r=>r.amount_usd)},{name:e("withdrawals"),data:Object.values(l.value.withdrawals).map(r=>-r.amount_usd)}]),u=r=>r,c=r=>`$${Z(r,0,"dollar")}${Q(r,"dollar")}`;return(r,f)=>(m(),T(n(ie),{title:n(e)("title"),loading:n(s),options:i.value,series:v.value},null,8,["title","loading","options","series"]))}});function ya(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Staking and unstaking"])},deposits:a=>{const{normalize:t}=a;return t(["Deposits"])},withdrawals:a=>{const{normalize:t}=a;return t(["Withdrawals"])}}})}typeof ya=="function"&&ya(Oo);const Vo=P(Oo,[["__scopeId","data-v-a9468a01"]]),Ro=k({__name:"ChartAPR",props:{contract:{}},setup(o){const{t:e}=B(),a=new it(E());let t,s;const l=j(),i=D(null),{loading:p,data:v}=F(()=>a.getSnapshots(o.contract).then(_=>_.Snapshots),[]);te(async()=>{i.value&&(await pt(),t=be(i.value,u(i.value,l.theme)),s=t.addAreaSeries(c(l.theme)),r(v.value))}),R(()=>l.theme,_=>{i.value&&(t.applyOptions(u(i.value,_)),s.applyOptions(c(_)))}),R(v,_=>{r(_)});const u=(_,b)=>ke(_,b,{leftPriceScale:{scaleMargins:{top:.1,bottom:.1}},localization:{priceFormatter:g=>f(g)}}),c=_=>{const b=H(_);return{priceFormat:{type:"price",precision:6,minMove:.01},lineWidth:2,lineType:he.WithSteps,lineColor:b.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},r=_=>{if(!t||!s)return;const b=U.chain(_).filter(g=>g.timestamp>=1699630610).map(g=>({time:g.timestamp,value:g.total_apr*100})).uniqWith((g,A)=>g.time===A.time).orderBy(g=>g.time,"asc").value();b.length>0&&s.setData(b),t.timeScale().fitContent()},f=_=>`${Z(_,0,"percentage")}${Q(_,"percentage")}`;return(_,b)=>(m(),T(n(ne),{class:"chart-container",title:n(e)("title"),loading:n(p)},{default:y(()=>[d("div",{ref_key:"chartRef",ref:i,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function $a(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["APR"])}}})}typeof $a=="function"&&$a(Ro);const Mo=P(Ro,[["__scopeId","data-v-27fec992"]]),qo=k({__name:"ChartDistribution",props:{contract:{}},setup(o){const{t:e}=B(),a=new it(E()),t=j(),{loading:s,data:l}=F(()=>a.getDistribution(o.contract).then(r=>r.distribution),[]),i=$(()=>{const r=H(t.theme),f=se(t.theme);return re({colors:r,colorsArray:f},{chart:{type:"bar",animations:{enabled:!1},toolbar:{show:!1}},xaxis:{categories:p.value,labels:{formatter:u,rotate:-60},tickPlacement:"on"},yaxis:{labels:{formatter:c}},plotOptions:{bar:{columnWidth:"50%"}},legend:{show:!0},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0}})}),p=$(()=>l.value.map(r=>r.label)),v=$(()=>[{name:e("size"),data:Object.values(l.value).map(r=>r.value)}]),u=r=>r,c=r=>`$${Z(r,0,"dollar")}${Q(r,"dollar")}`;return(r,f)=>(m(),T(n(ie),{class:"chart",title:n(e)("title"),loading:n(s),options:i.value,series:v.value},null,8,["title","loading","options","series"]))}});function wa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Position size"])},size:a=>{const{normalize:t}=a;return t(["Size"])}}})}typeof wa=="function"&&wa(qo);const Bo=P(qo,[["__scopeId","data-v-4bf7940c"]]),ou={class:"cvxprisma"},nu=k({__name:"CvxPrisma",setup(o){return(e,a)=>(m(),C("div",ou,[h(Do,{contract:"convex"}),h(Vo,{contract:"convex"}),h(Mo,{contract:"convex"}),h(Bo,{contract:"convex"})]))}});const su=P(nu,[["__scopeId","data-v-b480b0ff"]]),lu={class:"yprisma"},ru=k({__name:"YPrisma",setup(o){return(e,a)=>(m(),C("div",lu,[h(Do,{contract:"yearn"}),h(Vo,{contract:"yearn"}),h(Mo,{contract:"yearn"}),h(Bo,{contract:"yearn"})]))}});const iu=P(ru,[["__scopeId","data-v-97b71344"]]),cu={class:"wrappers"},uu=k({__name:"Wrappers",setup(o){const e=De(),a=Ne(),t=D(0);return te(()=>{const s=e.params.tab;s&&typeof s=="string"&&(s==="cvxprisma"?t.value=0:s==="yprisma"&&(t.value=1))}),R(t,async s=>{s===0?await a.push({name:"wrappers",params:{tab:"cvxprisma"}}):s===1&&await a.push({name:"wrappers",params:{tab:"yprisma"}})}),(s,l)=>(m(),C("div",cu,[h(n(st),{active:t.value,onTab:l[0]||(l[0]=i=>t.value=i.index)},{default:y(()=>[h(n(ve),{header:"cvxPRISMA"},{default:y(()=>[t.value===0?(m(),T(su,{key:0})):V("",!0)]),_:1}),h(n(ve),{header:"yPRISMA"},{default:y(()=>[t.value===1?(m(),T(iu,{key:0})):V("",!0)]),_:1})]),_:1},8,["active"])]))}});const du=P(uu,[["__scopeId","data-v-a3c0185e"]]),_u={class:"title"},mu=["href"],Ca=10,Wo=k({__name:"TableLockers",props:{lockers:{default:()=>[]}},setup(o){const{t:e}=B(),{sortColumn:a,sortOrder:t,onSort:s}=ze("weight"),l=D(""),i=$(()=>["Locker","Weight","Locked","Unlocked","Frozen"]),p=$(()=>["locker","weight","locked","unlocked","frozen"]),v=$(()=>["weight","locked","unlocked","frozen"]),u=$(()=>U.chain(o.lockers).filter(_=>{const b=l.value.toLocaleLowerCase().split(" ");return(A=>b.some(I=>A.toLocaleLowerCase().includes(I)))(_.id)}).orderBy(_=>{switch(a.value){case"weight":return _.weight;case"locked":return _.locked;case"unlocked":return _.unlocked;case"frozen":return _.frozen;default:return _.weight}},t.value===ae.Descending?"desc":"asc").value()),{page:c,rowsPage:r,onPage:f}=Ce(u,Ca);return(_,b)=>(m(),T(n(le),{class:"datatable-lockers","columns-header":"1fr minmax(auto, 25rem) auto","columns-data":"lockers-columns-data",rows:n(r),columns:i.value,sorting:!0,"sorting-columns":p.value,"sorting-columns-enabled":v.value,"sorting-default-column":"weight","sorting-default-dir":"Descending",onSortColumn:n(s)},{"header-content":y(()=>[d("div",_u,S(n(e)("title")),1),h(n(_e),{modelValue:l.value,"onUpdate:modelValue":b[0]||(b[0]=g=>l.value=g),class:"search",search:!0,placeholder:n(e)("search-placeholder")},null,8,["modelValue","placeholder"]),h(n($e),{class:"pagination","items-count":u.value.length,"items-per-page":Ca,page:n(c),onPage:n(f)},null,8,["items-count","page","onPage"])]),row:y(g=>[d("div",null,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${g.item.id}`,target:"_blank",onClick:b[1]||(b[1]=X(()=>{},["stop"]))},S(g.item.id),9,mu)]),d("div",{class:W(["number",{zero:g.item.weight===0}])},[h(n(M),{type:"dollar",value:Math.round(g.item.weight),precision:2,"show-symbol":!1,"show-zero":!0},null,8,["value"])],2),d("div",{class:W(["number",{zero:g.item.locked===0}])},[h(n(M),{type:"dollar",value:Math.round(g.item.locked),precision:2,"show-symbol":!1,"show-zero":!0},null,8,["value"])],2),d("div",{class:W(["number",{zero:g.item.unlocked===0}])},[h(n(M),{type:"dollar",value:Math.round(g.item.unlocked),precision:2,"show-symbol":!1,"show-zero":!0},null,8,["value"])],2),d("div",{class:W(["number",{zero:g.item.frozen===0}])},[h(n(M),{type:"dollar",value:Math.round(g.item.frozen),precision:2,"show-symbol":!1,"show-zero":!0},null,8,["value"])],2)]),_:1},8,["rows","columns","sorting-columns","sorting-columns-enabled","onSortColumn"]))}});function ka(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Lockers"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof ka=="function"&&ka(Wo);const vu=P(Wo,[["__scopeId","data-v-55511c57"]]),Sa="https://api.thegraph.com/subgraphs/name/benber86/prisma-test";class Eo extends ye{async getTopLockers(){const e=`{
      lockers {
        totalWeight
      }
      accountDatas(first: 100 orderBy: weight orderDirection: desc) {
        id
        weight
        locked
        unlocked
        frozen
      }
    }`,a=await this.fetch(Sa,{query:e}),t=a.data.accountDatas.map(l=>({id:l.id,weight:parseInt(l.weight,10),locked:parseInt(l.locked,10),unlocked:parseInt(l.unlocked,10),frozen:parseInt(l.frozen,10)}));return{totalWeight:parseInt(a.data.lockers[0].totalWeight,10),accounts:t}}async getVotesIncentives(){const e=`{
      incentiveVotes(first:100, orderBy:blockNumber, orderDirection:desc) {
        voter {
          id
        }
        votes(first: 100, orderBy:weight, orderDirection:desc) {
          recipient {
            id
            address
          }
          weight
        }
        isClearance
        transactionHash
        blockTimestamp
      }
    }`;return(await this.fetch(Sa,{query:e})).data.incentiveVotes.map(t=>t.votes.map(s=>({voter:t.voter.id,recipient:s.recipient.address,weight:parseInt(s.weight,10),isClearance:t.isClearance,transaction:t.transactionHash,timestamp:parseInt(t.blockTimestamp,10)}))).flat()}}const pu={class:"title"},hu=["href"],fu=["href"],gu={class:"number"},bu={class:"number"},yu=["href"],$u={class:"number"},Ta=20,Fo=k({__name:"TableVotesIncentives",setup(o){const{t:e}=B(),a=new Eo(E()),{loading:t,data:s}=F(()=>a.getVotesIncentives(),[]),{relativeTime:l}=we(),i=$(()=>["Voter","Recipient","Weight","Tx","Time"]),p=$(()=>s.value),{page:v,rowsPage:u,onPage:c}=Ce(p,Ta);return(r,f)=>(m(),T(n(le),{class:"datatable-votes-incentives","columns-header":"1fr minmax(auto, 25rem) auto","columns-data":"votes-incentives-columns-data",loading:n(t),rows:n(u),columns:i.value},{"header-content":y(()=>[d("div",pu,S(n(e)("title")),1),h(n($e),{class:"pagination","items-count":p.value.length,"items-per-page":Ta,page:n(v),onPage:n(c)},null,8,["items-count","page","onPage"])]),row:y(_=>[d("div",null,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${_.item.voter}`,target:"_blank",onClick:f[0]||(f[0]=X(()=>{},["stop"]))},S(n(G)(_.item.voter)),9,hu)]),d("div",null,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/tx/${_.item.recipient}`,target:"_blank",onClick:f[1]||(f[1]=X(()=>{},["stop"]))},S(n(G)(_.item.recipient)),9,fu)]),d("div",gu,[h(n(M),{type:"dollar",value:Math.round(_.item.weight),precision:2,"show-symbol":!1,"show-zero":!0},null,8,["value"])]),d("div",bu,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/tx/${_.item.transaction}`,target:"_blank",onClick:f[2]||(f[2]=X(()=>{},["stop"]))},S(n(G)(_.item.transaction)),9,yu)]),d("div",$u,S(n(l)(_.item.timestamp)),1)]),_:1},8,["loading","rows","columns"]))}});function Pa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Incentive votes"])}}})}typeof Pa=="function"&&Pa(Fo);const wu=P(Fo,[["__scopeId","data-v-5bb8abfe"]]),Uo=k({__name:"ChartTopLockers",props:{totalWeight:{default:0},lockers:{default:()=>[]}},setup(o){const{t:e}=B(),a=j(),t=$(()=>o.lockers.slice(0,10)),s=$(()=>{const u=H(a.theme),c=se(a.theme);return re({colors:u,colorsArray:c},{chart:{id:"topLockers",type:"donut",animations:{enabled:!1}},legend:{inverseOrder:!1,position:"bottom"},stroke:{width:.5},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:r=>{const f=i.value[r.seriesIndex],_=r.series[r.seriesIndex],b=_/(o.totalWeight/100);return[`<div><b>${f}</b>:</div><div>${v(b)} - ${p(_)}</div>`].join("")}},labels:t.value.map(r=>r.id).concat(["Other⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"])})}),l=$(()=>{const u=t.value.map(f=>f.weight),c=u.reduce((f,_)=>f+_,0),r=o.totalWeight-c;return[...u,r]}),i=$(()=>t.value.map(u=>u.id).concat(["Other"])),p=u=>`${Z(u,2,"dollar")}${Q(u,"dollar")}`,v=u=>`${Z(u,2,"percentage")}${Q(u,"percentage")}`;return(u,c)=>(m(),T(n(ie),{class:"graph",title:n(e)("title"),options:s.value,series:l.value},null,8,["title","options","series"]))}});function za(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Top 10 largest lockers"])},numPos:a=>{const{normalize:t}=a;return t(["mkUSD balance:"])}}})}typeof za=="function"&&za(Uo);const Cu=P(Uo,[["__scopeId","data-v-468ddfdb"]]),ku={class:"veprisma"},Su=k({__name:"VePrisma",setup(o){const e=new Eo(E()),{loading:a,data:t}=F(()=>e.getTopLockers(),{totalWeight:0,accounts:[]}),s=$(()=>t.value.accounts),l=$(()=>t.value.totalWeight);return(i,p)=>(m(),C("div",ku,[h(vu,{style:{"grid-row":"1","grid-column":"1"},loading:n(a),lockers:s.value},null,8,["loading","lockers"]),h(Cu,{style:{"grid-row":"1","grid-column":"2"},loading:n(a),lockers:s.value,"total-weight":l.value},null,8,["loading","lockers","total-weight"]),h(wu,{style:{"grid-row":"2","grid-column":"1 / -1"}})]))}});const Tu=P(Su,[["__scopeId","data-v-088360fa"]]),Pu=k({__name:"ChartLargePositions",props:{data:{default:()=>[]}},setup(o){const e=j(),a=$(()=>{const i=H(e.theme),p=se(e.theme);return re({colors:i,colorsArray:p},{chart:{id:"largePositions",type:"donut",animations:{enabled:!1}},legend:{inverseOrder:!0},stroke:{width:.5},plotOptions:{pie:{donut:{size:"60%"}}},dataLabels:{enabled:!1},tooltip:{custom:v=>{let u=s.value[v.seriesIndex];u=u.length>10?G(u):u;const c=v.series[v.seriesIndex];return[`<div><b>${u}</b>:</div><div>${l(c)}</div>`].join("")}},labels:o.data.map(v=>v.label.length>10?G(v.label):v.label)})}),t=$(()=>o.data.map(i=>i.value)),s=$(()=>o.data.map(i=>i.label)),l=i=>`$${Z(Math.abs(i),1,"dollar")}${Q(i,"dollar")}`;return(i,p)=>(m(),T(n(ie),{class:"graph",options:a.value,series:t.value},null,8,["options","series"]))}});const zu=P(Pu,[["__scopeId","data-v-efd10802"]]),Lu={class:"actions"},No=k({__name:"ChartLargePositionsSelector",props:{vault:{default:null}},setup(o){const{t:e}=B(),a=new Ie(E()),t=D("collateral"),{loading:s,data:l,load:i}=F(()=>o.vault?a.getLargeTrovePositions("ethereum",o.vault.address,t.value).then(p=>p.positions):Promise.resolve([]),[]);return R([t,()=>o.vault],i),(p,v)=>(m(),T(n(ne),{class:"chart-container",title:n(e)("title"),loading:n(s)},{actions:y(()=>[d("div",Lu,[h(n(Ae),{value:"Coll.","model-value":t.value==="collateral",onClick:v[0]||(v[0]=u=>t.value="collateral")},null,8,["model-value"]),h(n(Ae),{value:"Debt","model-value":t.value==="debt",onClick:v[1]||(v[1]=u=>t.value="debt")},null,8,["model-value"])])]),default:y(()=>[h(zu,{data:n(l)},null,8,["data"])]),_:1},8,["title","loading"]))}});function La(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["5 Largest Troves vs Others"])}}})}typeof La=="function"&&La(No);const Iu=P(No,[["__scopeId","data-v-6a1ccb21"]]),xu=k({__name:"ChartDistribution",props:{data:{default:()=>[]}},setup(o){const e=j(),a=$(()=>{const l=H(e.theme),i=se(e.theme);return re({colors:l,colorsArray:i},{chart:{id:"distribution",type:"bar",animations:{enabled:!1},toolbar:{show:!1}},xaxis:{categories:s.value,labels:{rotate:-45},tickPlacement:"on"},legend:{inverseOrder:!0},stroke:{width:.5},dataLabels:{enabled:!1},tooltip:{followCursor:!1,enabled:!0,intersect:!0}})}),t=$(()=>[{name:"# of troves",data:Object.values(o.data).map(l=>l.value)}]),s=$(()=>o.data.map(l=>l.label));return(l,i)=>(m(),T(n(ie),{class:"graph",options:a.value,series:t.value},null,8,["options","series"]))}});const Au=P(xu,[["__scopeId","data-v-b58532a3"]]),Du={class:"actions"},Ho=k({__name:"ChartDistributionSelector",props:{vault:{default:null}},setup(o){const{t:e}=B(),a=new Ie(E()),{loading:t,data:s,load:l}=F(()=>o.vault?a.getTroveDistribution("ethereum",o.vault.address,i.value).then(p=>p.distribution):Promise.resolve([]),[]),i=D("collateral");return R([i,()=>o.vault],l),(p,v)=>(m(),T(n(ne),{class:"chart-container",title:n(e)("title"),loading:n(t)},{actions:y(()=>[d("div",Du,[h(n(Ae),{value:"Coll.","model-value":i.value==="collateral",onClick:v[0]||(v[0]=u=>i.value="collateral")},null,8,["model-value"]),h(n(Ae),{value:"Debt","model-value":i.value==="debt",onClick:v[1]||(v[1]=u=>i.value="debt")},null,8,["model-value"])])]),default:y(()=>[h(Au,{data:n(s)},null,8,["data"])]),_:1},8,["title","loading"]))}});function Ia(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Troves Distribution"])}}})}typeof Ia=="function"&&Ia(Ho);const Ou=P(Ho,[["__scopeId","data-v-10917c24"]]),Vu={class:"kpis"},Ru=k({__name:"VaultKPIs",props:{vault:{default:null}},setup(o){return(e,a)=>(m(),C("div",Vu,[h(n(oe),{label:"TVL","has-value":!!e.vault},{default:y(()=>[e.vault?(m(),T(n(M),{key:0,value:e.vault.tvl,precision:2,type:"dollar"},null,8,["value"])):V("",!0)]),_:1},8,["has-value"]),h(n(oe),{label:"Debt / Debt Cap","has-value":!!e.vault},{default:y(()=>[e.vault?(m(),T(n(M),{key:0,value:e.vault.debt,precision:1,type:"dollar"},null,8,["value"])):V("",!0),N(" / "),e.vault?(m(),T(n(M),{key:1,value:e.vault.debt_cap,precision:1,type:"dollar"},null,8,["value"])):V("",!0)]),_:1},8,["has-value"]),h(n(oe),{label:"Collat Ratio / Min Ratio","has-value":!!e.vault},{default:y(()=>[e.vault?(m(),T(n(M),{key:0,value:e.vault.cr*100,precision:0,type:"percentage"},null,8,["value"])):V("",!0),N(" / "),e.vault?(m(),T(n(M),{key:1,value:e.vault.mcr*100,precision:0,type:"percentage"},null,8,["value"])):V("",!0)]),_:1},8,["has-value"]),h(n(oe),{label:"Interest rate","has-value":!!e.vault},{default:y(()=>[e.vault?(m(),T(n(M),{key:0,value:e.vault.rate*100,"show-zero":!0,precision:1,type:"percentage"},null,8,["value"])):V("",!0)]),_:1},8,["has-value"]),h(n(oe),{label:"Troves open / total","has-value":!!e.vault},{default:y(()=>[e.vault?(m(),T(n(M),{key:0,value:e.vault.open_troves,"show-zero":!0,precision:0},null,8,["value"])):V("",!0),N(" / "),e.vault?(m(),T(n(M),{key:1,value:e.vault.open_troves+e.vault.closed_troves,"show-zero":!0,precision:0},null,8,["value"])):V("",!0)]),_:1},8,["has-value"]),h(n(oe),{label:"Liquidations / Redemptions","has-value":!!e.vault},{default:y(()=>[e.vault?(m(),T(n(M),{key:0,value:e.vault.liq_troves,"show-zero":!0,precision:0},null,8,["value"])):V("",!0),N(" / "),e.vault?(m(),T(n(M),{key:1,value:e.vault.red_troves,"show-zero":!0,precision:0},null,8,["value"])):V("",!0)]),_:1},8,["has-value"])]))}});const Mu=P(Ru,[["__scopeId","data-v-12fbfe11"]]),jo=k({__name:"ChartSingleVaultCollateralRatio",props:{vault:{default:null}},setup(o){const{t:e}=B(),a=new Ie(E());let t,s;const l=j(),i=D(null),{loading:p,data:v,load:u}=F(()=>o.vault?a.getVaultCollateralRatio("ethereum",o.vault.address,"1m").then(_=>_.ratio):Promise.resolve([]),[]);te(()=>{i.value&&(t=be(i.value,c(i.value,l.theme)),s=t.addAreaSeries(r(l.theme)),f(v.value))}),R(()=>l.theme,_=>{i.value&&(t.applyOptions(c(i.value,_)),s.applyOptions(r(_)))}),R(()=>o.vault,u),R(v,_=>{f(_)});const c=(_,b)=>ke(_,b,{rightPriceScale:{scaleMargins:{top:.1,bottom:.1}}}),r=_=>{const b=H(_);return{priceFormat:{type:"percent",precision:2,minMove:.1},lineWidth:2,lineType:he.WithSteps,lineColor:b.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},f=_=>{if(!t||!s)return;const b=U.chain(_).map(g=>({time:g.timestamp,value:g.value*100})).uniqWith((g,A)=>g.time===A.time).orderBy(g=>g.time,"asc").value();b.length>0&&s.setData(b),t.timeScale().fitContent()};return(_,b)=>(m(),T(n(ne),{class:"chart-container",title:n(e)("title"),loading:n(p)},{default:y(()=>[d("div",{ref_key:"chartRef",ref:i,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function xa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Vault collateral ratio"])}}})}typeof xa=="function"&&xa(jo);const qu=P(jo,[["__scopeId","data-v-f38834b1"]]),Go=k({__name:"ChartSingleVaultOpenTroves",props:{vault:{default:null}},setup(o){const{t:e}=B(),a=new Ie(E());let t,s;const l=j(),i=D(null),{loading:p,data:v,load:u}=F(()=>o.vault?a.getVaultTroveCount("ethereum",o.vault.address,"1m").then(_=>_.count):Promise.resolve([]),[]);te(()=>{i.value&&(t=be(i.value,c(i.value,l.theme)),s=t.addAreaSeries(r(l.theme)),f(v.value))}),R(()=>l.theme,_=>{i.value&&(t.applyOptions(c(i.value,_)),s.applyOptions(r(_)))}),R(()=>o.vault,u),R(v,_=>{f(_)});const c=(_,b)=>ke(_,b,{rightPriceScale:{scaleMargins:{top:.1,bottom:.1}}}),r=_=>{const b=H(_);return{priceFormat:{type:"price",precision:0,minMove:.1},lineWidth:2,lineType:he.WithSteps,lineColor:b.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},f=_=>{if(!t||!s)return;const b=U.chain(_).map(g=>({time:g.timestamp,value:g.value})).uniqWith((g,A)=>g.time===A.time).orderBy(g=>g.time,"asc").value();b.length>0&&s.setData(b),t.timeScale().fitContent()};return(_,b)=>(m(),T(n(ne),{class:"chart-container",title:n(e)("title"),loading:n(p)},{default:y(()=>[d("div",{ref_key:"chartRef",ref:i,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function Aa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Number of open troves"])}}})}typeof Aa=="function"&&Aa(Go);const Bu=P(Go,[["__scopeId","data-v-221c503a"]]),Wu={class:"vault-overview"},Eu=k({__name:"VaultOverview",props:{vault:{}},setup(o){return(e,a)=>(m(),C("div",Wu,[h(Mu,{style:{"grid-column":"1 / -1"},vault:e.vault},null,8,["vault"]),h(Ou,{vault:e.vault},null,8,["vault"]),h(Iu,{vault:e.vault},null,8,["vault"]),h(qu,{vault:e.vault},null,8,["vault"]),h(Bu,{vault:e.vault},null,8,["vault"])]))}});const Fu=P(Eu,[["__scopeId","data-v-ad4ff57f"]]),dt="https://api.prismamonitor.com/v1";class zt extends ye{async getCollateralPrices(e,a,t){return this.fetch(`${dt}/collateral/${e}/${a}/prices?period=${t}`)}async getCollateralPriceImpact(e,a){return this.fetch(`${dt}/collateral/${e}/${a}/impact`)}async getCollateralInfo(e,a){return this.fetch(`${dt}/collateral/${e}/${a}/info`)}}const Uu={class:"actions"},Yo=k({__name:"ChartCollateralPrices",props:{vault:{default:null}},setup(o){const{t:e}=B(),a=new zt(E());let t,s,l;const i=j(),p=D(null),v={oracle:[],market:[]},{loading:u,data:c,load:r}=F(async()=>{if(o.vault){const I=await a.getCollateralPrices("ethereum",o.vault.collateral,"7d");return f(I.oracle,I.market)}else return Promise.resolve(v)},v);te(async()=>{p.value&&(await pt(),t=be(p.value,_(p.value,i.theme)),s=t.addAreaSeries(g(i.theme)),l=t.addAreaSeries(b(i.theme)),A(c.value))}),R(()=>o.vault,r),R(()=>i.theme,I=>{p.value&&(t.applyOptions(_(p.value,I)),s.applyOptions(g(I)),l.applyOptions(b(I)))}),R(c,I=>{A(I)});const f=(I,q)=>{const O=Math.max(I[0].timestamp,q[0].timestamp),x=Math.min(I[I.length-1].timestamp,q[q.length-1].timestamp),w=I.filter(z=>z.timestamp>=O&&z.timestamp<=x),L=q.filter(z=>z.timestamp>=O&&z.timestamp<=x);return w[w.length-1].timestamp<x&&w.push({timestamp:x,value:w[w.length-1].value}),L[L.length-1].timestamp<x&&L.push({timestamp:x,value:L[L.length-1].value}),{oracle:w,market:L}},_=(I,q)=>ke(I,q,{leftPriceScale:{scaleMargins:{top:.1,bottom:.1}}}),b=I=>{const q=H(I);return{priceFormat:{type:"price",precision:2,minMove:.001},lineWidth:2,lineType:he.WithSteps,lineColor:q.yellow,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},g=I=>{const q=H(I);return{priceFormat:{type:"price",precision:2,minMove:.001},lineWidth:2,lineType:he.WithSteps,lineColor:q.blue,topColor:"rgb(32, 129, 240, 0.2)",bottomColor:"rgba(32, 129, 240, 0)",lastValueVisible:!1,priceLineVisible:!1}},A=I=>{if(!t||!s)return;const q=U.chain(I.oracle).map(x=>({time:x.timestamp,value:x.value})).uniqWith((x,w)=>x.time===w.time).orderBy(x=>x.time,"asc").value(),O=U.chain(I.market).map(x=>({time:x.timestamp,value:x.value})).uniqWith((x,w)=>x.time===w.time).orderBy(x=>x.time,"asc").value();O.length>0&&l.setData(O),q.length>0&&s.setData(q),t.timeScale().fitContent()};return(I,q)=>(m(),T(n(ne),{class:"chart-container",title:n(e)("title"),loading:n(u)},{actions:y(()=>[d("div",Uu,[h(n(Vl),{items:["Oracle","Market"],colors:n(se)(n(i).theme)},null,8,["colors"])])]),default:y(()=>[d("div",{ref_key:"chartRef",ref:p,class:"chart"},null,512)]),_:1},8,["title","loading"]))}});function Da(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Oracle & Market price"])}}})}typeof Da=="function"&&Da(Yo);const Nu=P(Yo,[["__scopeId","data-v-dd698e9d"]]),Jo=k({__name:"ChartCollateralPriceImpact",props:{vault:{default:null}},setup(o){const{t:e}=B(),a=new zt(E()),t=j(),{loading:s,data:l,load:i}=F(()=>o.vault?a.getCollateralPriceImpact("ethereum",o.vault.collateral).then(f=>f.impact):Promise.resolve([]),[]),p=$(()=>{const f=H(t.theme),_=se(t.theme);return re({colors:f,colorsArray:_},{chart:{type:"area",animations:{enabled:!1},toolbar:{show:!1}},fill:{type:"gradient",gradient:{type:"vertical",shadeIntensity:0,inverseColors:!1,opacityFrom:.7,opacityTo:0,stops:[0,90,100]}},toolbar:{show:!1},xaxis:{categories:u.value,labels:{formatter:b=>c(b)}},yaxis:{seriesName:"impact",labels:{formatter:b=>r(b)}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:b=>{if(!o.vault)return"";const g=u.value[b.dataPointIndex],A=c(g*o.vault.price);return`
          <div><b>Collateral sold:</b>:</div>
          <div>${c(g)} ${o.vault.name} ($${A})</div>

          <div><b>Price impact:</b>:</div>
          <div>${r(b.series[0][b.dataPointIndex])}</div>
          `}}})}),v=$(()=>[{name:e("priceImpact"),data:Object.values(l.value).map(f=>f.impact)}]),u=$(()=>l.value.map(f=>o.vault?f.amount/o.vault.price:0)),c=f=>`${Z(Math.abs(f),1,"dollar")}${Q(f,"dollar")}`,r=f=>`${Z(f,2,"percentage")}${Q(f,"percentage")}`;return R(()=>o.vault,i),(f,_)=>(m(),T(n(ie),{class:"chart",title:n(e)("title"),loading:n(s),options:p.value,series:v.value},null,8,["title","loading","options","series"]))}});function Oa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["On-chain Selling Price Impact"])},priceImpact:a=>{const{normalize:t}=a;return t(["Price impact"])}}})}typeof Oa=="function"&&Oa(Jo);const Hu=P(Jo,[["__scopeId","data-v-0dee4660"]]),ju={class:"kpis"},Gu=["href"],Yu=k({__name:"CollateralKPIs",props:{vault:{default:null}},setup(o){const e=new zt(E()),{data:a,load:t}=F(()=>o.vault?e.getCollateralInfo("ethereum",o.vault.collateral).then(s=>s.info):Promise.resolve(null),null);return R(()=>o.vault,t),(s,l)=>(m(),C("div",ju,[h(n(oe),{label:"Oracle price","has-value":!!n(a)},{default:y(()=>[n(a)?(m(),T(n(M),{key:0,value:n(a).price,precision:2,type:"dollar"},null,8,["value"])):V("",!0)]),_:1},8,["has-value"]),h(n(oe),{label:"Total supply","has-value":!!n(a)},{default:y(()=>[n(a)?(m(),T(n(M),{key:0,value:n(a).supply,precision:2,type:"dollar"},null,8,["value"])):V("",!0)]),_:1},8,["has-value"]),h(n(oe),{label:"TVL","has-value":!!n(a)},{default:y(()=>[n(a)?(m(),T(n(M),{key:0,value:n(a).tvl,precision:1,type:"dollar"},null,8,["value"])):V("",!0)]),_:1},8,["has-value"]),h(n(oe),{label:"Share of the ETH LSD market","has-value":!!n(a)},{default:y(()=>[n(a)?(m(),T(n(M),{key:0,value:n(a).share,precision:1,type:"percentage"},null,8,["value"])):V("",!0)]),_:1},8,["has-value"]),h(n(oe),{label:"Full risk analysis by Prisma Risk team","has-value":!!n(a)},{default:y(()=>[n(a)?(m(),C("a",{key:0,href:n(a).risk}," Risk Report ",8,Gu)):V("",!0)]),_:1},8,["has-value"])]))}});const Ju=P(Yu,[["__scopeId","data-v-f0e40118"]]),Ku={class:"collateral"},Qu=k({__name:"Collateral",props:{vault:{}},setup(o){return(e,a)=>(m(),C("div",Ku,[h(Ju,{style:{"grid-column":"1 / -1"},vault:e.vault},null,8,["vault"]),h(Nu,{vault:e.vault},null,8,["vault"]),h(Hu,{vault:e.vault},null,8,["vault"])]))}});const Xu=P(Qu,[["__scopeId","data-v-a7083765"]]),Zu={class:"title"},ed=["href"],td=["href"],ad={class:"number"},od={class:"number"},nd={class:"number"},Va=15,Ko=k({__name:"TableLiquidations",props:{vault:{default:null}},setup(o){const{t:e}=B(),a=new Pt(E()),{loading:t,data:s,load:l}=F(()=>o.vault?a.getLiquidations("ethereum",o.vault.address):Promise.resolve([]),[]),{relativeTime:i}=we(),{sortColumn:p,sortOrder:v,onSort:u}=ze("timestamp"),c=D(""),r=D(null),f=$(()=>["Liquidator","Transaction","Debt","# Troves","Time"]),_=$(()=>["liquidator","tx","debt","numtroves","timestamp"]),b=$(()=>U.chain(s.value).filter(O=>{const x=c.value.toLocaleLowerCase().split(" ");return(L=>x.some(z=>L.toLocaleLowerCase().includes(z)))(O.liquidator)}).orderBy(O=>{switch(p.value){case"liquidator":return O.liquidator;case"tx":return O.transaction;case"debt":return O.liquidated_collateral_usd;case"numtroves":return O.troves_affected_count;case"timestamp":return O.timestamp;default:return O.timestamp}},v.value===ae.Descending?"desc":"asc").value()),{page:g,rowsPage:A,onPage:I}=Ce(b,Va),q=O=>{r.value=O};return R(()=>o.vault,l),(O,x)=>(m(),C(ee,null,[h(n(le),{class:"datatable-liquidations","columns-header":"1fr 1fr auto auto","columns-data":"liquidations-columns-data",loading:n(t),rows:n(A),columns:f.value,sorting:!0,"sorting-columns":_.value,"sorting-columns-enabled":_.value,"sorting-default-column":"timestamp","sorting-default-dir":"Descending",onSortColumn:n(u),onSelected:q},{"header-content":y(()=>[d("div",Zu,S(n(e)("title")),1),h(n(_e),{modelValue:c.value,"onUpdate:modelValue":x[0]||(x[0]=w=>c.value=w),class:"search",search:!0,placeholder:n(e)("search-placeholder")},null,8,["modelValue","placeholder"]),h(n($e),{class:"pagination","items-count":b.value.length,"items-per-page":Va,page:n(g),onPage:n(I)},null,8,["items-count","page","onPage"])]),row:y(w=>[d("div",null,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${w.item.liquidator}`,target:"_blank",onClick:x[1]||(x[1]=X(()=>{},["stop"]))},S(n(G)(w.item.liquidator)),9,ed)]),d("div",null,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/tx/${w.item.transaction}`,target:"_blank",onClick:x[2]||(x[2]=X(()=>{},["stop"]))},S(n(G)(w.item.transaction)),9,td)]),d("div",ad,[h(n(M),{type:"dollar",value:Math.round(w.item.liquidated_debt),precision:1/0},null,8,["value"])]),d("div",od,S(w.item.troves_affected_count),1),d("div",nd,S(n(i)(w.item.timestamp)),1)]),"row-details":y(()=>[N("   ")]),_:1},8,["loading","rows","columns","sorting-columns","sorting-columns-enabled","onSortColumn"]),h(n(Oe),{show:!!r.value,onClose:x[3]||(x[3]=w=>r.value=null)},{default:y(()=>{var w;return[r.value?(m(),T(Tt,{key:0,liquidation:r.value,"vault-addr":((w=O.vault)==null?void 0:w.address)??""},null,8,["liquidation","vault-addr"])):V("",!0)]}),_:1},8,["show"])],64))}});function Ra(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Liquidations"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof Ra=="function"&&Ra(Ko);const sd=P(Ko,[["__scopeId","data-v-97a00cfc"]]),ld={class:"liquidations"},rd=k({__name:"Liquidations",props:{vault:{}},setup(o){return(e,a)=>(m(),C("div",ld,[h(sd,{vault:e.vault},null,8,["vault"])]))}});const id=P(rd,[["__scopeId","data-v-3b2484a7"]]),cd={class:"title"},ud=["href"],dd=["href"],_d={class:"number"},md={class:"number"},vd={class:"number"},Ma=15,Qo=k({__name:"TableRedemptions",props:{vault:{default:null}},setup(o){const{t:e}=B(),a=new St(E()),{loading:t,data:s,load:l}=F(()=>o.vault?a.getRedemptions("ethereum",o.vault.address):Promise.resolve([]),[]),{relativeTime:i}=we(),{sortColumn:p,sortOrder:v,onSort:u}=ze("timestamp"),c=D(""),r=D(null),f=$(()=>["Redeemer","Transaction","Debt","# Troves","Time"]),_=$(()=>["redeemer","tx","debt","numtroves","timestamp"]),b=$(()=>U.chain(s.value).filter(O=>{const x=c.value.toLocaleLowerCase().split(" ");return(L=>x.some(z=>L.toLocaleLowerCase().includes(z)))(O.redeemer)}).orderBy(O=>{switch(p.value){case"redeemer":return O.redeemer;case"tx":return O.transaction;case"debt":return O.actual_debt_amount;case"numtroves":return O.troves_affected_count;case"timestamp":return O.timestamp;default:return O.timestamp}},v.value===ae.Descending?"desc":"asc").value()),{page:g,rowsPage:A,onPage:I}=Ce(b,Ma),q=O=>{r.value=O};return R(()=>o.vault,l),(O,x)=>(m(),C(ee,null,[h(n(le),{class:"datatable-redemptions","columns-header":"1fr 1fr auto auto","columns-data":"redemptions-columns-data",loading:n(t),rows:n(A),columns:f.value,sorting:!0,"sorting-columns":_.value,"sorting-columns-enabled":_.value,"sorting-default-column":"timestamp","sorting-default-dir":"Descending",onSortColumn:n(u),onSelected:q},{"header-content":y(()=>[d("div",cd,S(n(e)("title")),1),h(n(_e),{modelValue:c.value,"onUpdate:modelValue":x[0]||(x[0]=w=>c.value=w),class:"search",search:!0,placeholder:n(e)("search-placeholder")},null,8,["modelValue","placeholder"]),h(n($e),{class:"pagination","items-count":b.value.length,"items-per-page":Ma,page:n(g),onPage:n(I)},null,8,["items-count","page","onPage"])]),row:y(w=>[d("div",null,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${w.item.redeemer}`,target:"_blank",onClick:x[1]||(x[1]=X(()=>{},["stop"]))},S(n(G)(w.item.redeemer)),9,ud)]),d("div",null,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/tx/${w.item.transaction}`,target:"_blank",onClick:x[2]||(x[2]=X(()=>{},["stop"]))},S(n(G)(w.item.transaction)),9,dd)]),d("div",_d,[h(n(M),{type:"dollar",value:Math.round(w.item.actual_debt_amount),precision:1/0},null,8,["value"])]),d("div",md,S(w.item.troves_affected_count),1),d("div",vd,S(n(i)(w.item.timestamp)),1)]),"row-details":y(()=>[N("   ")]),_:1},8,["loading","rows","columns","sorting-columns","sorting-columns-enabled","onSortColumn"]),h(n(Oe),{show:!!r.value,onClose:x[3]||(x[3]=w=>r.value=null)},{default:y(()=>{var w;return[r.value?(m(),T(kt,{key:0,redemption:r.value,"vault-addr":((w=O.vault)==null?void 0:w.address)??""},null,8,["redemption","vault-addr"])):V("",!0)]}),_:1},8,["show"])],64))}});function qa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Redemptions"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof qa=="function"&&qa(Qo);const pd=P(Qo,[["__scopeId","data-v-b5493b99"]]),hd={class:"redemptions"},fd=k({__name:"Redemptions",props:{vault:{}},setup(o){return(e,a)=>(m(),C("div",hd,[h(pd,{vault:e.vault},null,8,["vault"])]))}});const gd=P(fd,[["__scopeId","data-v-ff43effe"]]),Xe="https://api.prismamonitor.com/v1";class Ye extends ye{async getTroves(e,a,t){return Fe(l=>this.fetch(`${Xe}/trove/${e}/${a}/troves?items=100&page=${l}&order_by=last_update&desc=true${t?"&owner_filter="+t:""}`).then(i=>i.troves),1,100)}async getTroveSnapshots(e,a,t){return this.fetch(`${Xe}/trove/${e}/${a}/snapshots/${t}`)}async getTroveDetail(e,a,t){return this.fetch(`${Xe}/trove/${e}/${a}/${t}`)}async getTroveHistory(e,a,t){return this.fetch(`${Xe}/trove/${e}/${a}/history/${t}`)}async getTroveRank(e,a,t){return this.fetch(`${Xe}/trove/${e}/${a}/rank/${t}`)}}const bd=["href"],yd={class:"number"},$d={class:"number"},Ba=15,Xo=k({__name:"TableTroves",props:{vault:{default:null}},setup(o){const{t:e}=B(),a=new Ye(E()),{loading:t,data:s,load:l}=F(()=>o.vault?a.getTroves("ethereum",o.vault.address):Promise.resolve([]),[]),{relativeTime:i}=we(),{sortColumn:p,sortOrder:v,onSort:u}=ze("updated"),c=D(""),r=D("Open"),f=$(()=>r.value==="Open"?["Owner","Debt","Collateral","Ratio","Created At","Last Updated"]:["Owner","","","","Created At","Last Updated"]),_=$(()=>r.value==="Open"?["owner","debt","coll","ratio","created","updated"]:["owner","","","","created","updated"]),b=$(()=>r.value==="Open"?["owner","debt","coll","ratio","created","updated"]:["owner","created","updated"]),g=$(()=>U.chain(s.value).filter(x=>r.value===x.status).filter(x=>{const w=c.value.toLocaleLowerCase().split(" ");return(z=>w.some(Y=>z.toLocaleLowerCase().includes(Y)))(x.owner)}).orderBy(x=>{switch(p.value){case"owner":return x.owner;case"debt":return x.debt;case"coll":return x.collateral_usd;case"ratio":return x.collateral_ratio;case"created":return x.created_at;case"updated":return x.last_update;default:return x.last_update}},v.value===ae.Descending?"desc":"asc").value()),{page:A,rowsPage:I,onPage:q}=Ce(g,Ba),O=x=>{x===0?r.value="Open":x===1?r.value="Closed":r.value="Open"};return R(()=>o.vault,l),(x,w)=>(m(),T(n(le),{class:"datatable-troves","columns-header":"1fr 1fr auto","columns-data":"troves-columns-data",loading:n(t),rows:n(I),columns:f.value,sorting:!0,"sorting-columns":_.value,"sorting-columns-enabled":b.value,"sorting-default-column":"updated","sorting-default-dir":"Descending",onSortColumn:n(u)},{"header-content":y(()=>[h(n(st),{class:"types",onTab:w[0]||(w[0]=L=>O(L.index))},{default:y(()=>[h(n(ve),{header:"Open"}),h(n(ve),{header:"Closed"})]),_:1}),h(n(_e),{modelValue:c.value,"onUpdate:modelValue":w[1]||(w[1]=L=>c.value=L),class:"search",search:!0,placeholder:n(e)("search-placeholder")},null,8,["modelValue","placeholder"]),h(n($e),{class:"pagination","items-count":g.value.length,"items-per-page":Ba,page:n(A),onPage:n(q)},null,8,["items-count","page","onPage"])]),row:y(L=>[d("div",null,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${L.item.owner}`,target:"_blank",onClick:w[2]||(w[2]=X(()=>{},["stop"]))},S(n(G)(L.item.owner)),9,bd)]),d("div",{class:W(["number",{hide:r.value==="Closed"}])},[h(n(M),{type:"dollar",value:Math.round(L.item.debt),precision:1/0},null,8,["value"])],2),d("div",{class:W(["number",{hide:r.value==="Closed"}])},[h(n(M),{type:"dollar",value:Math.round(L.item.collateral_usd),precision:1/0},null,8,["value"])],2),d("div",{class:W(["number",{hide:r.value==="Closed"}])},[h(n(M),{value:L.item.collateral_ratio*100,precision:2,type:"percentage"},null,8,["value"])],2),d("div",yd,S(n(i)(L.item.created_at)),1),d("div",$d,S(n(i)(L.item.last_update)),1)]),"row-details":y(()=>[N("   ")]),_:1},8,["loading","rows","columns","sorting-columns","sorting-columns-enabled","onSortColumn"]))}});function Wa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof Wa=="function"&&Wa(Xo);const wd=P(Xo,[["__scopeId","data-v-e3da76fb"]]),Cd={class:"troves"},kd=k({__name:"Troves",props:{vault:{}},setup(o){const e=rt(),a=Ne(),t=async s=>{e.trove=s,o.vault&&await a.push({name:"prismatrove",params:{troveAddr:s.owner,vaultAddr:o.vault.address}})};return(s,l)=>(m(),C("div",Cd,[h(wd,{vault:s.vault,onSelected:t},null,8,["vault"])]))}});const Sd=P(kd,[["__scopeId","data-v-a25b939f"]]),Td={class:"vault-manager"},Pd=k({__name:"VaultManager",setup(o){const e=new je("ethereum"),a=De(),t=Ne(),s=lt(),l=rt(),i=He(e.overview$,[]),p=D(0),v=$(()=>a.params.vaultAddr),u=$(()=>l.vault);return te(()=>{var r;const c=a.params.tab;c&&typeof c=="string"&&(c==="collateral"?p.value=1:c==="trove"?p.value=2:c==="liquidations"?p.value=3:c==="redemptions"&&(p.value=4)),s.show=!0,s.crumbs=[{id:"vaults",label:"Vaults",pathName:"vaults"},{id:"vault",label:`Vault: ${((r=u.value)==null?void 0:r.name)??"?"}`}]}),R(i,c=>{const r=c.find(f=>f.address===v.value);r&&(l.vault=r)}),R(u,c=>{s.crumbs=[{id:"vaults",label:"Vaults",pathName:"vaults"},{id:"vault",label:`Vault: ${(c==null?void 0:c.name)??"?"}`}]}),R(p,async c=>{c===0?await t.push({name:"prismavault",params:{tab:"",vaultAddr:v.value}}):c===1?await t.push({name:"prismavault",params:{tab:"collateral",vaultAddr:v.value}}):c===2?await t.push({name:"prismavault",params:{tab:"trove",vaultAddr:v.value}}):c===3?await t.push({name:"prismavault",params:{tab:"liquidations",vaultAddr:v.value}}):c===4&&await t.push({name:"prismavault",params:{tab:"redemptions",vaultAddr:v.value}})}),(c,r)=>(m(),C("div",Td,[h(n(st),{active:p.value,onTab:r[0]||(r[0]=f=>p.value=f.index)},{default:y(()=>[h(n(ve),{header:"Overview"},{default:y(()=>[(m(),T(Je,null,[p.value===0?(m(),T(Fu,{key:0,vault:u.value},null,8,["vault"])):V("",!0)],1024))]),_:1}),h(n(ve),{header:"Collateral"},{default:y(()=>[(m(),T(Je,null,[p.value===1&&u.value?(m(),T(Xu,{key:0,vault:u.value},null,8,["vault"])):V("",!0)],1024))]),_:1}),h(n(ve),{header:"Troves"},{default:y(()=>[(m(),T(Je,null,[p.value===2&&u.value?(m(),T(Sd,{key:0,vault:u.value},null,8,["vault"])):V("",!0)],1024))]),_:1}),h(n(ve),{header:"Liquidations"},{default:y(()=>[(m(),T(Je,null,[p.value===3&&u.value?(m(),T(id,{key:0,vault:u.value},null,8,["vault"])):V("",!0)],1024))]),_:1}),h(n(ve),{header:"Redemptions"},{default:y(()=>[(m(),T(Je,null,[p.value===4&&u.value?(m(),T(gd,{key:0,vault:u.value},null,8,["vault"])):V("",!0)],1024))]),_:1})]),_:1},8,["active"])]))}});const zd=P(Pd,[["__scopeId","data-v-dbaa226b"]]),Ld=o=>(ue("data-v-25d800cb"),o=o(),de(),o),Id=Ld(()=>d("div",null,[N(" This chart displays that amount of collateral available below different collateral ratios. "),d("br"),N(" It also displays the position of the trove relative to other troves in this vault. "),d("br"),d("br"),N(" This information is useful to estimate a trove's risk of redemption. "),d("br"),N(" Even if the trove's collateral ratio is high in the absolute, a lower ratio relative "),d("br"),N(" to other troves means a higher risk of redemption."),d("br"),d("br"),N(` As such, the lower the "risk rank" displayed, the higher the trove's risk of being redeemed. `)],-1)),Zo=k({__name:"ChartTroveRank",props:{vault:{default:null},trove:{default:null}},setup(o){const{t:e}=B(),a=new Ye(E()),t=j(),s=D("Trove Relative Position"),l={rank:null,total_positions:0,ratio:null,positions:[]},{loading:i,data:p,load:v}=F(async()=>o.vault&&o.trove?await a.getTroveRank("ethereum",o.vault.address,o.trove.owner):Promise.resolve(l),l),u=$(()=>{var I,q;const b=H(t.theme),g=se(t.theme),A={x:((I=p.value)==null?void 0:I.ratio)??0,borderColor:b.yellow,strokeDashArray:2,label:{borderColor:b.yellow,style:{background:b.yellow,color:"rgb(34, 34, 34)"},position:"top",offsetX:15,text:`This trove: ${_(((q=p.value)==null?void 0:q.ratio)??0,1)}`}};return re({colors:b,colorsArray:g},{chart:{type:"area",animations:{enabled:!1},toolbar:{show:!0}},fill:{type:"gradient",gradient:{type:"vertical",shadeIntensity:0,inverseColors:!1,opacityFrom:.7,opacityTo:0,stops:[0,90,100]}},annotations:{xaxis:p.value.ratio?[A]:[]},toolbar:{show:!1},xaxis:{type:"numeric",categories:r.value,labels:{formatter:O=>_(O)}},yaxis:{seriesName:"impact",labels:{formatter:O=>f(O)}},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:O=>{if(!o.vault)return"";const x=r.value[O.dataPointIndex];return`
          <div><b>Collateral ratio:</b>:</div>
          <div>${O.dataPointIndex===r.value.length-1?"Over 250%":_(x)}</div>

          <div><b>Troves with lower or equal ratio:</b>:</div>
          <div>${p.value.positions[O.dataPointIndex].trove_count}</div>

          <div><b>Collateral value at lower or equal ratio:</b>:</div>
          <div>$${f(O.series[0][O.dataPointIndex])}</div>
          `}}})}),c=$(()=>[{name:e("rank"),data:Object.values(p.value.positions).map(b=>b.collateral_usd)}]),r=$(()=>p.value.positions.map(b=>b.ratio)),f=b=>`${Z(Math.abs(b),1,"dollar")}${Q(b,"dollar")}`,_=(b,g=0)=>`${Z(b,g,"percentage")}${Q(b,"percentage")}`;return R(()=>o.vault,v),R(p,b=>{b&&typeof b.rank=="number"&&(s.value=e("title",{rank:b.rank,total_positions:b.total_positions}))},{immediate:!0}),(b,g)=>(m(),T(n(ne),{class:"chart-container",title:s.value,loading:n(i)},{actions:y(()=>[h(n(Ue),null,{default:y(()=>[Id]),_:1})]),default:y(()=>[h(n(bt),{class:"chart",options:u.value,series:c.value},null,8,["options","series"])]),_:1},8,["title","loading"]))}});function Ea(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t,interpolate:s,named:l}=a;return t(["Trove Relative Position (Risk rank: ",s(l("rank"))," / ",s(l("total_positions")),")"])}}})}typeof Ea=="function"&&Ea(Zo);const xd=P(Zo,[["__scopeId","data-v-25d800cb"]]),en=k({__name:"ChartTroveHealth",props:{vault:{default:null},trove:{default:null}},setup(o){const{t:e}=B(),a=new Ye(E()),t=j(),{loading:s,data:l,load:i}=F(async()=>o.vault&&o.trove?await a.getTroveSnapshots("ethereum",o.vault.address,o.trove.owner).then(f=>f.snapshots):Promise.resolve([]),[]),p=$(()=>{const r=H(t.theme),f=se(t.theme);return re({colors:r,colorsArray:f},{chart:{animations:{enabled:!1},toolbar:{tools:{download:!0}}},xaxis:{type:"datetime"},yaxis:[{seriesName:"collateralUsd",tickAmount:4,opposite:!0,labels:{formatter:_=>u(_)},min:0,max:Math.max(...l.value.map(_=>_.collateral_usd))},{seriesName:"ratio",tickAmount:4,labels:{formatter:_=>c(_)},min:0,max:Math.max(...l.value.map(_=>_.cr??0))}],dataLabels:{enabled:!1},stroke:{curve:"straight"},tooltip:{followCursor:!1,enabled:!0,intersect:!1,custom:_=>{const b=_.w.globals.initialSeries[0].data[_.dataPointIndex].y,g=_.w.globals.initialSeries[1].data[_.dataPointIndex]?_.w.globals.initialSeries[1].data[_.dataPointIndex].y:0;return[`<div><b>${e("ratio")}</b>:</div><div>${c(g)}</div>`,`<div><b>${e("collateralUsd")}</b>:</div><div>${u(b)}</div>`].join("")}}})}),v=$(()=>[{name:e("collateralUsd"),type:"line",data:l.value.map(r=>({x:r.timestamp*1e3,y:r.collateral_usd}))},{name:e("ratio"),type:"line",data:l.value.map(r=>({x:r.timestamp*1e3,y:r.cr??0}))}]),u=r=>`$${Z(r,1,"dollar")}${Q(r,"dollar")}`,c=r=>`${xe(r*100,2)}%`;return R(()=>o.vault,i),(r,f)=>(m(),T(n(ie),{class:"health",title:n(e)("title"),options:p.value,series:v.value,loading:n(s)},null,8,["title","options","series","loading"]))}});function Fa(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Health"])},collateralUsd:a=>{const{normalize:t}=a;return t(["Collateral ($)"])},ratio:a=>{const{normalize:t}=a;return t(["Ratio"])}}})}typeof Fa=="function"&&Fa(en);const Ad=P(en,[["__scopeId","data-v-d951ca25"]]),Dd={class:"title"},Od={class:"number"},Vd={class:"number"},Rd={class:"number"},Md={class:"number"},qd={class:"number"},Bd=["href"],Wd={class:"number"},tn=k({__name:"TableTroveOps",props:{vault:{default:null},trove:{default:null}},setup(o){const{t:e}=B(),a=new Ye(E()),{relativeTime:t}=we(),s=$(()=>U.orderBy(i.value,u=>u.timestamp,"desc")),{loading:l,data:i,load:p}=F(()=>o.vault&&o.trove?a.getTroveSnapshots("ethereum",o.vault.address,o.trove.owner).then(u=>u.snapshots):Promise.resolve([]),[]),v=u=>u.replace(/^_*(.)|_+(.)/g,(c,r,f)=>r?r.toUpperCase():" "+f.toUpperCase());return R(()=>o.vault,p),(u,c)=>(m(),T(n(le),{class:"datatable-trove-ops","columns-header":"1fr 1fr auto","columns-data":"trove-ops-columns-data",loading:n(l),rows:s.value,columns:["Operation","Collateral","Debt","Ratio","Stake","Tx","Time"]},{"header-content":y(()=>[d("div",Dd,S(n(e)("title")),1)]),row:y(r=>[d("div",null,S(v(r.item.operation)),1),d("div",Od,[r.item.collateral?(m(),T(n(M),{key:0,value:r.item.collateral,precision:3,"show-symbol":!1,type:"dollar"},null,8,["value"])):V("",!0)]),d("div",Vd,[h(n(M),{type:"dollar",value:Math.round(r.item.debt),precision:1/0},null,8,["value"])]),d("div",Rd,[r.item.cr?(m(),T(n(M),{key:0,value:r.item.cr*100,precision:2,type:"percentage"},null,8,["value"])):V("",!0)]),d("div",Md,[r.item.stake?(m(),T(n(M),{key:0,value:r.item.stake,precision:2,"show-symbol":!1,type:"dollar"},null,8,["value"])):V("",!0)]),d("div",qd,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/tx/${r.item.hash}`,target:"_blank",onClick:c[0]||(c[0]=X(()=>{},["stop"]))},S(n(G)(r.item.hash)),9,Bd)]),d("div",Wd,S(n(t)(r.item.timestamp)),1)]),_:1},8,["loading","rows"]))}});function Ua(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Operations"])}}})}typeof Ua=="function"&&Ua(tn);const Ed=P(tn,[["__scopeId","data-v-168e7e87"]]),Fd={class:"trove"},Ud=k({__name:"Trove",setup(o){const e=new Ye(E()),a=new je("ethereum"),t=lt(),s=rt(),l=De(),i=He(a.overview$,[]),p=$(()=>l.params.vaultAddr),v=$(()=>s.vault),u=$(()=>s.trove);return te(async()=>{var r,f;const c=await e.getTroveDetail("ethereum",l.params.vaultAddr,l.params.troveAddr);c&&(s.trove=c),t.show=!0,t.crumbs=[{id:"vaults",label:"Vaults",pathName:"vaults"},{id:"vault",label:`Vault: ${((r=v.value)==null?void 0:r.name)??"?"}`,pathName:"prismavault"},{id:"trove",label:`Trove: ${((f=u.value)==null?void 0:f.owner)??"?"}`}]}),R(i,c=>{const r=c.find(f=>f.address===p.value);r&&(s.vault=r)}),R(v,c=>{var r;t.crumbs=[{id:"vaults",label:"Vaults",pathName:"vaults"},{id:"vault",label:`Vault: ${(c==null?void 0:c.name)??"?"}`,pathName:"prismavault"},{id:"trove",label:`Trove: ${((r=u.value)==null?void 0:r.owner)??"?"}`}]}),R(u,c=>{var r;t.crumbs=[{id:"vaults",label:"Vaults",pathName:"vaults"},{id:"vault",label:`Vault: ${((r=v.value)==null?void 0:r.name)??"?"}`,pathName:"prismavault"},{id:"trove",label:`Trove: ${(c==null?void 0:c.owner)??"?"}`}]}),(c,r)=>(m(),C("div",Fd,[h(xd,{class:"graph-rank",vault:v.value,trove:u.value},null,8,["vault","trove"]),h(Ad,{class:"graph-health",vault:v.value,trove:u.value},null,8,["vault","trove"]),h(Ed,{class:"table-ops",vault:v.value,trove:u.value},null,8,["vault","trove"])]))}});const Nd=P(Ud,[["__scopeId","data-v-b979bba6"]]),Hd={class:"title"},jd=["src"],Gd=["href"],Yd=["href"],Jd={class:"number"},Kd={class:"number"},Qd={class:"number"},Na=15,an=k({__name:"TableRedemptions",props:{troves:{default:()=>[]}},setup(o){const e=new St(E()),{t:a}=B(),{loading:t,data:s,load:l}=F(()=>Promise.all(o.troves.map(w=>e.getRedemptionsForTrove("ethereum",w))).then(w=>w.flat()),[]),{relativeTime:i}=we(),{sortColumn:p,sortOrder:v,onSort:u}=ze("timestamp"),c=D(""),r=D("all"),f=D(null),_=$(()=>["","Redeemer","Transaction","Debt","# Troves","Time"]),b=$(()=>["icon","redeemer","tx","debt","numtroves","timestamp"]),g=$(()=>["redeemer","tx","debt","numtroves","timestamp"]),A=$(()=>U.chain(s.value).filter(w=>{const L=c.value.toLocaleLowerCase().split(" "),z=me=>L.some(Se=>me.toLocaleLowerCase().includes(Se)),Y=Pe(w.vault),J=r.value==="all"?!0:r.value===Y;return z(w.redeemer)&&J}).orderBy(w=>{switch(p.value){case"redeemer":return w.redeemer;case"tx":return w.transaction;case"debt":return w.actual_debt_amount;case"numtroves":return w.troves_affected_count;case"timestamp":return w.timestamp;default:return w.timestamp}},v.value===ae.Descending?"desc":"asc").value()),{page:I,rowsPage:q,onPage:O}=Ce(A,Na),x=w=>{f.value=w};return R(()=>o.troves,l),(w,L)=>(m(),C(ee,null,[h(n(le),{class:"datatable-redemptions","columns-header":"1fr 12rem minmax(auto, 25rem) auto auto","columns-data":"redemptions-columns-data",loading:n(t)||w.troves.length===0,rows:n(q),columns:_.value,sorting:!0,"sorting-columns":b.value,"sorting-columns-enabled":g.value,"sorting-default-column":"timestamp","sorting-default-dir":"Descending",onSortColumn:n(u),onSelected:x},{"header-content":y(()=>[d("div",Hd,S(n(a)("title")),1),h(ot,{class:"select-collateral",collateral:r.value,all:!0,onSelectCollateral:L[0]||(L[0]=z=>r.value=z)},null,8,["collateral"]),h(n(_e),{modelValue:c.value,"onUpdate:modelValue":L[1]||(L[1]=z=>c.value=z),class:"search",search:!0,placeholder:n(a)("search-placeholder")},null,8,["modelValue","placeholder"]),h(n($e),{class:"pagination","items-count":A.value.length,"items-per-page":Na,page:n(I),onPage:n(O)},null,8,["items-count","page","onPage"])]),row:y(z=>[d("img",{src:n(Le)(n(Pe)(z.item.vault))},null,8,jd),d("div",null,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${z.item.redeemer}`,target:"_blank",onClick:L[2]||(L[2]=X(()=>{},["stop"]))},S(n(G)(z.item.redeemer)),9,Gd)]),d("div",null,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/tx/${z.item.transaction}`,target:"_blank",onClick:L[3]||(L[3]=X(()=>{},["stop"]))},S(n(G)(z.item.transaction)),9,Yd)]),d("div",Jd,[h(n(M),{type:"dollar",value:Math.round(z.item.actual_debt_amount),precision:1/0},null,8,["value"])]),d("div",Kd,S(z.item.troves_affected_count),1),d("div",Qd,S(n(i)(z.item.timestamp)),1)]),"row-details":y(()=>[N("   ")]),_:1},8,["loading","rows","columns","sorting-columns","sorting-columns-enabled","onSortColumn"]),h(n(Oe),{show:!!f.value,onClose:L[4]||(L[4]=z=>f.value=null)},{default:y(()=>[f.value?(m(),T(kt,{key:0,redemption:f.value,"vault-addr":f.value.vault},null,8,["redemption","vault-addr"])):V("",!0)]),_:1},8,["show"])],64))}});function Ha(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Redemptions"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof Ha=="function"&&Ha(an);const Xd=P(an,[["__scopeId","data-v-7c04fc34"]]),Zd={class:"title"},e_=["src"],t_=["href"],a_=["href"],o_={class:"number"},n_={class:"number"},s_={class:"number"},ja=15,on=k({__name:"TableLiquidations",props:{troves:{default:()=>[]}},setup(o){const e=new Pt(E()),{t:a}=B(),{loading:t,data:s,load:l}=F(()=>Promise.all(o.troves.map(w=>e.getLiquidationsForTrove("ethereum",w))).then(w=>w.flat()),[]),{relativeTime:i}=we(),{sortColumn:p,sortOrder:v,onSort:u}=ze("timestamp"),c=D(""),r=D("all"),f=D(null),_=$(()=>["","Liquidator","Transaction","Debt","# Troves","Time"]),b=$(()=>["icon","liquidator","tx","debt","numtroves","timestamp"]),g=$(()=>["liquidator","tx","debt","numtroves","timestamp"]),A=$(()=>U.chain(s.value).filter(w=>{const L=c.value.toLocaleLowerCase().split(" "),z=me=>L.some(Se=>me.toLocaleLowerCase().includes(Se)),Y=Pe(w.vault),J=r.value==="all"?!0:r.value===Y;return z(w.liquidator)&&J}).orderBy(w=>{switch(p.value){case"liquidator":return w.liquidator;case"tx":return w.transaction;case"debt":return w.liquidated_collateral_usd;case"numtroves":return w.troves_affected_count;case"timestamp":return w.timestamp;default:return w.timestamp}},v.value===ae.Descending?"desc":"asc").value()),{page:I,rowsPage:q,onPage:O}=Ce(A,ja),x=w=>{f.value=w};return R(()=>o.troves,l),(w,L)=>(m(),C(ee,null,[h(n(le),{class:"datatable-liquidations","columns-header":"1fr 12rem minmax(auto, 25rem) auto auto","columns-data":"liquidations-columns-data",loading:n(t)||w.troves.length===0,rows:n(q),columns:_.value,sorting:!0,"sorting-columns":b.value,"sorting-columns-enabled":g.value,"sorting-default-column":"timestamp","sorting-default-dir":"Descending",onSortColumn:n(u),onSelected:x},{"header-content":y(()=>[d("div",Zd,S(n(a)("title")),1),h(ot,{class:"select-collateral",collateral:r.value,all:!0,onSelectCollateral:L[0]||(L[0]=z=>r.value=z)},null,8,["collateral"]),h(n(_e),{modelValue:c.value,"onUpdate:modelValue":L[1]||(L[1]=z=>c.value=z),class:"search",search:!0,placeholder:n(a)("search-placeholder")},null,8,["modelValue","placeholder"]),h(n($e),{class:"pagination","items-count":A.value.length,"items-per-page":ja,page:n(I),onPage:n(O)},null,8,["items-count","page","onPage"])]),row:y(z=>[d("img",{src:n(Le)(n(Pe)(z.item.vault))},null,8,e_),d("div",null,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${z.item.liquidator}`,target:"_blank",onClick:L[2]||(L[2]=X(()=>{},["stop"]))},S(n(G)(z.item.liquidator)),9,t_)]),d("div",null,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/tx/${z.item.transaction}`,target:"_blank",onClick:L[3]||(L[3]=X(()=>{},["stop"]))},S(n(G)(z.item.transaction)),9,a_)]),d("div",o_,[h(n(M),{type:"dollar",value:Math.round(z.item.liquidated_debt),precision:1/0},null,8,["value"])]),d("div",n_,S(z.item.troves_affected_count),1),d("div",s_,S(n(i)(z.item.timestamp)),1)]),"row-details":y(()=>[N("   ")]),_:1},8,["loading","rows","columns","sorting-columns","sorting-columns-enabled","onSortColumn"]),h(n(Oe),{show:!!f.value,onClose:L[4]||(L[4]=z=>f.value=null)},{default:y(()=>[f.value?(m(),T(Tt,{key:0,liquidation:f.value,"vault-addr":f.value.vault},null,8,["liquidation","vault-addr"])):V("",!0)]),_:1},8,["show"])],64))}});function Ga(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Liquidations"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof Ga=="function"&&Ga(on);const l_=P(on,[["__scopeId","data-v-e7417e97"]]),r_={class:"title"},i_=["src"],c_=["href"],u_={class:"number"},d_={class:"number"},Ya=15,nn=k({__name:"TableTroves",props:{vaults:{default:()=>[]},user:{}},emits:["troves"],setup(o,{emit:e}){const{t:a}=B(),t=new Ye(E()),s=e,{loading:l,data:i,load:p}=F(async()=>{if(o.vaults.length>0&&o.user){const z=await Promise.all(o.vaults.map(Y=>t.getTroves("ethereum",Y.address,o.user).then(J=>J.map(me=>({...me,vault:{name:Y.name,address:Y.address}}))))).then(Y=>Y.flat());return s("troves",z),z}else return Promise.resolve([])},[]),{relativeTime:v}=we(),{sortColumn:u,sortOrder:c,onSort:r}=ze("updated"),f=D(""),_=D("all"),b=D("Open"),g=$(()=>b.value==="Open"?["","Owner","Debt","Collateral","Ratio","Created At","Last Updated"]:["","Owner","","","","Created At","Last Updated"]),A=$(()=>b.value==="Open"?["","owner","debt","coll","ratio","created","updated"]:["","owner","","","","created","updated"]),I=$(()=>b.value==="Open"?["owner","debt","coll","ratio","created","updated"]:["owner","created","updated"]),q=$(()=>U.chain(i.value).filter(z=>b.value===z.status).filter(z=>{const Y=f.value.toLocaleLowerCase().split(" "),J=sn=>Y.some(ln=>sn.toLocaleLowerCase().includes(ln)),me=Pe(z.vault.address),Se=_.value==="all"?!0:_.value===me;return J(z.owner)&&Se}).orderBy(z=>{switch(u.value){case"owner":return z.owner;case"debt":return z.debt;case"coll":return z.collateral_usd;case"ratio":return z.collateral_ratio;case"created":return z.created_at;case"updated":return z.last_update;default:return z.last_update}},c.value===ae.Descending?"desc":"asc").value()),{page:O,rowsPage:x,onPage:w}=Ce(q,Ya),L=z=>{z===0?b.value="Open":z===1?b.value="Closed":b.value="Open"};return R(()=>o.vaults,p),(z,Y)=>(m(),T(n(le),{class:"datatable-troves","columns-header":"auto 1fr 12rem minmax(auto, 25rem) auto","columns-data":"troves-columns-data",loading:n(l),rows:n(x),columns:g.value,sorting:!0,"sorting-columns":A.value,"sorting-columns-enabled":I.value,"sorting-default-column":"updated","sorting-default-dir":"Descending",onSortColumn:n(r)},{"header-content":y(()=>[d("div",r_,S(n(a)("title")),1),h(n(st),{class:"types",onTab:Y[0]||(Y[0]=J=>L(J.index))},{default:y(()=>[h(n(ve),{header:"Open"}),h(n(ve),{header:"Closed"})]),_:1}),h(ot,{class:"select-collateral",collateral:_.value,all:!0,onSelectCollateral:Y[1]||(Y[1]=J=>_.value=J)},null,8,["collateral"]),h(n(_e),{modelValue:f.value,"onUpdate:modelValue":Y[2]||(Y[2]=J=>f.value=J),class:"search",search:!0,placeholder:n(a)("search-placeholder")},null,8,["modelValue","placeholder"]),h(n($e),{class:"pagination","items-count":q.value.length,"items-per-page":Ya,page:n(O),onPage:n(w)},null,8,["items-count","page","onPage"])]),row:y(J=>[d("img",{src:n(Le)(J.item.vault.name)},null,8,i_),d("div",null,[d("a",{style:{"font-family":"monospace"},href:`https://etherscan.io/address/${J.item.owner}`,target:"_blank",onClick:Y[3]||(Y[3]=X(()=>{},["stop"]))},S(n(G)(J.item.owner)),9,c_)]),d("div",{class:W(["number",{hide:b.value==="Closed"}])},[h(n(M),{type:"dollar",value:Math.round(J.item.debt),precision:1/0},null,8,["value"])],2),d("div",{class:W(["number",{hide:b.value==="Closed"}])},[h(n(M),{type:"dollar",value:Math.round(J.item.collateral_usd),precision:1/0},null,8,["value"])],2),d("div",{class:W(["number",{hide:b.value==="Closed"}])},[h(n(M),{value:J.item.collateral_ratio*100,precision:2,type:"percentage"},null,8,["value"])],2),d("div",u_,S(n(v)(J.item.created_at)),1),d("div",d_,S(n(v)(J.item.last_update)),1)]),"row-details":y(()=>[N("   ")]),_:1},8,["loading","rows","columns","sorting-columns","sorting-columns-enabled","onSortColumn"]))}});function Ja(o){const e=o;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"en",resource:{title:a=>{const{normalize:t}=a;return t(["Troves"])},"search-placeholder":a=>{const{normalize:t}=a;return t(["Search for..."])}}})}typeof Ja=="function"&&Ja(nn);const __=P(nn,[["__scopeId","data-v-31752a2e"]]),m_={class:"profile"},v_={style:{"grid-column":"1 / -1","margin-bottom":"-0.5rem"}},p_=k({__name:"Profile",setup(o){const e=new je("ethereum"),a=De(),t=Ne(),s=ht(),l=He(e.overview$,[]),i=D(void 0),p=D([]),v=$(()=>p.value.filter(c=>i.value?c.owner.toLocaleLowerCase()===i.value.toLocaleLowerCase():!1).map(c=>c.owner));te(()=>{const c=a.params.addr;c&&typeof c=="string"&&(i.value=c)});const u=c=>{p.value=c};return R(()=>s.address,async()=>{!a.params.addr&&!i.value&&s.address&&await t.push({name:"profile",params:{addr:s.address}})},{immediate:!0}),R(()=>a.params,()=>{const c=a.params.addr;c&&typeof c=="string"&&(i.value=c)}),(c,r)=>(m(),C("div",m_,[d("h2",v_," Profile: "+S(i.value??"?"),1),h(__,{style:{"z-index":"2"},vaults:n(l),user:i.value,onTroves:u},null,8,["vaults","user"]),h(Xd,{troves:v.value},null,8,["troves"]),h(l_,{troves:v.value},null,8,["troves"])]))}});const h_=P(p_,[["__scopeId","data-v-c1178071"]]),f_={titleRoute:"/",routes:[{path:"/",redirect:{name:"vaults"}},{path:"/pool",name:"pool",component:ji},{path:"/mkusd",name:"mkusd",component:lc},{path:"/redemptions",name:"redemptions",component:Tc},{path:"/liquidations",name:"liquidations",component:Ec},{path:"/revenue",name:"revenue",component:au},{path:"/vaults",name:"vaults",component:Ci},{path:"/wrappers/:tab?",name:"wrappers",component:du},{path:"/veprisma",name:"veprisma",component:Tu},{path:"/profile/:addr?",name:"profile",component:h_},{path:"/vault/:vaultAddr/:tab?",name:"prismavault",component:zd},{path:"/vault/:vaultAddr/trove/:troveAddr",name:"prismatrove",component:Nd}],menuItems:[{to:"/vaults",label:"Vaults"},{to:"/mkusd",label:"mkUSD"},{to:"/pool",label:"Stability pool"},{to:"/redemptions",label:"Redemptions"},{to:"/liquidations",label:"Liquidations"},{to:"/veprisma",label:"vePRISMA"},{to:"/wrappers",label:"ve Wrappers"},{to:"/profile",label:"Profile"}]},Lt=Tn(Or),g_=Pn({legacy:!1,locale:"en",fallbackLocale:"en"});Lt.use(g_);const b_=zn();Lt.use(b_);const y_=[f_],$_=Ct();$_.pages=y_;const w_=Yr();Lt.use(w_).use(Ln).use(In).mount("#app");
